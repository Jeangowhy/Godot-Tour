
# =üö© Python Â∫îÁî®Âú∫ÊôØ

‚úì WebÂ∫îÁî®ÂºÄÂèë

PythonÁªèÂ∏∏Ë¢´Áî®‰∫éWebÂºÄÂèë„ÄÇÊØîÂ¶ÇÔºåÈÄöËøámod_wsgiÊ®°ÂùóÔºåApacheÂèØ‰ª•ËøêË°åÁî®PythonÁºñÂÜôÁöÑWebÁ®ãÂ∫è„ÄÇPythonÂÆö‰πâ‰∫ÜWSGIÊ†áÂáÜÂ∫îÁî®Êé•Âè£Êù•ÂçèË∞ÉHttpÊúçÂä°Âô®‰∏éÂü∫‰∫éPythonÁöÑWebÁ®ãÂ∫è‰πãÈó¥ÁöÑÈÄö‰ø°„ÄÇ‰∏Ä‰∫õWebÊ°ÜÊû∂ÔºåÂ¶ÇDjangoÔºåTurboGearsÔºåweb2pyÔºåZopeÁ≠âÔºåÂèØ‰ª•ËÆ©Á®ãÂ∫èÂëòËΩªÊùæÂú∞ÂºÄÂèëÂíåÁÆ°ÁêÜÂ§çÊùÇÁöÑWebÁ®ãÂ∫è„ÄÇ

‚úì ÁΩëÁªúÁà¨Ëô´

‰πüÁß∞ÁΩëÁªúËúòËõõÔºåÊòØÂ§ßÊï∞ÊçÆË°å‰∏öËé∑ÂèñÊï∞ÊçÆÁöÑÊ†∏ÂøÉÂ∑•ÂÖ∑„ÄÇÊ≤°ÊúâÁΩëÁªúÁà¨Ëô´Ëá™Âä®Âú∞„ÄÅ‰∏çÂàÜÊòºÂ§úÂú∞„ÄÅÈ´òÊô∫ËÉΩÂú∞Âú®‰∫íËÅîÁΩë‰∏äÁà¨ÂèñÂÖçË¥πÁöÑÊï∞ÊçÆÔºåÈÇ£‰∫õÂ§ßÊï∞ÊçÆÁõ∏ÂÖ≥ÁöÑÂÖ¨Âè∏ÊÅêÊÄïË¶ÅÂ∞ëÂõõÂàÜ‰πã‰∏â„ÄÇËÉΩÂ§üÁºñÂÜôÁΩëÁªúÁà¨Ëô´ÁöÑÁºñÁ®ãËØ≠Ë®ÄÊúâ‰∏çÂ∞ëÔºå‰ΩÜPythonÁªùÂØπÊòØÂÖ∂‰∏≠ÁöÑ‰∏ªÊµÅ‰πã‰∏ÄÔºåÂÖ∂ScripyÁà¨Ëô´Ê°ÜÊû∂Â∫îÁî®ÈùûÂ∏∏ÂπøÊ≥õ„ÄÇ

‚úì Ëá™Âä®ÂåñËøêÁª¥

Êìç‰ΩúÁ≥ªÁªüÁÆ°ÁêÜ„ÄÅÊúçÂä°Âô®ËøêÁª¥ÁöÑËá™Âä®ÂåñËÑöÊú¨ÁºñÂÜôÔºåËøôÂá†‰πéÊòØPythonÂ∫îÁî®ÁöÑËá™ÁïôÂú∞Ôºå‰Ωú‰∏∫ËøêÁª¥Â∑•Á®ãÂ∏àÈ¶ñÈÄâÁöÑÁºñÁ®ãËØ≠Ë®ÄÔºåPythonÂú®Ëá™Âä®ÂåñËøêÁª¥ÊñπÈù¢Â∑≤ÁªèÊ∑±ÂÖ•‰∫∫ÂøÉÔºåÊØîÂ¶ÇSaltstackÂíåAnsibleÈÉΩÊòØÂ§ßÂêçÈºéÈºéÁöÑËá™Âä®ÂåñÂπ≥Âè∞„ÄÇ

Âú®ÂæàÂ§öÊìç‰ΩúÁ≥ªÁªüÈáåÔºåPythonÊòØÊ†áÂáÜÁöÑÁ≥ªÁªüÁªÑ‰ª∂„ÄÇÂ§ßÂ§öÊï∞LinuxÂèëË°åÁâà‰ª•ÂèäNetBSD„ÄÅOpenBSDÂíåMacOSXÈÉΩÈõÜÊàê‰∫ÜPythonÔºåÂèØ‰ª•Âú®ÁªàÁ´Ø‰∏ãÁõ¥Êé•ËøêË°åPython„ÄÇÊúâ‰∏Ä‰∫õLinuxÂèëË°åÁâàÁöÑÂÆâË£ÖÂô®‰ΩøÁî®PythonËØ≠Ë®ÄÁºñÂÜôÔºåÊØîÂ¶ÇUbuntuÁöÑUbiquityÂÆâË£ÖÂô®ÔºåRedHatLinuxÂíåFedoraÁöÑAnacondaÂÆâË£ÖÂô®„ÄÇGentooLinux‰ΩøÁî®PythonÊù•ÁºñÂÜôÂÆÉÁöÑPortageÂåÖÁÆ°ÁêÜÁ≥ªÁªü„ÄÇPythonÊ†áÂáÜÂ∫ìÂåÖÂê´‰∫ÜÂ§ö‰∏™Ë∞ÉÁî®Êìç‰ΩúÁ≥ªÁªüÂäüËÉΩÁöÑÂ∫ì„ÄÇÈÄöËøápywin32Ëøô‰∏™Á¨¨‰∏âÊñπËΩØ‰ª∂ÂåÖÔºåPythonËÉΩÂ§üËÆøÈóÆWindowsÁöÑCOMÊúçÂä°ÂèäÂÖ∂ÂÆÉWindowsAPI„ÄÇ‰ΩøÁî®IronPythonÔºåPythonÁ®ãÂ∫èËÉΩÂ§üÁõ¥Êé•Ë∞ÉÁî®.NetFramework„ÄÇ‰∏ÄËà¨ËØ¥Êù•ÔºåPythonÁºñÂÜôÁöÑÁ≥ªÁªüÁÆ°ÁêÜËÑöÊú¨Âú®ÂèØËØªÊÄß„ÄÅÊÄßËÉΩ„ÄÅ‰ª£Á†ÅÈáçÁî®Â∫¶„ÄÅÊâ©Â±ïÊÄßÂá†ÊñπÈù¢ÈÉΩ‰ºò‰∫éÊôÆÈÄöÁöÑshellËÑöÊú¨„ÄÇ

‚úì ÁßëÂ≠¶ËÆ°ÁÆó

NumPyÔºåSciPyÔºåMatplotlibÂèØ‰ª•ËÆ©PythonÁ®ãÂ∫èÂëòÁºñÂÜôÁßëÂ≠¶ËÆ°ÁÆóÁ®ãÂ∫è„ÄÇÈöèÁùÄNumPyÔºåSciPyÔºåMatplotlibÔºåEnthoughtlibrarysÁ≠â‰ºóÂ§öÁ®ãÂ∫èÂ∫ìÁöÑÂºÄÂèëÔºåPythonË∂äÊù•Ë∂äÈÄÇÂêà‰∫éÂÅöÁßëÂ≠¶ËÆ°ÁÆó„ÄÅÁªòÂà∂È´òË¥®ÈáèÁöÑ2DÂíå3DÂõæÂÉè„ÄÇÂíåÁßëÂ≠¶ËÆ°ÁÆóÈ¢ÜÂüüÊúÄÊµÅË°åÁöÑÂïÜ‰∏öËΩØ‰ª∂MatlabÁõ∏ÊØîÔºåPythonÊòØ‰∏ÄÈó®ÈÄöÁî®ÁöÑÁ®ãÂ∫èËÆæËÆ°ËØ≠Ë®ÄÔºåÊØîMatlabÊâÄÈááÁî®ÁöÑËÑöÊú¨ËØ≠Ë®ÄÁöÑÂ∫îÁî®ËåÉÂõ¥Êõ¥ÂπøÊ≥õÔºåÊúâÊõ¥Â§öÁöÑÁ®ãÂ∫èÂ∫ìÁöÑÊîØÊåÅ„ÄÇËôΩÁÑ∂Matlab‰∏≠ÁöÑËÆ∏Â§öÈ´òÁ∫ßÂäüËÉΩÂíåtoolboxÁõÆÂâçËøòÊòØÊó†Ê≥ïÊõø‰ª£ÁöÑÔºå‰∏çËøáÂú®Êó•Â∏∏ÁöÑÁßëÁ†îÂºÄÂèë‰πã‰∏≠‰ªçÁÑ∂ÊúâÂæàÂ§öÁöÑÂ∑•‰ΩúÊòØÂèØ‰ª•Áî®Python‰ª£Âä≥ÁöÑ„ÄÇ

‚úì Ê°åÈù¢ËΩØ‰ª∂

PyQt„ÄÅPySide„ÄÅwxPython„ÄÅPyGTKÊòØPythonÂø´ÈÄüÂºÄÂèëÊ°åÈù¢Â∫îÁî®Á®ãÂ∫èÁöÑÂà©Âô®„ÄÇPythonÊîØÊåÅÂáΩÊï∞ÂºèÁºñÁ®ãÂíåOOPÈù¢ÂêëÂØπË±°ÁºñÁ®ãÔºåËÉΩÂ§üÊâøÊãÖ‰ªª‰ΩïÁßçÁ±ªËΩØ‰ª∂ÁöÑÂºÄÂèëÂ∑•‰ΩúÔºåÂõ†Ê≠§Â∏∏ËßÑÁöÑËΩØ‰ª∂ÂºÄÂèë„ÄÅËÑöÊú¨ÁºñÂÜô„ÄÅÁΩëÁªúÁºñÁ®ãÁ≠âÈÉΩÂ±û‰∫éÊ†áÈÖçËÉΩÂäõ„ÄÇ

Â¶Ç pyqtgraph ÊòØ Python Âπ≥Âè∞‰∏ä‰∏ÄÁßçÂäüËÉΩÂº∫Â§ßÁöÑ2D/3DÁªòÂõæÂ∫ìÔºåÁõ∏ÂØπ‰∫é matplotlib Â∫ìÔºåÁî±‰∫éÂÜÖÈÉ®ÂÆûÁé∞ÊñπÂºè‰∏äÔºå‰ΩøÁî®‰∫ÜÈ´òÈÄüËÆ°ÁÆóÁöÑ numpy ‰ø°Âè∑Â§ÑÁêÜÂ∫ì‰ª•Âèä Qt ÁöÑ GraphicsView Ê°ÜÊû∂ÔºåÂõ†Ê≠§ÔºåÂÆÉÂú®Â§ßÊï∞ÊçÆÈáèÁöÑÊï∞Â≠óÂ§ÑÁêÜÂíåÂø´ÈÄüÊòæÁ§∫ÊñπÈù¢ÊúâÁùÄÂ∑®Â§ßÁöÑ‰ºòÂäøÔºåÂÆÉÈÄÇÂêà‰∫éÈúÄË¶ÅÂø´ÈÄüÁªòÂõæÊõ¥Êñ∞„ÄÅËßÜÈ¢ëÊàñÂÆûÊó∂‰∫§‰∫íÊÄßÁöÑÊìç‰ΩúÂú∫Âêà„ÄÇÂè¶Â§ñÔºåÂÆÉ‰∏ç‰ªÖ‰∏∫ÂêÑÁßçÊï∞ÊçÆÊèê‰æõ‰∫ÜÂø´ÈÄüÂèØ‰∫§‰∫íÂºèÁöÑÂõæÂΩ¢ÊòæÁ§∫ÔºåÂêåÊó∂‰πüÊèê‰æõ‰∫ÜÁî®‰∫éÂø´ÈÄüÂºÄÂèëÂ∫îÁî®Á®ãÂ∫èÁöÑÂêÑÁßçÂ∞èÂ∑•ÂÖ∑ÔºåÂ¶ÇÂ±ûÊÄßÊ†ë„ÄÅÊµÅÁ®ãÂõæÁ≠âÂ∞èÈÉ®‰ª∂ÔºåÂú®Êï∞Â≠¶„ÄÅÁßëÂ≠¶ÂíåÂ∑•Á®ãÈ¢ÜÂüüÈÉΩÊúâÁùÄÂπøÊ≥õÁöÑÂ∫îÁî®„ÄÇ‰ª•‰∏ãÂëΩ‰ª§Âèä‰ª£Á†ÅÂèØ‰ª•ÊâßË°åÁ§∫‰æãÔºö

    pip install wxpython pyside pyqt pyqt4 pyqt5 pyqtgraph 
    pip install pyopengl PyOpenGL_accelerate

    import pyqtgraph.examples as demo
    demo.run()


‚úì ÊúçÂä°Âô®ËΩØ‰ª∂ÔºàÁΩëÁªúËΩØ‰ª∂Ôºâ

PythonÂØπ‰∫éÂêÑÁßçÁΩëÁªúÂçèËÆÆÁöÑÊîØÊåÅÂæàÂÆåÂñÑÔºåÂõ†Ê≠§ÁªèÂ∏∏Ë¢´Áî®‰∫éÁºñÂÜôÊúçÂä°Âô®ËΩØ‰ª∂„ÄÅÁΩëÁªúÁà¨Ëô´„ÄÇÁ¨¨‰∏âÊñπÂ∫ìTwistedÊîØÊåÅÂºÇÊ≠•ÁΩëÁªúÁºñÁ®ãÂíåÂ§öÊï∞Ê†áÂáÜÁöÑÁΩëÁªúÂçèËÆÆÔºàÂåÖÂê´ÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Âô®ÔºâÔºåÂπ∂‰∏îÊèê‰æõ‰∫ÜÂ§öÁßçÂ∑•ÂÖ∑ÔºåË¢´ÂπøÊ≥õÁî®‰∫éÁºñÂÜôÈ´òÊÄßËÉΩÁöÑÊúçÂä°Âô®ËΩØ‰ª∂„ÄÇ

‚úì Ê∏∏Êàè

ÂæàÂ§öÊ∏∏Êàè‰ΩøÁî®C++ÁºñÂÜôÂõæÂΩ¢ÊòæÁ§∫Á≠âÈ´òÊÄßËÉΩÊ®°ÂùóÔºåËÄå‰ΩøÁî®PythonÊàñËÄÖLuaÁºñÂÜôÊ∏∏ÊàèÁöÑÈÄªËæë„ÄÅÊúçÂä°Âô®„ÄÇÁõ∏ËæÉ‰∫éPythonÔºåLuaÁöÑÂäüËÉΩÊõ¥ÁÆÄÂçï„ÄÅ‰ΩìÁßØÊõ¥Â∞èÔºõËÄåPythonÂàôÊîØÊåÅÊõ¥Â§öÁöÑÁâπÊÄßÂíåÊï∞ÊçÆÁ±ªÂûã„ÄÇ

‚úì ÊûÑÊÄùÂÆûÁé∞Ôºå‰∫ßÂìÅÊó©ÊúüÂéüÂûãÂíåËø≠‰ª£

YouTube„ÄÅGoogle„ÄÅYahooÔºÅ„ÄÅNASAÈÉΩÂú®ÂÜÖÈÉ®Â§ßÈáèÂú∞‰ΩøÁî®Python„ÄÇ

‚úì ‰∫ëËÆ°ÁÆó

ÂºÄÊ∫ê‰∫ëËÆ°ÁÆóËß£ÂÜ≥ÊñπÊ°àOpenStackÂ∞±ÊòØÂü∫‰∫éPythonÂºÄÂèëÁöÑÔºåÊêû‰∫ëËÆ°ÁÆóÁöÑÂêåÂ≠¶ÈÉΩÊáÇÁöÑ„ÄÇ

‚úì Êï∞ÊçÆÂàÜÊûê

Âú®Â§ßÈáèÊï∞ÊçÆÁöÑÂü∫Á°Ä‰∏äÔºåÁªìÂêàÁßëÂ≠¶ËÆ°ÁÆó„ÄÅÊú∫Âô®Â≠¶‰π†Á≠âÊäÄÊúØÔºåÂØπÊï∞ÊçÆËøõË°åÊ∏ÖÊ¥ó„ÄÅÂéªÈáç„ÄÅËßÑÊ†ºÂåñÂíåÈíàÂØπÊÄßÁöÑÂàÜÊûêÊòØÂ§ßÊï∞ÊçÆË°å‰∏öÁöÑÂü∫Áü≥„ÄÇPythonÊòØÊï∞ÊçÆÂàÜÊûêÁöÑ‰∏ªÊµÅËØ≠Ë®Ä‰πã‰∏Ä„ÄÇ

‚úì ‰∫∫Â∑•Êô∫ËÉΩ

PythonÂú®‰∫∫Â∑•Êô∫ËÉΩÂ§ßËåÉÁï¥È¢ÜÂüüÂÜÖÁöÑÊú∫Âô®Â≠¶‰π†„ÄÅÁ•ûÁªèÁΩëÁªú„ÄÅÊ∑±Â∫¶Â≠¶‰π†Á≠âÊñπÈù¢ÈÉΩÊòØ‰∏ªÊµÅÁöÑÁºñÁ®ãËØ≠Ë®ÄÔºåÂæóÂà∞ÂπøÊ≥õÁöÑÊîØÊåÅÂíåÂ∫îÁî®„ÄÇ


ËÅå‰∏öÊñπÂêë

‚úì Êï∞ÊçÆÂàÜÊûêÂ∏à„ÄÅÂ§ßÊï∞ÊçÆÂ∑•Á®ãÂ∏à - ÁÜüÁªÉ Excel„ÄÅSQL„ÄÅBI Á≠âÂ∑•ÂÖ∑Ôºå‰ΩøÁî® SPSS Á≠âÂàÜÊûêÂ∑•ÂÖ∑Ôºå‰∏öÂä°Ê¥ûÂØüÂäõ„ÄÅÊï∞ÊçÆÊä•ÂëäËÆæËÆ°ËÉΩÂäõ„ÄÇ

‚úì Êé®ËçêÁÆóÊ≥ïÂ∑•Á®ãÂ∏à - È´òÁ∫ßÊú∫Âô®Â≠¶‰π†ÁÆóÊ≥ïÂéüÁêÜ‰∏éÂ∫îÁî®ÔºåÊï∞ÊçÆÊåñÊéòÂÖ®ÊµÅÁ®ã‰∏é‰∏ì‰∏öÊä•ÂëäÔºåÂñÑÁî®Êú∫Âô®Â≠¶‰π†Ëß£ÂÜ≥Áî®Êà∑ÁîªÂÉè„ÄÅÁ≤æÂáÜËê•ÈîÄ„ÄÅÈ£éÈô©ÁÆ°ÁêÜÁ≠âÂïÜ‰∏öÈóÆÈ¢ò„ÄÇ

‚úì NLP/AIÂ∑•Á®ãÂ∏à - AIÂ∑•ÂÖ∑Â¶Ç TensorFlow„ÄÅKeras„ÄÅCaffe„ÄÅPyTorchÔºåÁÜüÊÇâÊ∑±Â∫¶Â≠¶‰π†Â∫îÁî®Â¶ÇÂõæÂΩ¢Â§ÑÁêÜ„ÄÅËØ≠Èü≥ËØÜÂà´„ÄÅËÆ°ÁÆóÊú∫ËßÜËßâ„ÄÅOCRÁ≠âÔºåÁÜüÊÇâÂç∑ÁßØÁ•ûÁªèÁΩëÁªúÔºàConvolutional Neural Networks, CNNÔºâ„ÄÅsÊ∑±Â∫¶Á•ûÁªèÁΩëÁªúÊ®°Âûã(Deep Neural Network, DNN)„ÄÅÂæ™ÁéØÁ•ûÁªèÁΩëÁªú(Recurrent Neural Network, RNN)„ÄÅFaster RCNN Á≠âÊ∑±Â∫¶Á•ûÁªèÁΩëÁªúÊ®°ÂûãÔºåÊéåÊè°‰ºòÂåñÁÆóÊ≥ïÔºå‰∫ÜËß£Ê∑±Â∫¶Â≠¶‰π†È´òÁ∫ßÁÆóÊ≥ïÂåÖÊã¨ÁîüÊàêÂØπÊäóÁΩëÁªú„ÄÅÂº∫ÂåñÂ≠¶‰π†Á≠â„ÄÇ

‚úì Êï∞ÊçÆÁßëÂ≠¶ÂÆ∂ - Êï∞ÊçÆÊ≤ªÁêÜ„ÄÅÊï∞ÊçÆÂÆâÂÖ®„ÄÅÂ§ßÊï∞ÊçÆÊû∂ÊûÑÔºåÈ´òÁ∫ßÊú∫Âô®Â≠¶‰π†‰∏éÊ∑±Â∫¶Â≠¶‰π†ÁÆóÊ≥ïÔºå‰ºÅ‰∏öÊàòÁï•ÂÜ≥Á≠ñÔºåËÆ°ÁÆóÊú∫È´òÊÄßËÉΩÂ§ÑÁêÜÊäÄÊúØ„ÄÇ



# =üö© Python Doc Contents


‰∏∫‰∫ÜÊñπ‰æøÂú®ÊñáÊ°£‰πãÈó¥Âø´ÈÄüË∑≥ËΩ¨ÔºåÊé®ËçêÂú® Sublime Text ÁéØÂ¢É‰∏ãÈòÖËØªÊñáÊ°£ÔºåÂè™ÈúÄË¶ÅÂÆâË£Ö run-snippet Êèí‰ª∂Ôºå
‰ΩøÁî® F9 Âø´Êç∑ÈîÆË∑≥ËΩ¨Âà∞ÂÖâÊ†á‰∏ãÁöÑÊñá‰ª∂ÊàñÈìæÊé•„ÄÇ

Âø´ÈÄüÂÆâË£Ö RunSnippet Êèí‰ª∂Ôºö

- Ctrl+Shift+P ÊâìÂºÄ Sublime Text ÂëΩ‰ª§Ë∞ÉÊùøÔºõ
- ÊâßË°å Add Repository Ê∑ªÂä†Êú¨Êèí‰ª∂‰ª£Á†Å‰ªìÂ∫ìÂú∞ÂùÄ: https://github.com/jimboyeah/run-snippet
- ÁÑ∂ÂêéÊâßË°å Install Package Âπ∂ËæìÂÖ• RunSnippt ËøõË°åÁ°ÆËÆ§ÂÆâË£ÖÔºõ

ÊâãÂä®Ê∑ªÂä† RepositoryÔºåÊâßË°åËèúÂçïÔºö Perferences ü°í Package Settings ü°í Package Control ü°í Settings

    "repositories":
    [
        "https://github.com/jimboyeah/run-snippet",
    ],

ÂèØ‰ª•Âú® Packages ÁõÆÂΩïÊâßË°å‰ª•‰∏ãÂëΩ‰ª§ÂÆâË£Ö RunSnippet Êèí‰ª∂Ôºö

    git clone git@github.com/jimboyeah/run-snippet.git

Ê∑ªÂä†ÈÖçÁΩÆÊñá‰ª∂ÔºåÈªòËÆ§ÂêØÁî®ÂàÜÁªÑË∑≥ËΩ¨ÔºåÂ¶ÇÊûú Sublime Text Ê≤°ÊúâËÆæÁΩÆÂàÜÁªÑÔºåÂàôÂú®ÂΩìÂâç View ÂºπÂá∫Êñá‰ª∂Ë∑≥ËΩ¨Á™óÂè£Ôºå
ËøôÁßçË°å‰∏∫ÊúâÁÇπÊâìÊñ≠ÊÄùË∑Ø„ÄÇÊõ¥ÂêàÁêÜÁöÑÂÅöÊ≥ïÊòØ GUI ËÆæÁΩÆ 2 ‰∏™ GroupÔºåÂπ∂‰∏îÂú®Âè¶‰∏Ä‰∏™ Group ÂºπÂá∫Êñá‰ª∂ Panel„ÄÇ
Load settings from /Packages/Users/RunSnippet.sublime-settings

```json
    {
        "jump_between_group": true,
    }
```

## ==‚ö° Python 3.10.2 Doc - rsStructuredText

ÂÆòÊñπÊñáÊ°£Âü∫‰∫é reStructuredText Ê†ºÂºèÔºå‰ΩøÁî® Sphinx documentation ËΩ¨ËØë„ÄÇ

Python-3.10.2 Doc ÁõÆÂΩï„ÄÅÊñá‰ª∂Ê†áÊ≥®ÔºåÊ†áÂáÜÂ∫ìÈÉ®ÂàÜÂÜÖÂÆπÊúÄÂ§öÔºåÁã¨Á´ãÊîæÂêéÈù¢Ôºö

+-- Doc\c-api
|   ‚úí [Python/C API Reference Manual](c-api\index.rst)
|   ‚úí [Introduction](c-api\intro.rst)
|   |   ‚ó¶ Coding standards
|   |   ‚ó¶ Include Files
|   |   ‚ó¶ Useful macros
|   |   ‚ó¶ Objects, Types and Reference Counts
|   |   ‚ó¶ Exceptions
|   |   ‚ó¶ Embedding Python
|   |   ‚ó¶ Debugging Builds
|   ‚úí [C API Stability](c-api\stable.rst)
|   |   ‚ó¶ Stable Application Binary Interface
|   |   ‚ó¶ Platform Considerations
|   |   ‚ó¶ Contents of Limited API
|   ‚úí [The Very High Level Layer](c-api\veryhigh.rst)
|   ‚úí [Reference Counting](c-api\refcounting.rst)
|   ‚úí [Exception Handling](c-api\exceptions.rst)
|   |   ‚ó¶ Printing and clearing
|   |   ‚ó¶ Raising exceptions
|   |   ‚ó¶ Issuing warnings
|   |   ‚ó¶ Querying the error indicator
|   |   ‚ó¶ Signal Handling
|   |   ‚ó¶ Exception Classes
|   |   ‚ó¶ Exception Objects
|   |   ‚ó¶ Unicode Exception Objects
|   |   ‚ó¶ Recursion Control
|   |   ‚ó¶ Standard Exceptions
|   |   ‚ó¶ Standard Warning Categories
|   ‚úí [Utilities](c-api\utilities.rst)
|   ‚Ä¢ [Operating System Utilities](c-api\sys.rst)
|   ‚Ä¢ [Importing Modules](c-api\import.rst)
|   ‚Ä¢ [Data marshalling support](c-api\marshal.rst)
|   ‚Ä¢ [Parsing arguments and building values](c-api\arg.rst)
|   ‚Ä¢ [String conversion and formatting](c-api\conversion.rst)
|   ‚Ä¢ [Reflection](c-api\reflection.rst)
|   ‚Ä¢ [Codec registry and support functions](c-api\codec.rst)
|   ‚úí [Abstract Objects Layer](c-api\abstract.rst)
|   ‚Ä¢ [Object Protocol](c-api\object.rst)
|   ‚Ä¢ [Call Protocol](c-api\call.rst)
|   ‚Ä¢ [Number Protocol](c-api\number.rst)
|   ‚Ä¢ [Sequence Protocol](c-api\sequence.rst)
|   ‚Ä¢ [Mapping Protocol](c-api\mapping.rst)
|   ‚Ä¢ [Iterator Protocol](c-api\iter.rst)
|   ‚Ä¢ [Buffer Protocol](c-api\buffer.rst)
|   ‚Ä¢ [Old Buffer Protocol](c-api\objbuffer.rst)
|   ‚úí [Concrete Objects Layer](c-api\concrete.rst)
|   |   + Fundamental Objects
|   |       ‚Ä¢ [The ``None`` Object](c-api\none.rst)
|   |       ‚Ä¢ [Type Objects](c-api\type.rst)
|   |   + Numeric Objects
|   |       ‚Ä¢ [Integer Objects](c-api\long.rst)
|   |       ‚Ä¢ [Boolean Objects](c-api\bool.rst)
|   |       ‚Ä¢ [Floating Point Objects](c-api\float.rst)
|   |       ‚Ä¢ [Complex Number Objects](c-api\complex.rst)
|   |   + Sequence Objects
|   |       ‚Ä¢ [Bytes Objects](c-api\bytes.rst)
|   |       ‚Ä¢ [Byte Array Objects](c-api\bytearray.rst)
|   |       ‚Ä¢ [Unicode Objects and Codecs](c-api\unicode.rst)
|   |       ‚Ä¢ [Tuple Objects](c-api\tuple.rst)
|   |       ‚Ä¢ [List Objects](c-api\list.rst)
|   |   + Container Objects
|   |       ‚Ä¢ [Dictionary Objects](c-api\dict.rst)
|   |       ‚Ä¢ [Set Objects](c-api\set.rst)
|   |   + Function Objects
|   |       ‚Ä¢ [Cell Objects](c-api\cell.rst)
|   |       ‚Ä¢ [Code Objects](c-api\code.rst)
|   |       ‚Ä¢ [Function Objects](c-api\function.rst)
|   |       ‚Ä¢ [Instance Method Objects](c-api\method.rst)
|   |   + Other Objects
|   |       ‚Ä¢ [File Objects](c-api\file.rst)
|   |       ‚Ä¢ [Module Objects](c-api\module.rst)
|   |       ‚Ä¢ [Iterator Objects](c-api\iterator.rst)
|   |       ‚Ä¢ [Descriptor Objects](c-api\descriptor.rst)
|   |       ‚Ä¢ [Slice Objects](c-api\slice.rst)
|   |       ‚Ä¢ [MemoryView objects](c-api\memoryview.rst)
|   |       ‚Ä¢ [Weak Reference Objects](c-api\weakref.rst)
|   |       ‚Ä¢ [Capsules](c-api\capsule.rst)
|   |       ‚Ä¢ [Generator Objects](c-api\gen.rst)
|   |       ‚Ä¢ [Coroutine Objects](c-api\coro.rst)
|   |       ‚Ä¢ [Context Variables Objects](c-api\contextvars.rst)
|   |       ‚Ä¢ [DateTime Objects](c-api\datetime.rst)
|   |       ‚Ä¢ [Objects for Type Hinting](c-api\typehints.rst)
|   ‚úí [Initialization, Finalization, and Threads](c-api\init.rst)
|   |   ‚ó¶ Before Python Initialization
|   |   ‚ó¶ Global configuration variables
|   |   ‚ó¶ Initializing and finalizing the interpreter
|   |   ‚ó¶ Process-wide parameters
|   |   ‚ó¶ Thread State and the Global Interpreter Lock
|   |   ‚ó¶ Sub-interpreter support
|   |   ‚ó¶ Asynchronous Notifications
|   |   ‚ó¶ Profiling and Tracing
|   |   ‚ó¶ Advanced Debugger Support
|   |   ‚ó¶ Thread Local Storage Support
|   ‚úí [Python Initialization Configuration](c-api\init_config.rst)
|   |   ‚ó¶ Example
|   |   ‚ó¶ PyWideStringList
|   |   ‚ó¶ PyStatus
|   |   ‚ó¶ PyPreConfig
|   |   ‚ó¶ Preinitialize Python with PyPreConfig
|   |   ‚ó¶ PyConfig
|   |   ‚ó¶ Initialization with PyConfig
|   |   ‚ó¶ Isolated Configuration
|   |   ‚ó¶ Python Configuration
|   |   ‚ó¶ Python Path Configuration
|   |   ‚ó¶ Py_RunMain()
|   |   ‚ó¶ Py_GetArgcArgv()
|   |   ‚ó¶ Multi-Phase Initialization Private Provisional API
|   ‚úí [Memory Management](c-api\memory.rst)
|   |   ‚ó¶ Overview
|   |   ‚ó¶ Allocator Domains
|   |   ‚ó¶ Raw Memory Interface
|   |   ‚ó¶ Memory Interface
|   |   ‚ó¶ Object allocators
|   |   ‚ó¶ Default Memory Allocators
|   |   ‚ó¶ Customize Memory Allocators
|   |   ‚ó¶ Debug hooks on the Python memory allocators
|   |   ‚ó¶ The pymalloc allocator
|   |   ‚ó¶ tracemalloc C API
|   |   ‚ó¶ Examples
|   ‚úí [Object Implementation Support](c-api\objimpl.rst)
|   ‚Ä¢ Memory Management
|   |   ‚ó¶ Allocating Objects on the Heap
|   |   ‚ó¶ Common Object Structures
|   |   ‚ó¶ Type Objects
|   |   ‚ó¶ Number Object Structures
|   |   ‚ó¶ Mapping Object Structures
|   |   ‚ó¶ Sequence Object Structures
|   |   ‚ó¶ Buffer Object Structures
|   |   ‚ó¶ Async Object Structures
|   |   ‚ó¶ Slot Type typedefs
|   |   ‚ó¶ Examples
|   |   ‚ó¶ Supporting Cyclic Garbage Collection
|   ‚Ä¢ [Allocating Objects on the Heap](c-api\allocation.rst)
|   ‚Ä¢ [Common Object Structures](c-api\structures.rst)
|   ‚Ä¢ [Type Objects](c-api\typeobj.rst)
|   ‚Ä¢ [Supporting Cyclic Garbage Collection](c-api\gcsupport.rst)
|   ‚úí [API and ABI Versioning](c-api\apiabiversion.rst)
+-- Doc\distributing
|   ‚Ä¢ [Distributing Python Modules](distributing\index.rst)
+-- Doc\distutils
|   ‚Ä¢ [Distributing Python Modules (Legacy version)](distutils\index.rst)
|   ‚Ä¢ [An Introduction to Distutils](distutils\introduction.rst)
|   ‚Ä¢ [Writing the Setup Script](distutils\setupscript.rst)
|   ‚Ä¢ [Writing the Setup Configuration File](distutils\configfile.rst)
|   ‚Ä¢ [Creating a Source Distribution](distutils\sourcedist.rst)
|   ‚Ä¢ [Uploading Packages to the Package Index](distutils\uploading.rst)
|   ‚Ä¢ [Extending Distutils](distutils\extending.rst)
|   ‚Ä¢ [Distutils Examples](distutils\examples.rst)
|   ‚Ä¢ [Command Reference](distutils\commandref.rst)
|   ‚Ä¢ [API Reference](distutils\apiref.rst)
|   ‚Ä¢ [Creating Built Distributions](distutils\builtdist.rst)
|   ‚Ä¢ [The Python Package Index (PyPI)](distutils\packageindex.rst)
|   ‚Ä¢ [https://setuptools.pypa.io/en/latest/](distutils\_setuptools_disclaimer.rst)
+-- Doc\extending
|   ‚Ä¢ [Extending and Embedding the Python Interpreter](extending\index.rst)
|   ‚Ä¢ [Extending Python with C or C++](extending\extending.rst)
|   ‚Ä¢ [Defining Extension Types: Tutorial](extending\newtypes_tutorial.rst)
|   ‚Ä¢ [Defining Extension Types: Assorted Topics](extending\newtypes.rst)
|   ‚Ä¢ [Building C and C++ Extensions](extending\building.rst)
|   ‚Ä¢ [Building C and C++ Extensions on Windows](extending\windows.rst)
|   ‚Ä¢ [Embedding Python in Another Application](extending\embedding.rst)
+-- Doc\faq
|   ‚Ä¢ [Python Frequently Asked Questions](faq\index.rst)
|   ‚Ä¢ [Design and History FAQ](faq\design.rst)
|   ‚Ä¢ [Extending/Embedding FAQ](faq\extending.rst)
|   ‚Ä¢ [General Python FAQ](faq\general.rst)
|   ‚Ä¢ [Graphic User Interface FAQ](faq\gui.rst)
|   ‚Ä¢ ["Why is Python Installed on my Computer?" FAQ](faq\installed.rst)
|   ‚Ä¢ [Library and Extension FAQ](faq\library.rst)
|   ‚Ä¢ [Programming FAQ](faq\programming.rst)
|   ‚Ä¢ [Python on Windows FAQ](faq\windows.rst)
+-- Doc\howto
|   ‚Ä¢ [Python HOWTOs](howto\index.rst)
|   ‚Ä¢ [Porting Python 2 Code to Python 3](howto\pyporting.rst)
|   ‚Ä¢ [Porting Extension Modules to Python 3](howto\cporting.rst)
|   ‚Ä¢ [Curses Programming with Python](howto\curses.rst)
|   ‚Ä¢ [Descriptor HowTo Guide](howto\descriptor.rst)
|   ‚Ä¢ [Functional Programming HOWTO](howto\functional.rst)
|   ‚Ä¢ [Logging HOWTO](howto\logging.rst)
|   ‚Ä¢ [Logging Cookbook](howto\logging-cookbook.rst)
|   ‚Ä¢ [Regular Expression HOWTO](howto\regex.rst)
|   ‚Ä¢ [Socket Programming HOWTO](howto\sockets.rst)
|   ‚Ä¢ [Sorting HOW TO](howto\sorting.rst)
|   ‚Ä¢ [Unicode HOWTO](howto\unicode.rst)
|   ‚Ä¢ [HOWTO Fetch Internet Resources Using The urllib Package](howto\urllib2.rst)
|   ‚Ä¢ [Argparse Tutorial](howto\argparse.rst)
|   ‚Ä¢ [An introduction to the ipaddress module](howto\ipaddress.rst)
|   ‚Ä¢ [Argument Clinic How-To](howto\clinic.rst)
|   ‚Ä¢ [Instrumenting CPython with DTrace and SystemTap](howto\instrumentation.rst)
|   ‚Ä¢ [Annotations Best Practices](howto\annotations.rst)
+-- Doc\install
|   ‚Ä¢ [Installing Python Modules (Legacy version)](install\index.rst)
+-- Doc\installing
|   ‚Ä¢ [Installing Python Modules](installing\index.rst)
+-- Doc\reference
|   ‚Ä¢ [The Python Language Reference](reference\index.rst)
|   ‚Ä¢ [Introduction](reference\introduction.rst)
|   ‚Ä¢ [Lexical analysis](reference\lexical_analysis.rst)
|   ‚Ä¢ [Data model](reference\datamodel.rst)
|   ‚Ä¢ [Execution model](reference\executionmodel.rst)
|   ‚Ä¢ [The import system](reference\import.rst)
|   ‚Ä¢ [Expressions](reference\expressions.rst)
|   ‚Ä¢ [Simple Statements](reference\simple_stmts.rst)
|   ‚Ä¢ [Compound statements](reference\compound_stmts.rst)
|   ‚Ä¢ [Top Level Components](reference\toplevel_components.rst)
|   ‚Ä¢ [Full Grammar specification python.gram](reference\grammar.rst)
+-- Doc\tutorial
|   ‚Ä¢ [The Python Tutorial](tutorial\index.rst)
|   ‚Ä¢ [Whetting Your Appetite](tutorial\appetite.rst)
|   ‚Ä¢ [Using the Python Interpreter](tutorial\interpreter.rst)
|   ‚Ä¢ [An Informal Introduction to Python](tutorial\introduction.rst)
|   ‚Ä¢ [More Control Flow Tools](tutorial\controlflow.rst)
|   ‚Ä¢ [Data Structures](tutorial\datastructures.rst)
|   ‚Ä¢ [Modules](tutorial\modules.rst)
|   ‚Ä¢ [Input and Output](tutorial\inputoutput.rst)
|   ‚Ä¢ [Errors and Exceptions](tutorial\errors.rst)
|   ‚Ä¢ [Classes](tutorial\classes.rst)
|   ‚Ä¢ [Brief Tour of the Standard Library](tutorial\stdlib.rst)
|   ‚Ä¢ [Brief Tour of the Standard Library --- Part II](tutorial\stdlib2.rst)
|   ‚Ä¢ [Virtual Environments and Packages](tutorial\venv.rst)
|   ‚Ä¢ [What Now?](tutorial\whatnow.rst)
|   ‚Ä¢ [Interactive Input Editing and History Substitution](tutorial\interactive.rst)
|   ‚Ä¢ [Floating Point Arithmetic:  Issues and Limitations](tutorial\floatingpoint.rst)
|   ‚Ä¢ [Appendix](tutorial\appendix.rst)
+-- Doc\using
|   ‚Ä¢ [Python Setup and Usage](using\index.rst)
|   ‚Ä¢ [Command line and environment](using\cmdline.rst)
|   ‚Ä¢ [Configure Python](using\configure.rst)
|   ‚Ä¢ [Editors and IDEs](using\editors.rst)
|   ‚Ä¢ [Using Python on a Mac](using\mac.rst)
|   ‚Ä¢ [Using Python on Unix platforms](using\unix.rst)
|   ‚Ä¢ [Virtual Environments Creation](using\venv-create.inc)
|   ‚Ä¢ [Using Python on Windows](using\windows.rst)
+-- Doc\whatsnew
|   ‚Ä¢ [What's New in Python](whatsnew\index.rst)
|   ‚Ä¢ [What's New in Python 2.0](whatsnew\2.0.rst)
|   ‚Ä¢ [What's New in Python 2.1](whatsnew\2.1.rst)
|   ‚Ä¢ [What's New in Python 2.2](whatsnew\2.2.rst)
|   ‚Ä¢ [What's New in Python 2.3](whatsnew\2.3.rst)
|   ‚Ä¢ [What's New in Python 2.4](whatsnew\2.4.rst)
|   ‚Ä¢ [What's New in Python 2.5](whatsnew\2.5.rst)
|   ‚Ä¢ [What's New in Python 2.6](whatsnew\2.6.rst)
|   ‚Ä¢ [What's New in Python 2.7](whatsnew\2.7.rst)
|   ‚Ä¢ [What's New In Python 3.0](whatsnew\3.0.rst)
|   ‚Ä¢ [What's New In Python 3.1](whatsnew\3.1.rst)
|   ‚Ä¢ [What's New In Python 3.2](whatsnew\3.2.rst)
|   ‚Ä¢ [What's New In Python 3.3](whatsnew\3.3.rst)
|   ‚Ä¢ [What's New In Python 3.4](whatsnew\3.4.rst)
|   ‚Ä¢ [What's New In Python 3.5](whatsnew\3.5.rst)
|   ‚Ä¢ [What's New In Python 3.6](whatsnew\3.6.rst)
|   ‚Ä¢ [What's New In Python 3.7](whatsnew\3.7.rst)
|   ‚Ä¢ [What's New In Python 3.8](whatsnew\3.8.rst)
|   ‚Ä¢ [What's New In Python 3.9](whatsnew\3.9.rst)
|   ‚Ä¢ [What's New In Python 3.10](whatsnew\3.10.rst)
|   ‚Ä¢ [Changelog](whatsnew\changelog.rst)
‚Ä¢ [About these documents](Doc\about.rst)
‚Ä¢ [Dealing with Bugs](Doc\bugs.rst)
‚Ä¢ [Python documentation build configuration file](Doc\conf.py)
‚Ä¢ [Python Documentation contents](Doc\contents.rst)
‚Ä¢ [Copyright](Doc\copyright.rst)
‚Ä¢ [ÂêçËØçÊúØËØ≠Ëß£Èáä](Doc\glossary.rst)
‚Ä¢ [License](Doc\license.rst)
‚Ä¢ [make for Windows](Doc\make.bat)
‚Ä¢ [Makefile for Python documentation](Doc\Makefile)
‚Ä¢ [Python Documentation README](Doc\README.rst)
‚Ä¢ [Doc project requirements](Doc\requirements.txt)
‚Ä¢ [Runtime version](Doc\runtime.txt)

ÂÖ∂‰∏≠ data„ÄÅinclude„ÄÅtools ‰∏â‰∏™ÁõÆÂΩï‰∏çÂ±û‰∫éÊñáÊ°£ÊÄßÂÜÖÂÆπÔºåÊòØ ABI Êï∞ÊçÆ„ÄÅÁ§∫ËåÉ‰ª£Á†Å„ÄÅÂíå rsStructuredText ÊñáÊ°£ÊûÑÂª∫Â∑•ÂÖ∑Ôºö

    +-- Doc\data                              => 
    |   ‚Ä¢ -- python3.10.abi               => 
    |   ‚Ä¢ -- refcounts.dat                => Refcount behavior ÂºïÁî®ËÆ°Êï∞ÂèÇËÄÉ
    |   ‚Ä¢ -- stable_abi.dat               => 
    +-- Doc\includes                          => 
    |   +-- sqlite3                       => 
    |   |   ‚Ä¢ -- adapter_datetime.py      => 
    |   |   ‚Ä¢ -- adapter_point_1.py       => 
    |   |   ‚Ä¢ -- adapter_point_2.py       => 
    |   |   ‚Ä¢ -- collation_reverse.py     => 
    |   |   ‚Ä¢ -- complete_statement.py    => 
    |   |   ‚Ä¢ -- converter_point.py       => 
    |   |   ‚Ä¢ -- ctx_manager.py           => 
    |   |   ‚Ä¢ -- executemany_1.py         => 
    |   |   ‚Ä¢ -- executemany_2.py         => 
    |   |   ‚Ä¢ -- executescript.py         => 
    |   |   ‚Ä¢ -- execute_1.py             => 
    |   |   ‚Ä¢ -- load_extension.py        => 
    |   |   ‚Ä¢ -- md5func.py               => 
    |   |   ‚Ä¢ -- mysumaggr.py             => 
    |   |   ‚Ä¢ -- pysqlite_datetime.py     => 
    |   |   ‚Ä¢ -- rowclass.py              => 
    |   |   ‚Ä¢ -- row_factory.py           => 
    |   |   ‚Ä¢ -- shortcut_methods.py      => 
    |   |   ‚Ä¢ -- text_factory.py          => 
    |   ‚Ä¢ -- custom.c                     => Example module that creates an extension type
    |   ‚Ä¢ -- custom2.c                    => 
    |   ‚Ä¢ -- custom3.c                    => 
    |   ‚Ä¢ -- custom4.c                    => 
    |   ‚Ä¢ -- dbpickle.py                  => 
    |   ‚Ä¢ -- email-alternative.py         => 
    |   ‚Ä¢ -- email-dir.py                 => 
    |   ‚Ä¢ -- email-headers.py             => 
    |   ‚Ä¢ -- email-mime.py                => 
    |   ‚Ä¢ -- email-read-alternative.py    => 
    |   ‚Ä¢ -- email-simple.py              => 
    |   ‚Ä¢ -- email-unpack.py              => 
    |   ‚Ä¢ -- minidom-example.py           => 
    |   ‚Ä¢ -- mp_newtype.py                => 
    |   ‚Ä¢ -- mp_pool.py                   => 
    |   ‚Ä¢ -- mp_workers.py                => 
    |   ‚Ä¢ -- run-func.c                   => 
    |   ‚Ä¢ -- setup.py                     => 
    |   ‚Ä¢ -- sublist.c                    => 
    |   ‚Ä¢ -- test.py                      => 
    |   ‚Ä¢ -- turtle-star.py               => 
    |   ‚Ä¢ -- typestruct.h                 => 
    |   ‚Ä¢ -- tzinfo_examples.py           => 
    +-- Doc\tools                          => Documentation Tools
    |   +-- extensions                    => 
    |   |   ‚Ä¢ -- asdl_highlight.py        => 
    |   |   ‚Ä¢ -- c_annotations.py         => 
    |   |   ‚Ä¢ -- escape4chm.py            => 
    |   |   ‚Ä¢ -- glossary_search.py       => 
    |   |   ‚Ä¢ -- patchlevel.py            => 
    |   |   ‚Ä¢ -- peg_highlight.py         => 
    |   |   ‚Ä¢ -- pyspecific.py            => 
    |   |   ‚Ä¢ -- suspicious.py            => 
    |   +-- static                        => 
    |   |   ‚Ä¢ -- changelog_search.js      => 
    |   +-- templates                     => 
    |   |   ‚Ä¢ -- customsourcelink.html    => 
    |   |   ‚Ä¢ -- download.html            => 
    |   |   ‚Ä¢ -- dummy.html               => 
    |   |   ‚Ä¢ -- indexcontent.html        => 
    |   |   ‚Ä¢ -- indexsidebar.html        => 
    |   |   ‚Ä¢ -- layout.html              => 
    |   |   ‚Ä¢ -- opensearch.xml           => 
    |   |   ‚Ä¢ -- search.html              => 
    |   ‚Ä¢ -- rstlint.py                   => 
    |   ‚Ä¢ -- susp-ignored.csv             => 


## ==‚ö° Python 3.10.2 Doc - Standard Library

Ê†áÂáÜÊ®°ÂùóÂ§öËææÂá†Áôæ‰∏™ÔºåÊåâÁõÆÂΩïÁã¨Á´ãÊï¥ÁêÜÔºö

+-- Doc\library
|  ‚úí [The Python Standard Library](library\index.rst)
|   |   ‚Ä¢ [Python library Introduction](library\intro.rst)
|   |   ‚Ä¢ [61 Built-in Functions](library\functions.rst)
|   |   ‚Ä¢ [Built-in Constants](library\constants.rst)
|   |   ‚Ä¢ [Built-in Types](library\stdtypes.rst)
|   |   ‚Ä¢ [Built-in Exceptions](library\exceptions.rst)
|  ‚úí [Text Processing Services](library\text.rst)
|   |   ‚Ä¢ [`string` --- Common string operations](library\string.rst)
|   |   ‚Ä¢ [`difflib` --- Helpers for computing deltas](library\difflib.rst)
|   |   ‚Ä¢ [`re` --- Regular expression operations](library\re.rst)
|   |   ‚Ä¢ [`readline` --- GNU readline interface](library\readline.rst)
|   |   ‚Ä¢ [`rlcompleter` --- Completion function for GNU readline](library\rlcompleter.rst)
|   |   ‚Ä¢ [`stringprep` --- Internet String Preparation](library\stringprep.rst)
|   |   ‚Ä¢ [`textwrap` --- Text wrapping and filling](library\textwrap.rst)
|   |   ‚Ä¢ [`unicodedata` --- Unicode Database](library\unicodedata.rst)
|  ‚úí [Binary Data Services](library\binary.rst)
|   |   ‚Ä¢ [`codecs` --- Codec registry and base classes](library\codecs.rst)
|   |   ‚Ä¢ [`struct` --- Interpret bytes as packed binary data](library\struct.rst)
|  ‚úí [Data Types](library\datatypes.rst)
|   |   ‚Ä¢ [`datetime` --- Basic date and time types](library\datetime.rst)
|   |   ‚Ä¢ [`zoneinfo` --- IANA time zone support](library\zoneinfo.rst)
|   |   ‚Ä¢ [`calendar` --- General calendar-related functions](library\calendar.rst)
|   |   ‚Ä¢ [`collections` --- Container datatypes](library\collections.rst)
|   |   ‚Ä¢ [`collections.abc` --- Abstract Base Classes for Containers](library\collections.abc.rst)
|   |   ‚Ä¢ [`heapq` --- Heap queue algorithm](library\heapq.rst)
|   |   ‚Ä¢ [`bisect` --- Array bisection algorithm](library\bisect.rst)
|   |   ‚Ä¢ [`array` --- Efficient arrays of numeric values](library\array.rst)
|   |   ‚Ä¢ [`weakref` --- Weak references](library\weakref.rst)
|   |   ‚Ä¢ [`types` --- Dynamic type creation and names for built-in types](library\types.rst)
|   |   ‚Ä¢ [`copy` --- Shallow and deep copy operations](library\copy.rst)
|   |   ‚Ä¢ [`pprint` --- Data pretty printer](library\pprint.rst)
|   |   ‚Ä¢ [`reprlib` --- Alternate `repr` implementation](library\reprlib.rst)
|   |   ‚Ä¢ [`enum` --- Support for enumerations](library\enum.rst)
|   |   ‚Ä¢ [`graphlib` --- Functionality to operate with graph-like structures](library\graphlib.rst)
|  ‚úí [Numeric and Mathematical Modules](library\numeric.rst)
|   |   ‚Ä¢ [`numbers` --- Numeric abstract base classes](library\numbers.rst)
|   |   ‚Ä¢ [`cmath` --- Mathematical functions for complex numbers](library\cmath.rst)
|   |   ‚Ä¢ [`math` --- Mathematical functions](library\math.rst)
|   |   ‚Ä¢ [`decimal` --- Decimal fixed point and floating point arithmetic](library\decimal.rst)
|   |   ‚Ä¢ [`fractions` --- Rational numbers](library\fractions.rst)
|   |   ‚Ä¢ [`random` --- Generate pseudo-random numbers](library\random.rst)
|   |   ‚Ä¢ [`statistics` --- Mathematical statistics functions](library\statistics.rst)
|  ‚úí [Functional Programming Modules](library\functional.rst)
|   |   ‚Ä¢ [`functools` --- Higher-order functions and operations on callable objects](library\functools.rst)
|   |   ‚Ä¢ [`itertools` --- Functions creating iterators for efficient looping](library\itertools.rst)
|   |   ‚Ä¢ [`operator` --- Standard operators as functions](library\operator.rst)
|  ‚úí [File and Directory Access](library\filesys.rst)
|   |   ‚Ä¢ [`pathlib` --- Object-oriented filesystem paths](library\pathlib.rst)
|   |   ‚Ä¢ [`os.path` --- Common pathname manipulations](library\os.path.rst)
|   |   ‚Ä¢ [`fileinput` --- Iterate over lines from multiple input streams](library\fileinput.rst)
|   |   ‚Ä¢ [`stat` --- Interpreting `~os.stat` results](library\stat.rst)
|   |   ‚Ä¢ [`filecmp` --- File and Directory Comparisons](library\filecmp.rst)
|   |   ‚Ä¢ [`tempfile` --- Generate temporary files and directories](library\tempfile.rst)
|   |   ‚Ä¢ [`glob` --- Unix style pathname pattern expansion](library\glob.rst)
|   |   ‚Ä¢ [`fnmatch` --- Unix filename pattern matching](library\fnmatch.rst)
|   |   ‚Ä¢ [`linecache` --- Random access to text lines](library\linecache.rst)
|   |   ‚Ä¢ [`shutil` --- High-level operations](library\shutil.rst)
|  ‚úí [Data Persistence](library\persistence.rst)
|   |   ‚Ä¢ [`pickle` --- Python object serialization](library\pickle.rst)
|   |   ‚Ä¢ [`copyreg` --- Register `pickle` support functions](library\copyreg.rst)
|   |   ‚Ä¢ [`shelve` --- Python object persistence](library\shelve.rst)
|   |   ‚Ä¢ [`marshal` --- Internal Python object serialization](library\marshal.rst)
|   |   ‚Ä¢ [`dbm` --- Interfaces to Unix "databases"](library\dbm.rst)
|   |   ‚Ä¢ [`sqlite3` --- DB-API 2.0 interface for SQLite databases](library\sqlite3.rst)
|  ‚úí [Data Compression and Archiving](library\archiving.rst)
|   |   ‚Ä¢ [`zlib` --- Compression compatible with :program:`gzip`](library\zlib.rst)
|   |   ‚Ä¢ [`bz2` --- Support for :program:`bzip2` compression](library\bz2.rst)
|   |   ‚Ä¢ [`gzip` --- Support for :program:`gzip` files](library\gzip.rst)
|   |   ‚Ä¢ [`lzma` --- Compression using the LZMA algorithm](library\lzma.rst)
|   |   ‚Ä¢ [`tarfile` --- Read and write tar archive files](library\tarfile.rst)
|   |   ‚Ä¢ [`zipfile` --- Work with ZIP archives](library\zipfile.rst)
|  ‚úí [File Formats](library\fileformats.rst)
|   |   ‚Ä¢ [`csv` --- CSV File Reading and Writing](library\csv.rst)
|   |   ‚Ä¢ [`configparser` --- Configuration file parser](library\configparser.rst)
|   |   ‚Ä¢ [`netrc` --- netrc file processing](library\netrc.rst)
|   |   ‚Ä¢ [`xdrlib` --- Encode and decode XDR data](library\xdrlib.rst)
|   |   ‚Ä¢ [`plistlib` --- Generate and parse Apple ``.plist`` files](library\plistlib.rst)
|  ‚úí [Cryptographic Services](library\crypto.rst)
|   |   ‚Ä¢ [`hashlib` --- Secure hashes and message digests](library\hashlib.rst)
|   |   ‚Ä¢ [`hmac` --- Keyed-Hashing for Message Authentication](library\hmac.rst)
|   |   ‚Ä¢ [`secrets` --- Generate secure random numbers for managing secrets](library\secrets.rst)
|  ‚úí [Generic Operating System Services](library\allos.rst)
|   |   ‚Ä¢ [`os` --- Miscellaneous operating system interfaces](library\os.rst)
|   |   ‚Ä¢ [`io` --- Core tools for working with streams](library\io.rst)
|   |   ‚Ä¢ [`time` --- Time access and conversions](library\time.rst)
|   |   ‚Ä¢ [`argparse` --- Parser for command-line options, arguments and sub-commands](library\argparse.rst)
|   |   ‚Ä¢ [`getopt` --- C-style parser for command line options](library\getopt.rst)
|   |   ‚Ä¢ [`logging` --- Logging facility for Python](library\logging.rst)
|   |   ‚Ä¢ [`logging.config` --- Logging configuration](library\logging.config.rst)
|   |   ‚Ä¢ [`logging.handlers` --- Logging handlers](library\logging.handlers.rst)
|   |   ‚Ä¢ [`getpass` --- Portable password input](library\getpass.rst)
|   |   ‚Ä¢ [`curses` --- Terminal handling for character-cell displays](library\curses.rst)
|   |   ‚Ä¢ [`curses.ascii` --- Utilities for ASCII characters](library\curses.ascii.rst)
|   |   ‚Ä¢ [`curses.panel` --- A panel stack extension for curses](library\curses.panel.rst)
|   |   ‚Ä¢ [`platform` ---  Access to underlying platform's identifying data](library\platform.rst)
|   |   ‚Ä¢ [`errno` --- Standard errno system symbols](library\errno.rst)
|   |   ‚Ä¢ [`ctypes` --- A foreign function library for Python](library\ctypes.rst)
|  ‚úí [Concurrent Execution](library\concurrency.rst)
|   |   ‚Ä¢ [`threading` --- Thread-based parallelism](library\threading.rst)
|   |   ‚Ä¢ [`multiprocessing` --- Process-based parallelism](library\multiprocessing.rst)
|   |   ‚Ä¢ [Provides shared memory for direct access across processes](library\multiprocessing.shared_memory.rst)
|   |   ‚Ä¢ [The `concurrent` package](library\concurrent.rst)
|   |   ‚Ä¢ [`concurrent.futures` --- Launching parallel tasks](library\concurrent.futures.rst)
|   |   ‚Ä¢ [`subprocess` --- Subprocess management](library\subprocess.rst)
|   |   ‚Ä¢ [`sched` --- Event scheduler](library\sched.rst)
|   |   ‚Ä¢ [`queue` --- A synchronized queue class](library\queue.rst)
|   |   ‚Ä¢ [`contextvars` --- Context Variables](library\contextvars.rst)
|   |   ‚Ä¢ [`_thread` --- Low-level threading API](library\_thread.rst)
|  ‚úí [Networking and Interprocess Communication](library\ipc.rst)
|   |   ‚Ä¢ [`asyncio` --- Asynchronous I/O](library\asyncio.rst)
|   +   ‚Ä¢ High-level APIs
|   |   ‚Ä¢ [Coroutines and Tasks](asyncio-task.rst)
|   |   ‚Ä¢ [Streams](asyncio-stream.rst)
|   |   ‚Ä¢ [Synchronization Primitives](asyncio-sync.rst)
|   |   ‚Ä¢ [Subprocesses](asyncio-subprocess.rst)
|   |   ‚Ä¢ [Queues](asyncio-queue.rst)
|   |   ‚Ä¢ [Exceptions](asyncio-exceptions.rst)
|   +   ‚Ä¢ Low-level APIs
|   |   ‚Ä¢ [Event Loop](asyncio-eventloop.rst)
|   |   ‚Ä¢ [Futures](asyncio-future.rst)
|   |   ‚Ä¢ [Transports and Protocols](asyncio-protocol.rst)
|   |   ‚Ä¢ [Policies](asyncio-policy.rst)
|   |   ‚Ä¢ [Platform Support](asyncio-platforms.rst)
|   +   ‚Ä¢ Guides and Tutorials
|   |   ‚Ä¢ [High-level API Index](asyncio-api-index.rst)
|   |   ‚Ä¢ [Low-level API Index](asyncio-llapi-index.rst)
|   |   ‚Ä¢ [Developing with asyncio   ](asyncio-dev.rst)
|   |   ‚Ä¢ [`socket` --- Low-level networking interface](library\socket.rst)
|   |   ‚Ä¢ [`ssl` --- TLS/SSL wrapper for socket objects](library\ssl.rst)
|   |   ‚Ä¢ [`select` --- Waiting for I/O completion](library\select.rst)
|   |   ‚Ä¢ [`selectors` --- High-level I/O multiplexing](library\selectors.rst)
|   |   ‚Ä¢ [`asyncore` --- Asynchronous socket handler](library\asyncore.rst)
|   |   ‚Ä¢ [`asynchat` --- Asynchronous socket command/response handler](library\asynchat.rst)
|   |   ‚Ä¢ [`signal` --- Set handlers for asynchronous events](library\signal.rst)
|   |   ‚Ä¢ [`mmap` --- Memory-mapped file support](library\mmap.rst)
|  ‚úí [Internet Data Handling](library\netdata.rst)
|   |   ‚Ä¢ [`email` --- An email and MIME handling package](library\email.rst)
|   |   |   ‚Ä¢ [`email.contentmanager`: Managing MIME Content](email.contentmanager.rst)
|   |   |   ‚Ä¢ [`email.errors`: Exception and Defect classes](email.errors.rst)
|   |   |   ‚Ä¢ [`email`: Examples](email.examples.rst)
|   |   |   ‚Ä¢ [`email.generator`: Generating MIME documents](email.generator.rst)
|   |   |   ‚Ä¢ [`email.headerregistry`: Custom Header Objects](email.headerregistry.rst)
|   |   |   ‚Ä¢ [`email.message`: Representing an email message](email.message.rst)
|   |   |   ‚Ä¢ [`email.parser`: Parsing email messages](email.parser.rst)
|   |   |   ‚Ä¢ [`email.policy`: Policy Objects](email.policy.rst)
|   |   ‚Ä¢ library\Legacy Email API
|   |   |   ‚Ä¢ [`email.message.Message`: Representing an email message using the `~email.policy.compat32` API](email.compat32-message.rst)
|   |   |   ‚Ä¢ [`email.mime`: Creating email and MIME objects from scratch](email.mime.rst)
|   |   |   ‚Ä¢ [`email.header`: Internationalized headers](email.header.rst)
|   |   |   ‚Ä¢ [`email.charset`: Representing character sets](email.charset.rst)
|   |   |   ‚Ä¢ [`email.encoders`: Encoders](email.encoders.rst)
|   |   |   ‚Ä¢ [`email.utils`: Miscellaneous utilities](email.utils.rst)
|   |   |   ‚Ä¢ [`email.iterators`: Iterators](email.iterators.rst)
|   |   ‚Ä¢ [`json` --- JSON encoder and decoder](library\json.rst)
|   |   ‚Ä¢ [`mailcap` --- Mailcap file handling](library\mailcap.rst)
|   |   ‚Ä¢ [`mailbox` --- Manipulate mailboxes in various formats](library\mailbox.rst)
|   |   ‚Ä¢ [`mimetypes` --- Map filenames to MIME types](library\mimetypes.rst)
|   |   ‚Ä¢ [`base64` --- Base16, Base32, Base64, Base85 Data Encodings](library\base64.rst)
|   |   ‚Ä¢ [`binhex` --- Encode and decode binhex4 files](library\binhex.rst)
|   |   ‚Ä¢ [`binascii` --- Convert between binary and ASCII](library\binascii.rst)
|   |   ‚Ä¢ [`quopri` --- Encode and decode MIME quoted-printable data](library\quopri.rst)
|   |   ‚Ä¢ [`uu` --- Encode and decode uuencode files](library\uu.rst)
|  ‚úí [Structured Markup Processing Tools](library\markup.rst)
|   |   ‚Ä¢ [`html.entities` --- Definitions of HTML general entities](library\html.entities.rst)
|   |   ‚Ä¢ [`html.parser` --- Simple HTML and XHTML parser](library\html.parser.rst)
|   |   ‚Ä¢ [`html` --- HyperText Markup Language support](library\html.rst)
|   |   ‚Ä¢ [XML Processing Modules](library\xml.rst)
|   |   ‚Ä¢ [`xml.etree.ElementTree` --- The ElementTree XML API](library\xml.etree.elementtree.rst)
|   |   ‚Ä¢ [`xml.dom` --- The Document Object Model API](library\xml.dom.rst)
|   |   ‚Ä¢ [`xml.dom.minidom` --- Minimal DOM implementation](library\xml.dom.minidom.rst)
|   |   ‚Ä¢ [`xml.dom.pulldom` --- Support for building partial DOM trees](library\xml.dom.pulldom.rst)
|   |   ‚Ä¢ [`xml.sax` --- Support for SAX2 parsers](library\xml.sax.rst)
|   |   ‚Ä¢ [`xml.sax.handler` --- Base classes for SAX handlers](library\xml.sax.handler.rst)
|   |   ‚Ä¢ [`xml.sax.xmlreader` --- Interface for XML parsers](library\xml.sax.reader.rst)
|   |   ‚Ä¢ [`xml.sax.saxutils` --- SAX Utilities](library\xml.sax.utils.rst)
|   |   ‚Ä¢ [`xml.parsers.expat` --- Fast XML parsing using Expat](library\pyexpat.rst)
|  ‚úí [Internet Protocols and Support](library\internet.rst)
|   |   ‚Ä¢ [`webbrowser` --- Convenient web-browser controller](library\webbrowser.rst)
|   |   ‚Ä¢ [`cgi` --- Common Gateway Interface support](library\cgi.rst)
|   |   ‚Ä¢ [`cgitb` --- Traceback manager for CGI scripts](library\cgitb.rst)
|   |   ‚Ä¢ [`wsgiref` --- WSGI Utilities and Reference Implementation](library\wsgiref.rst)
|   |   ‚Ä¢ [`urllib` --- URL handling modules](library\urllib.rst)
|   |   ‚Ä¢ [`urllib.parse` --- Parse URLs into components](library\urllib.parse.rst)
|   |   ‚Ä¢ [`urllib.request` --- Extensible library for opening URLs](library\urllib.request.rst)
|   |   ‚Ä¢ [`urllib.error` --- Exception classes raised by urllib.request](library\urllib.error.rst)
|   |   ‚Ä¢ [`urllib.robotparser` ---  Parser for robots.txt](library\urllib.robotparser.rst)
|   |   ‚Ä¢ [`http` --- HTTP modules](library\http.rst)
|   |   ‚Ä¢ [`http.server` --- HTTP servers](library\http.server.rst)
|   |   ‚Ä¢ [`http.client` --- HTTP protocol client](library\http.client.rst)
|   |   ‚Ä¢ [`http.cookiejar` --- Cookie handling for HTTP clients](library\http.cookiejar.rst)
|   |   ‚Ä¢ [`http.cookies` --- HTTP state management](library\http.cookies.rst)
|   |   ‚Ä¢ [`xmlrpc` --- XMLRPC server and client modules](library\xmlrpc.rst)
|   |   ‚Ä¢ [`xmlrpc.server` --- Basic XML-RPC servers](library\xmlrpc.server.rst)
|   |   ‚Ä¢ [`xmlrpc.client` --- XML-RPC client access](library\xmlrpc.client.rst)
|   |   ‚Ä¢ [`ftplib` --- FTP protocol client](library\ftplib.rst)
|   |   ‚Ä¢ [`poplib` --- POP3 protocol client](library\poplib.rst)
|   |   ‚Ä¢ [`imaplib` --- IMAP4 protocol client](library\imaplib.rst)
|   |   ‚Ä¢ [`nntplib` --- NNTP protocol client](library\nntplib.rst)
|   |   ‚Ä¢ [`smtplib` --- SMTP protocol client](library\smtplib.rst)
|   |   ‚Ä¢ [`smtpd` --- SMTP Server](library\smtpd.rst)
|   |   ‚Ä¢ [`telnetlib` --- Telnet client](library\telnetlib.rst)
|   |   ‚Ä¢ [`socketserver` --- A framework for network servers](library\socketserver.rst)
|   |   ‚Ä¢ [`uuid` --- UUID objects according to :rfc:`4122`](library\uuid.rst)
|   |   ‚Ä¢ [`ipaddress` --- IPv4/IPv6 manipulation library](library\ipaddress.rst)
|  ‚úí [Multimedia Services](library\mm.rst)
|   |   ‚Ä¢ [`audioop` --- Manipulate raw audio data](library\audioop.rst)
|   |   ‚Ä¢ [`aifc` --- Read and write AIFF and AIFC files](library\aifc.rst)
|   |   ‚Ä¢ [`sunau` --- Read and write Sun AU files](library\sunau.rst)
|   |   ‚Ä¢ [`wave` --- Read and write WAV files](library\wave.rst)
|   |   ‚Ä¢ [`chunk` --- Read IFF chunked data](library\chunk.rst)
|   |   ‚Ä¢ [`colorsys` --- Conversions between color systems](library\colorsys.rst)
|   |   ‚Ä¢ [`imghdr` --- Determine the type of an image](library\imghdr.rst)
|   |   ‚Ä¢ [`sndhdr` --- Determine type of sound file](library\sndhdr.rst)
|   |   ‚Ä¢ [`ossaudiodev` --- Access to OSS-compatible audio devices](library\ossaudiodev.rst)
|  ‚úí [Internationalization](library\i18n.rst)
|   |   ‚Ä¢ [`gettext` --- Multilingual internationalization services](library\gettext.rst)
|   |   ‚Ä¢ [`locale` --- Internationalization services](library\locale.rst)
|  ‚úí [Program Frameworks](library\frameworks.rst)
|   |   ‚Ä¢ [`cmd` --- Support for line-oriented command interpreters](library\cmd.rst)
|   |   ‚Ä¢ [`shlex` --- Simple lexical analysis](library\shlex.rst)
|   |   ‚Ä¢ [`turtle` --- Turtle graphics](library\turtle.rst)
|  ‚úí [Graphical User Interfaces with Tk](library\tk.rst)
|   |   ‚Ä¢ [`tkinter` --- Python interface to Tcl/Tk](library\tkinter.rst)
|   |   ‚Ä¢ [`tkinter.colorchooser` --- Color choosing dialog](library\tkinter.colorchooser.rst)
|   |   ‚Ä¢ [`tkinter.font` --- Tkinter font wrapper](library\tkinter.font.rst)
|   |   ‚Ä¢ [Tkinter Dialogs](library\dialog.rst)
|   |   ‚Ä¢ [`tkinter.messagebox` --- Tkinter message prompts](library\tkinter.messagebox.rst)
|   |   ‚Ä¢ [`tkinter.scrolledtext` --- Scrolled Text Widget](library\tkinter.scrolledtext.rst)
|   |   ‚Ä¢ [`tkinter.dnd` --- Drag and drop support](library\tkinter.dnd.rst)
|   |   ‚Ä¢ [`tkinter.ttk` --- Tk themed widgets](library\tkinter.ttk.rst)
|   |   ‚Ä¢ [`tkinter.tix` --- Extension widgets for Tk](library\tkinter.tix.rst)
|   |   ‚Ä¢ [IDLE - Integrated Development Environment](library\idle.rst)
|  ‚úí [Development Tools](library\development.rst)
|   |   ‚Ä¢ [`typing` --- Support for type hints](library\typing.rst)
|   |   ‚Ä¢ [`pydoc` --- Documentation generator and online help system](library\pydoc.rst)
|   |   ‚Ä¢ [Python Development Mode](library\devmode.rst)
|   |   ‚Ä¢ [`doctest` --- Test interactive Python examples](library\doctest.rst)
|   |   ‚Ä¢ [`unittest` --- Unit testing framework](library\unittest.rst)
|   |   ‚Ä¢ [`unittest.mock` --- mock object library](library\unittest.mock.rst)
|   |   ‚Ä¢ [`unittest.mock` --- getting started](library\unittest.mock-examples.rst)
|   |   ‚Ä¢ [2to3 - Automated Python 2 to 3 code translation](library\2to3.rst)
|   |   ‚Ä¢ [`test` --- Regression tests package for Python](library\test.rst)
|  ‚úí [Debugging and Profiling](library\debug.rst)
|   |   ‚Ä¢ [Audit events table](library\audit_events.rst)
|   |   ‚Ä¢ [`bdb` --- Debugger framework](library\bdb.rst)
|   |   ‚Ä¢ [`faulthandler` --- Dump the Python traceback](library\faulthandler.rst)
|   |   ‚Ä¢ [`pdb` --- The Python Debugger](library\pdb.rst)
|   |   ‚Ä¢ [The Python Profilers](library\profile.rst)
|   |   ‚Ä¢ [`timeit` --- Measure execution time of small code snippets](library\timeit.rst)
|   |   ‚Ä¢ [`trace` --- Trace or track Python statement execution](library\trace.rst)
|   |   ‚Ä¢ [`tracemalloc` --- Trace memory allocations](library\tracemalloc.rst)
|  ‚úí [Software Packaging and Distribution](library\distribution.rst)
|   |   ‚Ä¢ [`distutils` --- Building and installing Python modules](library\distutils.rst)
|   |   ‚Ä¢ [`ensurepip` --- Bootstrapping the ``pip`` installer](library\ensurepip.rst)
|   |   ‚Ä¢ [`venv` --- Creation of virtual environments](library\venv.rst)
|   |   ‚Ä¢ [`zipapp` --- Manage executable Python zip archives](library\zipapp.rst)
|  ‚úí [Python Runtime Services](library\python.rst)
|   |   ‚Ä¢ [`sys` --- System-specific parameters and functions](library\sys.rst)
|   |   ‚Ä¢ [`sysconfig` --- Provide access to Python's configuration information](library\sysconfig.rst)
|   |   ‚Ä¢ [`builtins` --- Built-in objects](library\builtins.rst)
|   |   ‚Ä¢ [`__main__` --- Top-level code environment](library\__main__.rst)
|   |   ‚Ä¢ [`warnings` --- Warning control](library\warnings.rst)
|   |   ‚Ä¢ [`!contextlib` --- Utilities for :keyword:`!with`\ -statement contexts](library\contextlib.rst)
|   |   ‚Ä¢ [`abc` --- Abstract Base Classes](library\abc.rst)
|   |   ‚Ä¢ [`atexit` --- Exit handlers](library\atexit.rst)
|   |   ‚Ä¢ [`traceback` --- Print or retrieve a stack traceback](library\traceback.rst)
|   |   ‚Ä¢ [`__future__` --- Future statement definitions](library\__future__.rst)
|   |   ‚Ä¢ [`gc` --- Garbage Collector interface](library\gc.rst)
|   |   ‚Ä¢ [`inspect` --- Inspect live objects](library\inspect.rst)
|   |   ‚Ä¢ [`site` --- Site-specific configuration hook](library\site.rst)
|   |   ‚Ä¢ [`dataclasses` --- Data Classes](library\dataclasses.rst)
|  ‚úí [Custom Python Interpreters](library\custominterp.rst)
|   |   ‚Ä¢ [`code` --- Interpreter base classes](library\code.rst)
|   |   ‚Ä¢ [`codeop` --- Compile Python code](library\codeop.rst)
|  ‚úí [Importing Modules](library\modules.rst)
|   |   ‚Ä¢ [`zipimport` --- Import modules from Zip archives](library\zipimport.rst)
|   |   ‚Ä¢ [`pkgutil` --- Package extension utility](library\pkgutil.rst)
|   |   ‚Ä¢ [`modulefinder` --- Find modules used by a script](library\modulefinder.rst)
|   |   ‚Ä¢ [`runpy` --- Locating and executing Python modules](library\runpy.rst)
|   |   ‚Ä¢ [`!importlib` --- The implementation of :keyword:`!import`](library\importlib.rst)
|   |   ‚Ä¢ [Using `!importlib.metadata`](library\importlib.metadata.rst)
|  ‚úí [Python Language Services](library\language.rst)
|   |   ‚Ä¢ [`ast` --- Abstract Syntax Trees](library\ast.rst)
|   |   ‚Ä¢ [`symtable` --- Access to the compiler's symbol tables](library\symtable.rst)
|   |   ‚Ä¢ [`token` --- Constants used with Python parse trees](library\token.rst)
|   |   ‚Ä¢ [`keyword` --- Testing for Python keywords](library\keyword.rst)
|   |   ‚Ä¢ [`tokenize` --- Tokenizer for Python source](library\tokenize.rst)
|   |   ‚Ä¢ [`tabnanny` --- Detection of ambiguous indentation](library\tabnanny.rst)
|   |   ‚Ä¢ [`pyclbr` --- Python module browser support](library\pyclbr.rst)
|   |   ‚Ä¢ [`py_compile` --- Compile Python source files](library\py_compile.rst)
|   |   ‚Ä¢ [`compileall` --- Byte-compile Python libraries](library\compileall.rst)
|   |   ‚Ä¢ [`dis` --- Disassembler for Python bytecode](library\dis.rst)
|   |   ‚Ä¢ [`pickletools` --- Tools for pickle developers](library\pickletools.rst)
|  ‚úí [MS Windows Specific Services](library\windows.rst)
|   |   ‚Ä¢ [`winsound` --- Sound-playing interface for Windows](library\winsound.rst)
|   |   ‚Ä¢ [`msilib` --- Read and write Microsoft Installer files](library\msilib.rst)
|   |   ‚Ä¢ [`msvcrt` --- Useful routines from the MS VC++ runtime](library\msvcrt.rst)
|   |   ‚Ä¢ [`winreg` --- Windows registry access](library\winreg.rst)
|  ‚úí [Unix Specific Services](library\unix.rst)
|   |   ‚Ä¢ [`posix` --- The most common POSIX system calls](library\posix.rst)
|   |   ‚Ä¢ [`pwd` --- The password database](library\pwd.rst)
|   |   ‚Ä¢ [`spwd` --- The shadow password database](library\spwd.rst)
|   |   ‚Ä¢ [`grp` --- The group database](library\grp.rst)
|   |   ‚Ä¢ [`crypt` --- Function to check Unix passwords](library\crypt.rst)
|   |   ‚Ä¢ [`termios` --- POSIX style tty control](library\termios.rst)
|   |   ‚Ä¢ [`tty` --- Terminal control functions](library\tty.rst)
|   |   ‚Ä¢ [`pty` --- Pseudo-terminal utilities](library\pty.rst)
|   |   ‚Ä¢ [`fcntl` --- The ``fcntl`` and ``ioctl`` system calls](library\fcntl.rst)
|   |   ‚Ä¢ [`pipes` --- Interface to shell pipelines](library\pipes.rst)
|   |   ‚Ä¢ [`nis` --- Interface to Sun's NIS (Yellow Pages)](library\nis.rst)
|   |   ‚Ä¢ [`resource` --- Resource usage information](library\resource.rst)
|   |   ‚Ä¢ [`syslog` --- Unix syslog library routines](library\syslog.rst)
|  ‚úí [Superseded Modules](library\superseded.rst)
|   |   ‚Ä¢ [`imp` --- Access the :ref:`import <importsystem>` internals](library\imp.rst)
|   |   ‚Ä¢ [`optparse` --- Parser for command line options](library\optparse.rst)
|  ‚úí [Undocumented Modules](library\undoc.rst)
|  ‚úí [Security Considerations](library\security_warnings.rst)



# =üö© Wave Format Specifications
- WAVE File Format http://www.piclist.com/techref/io/serial/midi/wave.html
- WAVE Sample Files http://www-mmsp.ece.mcgill.ca/Documents/AudioFormats/WAVE/Samples.html
- Audio File Format Specifications http://www-mmsp.ece.mcgill.ca/Documents/AudioFormats/WAVE/WAVE.html
- Digital Audio - Creating a WAV (RIFF) file http://www.topherlee.com/software/pcm-tut-wavformat.html


    

# =üö© Intro & Installation
- [The Zen of Python](https://www.python.org/dev/peps/pep-0020/)
- [Python Tutorial](https://docs.python.org/3/tutorial/index.html)
- [Python HOWTOs](https://docs.python.org/3/howto/index.html)
- [Python Developer's Guide](https://devguide.python.org)
- [PEP 0 -- Index of Python Enhancement Proposals (PEPs)](https://www.python.org/dev/peps/#introduction)
- [The Performance of Open Source Applications II: PyPy](http://aosabook.org/en/pypy.html)
- [A Web Crawler With asyncio Coroutines](http://aosabook.org/en/500L/a-web-crawler-with-asyncio-coroutines.html)

Python is a high-level, dynamic programming language. It was invented by the Dutch programmer 
Guido van Rossum in the late 1980s. Guido's original implementation is a traditional bytecode 
interpreter written in C, and consequently known as *CPython*. There are now many other Python 
implementations. Among the most notable are *Jython*, which is written in Java and allows for 
interfacing with Java code, *IronPython*, which is written in C# and interfaces with Microsoft's 
.NET framework, and *PyPy*, the subject of this chapter. *CPython* is still the most widely used 
implementation and currently the only one to support Python 3, the next generation of the Python 
language.

Python ÊâãÂÜåÂÜÖÂÆπ‰ªãÁªçÔºö

- Âü∫Á°ÄÂÖ•Èó®ÊïôÁ®ãÂèÇËÄÉ The Python TutorialÔºõ
- ËøõÈò∂ÊåáÂØºÊïôÁ®ã Python HOWTOsÔºõ
- ÂêÑ‰∏™ Python ÁâàÊú¨Êñ∞ÂºïÂÖ•ÁâπÊÄßÂèÇÊï∞ What‚Äôs New in PythonÔºõ
- ËØ≠Ë®ÄÁâπÊÄß„ÄÅËØ≠Ê≥ïËØçÊ≥ïËßÑÂàôÂèÇËÄÉ The Python Language ReferenceÔºõ
- Ê†áÂáÜÂ∫ìÂèä API ‰ΩøÁî®ÂèÇËÄÉ The Python Standard LibraryÔºõ
- Â¶ÇÊûúÊúâËÆ°ÂàíÊâ©Â±ï CPython Áé∞ÊúâÂäüËÉΩÔºåÊàñÂú® C/C++ È°πÁõÆ‰∏≠ÂµåÂÖ•Ëß£ÊûêÂô®ËøêË°åÊó∂ÔºåÂèÇËÄÉÔºö
    - Extending and Embedding the Python Interpreter
    - Python/C API Reference ManualÔºõ

Èô§‰∫Ü‰ª•‰∏äÂÆòÊñπÊâãÂÜåÊèê‰æõÁöÑÂèÇÊï∞ÂÜÖÂÆπÔºåÁªàÊûÅÁöÑËµÑÊñôËøòÊòØÂú® Python Ê∫ê‰ª£Á†Å‰∏≠ÔºåÂÆòÊñπÊâãÂÜåÂÜÖÂÆπÂØπÂ∫îÊ∫ê‰ª£Á†Å Doc ÁõÆÂΩï‰∏ãÁöÑ rst ÊñáÊ°£ÔºåÁé∞Âú® Python 3.10.2 Â∑≤ÁªèÂèëÂ∏É„ÄÇ

    git clone git@github.com:python/cpython
    git clone git@github.com:python/devguide
    git clone git@github.com:python/peps

ÁºñËØëÊ∫ê‰ª£Á†ÅÈúÄË¶Å‰∏ãËΩΩÂ§ñÈÉ®‰æùËµñÂ∫ìÔºåÂèØËÉΩÈúÄË¶ÅÊåá‰ª§ codeload.github.com ÊúçÂä°Âô® Ôºö

    # https://github.com/python/cpython-source-deps/archive/
    140.82.114.9 codeload.github.com

Python ÊòØËÑöÊú¨ËØ≠Ë®ÄÔºåÈÄöËøáËß£ÊûêÂô®ÊâßË°åËÑöÊú¨Á®ãÂ∫èÔºåÊâìÂºÄËß£ÊûêÂô®‰∏ªÁ®ãÂ∫èÂ∞±ÂèØ‰ª•ËøõË°å Interactive Mode Ëß£ÊûêÁî®Êà∑ËæìÂÖ•ÁöÑËÑöÊú¨„ÄÇ

ÊúÄÂèóÊ¨¢ËøéÁöÑ‰∏§‰∏™ÁâπÊÄßÊòØ‚ÄúÁÆÄÂçï‚ÄùÂíå‚ÄúÂèØÁßªÊ§ç‚ÄùÔºå‰∏éÂèØÁî®ÁöÑÂ∑•ÂÖ∑ÂíåÂ∫ì‰∏ÄËµ∑ÔºåPython ‰∏∫Âª∫Ê®°„ÄÅÊ∏∏ÊàèËÑöÊú¨„ÄÅ‰ªøÁúüÂºÄÂèë‰∫∫ÂëòÊèê‰æõ‰∫Ü‰∏ÄÁßçÂæàÂ•ΩÁöÑËØ≠Ë®Ä„ÄÇÊúÄÈáçË¶ÅÁöÑÊòØÔºåÂÆÉÊòØÂÖçË¥πÁöÑÔºå‰∏∫ Python Á®ãÂ∫èÂëòÁºñÂÜôÁöÑÂ∑•ÂÖ∑ÂíåÂ∫ì‰πüÊòØÂÖçË¥πÁöÑ„ÄÇ

‰∏ãËΩΩÂÆâË£ÖÂåÖËß£ÂéãÂÆâË£ÖÂêéÔºåÁõ¥Êé•Âú®ÂëΩ‰ª§Ë°åÊâßË°åËß£ÊûêÂô®ÔºåÂπ∂ËøêË°åËÑöÊú¨Â≠óÁ¨¶‰∏≤ÔºåÊàñËÄÖÁõ¥Êé•ËØªÂèñ stdin ËæìÂÖ•ÁöÑËÑöÊú¨ÂÜÖÂÆπÔºö

```sh
> python -c "import sys; print(sys.hash_info.width)"

# powershell
> "print(`"hi`")"  | python -

# cmd
> echo print("hi") | python -
```

Powershell ÁöÑËæìÂÖ•‰∏≠‰ΩøÁî®ÂèçÂºïÂè∑ËΩ¨‰πâÂ≠óÁ¨¶ÔºåÂõ†‰∏∫ÂÆÉÊú¨Ë∫´ÊòØ‰∏ÄÁßçÁºñÁ®ãËÑöÊú¨ÔºåÂ≠óÁ¨¶‰∏≤Áõ¥Êé•ÈÄöËøáÁÆ°ÈÅì‰º†ËæìÂêé‰ºöÁßªÈô§Â≠óÁ¨¶‰∏≤ÂºïÂè∑ÔºåÊâÄ‰ª•Áªô Python ÁöÑËÑöÊú¨Â≠óÁ¨¶‰∏≤Ë¶ÅÂêàÁêÜËÆæÁΩÆÂ≠óÁ¨¶‰∏≤ÁöÑÂºïÂè∑„ÄÇ

Áõ¥Êé•ÊâßË°å Python ËøõË°å‰∫§‰∫íÊ®°ÂºèÔºåËæìÂÖ•‰ª•‰∏ãËÑöÊú¨‰ª£Á†ÅÂπ∂ÊåâÂõûËΩ¶ÊâßË°åÔºö

>>>print("Hello", "Python");
>>>quit()
>>>help() 
>>>help(object)
>>>help("object") 

‰ª•‰∏ä‰∏âÁßçÊñπÂºèÂùáÂèØÊü•ËØ¢ object ÁöÑÂ∏ÆÂä©ÂÜÖÂÆπÔºåÊØîÂ¶Ç help(dict) Êàñ help('dict')„ÄÇ ÈÄÄÂá∫ help ÂáΩÊï∞ÔºåËæìÂÖ• quit ÊàñÁº©ÂÜô q„ÄÇË¶ÅÁªìÊùü‰∫§‰∫íÁ®ãÂ∫èÔºå‰ΩøÁî® quit() ÂáΩÊï∞ÁªàÊ≠¢Á®ãÂ∫èÔºåÊàñËÄÖ‰ΩøÁî® Ctrl+D ËæìÂÖ• EOF Ë°®Á§∫Áî®Êà∑ÁªìÊùüËæìÂÖ•„ÄÇ

Python Enhancement Proposals (PEPs) ÊòØ Python Â¢ûÂº∫Âª∫ËÆÆÔºåÊòØÁ§æÂå∫ÊñáÁ´†ÈõÜÂêàÔºå‰πüÊòØÊ∑±ÂÖ•Â≠¶‰π† Python ÁöÑ‰∏Ä‰∏™ÂéªÂ§ÑÔºåÂÖ∂‰∏≠ PEP-0 È°µÈù¢ÊòØÊâÄÊúâÊñáÁ´†Á¥¢Âºï„ÄÇ

The Zen of Python:

1.  Beautiful is better than ugly.
2.  Explicit is better than implicit.
3.  Simple is better than complex.
4.  Complex is better than complicated.
5.  Flat is better than nested.
6.  Sparse is better than dense.
7.  Readability counts.
8.  Special cases aren't special enough to break the rules.
9.  Although practicality beats purity.
10. Errors should never pass silently.
11. Unless explicitly silenced.
12. In the face of ambiguity, refuse the temptation to guess.
13. There should be one-- and preferably only one --obvious way to do it.
14. Although that way may not be obvious at first unless you're Dutch.
15. Now is better than never.
16. Although never is often better than *right* now.
17. If the implementation is hard to explain, it's a bad idea.
18. If the implementation is easy to explain, it may be a good idea.
19. Namespaces are one honking great idea -- let's do more of those!

‰ª•‰∏äÂÜÖÂÆπ‰ΩøÁî® import this ÂèØ‰ª•Êü•ÁúãÔºå„ÄÇ

1.ÂÆâË£Ö‰æùËµñÁéØÂ¢É

    yum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel

2.‰∏ãËΩΩPython3 https://www.python.org/downloads/

    wget https://www.python.org/ftp/python/3.6.1/Python-3.6.1.tgz

3.ÂÆâË£Öpython3

„ÄÄ„ÄÄ‰∏™‰∫∫‰π†ÊÉØÂÆâË£ÖÂú®/usr/local/python3ÔºàÂÖ∑‰ΩìÂÆâË£Ö‰ΩçÁΩÆÁúã‰∏™‰∫∫ÂñúÂ•ΩÔºâ

    mkdir -p /usr/local/python3

„ÄÄ„ÄÄËß£Âéã‰∏ãËΩΩÂ•ΩÁöÑPython-3.x.x.tgzÂåÖ(ÂÖ∑‰ΩìÂåÖÂêçÂõ†‰Ω†‰∏ãËΩΩÁöÑPythonÂÖ∑‰ΩìÁâàÊú¨Ô•ßÂêåËÄåÔ•ßÂêåÔºåÂ¶ÇÔºöÊàë‰∏ãËΩΩÁöÑÊòØPython3.6.1.ÈÇ£ÊàëËøôÔß©Â∞±ÊòØPython-3.6.1.tgz)

    tar -zxvf Python-3.6.1.tgz

4.ËøõÂÖ•Ëß£ÂéãÂêéÁöÑÁõÆÂΩïÔºåÁºñËØëÂÆâË£Ö„ÄÇ

    cd Python-3.6.1
    ./configure --prefix=/usr/local/python3
    make
    make install

„ÄÄ„ÄÄÊàñËÄÖ make && make install

5.Âª∫Á´ãpython3ÁöÑËΩØÈìæ

    ln -s /usr/local/python3/bin/python3 /usr/bin/python3

6.Âπ∂Â∞Ü /usr/local/python3/bin Âä†ÂÖ• PATH

```sh
# vim ~/.bash_profile
# .bash_profile
# Get the aliases and functions
if [ -f ~/.bashrc ]; then
. ~/.bashrc
fi
# User specific environment and startup programs
PATH=$PATH:$HOME/bin:/usr/local/python3/bin
export PATH

# ÊåâESCÔºåËæìÂÖ• :wq ÂõûËΩ¶ÈÄÄÂá∫„ÄÇ

# ‰øÆÊîπÂÆåËÆ∞ÂæóÊâßË°åÔ®à‰∏ãÈù¢ÁöÑÂëΩ‰ª§ÔºåËÆ©‰∏ä‰∏ÄÊ≠•ÁöÑ‰øÆÊîπÁîüÊïàÔºö

source ~/.bash_profile

# Áî®ÁâàÊú¨Êü•ÁúãÂëΩ‰ª§Ê£ÄÊü•Python3Âèäpip3ÊòØÂê¶Ê≠£Â∏∏ÂèØÁî®Ôºö

python3 -V
pip3 -V
```

Python Êúâ‰∏ãÈù¢Âá†‰∏™ÈáçË¶ÅÁöÑÁéØÂ¢ÉÂèòÈáèÔºö

|      ÂèòÈáèÂêç      |                                 ÊèèËø∞                                 |
|------------------|----------------------------------------------------------------------|
| PYTHONPATH       | ÈªòËÆ§ import Ê®°ÂùóÈÉΩ‰ºö‰ªéËøôÈáåÊåáÂÆöÁöÑË∑ØÂæÑÂØªÊâæÔºå‰πüÂèØ‰ª•ÈÄöËøá sys.path ËÆæÁΩÆ„ÄÇ |
| PYTHONSTARTUP    | Ëß£ÈáäÂô®ÂêØÂä®ÂêéÊâßË°åÊ≠§ÂèòÈáèÊåáÂÆöÁöÑËÑöÊú¨Êñá‰ª∂„ÄÇ                               |
| PYTHONCASEOK     | ‰Ωø python ÂØºÂÖ•Ê®°ÂùóÁöÑÊó∂ÂÄô‰∏çÂå∫ÂàÜÂ§ßÂ∞èÂÜô„ÄÇ                               |
| PYTHONHOME       | Ëß£ÈáäÂô®‰∏ªÁõÆÂΩïÔºå‰πüÊòØÊ®°ÂùóÊü•ÊâæË∑ØÂæÑ„ÄÇ                                     |
| PYTHONIOENCODING | Ëß£ÈáäÂô®ÁºñÁ†ÅÊñπÊ°àËÆæÁΩÆÔºåÂ¶Ç "utf-8"„ÄÇ                                     |


ËøêË°å Python Â∞±ËøõÂÖ•ÂëΩ‰ª§Ë°å‰∫§‰∫íÊ®°ÂºèÔºåËæìÂÖ•ÁÆÄÂçï‰ª£Á†ÅÂõûËΩ¶ÊâßË°åÔºåÂèØ‰ª•ÂΩìÂÅöËÆ°ÁÆóÂô®‰ΩøÁî®ÔºåÁªìÊûÑËØ≠Âè•Â¶Ç if-else ËæìÂÖ•ÂêéÈúÄË¶Å‰ΩøÁî® Shift+Enter ÊâßË°å„ÄÇ

    >>> x = int(input("Please enter an integer: "))
    Please enter an integer: 42
    >>> if x < 0:
    ...     x = 0
    ...     print('Negative changed to zero')
    ... elif x == 0:
    ...     print('Zero')
    ... elif x == 1:
    ...     print('Single')
    ... else:
    ...     print('More')
    ... <SHIFT>+<ENTER>
    More

ÂºÄÂèëÂ∑•ÂÖ∑ÂèØ‰ª•‰ΩøÁî® Sublime Text 3ÔºåÂÆâË£Ö Anaconda Êèí‰ª∂ÔºåËøõË°åÈÄÇÂΩìÁöÑÈÖçÁΩÆÔºö

`python_interprete` ‰øÆÊîπÁöÑ python.exe Ë∑ØÂæÑ„ÄÇ

`suppress_word_completions`ÔºöÁ¶ÅÁî®ÊéâSublime TextÂéüÁîüÁöÑËá™Âä®Ë°•ÂÖ®ÔºåÈªòËÆ§ÊòØfalse„ÄÇËøô‰∏™Êé®ËçêËÆæ‰∏∫trueÔºåÂê¶Âàô‰ºöÂêåÊó∂Âá∫Áé∞AnacondaÂíåsublimeÂéüÁîüÁöÑËá™Âä®Ë°•ÂÖ®ÂçïËØçÔºåËá™Âä®Ë°•ÂÖ®ÂàóË°®Â∞±ÂèòÂæóÊùÇ‰π±‰∫Ü

`suppress_explicit_completions`ÔºöËøô‰∏™Âíå‰∏äÈù¢ÊòØ‰∏Ä‰∏™ÊÑèÊÄùÔºå‰πüÊòØÈªòËÆ§false„ÄÇ‰∏§‰∏™ËÆæ‰∏∫‰∏ÄÊ†∑ÁöÑÂ∞±Â•Ω‰∫Ü

`complete_parameters`ÔºöËá™Âä®Â°´ÂÖÖÂáΩÊï∞ÂèÇÊï∞ÔºåÈªòËÆ§ÊòØfalse„ÄÇËøô‰∏™ËÆæ‰∏∫trueÔºåÂú®ÊâìÂáΩÊï∞ÂêçÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúÈÄâÊã©Ëá™Âä®ÂÆåÊàêÂàóË°®‰∏≠ÁöÑÈÄâÈ°πÔºåÂàô‰ºöÊ†πÊçÆË∞ÉÁî®ÂáΩÊï∞ÁöÑÂÆö‰πâÔºåËá™Âä®Â°´ÂÖÖÂáΩÊï∞ÂøÖÈ°ªÁöÑÂèÇÊï∞„ÄÇËøô‰∏™Êàë‰∏ÄÂºÄÂßãÊòØÁî®trueÁöÑÔºåÂêéÊù•ÂèëÁé∞Âú®ÂÜôÂèÇÊï∞ÁöÑÊó∂ÂÄôÂ∞±‰∏çËÉΩÁî®tabÊù•ÈÄâ‰∏≠Ëá™Âä®Ë°•ÂÖ®ÈÄâÈ°πÔºåtabÈîÆÂèòÊàê‰∫ÜÂàáÊç¢ÂÖâÊ†á‰ΩçÁΩÆÂà∞‰∏ã‰∏Ä‰∏™ÂèÇÊï∞‰∫ÜÔºåÊàëËßâÂæó‰∏çÊòØÂæà‰π†ÊÉØÂ∞±ÂèàËÆæ‰∏∫‰∫Üfalse„ÄÇ

`anaconda_linter_phantoms`ÔºöAnacondaÊúâ‰∏Ä‰∏™ÂæàÈÖ∑ÁÇ´ÁöÑÂäüËÉΩÂè´ÂÅölinterÔºåÂ∞±ÊòØËØ¥ÂèØ‰ª•ËØÜÂà´‰ª£Á†Å‰∏≠ÁöÑËØ≠Ê≥ïÈîôËØØÔºå‰ª£Á†ÅÂª∫ËÆÆÔºåÊ†ºÂºèÂª∫ËÆÆÁ≠â„ÄÇËÄåÂú®Sublime Text 3 build 3124‰∏≠Âä†ÂÖ•‰∫Ü‰∏Ä‰∏™Âè´ÂÅöPhantomsÁöÑAPIÔºåËøô‰∏™APIÂÖÅËÆ∏Êèí‰ª∂Âú®ÁºñËæëÁïåÈù¢ÊèíÂÖ•HTMLÊ≥®Èáä„ÄÇanaconda_linter_phantomsÂ∞±ÊòØÂ∞ÜÂàöÊâçÁöÑËØ≠Ê≥ïÈîôËØØÁ≠â‰ø°ÊÅØÁõ¥Êé•ÈÄöËøáPhantomsÁöÑÂΩ¢ÂºèÊòæÁ§∫Âú®ÁºñËæëÂô®‰∏≠Ôºå‰∏çÁî®ÂÜçÊü•Áúãerror listÊù•Êü•Áúã‰∫Ü„ÄÇÊ≠§ÂäüËÉΩÊúÄÂ•ΩÂèØ‰ª•Âíå‰∏ãÈù¢‰∏§‰∏™ÈÄâÈ°π‰∏ÄËµ∑‰ΩøÁî®„ÄÇ

`pyflakes_explicit_ignore`ÔºöËøô‰∏™ÂëäËØâPyFlakesË¶ÅÂøΩËßÜÂì™‰∫õË≠¶Âëä„ÄÇPyFlakesÊòØ‰∏Ä‰∏™‰ª£Á†ÅÊ£ÄÊü•ÁöÑÊèí‰ª∂ÔºåAnacondaÂ∑≤ÁªèÂåÖÂê´ËøõÂéª‰∫ÜÔºåÂÖ∂ÈªòËÆ§‰πüÊòØÈááÁî®PyFlakesÊù•ËøõË°å‰ª£Á†ÅËØ≠Ê≥ïÊ£ÄÊü•ÁöÑ„ÄÇÊàëËøôÈáåÂ∞ÜUnusedImportÂèñÊ∂àÊ≥®ÈáäÊéâ‰∫ÜÔºåÂõ†‰∏∫Êàë‰∏çÊÉ≥ËÆ©AnacondaË≠¶ÂëäÊàëÂì™‰∫õÊ®°ÂùóÊ≤°Êúâ‰ΩøÁî®

`anaconda_linting_behaviour`ÔºöÁî±‰∫éÂºÄÂêØ‰∫Üanaconda_linter_phantomsÔºåÊâÄ‰ª•ÊØèÂÜô‰∏Ä‰∏ã‰ª£Á†ÅÔºåÁ≥ªÁªüÈÉΩ‰ºöËá™Âä®ËøõË°åÊ£ÄÊü•ÔºåÂπ∂‰∏îÊòæÁ§∫Âá∫Êù•ÊèêÁ§∫Ê°ÜÔºåËøôÊòØÈùûÂ∏∏ÁÉ¶ÁöÑÔºåÊàë‰ª¨‰∏çÊÉ≥ËÆ©ÂÆÉÊØèÊó∂ÊØèÂàªÈÉΩÊ£ÄÊü•„ÄÇÂõ†Ê≠§Â∞ÜËøô‰∏™ÈÄâÈ°πËÆæÁΩÆ‰∏∫save-onlyÔºåÂ∞±ÊòØÂè™ÊúâÂú®‰øùÂ≠òÁöÑÊó∂ÂÄôËøõË°åÊ£ÄÊü•ÔºåÂè¶Â§ñËøòÊúâ‰∏Ä‰∏™ÈÄâÈ°πÊòØÂèØ‰ª•ÊâìÂºÄÂíå‰øùÂ≠òÁöÑÊó∂ÂÄôËøõË°åÊ£ÄÊü•ÔºåÊàëÁöÑÊÉ≥Ê≥ïÊòØÁªèÂ∏∏‰πüË¶ÅÊâìÂºÄÂà´‰∫∫ÁöÑpython‰ª£Á†ÅÔºåÂà´‰∫∫ÂèØ‰∏ç‰∏ÄÂÆöÊåâÁÖßPEP8Êù•ÂÜôÔºåÂõ†Ê≠§ÊâìÂºÄÁöÑËØùÊÅêÊÄïÂ∞±ÊòØ‰∏ÄÂ§ßÂ†ÜÊèêÁ§∫Ê°ÜÔºåÂõ†Ê≠§Âè™ÈÄâÊã©‰∫Üsave-only„ÄÇ

ËÆæÁΩÆÁéØÂ¢ÉÂèòÈáèÊéßÂà∂ÁºñÁ†ÅÊñπÊ°àÔºö

        "PYTHONIOENCODING": "utf-8",


## ==‚ö° Virtual Environments
- - https://docs.python.org/3/tutorial/venv.html
- [pep:`405` Python virtual environments](peps/pep_0405.txt)
- [Virtual Environments and Packages](doc/tutorial/venv.rst)
- [`venv` --- Creation of virtual environments](doc/library/venv.rst)
- [Python venv: How To Create, Activate, Deactivate, And Delete](https://python.land/virtual-environments/virtualenv)

Âõ†‰∏∫ Python ÂºÄÂèë‰∏ÄËà¨ÈúÄË¶ÅÂÆâË£ÖÂ§ßÈáèÊâ©Â±ïÊ®°ÂùóÔºåÂπ∂‰∏îÊ®°Âùó‰æùËµñÁâàÊú¨ÂÖ≥Á≥ªÁöÑÂèòÂåñÂèØËÉΩÂØºËá¥Á®ãÂ∫èËøêË°å‰∏çÊ≠£Á°ÆÔºåÂèØ‰ª•‰ΩøÁî®ËôöÊãüÁéØÂ¢É Virtual Enviroments Êù•ÁÆ°ÁêÜÁ®ãÂ∫èÁöÑËøêË°åÁéØÂ¢É„ÄÇ

ÊØè‰∏™ËôöÊãüÁéØÂ¢ÉÈÉΩÊúâËá™Â∑±ÁöÑ Python ËøêË°åÂ∫ìÂíå site-packages ÁõÆÂΩïÔºåËøòÂèØ‰ª•ÂíåÁ≥ªÁªüÈªòËÆ§ÁöÑ site ÁõÆÂΩïÈöîÁ¶ªÔºåÊâÄ‰ª•‰∏çÂêåÁöÑËôöÊãüÁéØÂ¢ÉÂèØ‰ª•ÂÆâË£Ö‰∏çÂêåÁöÑÊ®°Âùó‰ª•ÈÄÇÂ∫îÈ°πÁõÆÁöÑ‰æùËµñÈúÄË¶Å„ÄÇÂÉè Conda Ëøô‰∫õÁ¨¨‰∏âÊñπÁÆ°ÁêÜÂ∑•ÂÖ∑Â∞±ÊòØÊ†πÊçÆËøô‰∫õÊú∫Âà∂ÂÆûÁé∞ Python Ê®°ÂùóÁÆ°ÁêÜÁöÑ„ÄÇ

The :mod:`venv` module provides support for creating lightweight "virtual
environments" with their own site directories, optionally isolated from system
site directories.  Each virtual environment has its own Python binary (which
matches the version of the binary that was used to create this environment) and
can have its own independent set of installed Python packages in its site
directories.

When the Python binary is executed, it attempts to determine its
prefix (which it stores in ``sys.prefix``), which is then used to find
the standard library and other key files, and by the ``site`` module
to determine the location of the site-package directories.  Currently
the prefix is found (assuming ``PYTHONHOME`` is not set) by first
walking up the filesystem tree looking for a marker file (``os.py``)
that signifies the presence of the standard library, and if none is
found, falling back to the build-time prefix hardcoded in the binary.

Âè™Ë¶Å‰∏§Ê≠•Êìç‰ΩúÔºåÂÖàÊâßË°å venv Ê®°ÂùóÂàõÂª∫ËôöÊãüÁéØÂ¢ÉÁÆ°ÁêÜÁõÆÂΩïÔºåÂÜçÈÄöËøáÊ®°ÂùóÁîüÊàêÁöÑ activate ËÑöÊú¨ÊøÄÊ¥ªËôöÊãüÁéØÂ¢É‰ª•‰ΩøÁî®ÂÆÉÔºåËøôÊ†∑ÂÆâË£ÖÁöÑ‰æùËµñÂ∞±‰ºöÂèóÂΩìÂâçÁöÑËôöÊãüÁéØÂ¢ÉÁÆ°ÁêÜÔºö

```sh
# Create an virtual enviroment: tutorial-env
python3 -m venv tutorial-env
# Activate venv created, Windows, Unix or MacOS, run respectively:
tutorial-env\Scripts\activate.bat
source tutorial-env/bin/activate

# Have a look of path info
# python -c "import sys; print(sys.path)"
# python -m sysconfig
> python -m site
sys.path = [
    'C:\\Python310\\Lib',
    'C:\\Python310\\python310.zip',
    'C:\\Python310\\DLLs',
    'C:\\Python310',
    'C:\\Python310\\tutorial-env',
    'C:\\Python310\\tutorial-env\\lib\\site-packages',
]
USER_BASE: 'AppData\\Roaming\\Python' (doesn't exist)
USER_SITE: 'AppData\\Roaming\\Python\\Python310\\site-packages' (doesn't exist)
ENABLE_USER_SITE: False
```

Êñ∞ÂàõÂª∫ÁöÑËôöÊãüÁéØÂ¢ÉÂè™ÂåÖÂê´ Python ÂÜÖÁΩÆÊ†áÂáÜÊ®°ÂùóÔºåÂÖ∂ÂÆÉÊâ©Â±ïÊ®°ÂùóÂè¶Â§ñÈÄöËøá pip Â∑•ÂÖ∑ÂÆâË£ÖÔºåÂÆâË£Ö‰ΩçÁΩÆÂèØ‰ª•Êü•ËØ¢ sys.path ËÆ∞ÂΩïÁöÑ‰ΩçÁΩÆÔºåÊàñËÄÖ‰ΩøÁî® `site` Ê®°ÂùóÊü•ËØ¢ÔºåËøô‰∏™Ê®°ÂùóË¥üË¥£ËôöÊãüÁéØÂ¢ÉÁöÑÊ£ÄÊµã„ÄÇ

Ê†πÊçÆ PEP ÊäÄÊúØÂª∫ËÆÆÔºåÂú®ÊêúÁ¥¢ËôöÊãüÁéØÂ¢ÉÊµÅÁ®ã‰∏≠ÔºåËÆæÁΩÆ‰∫ÜÁ¨¨‰∏Ä‰∏™Ê≠•È™§Â∞±ÊòØÊåáÂÆö `pyvenv.cfg` ÈÖçÁΩÆÊù•ÊåáÂÆöËß£ÈáäÂô®ÁöÑË∑ØÂæÑÔºö

```sh
home = /usr/bin
include-system-site-packages = false
version = 3.8.10
```

ËôöÊãüÁéØÂ¢ÉÈÖçÁΩÆÊñá‰ª∂‰∏≠ `home` ÊåáÂÆö‰∫ÜÂàõÂª∫Ëøô‰∏™ÁéØÂ¢ÉÁöÑ Python Ëß£ÊûêÂô®ÊâÄÂú®ÁõÆÂΩï„ÄÇ

ÊâßË°åËøô‰∏™ËôöÊãüÁéØÂ¢É‰∏ä‰∏ãÁöÑËß£ÊûêÂô®ÂâØÊú¨Êó∂Ôºå‰æãÂ¶Ç `python -m site` Êü•ËØ¢ÂëΩ‰ª§ÔºåËß£ÈáäÂô®‰ºöÂú®‰∏ä‰∏ÄÁ∫ßÁõÆÂΩï‰∏≠ÁöÑËôöÊãüÁéØÂ¢ÉÈÖçÁΩÆÊñá‰ª∂‰∏≠Ëé∑Âèñ site ÁõÆÂΩï‰ø°ÊÅØÔºåÂπ∂Â∞ÜÂÖ∂Ê∑ªÂä†Âà∞ `sys.path` ÂàóË°®‰∏≠„ÄÇ

Âú® Windows WSL ÁéØÂ¢É‰∏≠ÂèØ‰∏çÂèØ‰ª•Âú® Linux ‰∏éÂÆø‰∏ª Windows ‰πãÈó¥ÂÖ±‰∫´ËôöÊãüÁéØÂ¢ÉÁöÑÊñá‰ª∂Âë¢Ôºü

Âõ†‰∏∫ÔºåÈÖçÁΩÆÊñá‰ª∂ `pyvenv.cfg` Âè™ÊòØ‰∏Ä‰∏™ÈùôÊÄÅÂÜÖÂÆπÊñá‰ª∂Ôºå‰∏çÊòØËÑöÊú¨Ôºå‰∏çËÉΩÂä®ÊÄÅÂú∞Ê†πÊçÆÁ≥ªÁªüÂ±ûÊÄßÊù•Ë∞ÉÊï¥„ÄÇ

This PEP proposes to add a new first step to this search.  If a
``pyvenv.cfg`` file is found either adjacent to the Python executable or
one directory above it (if the executable is a symlink, it is not
dereferenced), this file is scanned for lines of the form ``key =
value``.  If a ``home`` key is found, this signifies that the Python
binary belongs to a virtual environment, and the value of the ``home``
key is the directory containing the Python executable used to create
this virtual environment.

In this case, prefix-finding continues as normal using the value of
the ``home`` key as the effective Python binary location, which finds
the prefix of the base installation.  ``sys.base_prefix`` is set to
this value, while ``sys.prefix`` is set to the directory containing
``pyvenv.cfg``.

(If ``pyvenv.cfg`` is not found or does not contain the ``home`` key,
prefix-finding continues normally, and ``sys.prefix`` will be equal to
``sys.base_prefix``.)

Also, ``sys.base_exec_prefix`` is added, and handled similarly with
regard to ``sys.exec_prefix``. (``sys.exec_prefix`` is the equivalent of
``sys.prefix``, but for platform-specific files; by default it has the
same value as ``sys.prefix``.)

The ``site`` and ``sysconfig`` standard-library modules are modified
such that the standard library and header files are found relative
to ``sys.base_prefix`` / ``sys.base_exec_prefix``, while site-package
directories ("purelib" and "platlib", in ``sysconfig`` terms) are still
found relative to ``sys.prefix`` / ``sys.exec_prefix``.

Thus, a Python virtual environment in its simplest form would consist
of nothing more than a copy or symlink of the Python binary
accompanied by a ``pyvenv.cfg`` file and a site-packages directory.



## ==‚ö° pip ‰æùËµñÁÆ°ÁêÜÂ∑•ÂÖ∑
- [Python Packaging User Guide](https://packaging.python.org/en/latest/tutorials/)
- [pip installation](https://pip.pypa.io/en/stable/installation/)
- [Software Packaging and Distribution](https://docs.python.org/3/library/distribution.html)

ÊØïÁ´ü‰∏∞ÂØåÁöÑÁ¨¨‰∏âÊñπÂ∫ìÊòØ python ÁöÑ‰ºòÂäøÊâÄÂú®Ôºå‰∏∫‰∫ÜÊõ¥Âä†Êñπ‰æøÁöÑÂÆâË£ÖÁ¨¨‰∏âÊñπÂ∫ìÔºåÊèê‰æõ‰∫Ü pip Áî®‰∫éÁÆ°ÁêÜ‰æùËµñ„ÄÇ

    pip -> [ setuptools | Distribute ] -> Distutils -> Python core
                                        |
        3rd party packages              |      included in Python
                                        |

Python Êèê‰æõ‰∫Ü‰ª•‰∏ãÊ®°ÂùóÁî®‰∫é‰æùËµñÁÆ°ÁêÜÊàñÊ®°ÂùóÂÆâË£ÖÔºö

- *distutils* ‚Äî Building and installing Python modules
- *ensurepip* ‚Äî Bootstrapping the pip installer
- *venv* ‚Äî Creation of virtual environments
- *zipapp* ‚Äî Manage executable Python zip archives

A virtual environment is a Python environment such that the Python interpreter, libraries and scripts installed into it are isolated from those installed in other virtual environments, and (by default) any libraries installed in a ‚Äúsystem‚Äù Python, i.e., one which is installed as part of your operating system.

A virtual environment is a directory tree which contains Python executable files and other files which indicate that it is a virtual environment.

Common installation tools such as *setuptools* and *pip* work as expected with virtual environments. In other words, when a virtual environment is active, they install Python packages into the virtual environment without needing to be told to do so explicitly.

Ê≥®ÊÑèÔºå*site-packages* ÁõÆÂΩïÊòØ python ÈªòËÆ§ÁöÑÊ®°ÂùóÊêúÁ¥¢ÁõÆÂΩïÔºåÂÆÉ‰øùÂ≠ò‰∫ÜÈÇ£‰∫õÈÄöËøáÊ∫ê‰ª£Á†ÅÊâãÂä®ÂÆâË£ÖÁöÑÊ®°ÂùóÔºåÊØîÂ¶Ç‰ΩøÁî® distutils ÊâßË°å *python setup.py install* ÂÆâË£ÖÁöÑÊ®°Âùó„ÄÇ

ÂÆâË£Ö setuptools ÂëΩ‰ª§Â¶Ç‰∏ãÔºö

```sh
wget --no-check-certificate  https://pypi.python.org/packages/source/s/setuptools/setuptools-19.6.tar.gz#md5=c607dd118eae682c44ed146367a17e26
tar -zxvf setuptools-19.6.tar.gz
cd setuptools-19.6
python3 setup.py build
python3 setup.py install
```

pip ‰æùËµñÂ∑•ÂÖ∑ÂÆâË£ÖÂëΩ‰ª§Â¶Ç‰∏ãÔºö

```sh
wget --no-check-certificate  https://pypi.python.org/packages/source/p/pip/pip-8.0.2.tar.gz
tar -zxvf pip-8.0.2.tar.gz
cd pip-8.0.2
python3 setup.py build
python3 setup.py install
```

‰ΩøÁî®ÂÜÖÁΩÆÁöÑÊ®°ÂùóÂÆâË£Ö„ÄÅÊõ¥Êñ∞ pipÔºö

```sh
python -m ensurepip
python -m ensurepip --upgrade
python -m pip install -U pip
python -m pip install --upgrade pip
```

Â¶ÇÊûúÊ≤°ÊúâÊêûÂ•Ω HTTPS ËøûÊé•ÁéØÂ¢ÉÔºåÂèØËÉΩÊä•ÈîôÔºö

    pip is configured with locations that require TLS/SSL, however the ssl module in Python is not available.

ÁÑ∂ÂêéÂºÄÂßãËøõË°åÂ¶Ç‰∏ãÊìç‰Ωú

```sh
yum install openssl
yum install openssl-devel
cd python3.6.1
make && make install
```

‰æùËµñÂåÖ‰ºö‰øùÂ≠òÂà∞‰ª•‰∏ãÁõÆÂΩïÔºö

    Lib\site-packages

ÂèØÊòØ‰ΩøÁî®‰ª•‰∏ãÂëΩ‰ª§Êü•ËØ¢ÔºåUSER_BASE Âíå USER_SITE ÊòØÁî®Êà∑Ëá™ÂÆö‰πâÁöÑÂêØÁî®PythonËÑöÊú¨Âíå‰æùËµñÂÆâË£ÖÂåÖÁöÑÂü∫Á°ÄË∑ØÂæÑ:

```sh
python -m site
```

Êúâ‰∏âÂ§ÑËÆæÁΩÆÂèØ‰ª•ÊîπÂèò pip ÂëΩ‰ª§Ë°å‰∏∫Ôºö

- command line options
- environment variables
- configuration files

ÈÖçÁΩÆÊñá‰ª∂Êúâ 3 ‰∏™Á≠âÁ∫ßÔºö

- global: system-wide configuration file, shared across users.
- user: per-user configuration file.
- site: per-environment configuration file; i.e. per-virtualenv.

Âú®‰∏çÂêåÁ≥ªÁªü‰∏ãÁöÑÈÖçÁΩÆÊñá‰ª∂‰ΩçÁΩÆÔºö

- Global
    - Windows 7+: C:\ProgramData\pip\pip.ini
    - Windows Vista: Global configuration is not supported.
    - Windows XP: C:\Documents and Settings\All Users\Application Data\pip\pip.ini
    - Linux: In a ‚Äúpip‚Äù subdirectory of any of the paths set in the environment variable XDG_CONFIG_DIRS (if it exists), for example /etc/xdg/pip/pip.conf.
    - Linux: This will be followed by loading /etc/pip.conf.
- User
    - Windows: %APPDATA%\pip\pip.ini
    - Windows: The legacy ‚Äúper-user‚Äù %HOME%\pip\pip.ini
    - Linux: $HOME/.config/pip/pip.conf
    - Linux: $HOME/.pip/pip.conf
- Site
    - %VIRTUAL_ENV%\pip.ini
    - Linux: $VIRTUAL_ENV/pip.conf

ÈÖçÁΩÆÊñá‰ª∂‰∏≠‰ΩøÁî® [global] ËøõË°åÂÖ®Â±ÄÈÖçÁΩÆÔºå‰πüÂèØ‰ª•ÈíàÂØπÂëΩ‰ª§ËøõË°åÈÖçÁΩÆÔºåÂ¶Ç [install] ÈíàÂØπÂÆâË£ÖÂëΩ‰ª§ËøõË°åÈÖçÁΩÆ„ÄÇ

ÈÅøÂÖçÁΩëÁªú‰∏çËÉΩËÆøÈóÆÈóÆÈ¢òÔºåËÄÉËôë pip Êç¢Ê∫êÂà∞ÂõΩÂÜÖÁöÑÈïúÂÉèÊúçÂä°Âô®Ôºö

```sh
# ‰∏¥Êó∂‰ΩøÁî®ÂÆâË£ÖÊ®°ÂùóÔºåÊàñÂÜôÂÖ•ÈÖçÁΩÆÊñá‰ª∂
pip install ‚Äìi https://pypi.tuna.tsinghua.edu.cn/simple requests
pip install requests -i https://pypi.douban.com/simple/ --trusted-host pypi.douban.com
pip config set global.index-url https://pypi.douban.com/simple/
Writing to C:\Users\OCEAN\AppData\Roaming\pip\pip.ini
```

ÊàñËÄÖÂú® pip ÈÖçÁΩÆÊñá‰ª∂‰∏≠Âä†ÂÖ• trusted-host ÈÄâÈ°πÔºö

```sh
[global]
timeout = 60
index-url = https://pypi.douban.com/simple/
# index-url = https://mirrors.aliyun.com/pypi/simple/
# index-url = https://pypi.tuna.tsinghua.edu.cn/simple/
# index-url = https://pypi.mirrors.ustc.edu.cn/simple/
# index-url = https://mirrors.bfsu.edu.cn/pypi/web/simple/

[install]
trusted-host =
    mirrors.aliyun.com
    pypi.douban.com
    pypi.tuna.tsinghua.edu.cn
    pypi.mirrors.ustc.edu.cn
    mirrors.bfsu.edu.cn
```

ÊúâÂèØËÉΩÂõ†‰∏∫ HTTPS ÊúçÂä°Âô®ÂÆâÂÖ®‰ø°‰ªªÈóÆÈ¢òÔºåÂ¶Ç https://pypi.douban.com Â∞±‰∏çËÉΩÊ≠£Â∏∏‰ΩøÁî®ÔºåÂØºËá¥‰ª•‰∏ãÂçèËÆÆÈîôËØØ„ÄÅÂºÇÂ∏∏ÔºåÂèØ‰ª•‰ΩøÁî® --trusted-host Âº∫Âà∂‰ø°‰ªª HTTP ÊúçÂä°Âô®Ôºö

>WARNING: Retrying (Retry(total=3, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ProtocolError('Connection aborted.', FileNotFoundError(2, 'No such file or di
rectory'))': /pypi/simple/pip/

ÂÆâË£Ö Wireshark„ÄÅFiddler„ÄÅCaharless Á≠âÁΩëÁªúË∞ÉËØïËΩØ‰ª∂‰πüÊúâÂèØËÉΩÂØºËá¥ HTTPS ËÆøÈóÆÂá∫ÈîôÔºå‰ª•‰∏äÈóÆÈ¢òÂ∞±ÊòØËøô‰∏™ÂéüÂõ†ÂØºËá¥ÁöÑÔºåÂπ∂‰∏îÊ≤°ÊúâÊâìÂç∞ÂÆåÊï¥ÁöÑÂºÇÂ∏∏ÈìæÔºåÈöêËóè‰∏ãÈù¢ËøôÊÆµÊúÄÈáçË¶ÅÁöÑÂºÇÂ∏∏‰ø°ÊÅØ„ÄÇÂ¶ÇÊûú urllib ËÆøÈóÆÁΩëÁªúÊó∂Âá∫Áé∞Á±ª‰ºº‰ª•‰∏ãÂºÇÂ∏∏Âü∫Êú¨ÈÉΩÊòØËøôÁ±ªËΩØ‰ª∂ÂØºËá¥ÁöÑÔºåËøô‰πüÂØºËá¥‰∫Ü HTTPS ÊúçÂä°Âô®Êó†Ê≥ï‰∏∫ pip Ê≠£Â∏∏‰ΩøÁî®„ÄÇ

>Traceback (most recent call last):
  File "C:\Python310\tutorial-env\lib\site-packages\urllib3\connectionpool.py", line 703, in urlopen
    httplib_response = self._make_request(
  File "C:\Python310\tutorial-env\lib\site-packages\urllib3\connectionpool.py", line 386, in _make_request
    self._validate_conn(conn)
  File "C:\Python310\tutorial-env\lib\site-packages\urllib3\connectionpool.py", line 1040, in _validate_conn
    conn.connect()
  File "C:\Python310\tutorial-env\lib\site-packages\urllib3\connection.py", line 397, in connect
    self.ssl_context = create_urllib3_context(
  File "C:\Python310\tutorial-env\lib\site-packages\urllib3\util\ssl_.py", line 350, in create_urllib3_context
    context.keylog_filename = sslkeylogfile
FileNotFoundError: [Errno 2] No such file or directory: 'C:\\Wireshark\\p.key'

ÈÄöËøá‰ª£Á†ÅÂèØ‰ª•ÁúãÂà∞ÁΩëÁªúËØ∑Ê±Ç‰∏ä‰∏ãÊñá‰ª∂ÂØπË±°Â≠òÂú® keylog_filename ËÆæÁΩÆÔºåÈúÄË¶ÅË∞ÉÁî®ÁéØÂ¢ÉÂèòÈáèËÆæÁΩÆËé∑ÂèñÊñá‰ª∂Ë∑ØÂæÑËÆæÁΩÆ‰∫éÔºö

```py
    if hasattr(context, "keylog_filename"):
        sslkeylogfile = os.environ.get("SSLKEYLOGFILE")
        if sslkeylogfile:
            context.keylog_filename = sslkeylogfile
```

Êú¨Âú∞Á≥ªÁªüÂÆâË£ÖËøá Wireshark ÂèàÂç∏ËΩΩ‰∫ÜÔºåÂØºËá¥ÁéØÂ¢ÉÂèòÈáèÊåáÂêëÁöÑÁõÆÂΩïË∑ØÂæÑ‰∏çÂ≠òÂú®ËÄåÂá∫ÈîôÔºåËß£ÂÜ≥ÊñπÊ≥ïÊòØÈáçÊñ∞ÊåáÂÆöË∑ØÂæÑÊàñÂà†Èô§ÁéØÂ¢ÉÂèòÈáè„ÄÇ

‰ªé‰∏ãËΩΩÂåÖ‰ª£Á†ÅÁõÆÂΩïÊâãÂä®ÂÆâË£Ö requests Ê®°ÂùóÂá∫Áé∞Ë≠¶ÂëäÔºö

```sh
# $ python -m pip install requests
$ git clone git://github.com/psf/requests.git
# Or, download the tarball:
# $ curl -OL https://github.com/psf/requests/tarball/master
# optionally, zipball is also available (for Windows users).
$ cd requests
$ python -m pip install .

> DEPRECATION: A future pip version will change local packages to be built in-place without first copying to a temporary directory. We recommend you use --use-feature=in-tree-build to test your packages with this new behavior before it becomes the default.
   pip 21.3 will remove support for this functionality. You can find discussion regarding this at https://github.com/pypa/pip/issues/7555.
```

Áé∞Âú∫ÁºñËØëÂÆâË£ÖËÄåÈùûÊã∑Ë¥ùÂà∞‰∏¥Êó∂ÁõÆÂΩïËøõË°åÔºåÂú®Êú™Êù• pip ÁâàÊú¨‰ºöÊîπÂèòÂΩìÂâçÂåÖ„ÄÇÂª∫ËÆÆÂú®ÁΩÆÂÖ∂‰∏∫ÈªòËÆ§ÂåÖÂâçÔºå‰ΩøÁî® in-tree-build ÁâπÊÄßÊµãËØïÊ≠§ÂåÖÁöÑË°å‰∏∫Ôºåpip 21.3 ‰ºöÁßªÈô§Ê≠§ÂäüËÉΩÁöÑÊîØÊåÅ„ÄÇ


pip ÂëΩ‰ª§Âü∫Êú¨Áî®Ê≥ïÔºö

```sh
Usage:   
  pip <command> [options]

Commands:
  install                     Install packages.
  download                    Download packages.
  uninstall                   Uninstall packages.
  freeze                      Output installed packages in requirements format.
  list                        List installed packages.
  show                        Show information about installed packages.
  check                       Verify installed packages have compatible dependencies.
  config                      Manage local and global configuration.
  search                      Search PyPI for packages.
  cache                       Inspect and manage pip‚Äôs wheel cache.
  index                       Inspect information available from package indexes.
  wheel                       Build wheels from your requirements.
  hash                        Compute hashes of package archives.
  completion                  A helper command used for command completion.
  debug                       Show information useful for debugging.
  help                        Show help for commands.

# Installing Packages
python -m pip install SomePackage            # latest version
python -m pip install SomePackage==1.0.4     # specific version
python -m pip install 'SomePackage>=1.0.4'   # minimum version

# Requirements Files
# ‚ÄúRequirements files‚Äù are files containing a list of items 
# to be installed using pip install like so:
python -m pip freeze > requirements.txt
python -m pip install -r requirements.txt

# Constraints Files
# Constraints files are requirements files that only control which 
# version of a requirement is installed, not whether it is installed or not. 
python -m pip install -c constraints.txt

# Installing from Wheels
# ‚ÄúWheel‚Äù is a built, archive format that can greatly speed installation 
# compared to building and installing from source archives. 
python -m pip install SomePackage-1.0-py2.py3-none-any.whl
python -m pip install './somepackage-1.0-py2.py3-none-any.whl[my-extras]'
python -m pip install wheel
python -m pip wheel --wheel-dir=/local/wheels -r requirements.txt
python -m pip install --no-index --find-links=/local/wheels -r requirements.txt

# Uninstalling Packages
# pip is able to uninstall most packages like so:
python -m pip uninstall SomePackage

# Listing Packages
# To list installed or outdated packages:
python -m pip list
python -m pip list --outdated
python -m pip show sphinx

# Searching for Packages
# pip can search PyPI for packages using the pip search command:
python -m pip search "query"

# Installing from local packages
# In some cases, you may want to install from local packages only, with no traffic to PyPI.
python -m pip download --destination-directory DIR -r requirements.txt
python -m pip wheel --wheel-dir DIR -r requirements.txt
python -m pip install --no-index --find-links=DIR -r requirements.txt
```



## ==‚ö° Import Package.Modules
- The Python Tutorial - 6. Modules
- The Python Language Reference ¬ª 5. The import system - 5.2.1. Regular packages
- The Python Standard Library ¬ª Importing Modules
- PEP 302 -- New Import Hooks https://legacy.python.org/dev/peps/pep-0302/
- PEP 328 -- Imports: Multi-Line and Absolute/Relative https://www.python.org/dev/peps/pep-0328/
- PEP 420 -- Implicit Namespace Packages  https://www.python.org/dev/peps/pep-0420
- https://docs.python.org/3/reference/import.html

ËøôÈÉ®ÂàÜÂÜÖÂÆπÂ∞Ü‰ªé‰ª•‰∏ãÂá†‰∏™ÊñπÈù¢Ëß£ÈáäÂØºÂÖ•‰∏éÂåÖ„ÄÅÊ®°ÂùóÊñπÈù¢ÁöÑÁü•ËØÜÔºö

- ‰ªÄ‰πàÊòØÊ®°ÂùóÔºå‰ªÄ‰πàÊòØÂåÖÔºåÂåÖÁöÑÂàÜÁ±ª„ÄÇ
- ÊåâÁ£ÅÁõòÊñá‰ª∂ÁõÆÂΩïÁªìÊûÑÁªÑÁªáÁöÑÂåÖ‰∏éÊ®°ÂùóÂ¶Ç‰Ωï‰ΩøÁî®„ÄÇ
- ÂØºÂÖ•ËØ≠Âè•ÁöÑ‰ΩøÁî®‰∏éÊ®°ÂùóÁöÑÁ¨¶Âè∑ÂÆö‰πâ„ÄÅ‰ΩøÁî®„ÄÇ
- ÂàùÂßãÂåñÊ®°Âùó `__init__.py` Êñá‰ª∂„ÄÇ
- ‰Ωú‰∏∫Ê∑±ÂÖ•ÔºåËøòÊé¢ËÆ®‰∫ÜÊ®°ÂùóÂä†ËΩΩÂô®ÂéüÁêÜ„ÄÇ
- Ê∂âÂèä‰∫Ü Code Objects & Frame Object ‰∏§ÁßçÊ†∏ÂøÉÂØπË±°ÁöÑÂü∫Êú¨ËÆ§ËØÜ„ÄÇ

Python ModuleÔºåÊ®°ÂùóÊòØ‰∏ÄÁßçÂØπË±°Â±ÇÊ¨°ÁªìÊûÑÁöÑÁªÑÁªáÊñπÂºèÔºåÂèØ‰ª•ÁêÜËß£‰∏∫Á£ÅÁõòÁõÆÂΩï‰ª•Âèä .py ËÑöÊú¨Êñá‰ª∂ÔºåÂÆÉÂåÖÂê´‰∫Ü Python ÂØπË±°ÂÆö‰πâÂíåËØ≠Âè•„ÄÇ

ÊØè‰∏™Ê®°ÂùóÈÉΩÊúâËá™Â∑±ÁöÑÁßÅÊúâÁ¨¶Âè∑Ë°®ÔºåËØ•Ë°®‰∏≠ÂÆö‰πâÁöÑÊâÄÊúâÂáΩÊï∞Á¨¶Âè∑‰Ωú‰∏∫Ê®°ÂùóÁöÑÂÖ®Â±ÄÁ¨¶Âè∑Ë°®„ÄÇÂõ†Ê≠§ÔºåÊ®°ÂùóÁöÑ‰ΩúËÄÖÂèØ‰ª•Âú®Ê®°Âùó‰∏≠‰ΩøÁî®ÂÖ®Â±ÄÂèòÈáèÔºåËÄå‰∏çÁî®ÊãÖÂøÉ‰∏éÁî®Êà∑ÁöÑÂÖ®Â±ÄÂèòÈáèÂèëÁîüÊÑèÂ§ñÂÜ≤Á™Å„ÄÇ

- ÂáΩÊï∞ÊòØ‰∏ÄÁªÑÂÆûÁé∞ÊüêÁßçÂäüËÉΩÁöÑ‰ª£Á†ÅÔºå‰πüÊòØ‰ª£Á†ÅÂ§çÁî®ÁöÑ‰∏ÄÁßçÁªÑÁªáÂΩ¢ÂºèÔºõ
- Ê®°ÂùóÊòØ‰∏∫ÂÆûÁé∞ÊüêÁßçÈÄªËæëÂ∞ÜÁõ∏ÂÖ≥ËøûÁöÑÂáΩÊï∞ÂÜôÂú®Âêå‰∏Ä‰∏™Êñá‰ª∂ÈáåÔºå‰ΩøÈÄªËæëÊõ¥Ê∏ÖÊ•öÔºåÁÆÄÂçïÁêÜËß£Ôºå.py Êñá‰ª∂Â∞±Ê®°ÂùóÔºõ
- ÂåÖÊòØ‰∏∫‰∫ÜÊñπ‰æøÁÆ°ÁêÜÊ®°ÂùóÔºå‰Ωú‰∏∫Ê®°ÂùóÁªÑÁªáÂçïÂÖÉËÄåÂú® Python ‰∏≠ÂºïÂÖ•ÁöÑÊäΩË±°Ê¶ÇÂøµÔºõ

‰ΩÜ‰∫ãÂÆû‰∏ä Python Á®ãÂ∫è‰ª£Á†ÅÂØπË±°‰∏ç‰∏ÄÂÆö‰ª•Êñá‰ª∂ÁõÆÂΩïÁªÑÁªáÔºåÂèØ‰ª•ÊòØÂåÖÂê´ `__init__.py` Êñá‰ª∂ÁöÑ ZIP ÂéãÁº©ÂåÖÁ≠â‰∏çÂêåÁöÑÂ≠òÂÇ®ÂΩ¢ÂºèÔºåÂπ∂‰∏îÔºåÊ®°Âùó‰πü‰∏ç‰∏ÄÂÆöÂøÖÈúÄÊòØ Python ËÑöÊú¨Ôºå‰πüÂèØ‰ª•ÊòØ C/C++ ÂÆûÁé∞Êâ©Â±ïÊ®°Âùó„ÄÇÂêå‰∏Ä‰∏™ÂåÖÁöÑÊ®°ÂùóÂèØ‰ª•Âú®Áâ©ÁêÜ‰∏äËøûÁª≠Â≠òÂÇ®Ôºå‰πüÂèØ‰ª•ÂàÜÂºÄ„ÄÇ

1) modules written in Python (.py);
2) modules written in C and dynamically loaded (.dll, .pyd, .so, .sl, etc);
3) modules written in C and linked with the interpreter; to get a list of these,

type::

      import sys
      print(sys.builtin_module_names)

‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåmodule Âíå package Ê®°ÂùóÊàñÂåÖÊòØ Python ÁÆ°ÁêÜ‰ª£Á†ÅÔºåÊòØÊåá‰ª£Áõ∏ÂêåÁöÑÂê´‰πâÔºåÊòØ‰ª£Á†ÅÁªÑÁªáÂçïÂÖÉÔºå‰∏ÄÁßçÁÆ°ÁêÜÊñπÂºè„ÄÇÂΩìÁÑ∂ÔºåÂÆÉ‰ª¨Ê¶ÇÂøµ‰∏äËøòÊòØÊúâ‰∫õÂå∫Âà´ÁöÑÔºö

- Package ÂåÖÈÄöÂ∏∏ÂØπÂ∫îÁöÑÊòØÁõÆÂΩïÂ±ÇÊ¨°ÁªìÊûÑÔºåËøô‰∏ÄÁÇπÂá∫‰∫éÊñπ‰æøÁêÜËß£‰ΩøÁî®ÁõÆÂΩïÁªìÊûÑÔºåÂÆûÈôÖ‰∏ä‰∏ç‰∏ÄÂÆöÊòØÁõÆÂΩïËøôÁßçÁªÑÁªáÔºõ
- Module Ê®°ÂùóÈÄöÂ∏∏ÊòØÊåá‰∏Ä‰∏™ËÑöÊú¨Êñá‰ª∂ÔºåËøô‰∏ÄÁÇπ‰πüÊòØÂá∫‰∫éÊñπ‰æøÁêÜËß£‰∏æ‰æãÔºåÂÆûÈôÖ‰∏ä‰πü‰∏ç‰∏ÄÂÆöÊòØÈÄöËøáÊñá‰ª∂Êù•ÁªÑÁªáÔºõ


Python ÂÆö‰πâ‰∫Ü `Regular packages` Âíå `Namespace packages` ‰∏§ÁßçÂåÖ„ÄÇ

ÂëΩÂêçÁ©∫Èó¥ÂåÖÂíåÂ∏∏ËßÑÂåÖÈùûÂ∏∏Áõ∏‰ººÔºåÂå∫Âà´Âú®‰∫éÔºö

- ÂëΩÂêçÁ©∫Èó¥ÂåÖÁöÑ‰∏ÄÈÉ®ÂàÜ‰∏çÂøÖÂÖ®ÈÉ®Êù•Ëá™Âêå‰∏Ä‰∏™ÁõÆÂΩïÁªìÊûÑÔºåÁîöËá≥‰∏çÈúÄË¶ÅÊù•Ëá™Âêå‰∏Ä‰∏™Âä†ËΩΩÂô®„ÄÇÂ∏∏ËßÑÂåÖÊòØËá™ÂåÖÂê´ÁöÑÔºöÊâÄÊúâÈÉ®ÂàÜÈÉΩ‰Ωç‰∫éÂêå‰∏ÄÁõÆÂΩïÂ±ÇÊ¨°ÁªìÊûÑ‰∏≠„ÄÇ
- ÂëΩÂêçÁ©∫Èó¥ÂåÖÊ≤°Êúâ __file__ Â±ûÊÄß„ÄÇ
- ÂëΩÂêçÁ©∫Èó¥ÂåÖÁöÑ __path__ Â±ûÊÄßÊòØÂ≠óÁ¨¶‰∏≤ÁöÑÂè™ËØªËø≠‰ª£ÔºåÂΩìÁà∂Ë∑ØÂæÑË¢´‰øÆÊîπÊó∂‰ºöËá™Âä®Êõ¥Êñ∞„ÄÇ
- ÂëΩÂêçÁ©∫Èó¥ÂåÖÊ≤°Êúâ __init__.py Ê®°Âùó„ÄÇ
- ÂëΩÂêçÁ©∫Èó¥ÂåÖÁöÑ __loader__ Â±ûÊÄßÂÖ∑Êúâ‰∏çÂêåÁ±ªÂûãÁöÑÂØπË±° „ÄÇ

Ê≠£Â∏∏ÂåÖÊòØ Python 3.2 Âèä‰πãÂâçÁâàÊú¨‰ΩøÁî®ÁöÑ‰º†ÁªüÂåÖÁ±ªÂûãÔºå‰∏ÄËà¨‰ª•Êñá‰ª∂ÁõÆÂΩïÂ±ÇÊ¨°ÁªìÊûÑÁªÑÁªáÔºåËøô‰πüÊòØÊúÄÂ∏∏Áî®ÁöÑ‰∏ÄÁßçÊñπÂºè„ÄÇÊØè‰∏Ä‰∏™ÂåÖË¢´ÂØºÂÖ•‰ΩçÁΩÆÈÉΩÂèØ‰ª•Êúâ‰∏Ä‰∏™ `__init__.py` Êñá‰ª∂ÔºåËøô‰∏™Êñá‰ª∂ÂèØ‰ª•ÊòØÁ©∫Êñá‰ª∂Ôºå‰πüÂèØ‰ª•ÂåÖÂê´Ê≠£Â∏∏ Python ‰ª£Á†ÅÔºåÂõ†‰∏∫ÂÆÉÊú¨Ë∫´Â∞±ÊòØ‰∏Ä‰∏™ÂàùÂßãÂåñÊ®°Âùó„ÄÇ‰πãÊâÄÊúâ‰ª•Áß∞‰πã‰∏∫ÂàùÂßãÂåñÊ®°ÂùóËÄåÈùûÂàùÂßãÂåñËÑöÊú¨ÔºåÊòØÂõ†‰∏∫Âú®Á®ãÂ∫èÈÄªËæë‰∏äÂÆÉÁ°ÆÂÆûÊòØ‰∏Ä‰∏™Ê®°Âùó„ÄÇÂØºÂÖ•ÂåÖÊó∂ÔºåÂ∞±‰ºöÈöêÂê´Âú∞ÊâßË°åÂàùÂßãÂåñÊ®°Âùó‰ª£Á†ÅÔºåÂπ∂Â∞ÜÂÖ∂ÂÖ®Â±ÄÂèòÈáèÁ¨¶Âè∑ÁªëÂÆöÂà∞ÂåÖÂëΩÂêçÁ©∫Èó¥‰∏ä‰ΩøÁî®„ÄÇÊ≥®ÊÑèÔºåÂØºÂÖ•Â≠êÁ∫ßÊ®°ÂùóÊó∂Ôºå‰∏äÁ∫ßÊâÄÊúâÁöÑÂàùÂßãÂåñÊ®°Âùó‰ª£Á†ÅÈÉΩ‰ºöÊâßË°å„ÄÇ

ÂëΩÂêçÁ©∫Èó¥ÂåÖÂ§ö‰∏™ÈÉ®ÂàÜÁöÑÁªÑÂêàÔºåÂÖ∂‰∏≠ÊØè‰∏™ÈÉ®ÂàÜ‰∏∫Áà∂ÂåÖÊèê‰æõ‰∏Ä‰∏™Â≠êÂåÖÔºåÂÆÉ‰ª¨ÂèØ‰ª•‰Ωç‰∫éÊñá‰ª∂Á≥ªÁªü‰∏äÁöÑ‰∏çÂêå‰ΩçÁΩÆÔºå‰πüÂèØ‰ª•‰ª•Âú® zip Êñá‰ª∂ÂÜÖ„ÄÅÁΩëÁªúÊàñ Python Âú®ÂØºÂÖ•ÊúüÈó¥ÊêúÁ¥¢Âà∞ÁöÑ‰ªª‰ΩïÂÖ∂‰ªñ‰ΩçÁΩÆ„ÄÇÂëΩÂêçÁ©∫Èó¥ÂåÖÂèØËÉΩ‰∏éÊñá‰ª∂Á≥ªÁªü‰∏äÁöÑÊñá‰ª∂ÂØπÂ∫îÔºå‰πüÂèØËÉΩ‰∏çÁõ¥Êé•ÂØπÂ∫îÔºåÂÆÉ‰ª¨ÂèØËÉΩÊòØÊ≤°ÊúâÂÖ∑‰ΩìË°®Á§∫ÁöÑËôöÊãüÊ®°Âùó„ÄÇ

ÂëΩÂêçÁ©∫Èó¥ÂåÖÂπ∂‰∏ç‰ΩøÁî®‰∏ÄËà¨ÁöÑ list Êù•ÂÆö‰πâ __path__ Â±ûÊÄßÔºåËÄåÊòØ‰ΩøÁî®Ëá™ÂÆö‰πâÁöÑÂèØËø≠‰ª£Á±ªÂûãÔºåÊù•ËøõË°åÂ≠êÂåÖÈÉ®ÂàÜÁöÑÊêúÁ¥¢„ÄÇÂ¶ÇÊûúÁà∂ÂåÖÔºåÊàñÈ°∂Á∫ßÂåÖÁöÑ `sys.path` ÁöÑË∑ØÂæÑÂèëÁîüÊõ¥ÊîπÔºåÂàôÂú®‰∏ã‰∏ÄÊ¨°ÂØºÂÖ•ËØ•ÂåÖÊó∂ÔºåÂä®ÊÄÅË∑ØÂæÑËÆ°ÁÆóÔºåËØ•Ëø≠‰ª£Á±ªÂûãÂ∞ÜËá™Âä®ÂØπËØ•ÂåÖ‰∏≠ÁöÑÂ≠êÂåÖÈÉ®ÂàÜÊâßË°åÊñ∞ÁöÑÊêúÁ¥¢„ÄÇ

Ê≤°ÊúâÁà∂Á∫ßÂàùÂßãÂåñÊ®°ÂùóÁöÑÊÉÖÂÜµÔºåÂç≥Ê≤°Êúâ `parent/__init__.py` Ôºå‰∫ãÂÆû‰∏äÊòØÂõ†‰∏∫ÂèØËÉΩÊúâÂ§ö‰∏™‰ΩçÁΩÆÊù•ÂØºÂÖ•ÂëΩÂêçÁ©∫Èó¥ÂåÖÁöÑÂêÑ‰∏™ÈÉ®ÂàÜÔºåÊâÄ‰ª•ÂΩìÈ°∂Á∫ßÁà∂ÂåÖÊàñÂÖ∂Â≠êÂåÖË¢´ÂØºÂÖ•Êó∂ÔºåPython ÈÉΩ‰ºö‰∏∫ÂÖ∂ÂàõÂª∫‰∏Ä‰∏™È°∂Á∫ßÁöÑÁà∂ÂëΩÂêçÁ©∫Èó¥ÂåÖ„ÄÇ

Âú®ÂÆö‰πâ‰∏äÔºåÂè™Ë¶Å‰∏Ä‰∏™Ê®°ÂùóÂÆö‰πâ‰∫Ü __path__ Â±ûÊÄßÔºåÈÇ£‰πàÂÆÉÂ∞±ÊòØ‰∏Ä‰∏™ÂåÖÔºåËøô‰∏™Â±ûÊÄß‰∏çËÉΩÈÄöËøá dir() Ëé∑Âèñ„ÄÇ‰ªéËøô‰∏ÄÁÇπÊù•ËØ¥Ôºå`__init__.py` Â∞±ÊòØ‰∏Ä‰∏™ÂåÖÔºåÂêåÊó∂Âú®ÂÆûÁî®‰∏≠ÂÆÉ‰πüÊòØ‰∏Ä‰∏™Ê®°Âùó„ÄÇ‰ΩøÁî®ÂÖ®Â±ÄÂáΩÊï∞ `globals()` ÂèØ‰ª•Ëé∑ÂèñÂΩìÂâçÊ®°ÂùóÁöÑÂÖ®Â±ÄÁ¨¶Âè∑Ë°®ÔºåÂπ∂ÈÄöËøáËøô‰∏™ÂáΩÊï∞ËøîÂõûÁöÑÂ≠óÂÖ∏Êï∞ÊçÆÊù•ÊµãËØï __path__ Â±ûÊÄßÊòØÂê¶Â≠òÂú®„ÄÇË∞ÉÁî®Ëøô‰∏™ÂáΩÊï∞Êó∂ÔºåËøîÂõûÁöÑÊòØÂÆö‰πâÂÆÉÁöÑÊ®°ÂùóÁöÑÂÖ®Â±ÄÁ¨¶Âè∑Ë°®ÔºåËÄå‰∏çÊòØÊâßË°åÂÆÉÁöÑÊ®°Âùó„ÄÇ

Âú®Êñá‰ª∂ÁõÆÂΩïËøôÁßç‰ª£Á†ÅÁªÑÁªáÊñπÂºè‰∏ãÔºåPackage ÂØπÂ∫î‰∏Ä‰∏™ÁõÆÂΩïÔºå‰πüÂèØ‰ª•ËØ¥ÂÆÉÂ∞±ÊòØ __init__.py ËÑöÊú¨Êñá‰ª∂ÂØπÂ∫îÁöÑÊ®°Âùó„ÄÇ

ÊâÄ‰ª•Ôºå‰∏ÄËà¨Â∫îÁî®‰∏≠ÔºåPackage Á≠âÊïà‰∫é ModuleÔºåÂè™ÊòØÂÆÉÁî±ÂÖ≥ËÅîÁöÑÂ§ö‰∏™Ê®°ÂùóÁªÑÊàêÔºå‰ΩÜ‰πü‰∏ÄÊ†∑ÂèØ‰ª•ÂΩì‰ΩúÊ®°ÂùóÁúãÂæÖ„ÄÇ

ÂΩìÂâçÁöÑ Python Êèê‰æõ‰∫Ü *pkgutil.extend_path* ÊñπÊ≥ïÊù•ÊòæÂºèÂ£∞Êòé‰∏Ä‰∏™ÂëΩÂêçÁ©∫Èó¥ÂåÖÔºåÂú® `__init__.py` ‰∏≠‰ΩøÁî®‰ª•‰∏ãÊñπÊ≥ïÔºö

```py
from pkgutil import extend_path
__path__ = extend_path(__path__, __name__)
```

‰ª£Á†ÅÁöÑ‰ΩúÁî®Â∞±ÊòØÂ∞ÜÊâÄÊúâ `sys.path` ÊêúÁ¥¢Âà∞ÁöÑÂ≠êÁõÆÂΩïÊ∑ªÂä†Âà∞ __path__ Ëøô‰∏™ÂåÖË∑ØÂæÑÂ±ûÊÄß‰∏äÔºå‰ª•ÂåÖÂëΩÂêçË∑ØÂæÑ„ÄÇÂ¶ÇÊûúÊÉ≥Ë¶ÅÂ∞ÜÂçï‰∏™ÈÄªËæëÂåÖÁöÑ‰∏çÂêåÈÉ®ÂàÜ‰Ωú‰∏∫Â§ö‰∏™ÁõÆÂΩïÂàÜÂèëÔºåËøôÈùûÂ∏∏ÊúâÁî®ÔºåÊâÄ‰ª•ÂàÜÂèëÂåÖÈÉΩÈúÄË¶ÅÂåÖÂê´Áõ∏ÂêåÁöÑËøôÊÆµ‰ª£Á†Å„ÄÇÂÆÉËøòÊü•Êâæ `*.pkg` Êñá‰ª∂ÔºåÂºÄÂ§¥ÁöÑ * ‰∏é name ÂèÇÊï∞ÂåπÈÖç„ÄÇ

Âè¶Â§ñÔºåÂΩì‰∏Ä‰∏™Ê®°ÂùóË¢´ÂØºÂÖ•Êó∂ÔºåÂÖ∂È°∂Â±Ç‰ª£Á†ÅÂè™‰ºöË¢´ÊâßË°å‰∏ÄÊ¨°ÔºåË¶ÅÂÜçÊ¨°ÊâßË°åÔºåÂèØ‰ª•‰ΩøÁî® `importlib.reload()` ÈáçËΩΩÊ®°ÂùóÔºåÊØîÂ¶Ç *import importlib; importlib.reload(modulename)*„ÄÇ


ÂåÖÂíåÊ®°ÂùóÊúâ‰∏§‰∏™ÂØπÂ∫îÁöÑÂÖ®Â±ÄÈ≠îÊúØÂèòÈáèÔºåÂπ∂‰∏îÂú®ÂÖ®Â±ÄÊâßË°åÁöÑËÑöÊú¨‰∏≠Ôºå__name__ Âíå __package__ ÈªòËÆ§ÂÄºÂàÜÂà´‰∏∫ `__main__` Âíå NoneÔºåÂº∫Ë°å‰øÆÊîπÂÆÉ‰ª¨Âπ∂‰∏çËµ∑‰ΩúÁî®„ÄÇ‰πãÊâÄ‰ª•‰ΩøÁî®Ëøô‰∏™Ê®°ÂùóÂêçÔºåÊòØÂõ†‰∏∫Ëß£ÊûêÂô®ÈªòËÆ§‰ΩøÁî®ÁöÑÈ°∂Á∫ßËøêË°åÁéØÂ¢ÉÂ∞±ÊòØ‰ΩøÁî®Ëøô‰∏™ÂêçÁß∞ÔºåÂπ∂‰∏îÈªòËÆ§‰ΩøÁî® `__main__.py` ‰Ωú‰∏∫ÂÖ•Âè£Êñá‰ª∂„ÄÇ

ÊñáÊ°£ÂèÇËÄÉÔºöThe Python Standard Library ¬ª Python Runtime Services ¬ª __main__ ‚Äî Top-level code environment

ÈÄöÂ∏∏Ôºå‰∏Ä‰∏™ .py ËÑöÊú¨Êñá‰ª∂Â∞±ÂèØ‰ª•ÂΩì‰Ωú‰∏Ä‰∏™Ê®°ÂùóÁúãÂæÖÔºåÊ®°ÂùóÂêçÂ∞±ÊòØÊñá‰ª∂ÂêçÔºåÈÄöËøáÂÖ®Â±ÄÁöÑ `__name__` È≠îÊúØÂèòÈáèËé∑Âèñ„ÄÇÂú®‰ΩøÁî® Python Ëß£ÊûêÂô®ËøêË°åËÑöÊú¨Êñá‰ª∂Êó∂ÔºåËøôÊó∂ÔºåËß£ÊûêÂô®‰ºöÂàõÂª∫‰∏ªÊ®°Âùó `main`ÔºåËÑöÊú¨‰∏≠Ë¶ÅÂºïÁî®ÁöÑÂèòÈáèÁ¨¶Âè∑Á≠âÈÉΩ‰ºöÁªëÂÆöÂà∞‰∏ªÊ®°ÂùóÔºå‰ª£Á†ÅËøêË°å‰∫é Top LevelÔºå‰ª• `calculator mode` Ê®°ÂºèËøêË°å„ÄÇ

> print({"module __name__":__name__})
{'module __name__': '__main__'}

‰∫§‰∫íÊ®°Âºè„ÄÅËÆ°ÁÆóÂô®Ê®°ÂºèÊòØ‰∏ÄÂõû‰∫ãÔºåÂè™‰∏çËøáÂú®‰∫§‰∫íÊ®°Âºè‰∏ã Python ÊéßÂà∂Âè∞‰ºöÊèê‰æõÁî®Êà∑ËæìÂÖ•Êï∞ÊçÆÁöÑÊó∂Êú∫„ÄÇ


‰∫ÜËß£‰∏ÄÁÇπ Python Ëß£ÊûêÂô®ÊâßË°åÂèÇÊï∞Ôºö

    python [-bBdEhiIOqsSuvVWx?] [-c command | -m module-name | script | - ] [args]

ÈÄâÈ°π `-c` ÂêéÈù¢Áõ¥Êé•ÊåáÂÆöË¶ÅÊâßË°åÁöÑËÑöÊú¨Â≠óÁ¨¶‰∏≤ÔºåÊñáÊ°£Áß∞‰πã‰∏∫ÂëΩ‰ª§ÔºåÂíåÁõ¥Êé•ËøêË°åËÑöÊú¨Ê®°ÂùóÊ≤°Êúâ‰∏çÂêåÔºåÈÉΩÊòØÂΩì‰Ωú‰∏ªÊ®°ÂùóËøêË°å„ÄÇ

ÈÄâÈ°π `-m` ÂêéÈù¢ÊåáÂÆöË¶ÅËøêË°åÁöÑÊ®°ÂùóÁöÑÂëΩÂêçÁ©∫Èó¥ÔºåÊ≥®ÊÑè‰∏çË¶ÅÂú® *script* ÂêéÈù¢ÊåáÂÆöÔºåËøôÊ†∑Êó†ÊïàÔºö

    python -m modulName
    python -m pkgName.modulName

Âè™Ë¶ÅËÑöÊú¨Êñá‰ª∂ÂèØ‰ª•Âú®ÊåáÂÆöÁöÑÁõÆÂΩï‰∏≠Ë¢´ÊêúÁ¥¢Âà∞ÔºåÂ∞±ÂèØ‰ª•Ë¢´ÊâßË°åÔºåÊêúÁ¥¢ÁõÆÂΩïÂåÖÊã¨ÂΩìÂâçÁõÆÂΩï„ÄÅ`PYTHONPATH` Á≠âÁéØÂ¢ÉÂèòÈáèÊåáÂÆöÁöÑÁõÆÂΩïÔºå‰ª•Âèä `sys.path` ÊåáÂÆöÁöÑÁõÆÂΩïÊêúÁ¥¢ÂàóË°®Á≠âÁ≠â„ÄÇÂΩìÁÑ∂‰Ωú‰∏∫ÂÖ•Âè£ÊâßË°åÁöÑËÑöÊú¨ÔºåËøòÊòØÈªòËÆ§‰∏∫Ê®°ÂùóÂêç‰∏∫ __main__ÔºåÂåÖÂêçÂàôÊòØÂëΩ‰ª§ÂèÇÊï∞‰∏≠ÊåáÂÆöÁöÑ pkgName Â¶ÇÊûúÊúâÊåáÂÆö„ÄÇ‰πüÂèØËÉΩÊòØÁ©∫ÂÄºËÄå‰∏çÊòØ `None` ÊàñÂÖ∑‰ΩìÁöÑÂåÖÂêçÔºåÂ¶ÇÊûúÊâßË°åÁöÑÊòØÈ°∂Á∫ßÊ®°Âùó„ÄÇ

ÈÄöËøá os.system() Á≥ªÁªüË∞ÉÁî®ÊâßË°åÂ§ñÈÉ®ËÑöÊú¨Ôºåfilename ÊúÄÂ•ΩÊòØÂÖ®Ë∑ØÂæÑÔºå‰ΩøÁî® os.popen() ÊñπÂºèÂàôÂèØËé∑ÂèñÁ®ãÂ∫èËæìÂá∫Êï∞ÊçÆÔºö

    import os
    os.system("python filename")
    os.popen(filename)

Âè¶‰∏ÄÊñπÈù¢ÔºåÂ¶ÇÊûú‰Ω†Áü•ÈÅìËá™Â∑±Âú®ÂÅö‰ªÄ‰πàÔºå‰πüÂèØ‰ª•Áî® *modname.itemname* ËøôÁßçËØ≠Ê≥ïÊù•‰ΩøÁî®Ê®°Âùó‰∏≠ÁöÑÂÖ®Â±ÄÂèòÈáè„ÄÇ

ÊØîÂ¶ÇÔºåcoding.py ËÑöÊú¨‰∏≠ÔºåÂ∞±ÂèØ‰ª•‰ΩøÁî®‰ª•‰∏ãÊñπÂºèÂØºÂÖ•Êú¨Ë∫´Ëøô‰∏™Ê®°ÂùóÔºåÂπ∂ËÆøÈóÆÂáΩÊï∞Á≠âÂÖ®Â±ÄÁ¨¶Âè∑ÔºåÂêåÊó∂‰πüÂèØ‰ª•ËÆøÈóÆËá™Â∑±ÁöÑÁßÅÊúâÁ¨¶Âè∑ÂÆö‰πâÔºåÁßÅÊúâÁ¨¶Âè∑‰∏çËÉΩÈÄöËøá * Ëá™Âä®ÂØºÂÖ•ÔºåÈúÄË¶ÅÊòæÂºèÊåáÂÆöÂêçÁß∞ÂºïÂÖ•Ôºö

```py
import coding
# import __main__ as coding

def writeCode(): pass

_var = "it's _var"
print({"module __name__":__name__, _var:_var})
print(coding.writeCode)
# {'module __name__': '__main__', "it's _var": "it's _var"}
# <function writeCode at 0x000002AF9EB73E20>
```

‰ΩøÁî® import ÂèØ‰ª•ÂØºÂÖ•‰∏Ä‰∏™ÂåÖ‰∏≠ÁöÑ‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂáΩÊï∞ÊàñÊ®°ÂùóÔºåÂºïÂÖ•Âà∞Âè¶‰∏Ä‰∏™ Python ‰ª£Á†ÅÊ®°Âùó‰∏≠Ôºå‰ªéËÄåÂÆûÁé∞‰ª£Á†ÅÁöÑÂ§çÁî®„ÄÇ

ÂØºÂÖ•Âü∫Êú¨ËØ≠Ê≥ïÂ¶Ç‰∏ãÔºö

```py
import module1, module2
import Package.module, Package.mod2
import module1 as alias, mod2 as a2   # ÈÄóÂè∑ÂàÜÈöîÂØºÂÖ•‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™Ê®°ÂùóÔºåÂπ∂‰∏∫Ê®°ÂùóËµ∑Âà´Âêç
from   Package import (a, b, c)       # Parentheses support was added to Python 2.4.
from   Package import module          # ÂØºÂÖ•ÂåÖ‰∏≠ÁöÑÊ®°ÂùóÔºåÂØºÂÖ•Â§ö‰∏™Ê®°Âùó‰ΩøÁî®ÈÄóÂè∑ÂàÜÈöî
from   module  import a, b, c         # ÂØºÂÖ•Ê®°Âùó‰∏≠ÁöÑÁ¨¶Âè∑ÂÖÉÁ¥†ÔºàÁ±ª„ÄÅÂèòÈáè„ÄÅÂáΩÊï∞Á≠âÁ≠âÔºâ
from  .here    import *               # Áõ∏ÂØπÂΩìÂâçÂåÖ‰ΩçÁΩÆÂØºÂÖ• here Ê®°ÂùóÁöÑÊâÄÊúâÂÖ¨ÂºÄÂÖÉÁ¥†
from . import symbol
from ..import symbol
from ..module import symbol
```

Ê≥®ÊÑèÔºåËôΩÁÑ∂ÂèØ‰ª•Áî® `import *` ËØ≠Âè•ÂØºÂÖ•Â§ö‰∏™Ê®°ÂùóÂèäÁ¨¶Âè∑Ôºå‰ΩÜÊòØ‰∏çÊé®ËçêËøôÊ†∑ÂÅöÔºåÂõ†‰∏∫ÂèØËÉΩÂØºÂÖ•‰∫Ü‰∏çÊÉ≥Ë¶ÅÁöÑÁ¨¶Âè∑„ÄÇÊØîÂ¶ÇÔºå`from os import *` ‰ºöÂØºÂÖ• `os.open()` Âπ∂Ë¶ÜÁõñÊìç‰ΩúÂÆåÂÖ®‰∏çÂêåÁöÑÂÜÖÁΩÆÂáΩÊï∞ `open()`Ôºå‰ΩÜ `import os` ‰∏ç‰ºö„ÄÇ

‚û° `os.open(file, flags[, mode])` ÊâìÂºÄ‰∏Ä‰∏™Êñá‰ª∂ÔºåÂπ∂‰∏îËÆæÁΩÆÊñá‰ª∂ËØªÂèñÊâìÂºÄÈÄâÈ°πÔºåmode ÂèÇÊï∞ÊòØÂèØÈÄâÁöÑ
‚û° `open(file, mode='r', buffering=-1, encoding=None, errors=None, newline=None, closefd=True, opener=None)`


Ê®°ÂùóÂØºÂÖ•ÁöÑËØ≠Ê≥ïÔºå‰∏ç‰ªÖÂèØ‰ª•ÂØºÂÖ•Ê®°Âùó„ÄÅÊåáÂÆöÂåÖ‰∏ãÁöÑÊ®°ÂùóÔºåËøòÂèØ‰ª•ÂØºÂÖ•Ê®°Âùó‰∏≠ÊåáÂÆöÁöÑÁ¨¶Âè∑„ÄÇ‰ªéÂØºÂÖ•ËØ≠Ê≥ï‰∏äÔºåÊ®°ÂùóÁöÑÂØºÂÖ•ÂèØ‰ª•‰ΩøÁî® `import *` ÊàñËÄÖ `from * import *` Ëøô‰∏§ÁßçÊñπÂºèÔºåËÄåÂØºÂÖ•Ê®°Âùó‰∏≠ÁöÑÁ¨¶Âè∑ÔºåÂ¶ÇÂÖ®Â±ÄÂèòÈáè„ÄÅÂáΩÊï∞Â∞±Ë¶Å‰ΩøÁî®Âêé‰∏ÄÁßçËØ≠Ê≥ïÊ†ºÂºè„ÄÇ

Âú®‰ΩøÁî® `import *` ËØ≠Ê≥ïÊó∂ÔºåÂèØ‰ª•ÈÖçÂêà __all__ ÂÆö‰πâÈÇ£‰πàÁ¨¶Âè∑Â∫îËØ•‰Ωú‰∏∫ÂÖ¨ÂºÄÁöÑÁ¨¶Âè∑Ë¢´ÂØºÂÖ•ÔºåÊ≤°ÊúâËÆæÁΩÆËøô‰∏™ÂèòÈáèÊó∂ÔºåÈªòËÆ§ÊòØÈô§‰∫Ü‰∏ãÂàíÁ∫øÂºÄÂÖ≥ÁöÑÁ¨¶Âè∑ÈÉΩÊòØÂÖ¨ÂºÄÁöÑ„ÄÇËÆæËÆæÁΩÆËøô‰∏™ÂèòÈáèÂêéÔºåÂ∞±‰ª•ËÆæÁΩÆÁöÑÂàóË°®‰∏∫ÂáÜ„ÄÇ

    __all__ = ["{fun}", "VAR", "var", "_var"]

Ê®°Âùó‰ΩøÁî®Ââç‰∏ÄÂÆöË¶ÅÂÖàÂØºÂÖ•ÔºåËÄåÁ¨¶Âè∑ÁöÑ‰ΩøÁî®ÂèØ‰ª•‰∏çÊòæÂºèÂØºÂÖ•ÔºåÂèØ‰ª•ÈÄöËøáÊ®°ÂùóÂëΩÂêçÁ©∫Èó¥ÂéªËÆøÈóÆ„ÄÇ‰∏ÄËà¨ÊòæÂºèÂØºÂÖ•Á¨¶Âè∑ÊòØ‰∏∫‰∫ÜÁÆÄÂåñË°®ËææÔºåÊØïÁ´üÂèØ‰ª•Â∞ëÂÜô‰∏Ä‰∏™ÂëΩÂêçÁ©∫Èó¥ÂâçÁºÄ„ÄÇ


Áõ∏ÂØπÂØºÂÖ•ËØ≠Ê≥ïÔºåÊØè‰∏™ÁÇπË°®Á§∫Áõ∏ÂØπÂæÄ‰∏ä‰∏Ä‰∏™Â±ÇÁ∫ßÔºåÈÄöËøáÂΩìÂâçÊ®°ÂùóÁöÑ __name__ Â±ûÊÄßÊù•Á°ÆÂÆöË¶ÅÂØºÂÖ•ÁöÑÊ®°ÂùóÂú®ÂåÖÂ±ÇÊ¨°ÁªìÊûÑ‰∏≠ÁöÑ‰ΩçÁΩÆÔºåÊ®°ÂùóÂÆö‰ΩçÁÆóÊ≥ïÊòØÂü∫‰∫é __name__ Âíå __package__ ÂèòÈáèÁöÑÂÄº„ÄÇ

‰ΩÜÊòØÂØπ‰∫éÈ°∂Â±ÇÊâßË°åÁöÑËÑöÊú¨Ôºå‰Ωú‰∏∫ÂÖ•Âè£ËÑöÊú¨ÊâßË°åÊó∂ÔºåÂÆÉ‰ª¨ÁöÑÈªòËÆ§ÂÄº‰∏∫ `__main__` Âíå `None`ÔºåÂπ∂‰∏îÊâãÂä®‰øÆÊîπÊó†ÊïàÔºåÂêåÊó∂Ôºå‰πü‰∏ç‰ºöÊâßË°åÂêåÁõÆÂΩï‰∏ãÁöÑ __init__.py„ÄÇ

ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåËøô‰∫õÂèòÈáè‰∏çÂåÖÂê´‰ªª‰ΩïÁà∂Ê®°Âùó„ÄÅÂåÖ‰ø°ÊÅØÔºåPython Ëß£ÈáäÂô®‰∏çÁü•ÈÅìÂ¶Ç‰ΩïÂÆö‰ΩçÁà∂Ê®°Âùó‰ΩçÁΩÆ‰ø°ÊÅØ„ÄÇÈ°∂Â±ÇÊâßË°åÁöÑËÑöÊú¨‰Ωú‰∏∫Êï¥‰∏™Á®ãÂ∫èÈ°πÁõÆÁöÑËµ∑ÂßãÊâßË°åÂÖ•Âè£ÔºåÂè™ËÉΩÈÄöËøáÁªùÂØπÂØºÂÖ•Ê®°ÂùóÔºåÂíåÈ°∂Â±ÇËÑöÊú¨ÂêåÂ±ÇÁöÑÂÖ∂ÂÆÉËÑöÊú¨‰πü‰∏ÄÊ†∑„ÄÇ

‰ΩøÁî®Áõ∏ÂØπÂØºÂÖ•ËØ≠Ê≥ïÂ∞Ü‰∫ßÁîüÂØºÂÖ•ÂºÇÂ∏∏ÔºåÂπ∂‰∏î‰∏çËÉΩ‰ΩøÁî®Â¶Ç‰∏ãËøôÊ†∑ÁöÑÊù°‰ª∂ËØ≠Âè•Êù•ÊéßÂà∂ÊòØÂê¶ËøõË°åÁõ∏ÂØπÂØºÂÖ•Ôºö

```py
if __name__=="__main__":
    import Here
else:
    from .Here import *
    # ImportError: attempted relative import with no known parent package
```

ÂØºÂÖ•Âπ∂ÊâìÂç∞ Python ÂÖ≥ÈîÆÂ≠óÁ¨¶Âè∑Ôºö

```py

'''
## import keyword lib & print Python keywords
Let study more lexical in Python
and multiple-line comment can type between """ and
'''
import keyword
print(keyword.kwlist);
```

import ËØ≠Âè•ÊâßË°åÂØºÂÖ•Êó∂ÔºåÊåâ‰ª•‰∏ãÁõÆÂΩïÊêúÁ¥¢Ê®°ÂùóÊîæÁΩÆÁöÑÊñá‰ª∂‰ΩçÁΩÆÔºö

- ÈªòËÆ§ÁöÑÊ®°ÂùóÊêúÁ¥¢ÁõÆÂΩï *site-packages* 
- ÂΩìÂâçÊñá‰ª∂ÁõÆÂΩï
- ÁéØÂ¢ÉÂèòÈáèÊåáÂÆöÁöÑÁõÆÂΩï PYTHONPATH
- sys.path ÊåáÂÆöÁöÑÁõÆÂΩï‰ΩçÁΩÆÔºåÂèØ‰ª•‰ΩøÁî® *python -m site* ÂëΩ‰ª§Êü•Áúã

Python Á®ãÂ∫èÂåÖÁöÑÊêúÁ¥¢Ë∑ØÂæÑÈªòËÆ§Âú®ÁéØÂ¢ÉÂèòÈáè‰∏≠ PYTHONPATH ÊåáÂÆöÔºå‰πüÂèØ‰ª•ÈÄöËøáËÑöÊú¨ËÆæÁΩÆ sys.path (list Á±ªÂûã) ‰ª•Ê∑ªÂä†ÂÖ∂ÂÆÉÊêúÁ¥¢Ë∑ØÂæÑ„ÄÇ

    sys.path.append(base_dir)

Ëé∑ÂèñÊ®°ÂùóÁõ∏ÂÖ≥ÁöÑÂÖ®Â±ÄÂèòÈáèÔºåÈô§‰∫Ü __doc__ÔºåËøô‰∫õÁâπÊÆäÂ±ûÊÄßÈÉΩÊòØÁî±Ê®°ÂùóÂä†ËΩΩÂô®ËÆæÁΩÆÁöÑÔºö

- `__name__` ÂΩìÂâçÊ®°ÂùóÂëΩÂêçÁ©∫Èó¥Ôºõ
- `__package__` ÂΩìÂâçÊ®°ÂùóÊâÄÂú®ÂåÖÂêçÔºõ
- `__file__` Ëé∑ÂèñÂΩìÂâçÊ®°ÂùóÁªùÂØπË∑ØÂæÑÔºõ
- `__loader__` Ëé∑ÂèñÂΩìÂâçÊ®°ÊâÄ‰ΩøÁî®ÁöÑÂä†ËΩΩÂô®ÔºåÂáÜÁ°ÆÂú∞ËØ¥ËøôÊòØË¢´Âä†ËΩΩÂô®Âä†ËΩΩÂπ∂ËÆæÁΩÆÁöÑÂ±ûÊÄßÂÄºÔºõ
- `__doc__`  Ëé∑ÂèñÁºñÂÜôÂú®Ê®°ÂùóÂ§¥ÈÉ®Ê®°ÂùóÊ≥®ÈáäÔºåfunction‚Äôs documentation stringÔºåËøô‰∫õÂÜÖÂÆπÂèØÁî®‰∫éËá™Âä®ÁîüÊàêÊñáÊ°£Ôºõ

Python ÂØºÂÖ•Âô®ÂçèËÆÆÊ∂âÂèä‰∏§‰∏™‰∏ªË¶ÅÂØπË±°Ôºö

- Finder Ê®°ÂùóÊü•ÊâæÂô®‰∏ªË¶ÅÊèê‰æõ‰∏Ä‰∏™Êü•ÊâæÊ®°ÂùóÁöÑÊñπÊ≥ï `finder.find_module(fullname, path=None)`„ÄÇ
- Loader Ê®°ÂùóÂä†ËΩΩÂô®‰∏ªË¶ÅÊèê‰æõ‰∏Ä‰∏™Âä†ËΩΩÊ®°ÂùóÁöÑÊñπÊ≥ï `loader.load_module(fullname)`„ÄÇ

Ê®°ÂùóÂä†ËΩΩÂô®ÊâßË°åÂä†ËΩΩÊó∂ÁöÑ‰∏Ä‰∏™‰ªªÂä°Â∞±ÊòØÁªôÊ®°ÂùóËÆæÁΩÆ‰∏Ä‰∫õÁâπÊÆäÂ±ûÊÄßÔºåÂÉèÊ®°ÂùóÂëΩ„ÄÅÂåÖÂêç„ÄÅÊñá‰ª∂ÁªùÂØπË∑ØÂæÑÔºåËøòÊúâ __path__ Ëøô‰∏™ÂèòÈáèÂè™‰ºöÂú®ÂåÖ‰∏≠ËÆæÁΩÆ„ÄÇ

Âä†ËΩΩÂô®ÁöÑ load_module() Êñá‰ª∂Âü∫Êú¨ÊâßË°åÊµÅÁ®ãÔºõÂÖàÂà§Êñ≠Â¶ÇÊûú sys.modules ‰∏≠Â≠òÂú® 'fullname' Ê®°ÂùóÔºåÂä†ËΩΩÂô®Â∞±‰ΩøÁî®Ëøô‰∏™Ê®°Âùó„ÄÇÂê¶ÂàôÔºåreload() ÊñπÊ≥ïÂ∞±‰∏çËÉΩÊ≠£Á°ÆÊâßË°å„ÄÇÂ¶ÇÊûú‰∏çÂ≠òÂú®Ëøô‰∏™Ê®°ÂùóÔºåÂ∞±ÂøÖÈúÄÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÊ®°ÂùóÂØπË±°Âπ∂Ê∑ªÂä†Âà∞ `sys.modules` Â≠óÂÖ∏‰∏≠„ÄÇ

ËØ∑Ê≥®ÊÑèÔºåÂä†ËΩΩÁ®ãÂ∫èÊâßË°åÊ®°Âùó‰ª£Á†Å‰πãÂâçÔºåÊ®°ÂùóÂØπË±°ÂøÖÈ°ªÂú® `sys.modules`„ÄÇËøô‰∏ÄÁÇπËá≥ÂÖ≥ÈáçË¶ÅÔºåÂõ†‰∏∫Ê®°Âùó‰ª£Á†ÅÂèØËÉΩÔºàÁõ¥Êé•ÊàñÈó¥Êé•ÔºâÂØºÂÖ•Ëá™Ë∫´„ÄÇÈ¢ÑÂÖàÂ∞ÜÂÖ∂Ê∑ªÂä†Âà∞ `sys.modules` ‰∏≠ÂèØ‰ª•Èò≤Ê≠¢Âú®ÊúÄÂùèÁöÑÊÉÖÂÜµ‰∏ãÂá∫Áé∞Êó†ËæπÁïåÈÄíÂΩíÔºåË∑üÊ≠ªÂæ™ÁéØ‰∏ÄÊ†∑ÔºåÂú®ÊúÄÂ•ΩÁöÑÊÉÖÂÜµ‰∏ãÂèØ‰ª•Èò≤Ê≠¢Â§öÊ¨°Âä†ËΩΩ„ÄÇ

Â¶ÇÊûúÂä†ËΩΩÂ§±Ë¥•ÔºåÂ∞±Ë¶Å‰ªé sys.modules ÁßªÈô§ÂÖàÂâçÊ∑ªÂä†ÁöÑÊ®°ÂùóÂØπË±°„ÄÇ

Â¶ÇÊûúÊàêÂäüÂä†ËΩΩ Python Ê®°ÂùóÔºå‰∏çÂåÖÊã¨ÂÜÖÁΩÆÊ®°ÂùóÊàñÂä®ÊÄÅÊâ©Â±ïÂ∫ìÊ®°ÂùóÔºåÂ∞±ÈúÄË¶ÅÂú®Ê®°ÂùóÁöÑÂÖ®Â±ÄÂëΩÂêçÁ©∫Èó¥‰∏äÔºåÂç≥Âú® module.__dict__ ‰∏äÊâßË°åÊ®°Âùó‰ª£Á†Å„ÄÇ


Ê®°ÂùóÂØºÂÖ•ËøáÁ®ã‰∏≠Êúâ‰∏§ÁßçÈí©Â≠êÔºö

- Meta hooks Âú®ÂºÄÂßãÂ§ÑÁêÜÂØºÂÖ•Êó∂ÊâßË°åÔºåÊâÄ‰ª•ÂèØ‰ª•Ë¶ÜÁõñ sys.path„ÄÅfrozen modules ÁîöËá≥ÊòØÂÜÖÁΩÆÊ®°ÂùóÁöÑÂ§ÑÁêÜËøáÁ®ã„ÄÇÂ∞Ü Finder ÂØπË±°Ê∑ªÂä† `sys.meta_path` ËøõË°åÊ≥®ÂÜå„ÄÇ
- Path hooks Âú®ÈÉ®ÂàÜ sys.path (or package.__path__) Â§ÑÁêÜ‰∏≠Ë∞ÉÁî®ÔºåÈÄöËøáÊ∑ªÂä† importer factory Âà∞ `sys.path_hooks` ËøõË°åÊ≥®ÂÜåÔºåËøô‰∏™ÂàóË°®‰øùÂ≠òÂèØÂõûË∞ÉÂØπË±°„ÄÇ

ÂèØË∞ÉÁî®ÂØπË±°Êé•Êî∂‰∏Ä‰∏™ÂèÇÊï∞ÔºåÂç≥Ë∑ØÂæÑÈ°πÔºåÂ¶ÇÊûúË∞ÉÁî®ÂØπË±°Êó†Ê≥ïÂ§ÑÁêÜË∑ØÂæÑÈ°πÔºåÂàôÂøÖÈ°ªÂºïÂèë `ImportError`„ÄÇÂ¶ÇÊûúÂèØ‰ª•Â§ÑÁêÜË∑ØÂæÑÈ°πÔºåÂàôÂøÖÈ°ªËøîÂõû importer ÂØπË±°„ÄÇËØ∑Ê≥®ÊÑèÔºåÂ¶ÇÊûúËøîÂõûÁâπÂÆöÁöÑ `sys.path` Êù°ÁõÆÔºåËÄåÂÜÖÁΩÆÂØºÂÖ•Êú∫Âà∂ÂêéÁª≠Â∞Ü‰∏çÂÜçÊù•Â§ÑÁêÜËØ•Êù°ÁõÆÔºåÂç≥‰ΩøÂØºÂÖ•Âô®ÂØπË±°ÂêéÁª≠Êó†Ê≥ïÊâæÂà∞ÁâπÂÆöÊ®°Âùó„ÄÇÂèØË∞ÉÂõûÂØπË±°ÈÄöÂ∏∏Ë¢´Áß∞‰∏∫ Import HookÔºåËá™Ê≠§ÔºåÁ±ªÂûãÁöÑ __init__() ÊñπÊ≥ïË¢´Ë∞ÉÁî®„ÄÇÂõ†‰∏∫ __init__() ÊñπÊ≥ïÂèØ‰ª•‰∏çËøîÂõû‰ªª‰Ωï‰∏úË•øÔºåËøô‰πüÊòØ Import Hook Â∫îËØ•ÂºïÂèë ImportError ÁöÑÂéüÂõ†„ÄÇÂú®Êñ∞Ê†∑ÂºèÁ±ª‰∏≠Ôºå‰ΩøÁî® __new__()  ÊñπÊ≥ïÂèØËÉΩ‰ºöÂá∫Áé∞ËøôÁßçÊÉÖÂÜµ„ÄÇ

Path Hook Ê£ÄÊü•ÂêéÁöÑÁªìÊûÑ‰ºöÁºìÂ≠òÂà∞ sys.path_importer_cache Â≠óÂÖ∏‰∏≠ÔºåÁî®Ë∑ØÂæÑÊò†Â∞ÑÂØºÂÖ•Âô®ÂØπË±°„ÄÇÁºìÂ≠ò‰ºöÂÖà‰∫é sys.path_hooks Ë¢´Êâ´ÊèèÔºåÂ¶ÇÊûúÈúÄË¶ÅÂº∫Âà∂ÈáçÊâ´ sys.path_hooksÔºåÂèØ‰ª•ÊâãÂä®Ê∏ÖÈô§ sys.path_importer_cache ‰∏≠ÁöÑËÆ∞ÂΩï„ÄÇ

ÊúüÈó¥Áî®Âà∞ÁöÑÂ±ûÊÄßÊï∞ÊçÆÁ±ªÂûãÔºö

- sys.path `<class 'list'>`
- sys.meta_path  `<class 'list'>`
- sys.path_hooks `<class 'list'>`
- sys.path_importer_cache  `<class 'dict'>`


Ê®°ÂùóÂêçÈ≠îÊúØÂèòÈáè `__name__` ‰ºöÊ†πÊçÆËøêË°åÊñπÂºèÊúâÊâÄ‰∏çÂêåÔºåPython ÊâßË°åËÑöÊú¨Êó∂Ôºå‰ºöËá™Âä®ÂàõÂª∫ *__main__* Ê®°ÂùóÔºåÊâÄ‰ª•ÈÄöËøáÂÆÉÂèØ‰ª•Âà§Êñ≠ÊòØ‰∏çÊòØÁõ¥Êé•ËøêË°åËß£ÊûêËÑöÊú¨Ôºö

‰ª•‰∏ãÊºîÁ§∫‰∏Ä‰∏™‰∫åÁ∫ßÁõÆÂΩïÊ®°ÂùóÂåÖÁöÑÁªÑÁªáÔºåÈ¶ñÂÖàÈÄöËøáÁ®ãÂ∫èËæìÂá∫‰∫ÜËß£ÂÜ≥Ê®°ÂùóÁõÆÂΩïÁªìÊûÑÔºö

    üìÇ ~/
    ‚îú‚îÄ‚îÄ üìÇ pak_root
    ‚îÇ  ‚îú‚îÄ‚îÄ üêç __init__.py
    ‚îÇ  ‚îú‚îÄ‚îÄ üêç Roo_Module.py
    ‚îÇ  ‚îú‚îÄ‚îÄ üêç Here.py
    ‚îÇ  ‚îî‚îÄ‚îÄ üìÇ pak_sub
    ‚îÇ       ‚îú‚îÄ‚îÄ üêç __init__.py
    ‚îÇ       ‚îú‚îÄ‚îÄ üêç Sub_Module.py
    ‚îÇ       ‚îî‚îÄ‚îÄ üêç Here.py

Ê≥®ÊÑè CodeGen ÊèêÊèêÁ§∫ÁöÑÊòØÁîüÊàêÁöÑÊñá‰ª∂ÂèäÂÖ∂Ë∑ØÂæÑÔºö

    CodeGen = "mod_root/Here.py"
    Path    = None
    Script  = /coding/pak_root/Here.py
    Module  = pak_root.Here
    Package = pak_root <Not a package>

    CodeGen = "pak_root/__init__.py"
    Path    = __path__ -> ['/coding/pak_root']
    Script  = /coding/pak_root/__init__.py
    Module  = pak_root
    Package = pak_root <A Package (__path__)>

    CodeGen = "pak_root/pak_sub/Here.py"
    Path    = None
    Script  = /coding/pak_root/pak_sub/Here.py
    Module  = pak_root.pak_sub.Here
    Package = pak_root.pak_sub <Not a package>

    CodeGen = "pak_root/pak_sub/__init__.py"
    Path    = __path__ -> ['/coding/pak_root/pak_sub']
    Script  = /coding/pak_root/pak_sub/__init__.py
    Module  = pak_root.pak_sub
    Package = pak_root.pak_sub <A Package (__path__)>

    CodeGen = "pak_root/pak_sub/SubModule.py"
    Path    = None
    Script  = /coding/pak_root/pak_sub/SubModule.py
    Module  = pak_root.pak_sub.SubModule
    Package = pak_root.pak_sub <Not a package>

    CodeGen = "pak_root/RootModule.py"
    Path    = None
    Script  = /coding/pak_root/RootModule.py
    Module  = pak_root.RootModule
    Package = pak_root <Not a package>

    Module   = __main__
    Package  = None <Not a package>
    Path     = None
    Doc      = function's documentation string
    sys.path = ['/coding', 'PY310/PY310.zip', 'PY310/lib', 'PY310', 'PY310/lib/site-packages']
    VAR =  global variable:  VAR @:/coding/pak_root/pak_sub/SubModule.py
    var =  global variable:  var @:/coding/pak_root/pak_sub/SubModule.py
    _var = <private symbol> private variable: _var @:/coding/pak_root/RootModule.py
    pak_root.pak_sub.HereFun is pak_root.pak_sub.SubModule.HereFun? True
    pak_root.HereFun is pak_root.RootModule.HereFun? True
    pak_root.HereFun is pak_root.pak_sub.HereFun? False
    
Â¶ÇÊûú __init__.py Êñá‰ª∂Ê≤°ÊúâÂØºÂÖ•ÂÖ∂ÂÆÉÂÜÖÂÆπÔºåÂú®ÂØºÂÖ•Ëøô‰∏™ÂåÖÊó∂ÔºåÂè™‰ºöÊâßË°åËøô‰∏™Ê®°ÂùóÁöÑÈªòËÆ§ÂàùÂßãÂåñËÑöÊú¨„ÄÇÂú® __init__.py ÂØºÂÖ•‰∫ÜÂÖ∂ÂÆÉÊ®°ÂùóÁöÑÁ¨¶Âè∑ÔºåÈÇ£‰πàËøô‰∫õË¢´ÂØºÂÖ•ÁöÑÂÖ®Â±ÄÁ¨¶Âè∑ÂÆÉ‰ª¨Â∞±ÂèØ‰ª•Ë¢´ÂÖ∂ÂÆÉÊ®°ÂùóÂØºÂÖ•‰ΩøÁî®„ÄÇ

Â¶ÇÊûúÂ≠òÂú® __init__.py Ëøô‰∏™ÈªòËÆ§Ê®°ÂùóÊñá‰ª∂ÔºåÂØºÂÖ•Ëøô‰∏™Ê®°ÂùóÁõÆÂΩï‰∏≠‰ªª‰ΩïÊ®°ÂùóÔºåÂåÖÊã¨Â≠êÊ®°ÂùóÔºåÂÆÉÈáåÁöÑËÑöÊú¨‰ª£Á†ÅÈÉΩ‰ºöË¢´ÊâßË°å„ÄÇ‰ΩÜÊòØÔºåÂÆÉÈáåÈù¢ÂÆö‰πâÁöÑÁßÅÊúâÁ¨¶Âè∑ÈúÄË¶Å‰ΩøÁî® import ËøõË°åÊòæÂºèÂØºÂÖ•ÔºåËÄå‰∏çËÉΩÈÄöËøá * Ëá™Âä®ÂØºÂÖ•ÔºåËøôÊ†∑Êâç‰ºöÂ∞ÜÂÖ∂ÂÆö‰πâÁöÑÁ¨¶Âè∑ÁªëÂÆöÂà∞ÂèØÁî®ÁöÑÂëΩÂêçÁ©∫Èó¥„ÄÇ

Python Ê≤°ÊúâÂÉè C++ ÈÇ£Ê†∑‰ΩøÁî® public„ÄÅprotected„ÄÅprivate ËÆøÈóÆÊéßÂà∂‰øÆÈ•∞Á¨¶Âè∑ÔºåËÄåÊòØÈÄöËøáÁ¨¶Âè∑ÂëΩÂêçÊù•ÈöêÂê´ËÆøÈóÆÊéßÂà∂Ôºå‰∏ãÂàíÁ∫øË°®Á§∫ÂÜÖÈÉ®Á¨¶Âè∑Ôºå‰∏çÂèØË¢´ * Ëá™Âä®ÂØºÂÖ•„ÄÇÂ¶ÇÊûúÂ§ö‰∏™Ê®°ÂùóÂ≠òÂú®ÂêåÂêçÁ¨¶Âè∑ÔºåÈÇ£‰πàÊúÄÂêé‰ΩøÁî® * ÂØºÂÖ•ÁöÑÂ∞±‰ºöËá™Âä®Ë¶ÜÁõñÂâçÈù¢ÂØºÂÖ•ÁöÑÁ¨¶Âè∑„ÄÇ


## ==‚ö° RootModule SubModule Á®ãÂ∫èÁªìÊûÑÁîüÊàêËÑöÊú¨

ÂåÖ‰∏éÊ®°ÂùóÂØºÂÖ•Á§∫ËåÉÁ®ãÂ∫èÁõÆÂΩïÁªìÊûÑÂèä‰ª£Á†ÅÊñá‰ª∂Ëá™Âä®ÁîüÊàêÔºö

```py
'''function's documentation string'''
import os, sys, importlib

def writeCode(lib_file, root):

    init_file = "__init__"
    here_file = "Here"

    def codegen(lib_file, dir):
        fun = lib_file + "Fun"
        code = f"""
if __name__=="__main__":
    import Here
else:
    pass
    from .Here import *

VAR  = " global variable:  VAR @:"+__file__
var  = " global variable:  var @:"+__file__
_var = "private variable: _var @:"+__file__
# __all__ = ["{fun}", "VAR", "var", "_var"]

def {fun}():
    print("{fun} @ {dir}{lib_file}.py")

go = globals()
path = "__path__ -> " + str(go['__path__']) if '__path__' in go else None
ispackage = "<Not a package>" if not path else "<A Package (__path__)>" 
print(f'''
    CodeGen = "{dir}{lib_file}.py"
    Path    = {{path}}
    Script  = {{__file__}}
    Module  = {{__name__}}
    Package = {{__package__}} {{ ispackage }}''')
"""
        return code

    init_code = codegen(init_file, root)
    lib_code  = codegen(lib_file , root)
    here_code = codegen(here_file, root)

    if not os.path.exists(root):
        os.mkdir(root)
    with open(f"{root}{init_file}.py", "w") as f: print(init_code, file=f)
    with open(f"{root}{lib_file}.py",  "w") as f: print(lib_code,  file=f)
    with open(f"{root}{here_file}.py", "w") as f: print(here_code, file=f)
    return print(f"writeCode done with {root}")
    print(f"""
============================================
# Python Code write to {root:20}#
============================================

==============={init_file}.py===============
{init_code}
==============={lib_file}.py================
{lib_code}
==============={here_file}.py===============
{here_code}
""")

if 1 or not os.path.exists("pkg_root") or not os.path.exists("pkg_root/pkg_sub/"):
    writeCode("RootModule", "pkg_root/")
    writeCode("SubModule",  "pkg_root/pkg_sub/")

if __name__=="__main__":

    # This two import statements just import __init__.py
    import pkg_root
    from pkg_root import *
    from pkg_root.pkg_sub import *
    from pkg_root.pkg_sub.SubModule import *
    from pkg_root.RootModule import VAR as RVAR, var as Rvar, _var
    from pkg_root.RootModule import RootModuleFun

    # import pkg_root
    # AttributeError: module 'pkg_root' has no attribute 'RootModule'
    import pkg_root.RootModule
    # pkg_root.RootModule.RootModuleFun()
    # pkg_root.HereFun()
    # AttributeError: module 'pkg_root' has no attribute 'RootModuleFun'. Did you mean: 'RootModule'?
    # pkg_root.RootModuleFun()

    go = globals()
    path = "path -> " + str(go['__path__']) if '__path__' in go else None
    ispackage = "<Not a package>" if not path else "<A Package>" 

    print(f'''
    Module   = {__name__}
    Package  = {__package__} {ispackage}
    Path     = {path}
    Doc      = {__doc__}
    sys.path = {sys.path}
    sys.argv = {sys.argv}
    VAR = {VAR}
    var = {var}
   _var = <private symbol> {_var}
    pkg_root.pkg_sub.HereFun is pkg_root.pkg_sub.SubModule.HereFun? {pkg_root.pkg_sub.HereFun is pkg_root.pkg_sub.SubModule.HereFun}
    pkg_root.HereFun is pkg_root.RootModule.HereFun? {pkg_root.HereFun is pkg_root.RootModule.HereFun}
    pkg_root.HereFun is pkg_root.pkg_sub.HereFun? {pkg_root.HereFun is pkg_root.pkg_sub.HereFun}
    ''')
```

‰Ωú‰∏∫Âè¶‰∏Ä‰∏™ÈÄâÊã©Ôºå‰ΩøÁî® Powershell ËÑöÊú¨Êù•ÁîüÊàêËÑöÊú¨Êñá‰ª∂ÂèäÁõÆÂΩïÁªìÊûÑÔºö

```sh
chcp 65001

Function writeCode 
{
    Param([String]$lib_file, [String]$root)

    $init_file = "__init__"
    $here_file = "Here"

    Function codegen
    {
        param([String]$dir, [String]$lib_file)
        $fun = $lib_file + "Fun"
        $code = @"
print("$dir$lib_file.py")

VAR  = " global variable:  VAR @"+__name__+":"+__file__
var  = " global variable:  var @"+__name__+":"+__file__
_var = "private variable: _var @"+__name__+":"+__file__

def $fun():
    print("$fun @ $dir$lib_file.py")

"@
        return $code
    }

    $init_code = codegen $root $init_file
    $lib_code  = codegen $root $lib_file
    $here_code = codegen $root $here_file

    if(!(Test-Path $root)){ mkdir $root }
    # concatenate string syntax: $root+$init_file 
    out-file -InputObject $here_code -FilePath $root$here_file".py"  -Encoding UTF8
    out-file -InputObject $init_code -FilePath $root$init_file".py" -Encoding UTF8
    out-file -InputObject $lib_code  -FilePath  $root$lib_file".py"  -Encoding UTF8
    # Defulat Encoding UTF-16 with BOM may cause:
    # ValueError: source code string cannot contain null bytes

    echo @"
Python Code write to $root
=======================================

============$init_file.py==============
$init_code
============$lib_file.py===============
$lib_code
============$here_file.py==============
$here_code
"@

}

writeCode "RootModule" "pak_root/"
writeCode "SubModule"  "pak_root/pak_sub/"


# $Script:thisDir = Split-Path $MyInvocation.MyCommand.Path -Parent
# Error: ParameterArgumentValidationError
# out-file -InputObject $init_code + $dir + $init_file -FilePath $dir+$init_file
# OK
# out-file -InputObject ($init_code + $dir + $init_file) -FilePath $dir+$init_file
```




## ==‚ö° scope global & nonlocal ‰ΩúÁî®ÂüüËß£Êûê
- The Python Language Reference ¬ª 4. Execution model 4.2. Naming and binding 4.2.2. Resolution of names

```py
def setVariable():
    global var
    var = "var"

def main():
    print({"var":var}) # NameError: name 'var' is not defined
    setVariable()
    print({"var":var})
```

global Â£∞ÊòéÂèØ‰ª•ËÆøÈóÆÂ§ñÈÉ®‰ΩúÁî®ÂüüÂèòÈáèÔºåÊåâÂáΩÊï∞ÂµåÂ•óÁªìÊûÑ‰∏ÄÂ±Ç‰∏ÄÂ±ÇÂõûÊ∫Ø„ÄÇnonlocal Â£∞ÊòéÂè™ËÉΩËÆøÈóÆÂáΩÊï∞Â§ñÂ±ÇÂèòÈáèÔºå‰∏çËøõË°åÂõûÊ∫Ø„ÄÇ

```py
g007 = l007 = 9         # define global g007 and l007

def scope_test():
    g007 = l007 = 8     # define local g007 and l007, and l007 as nonlocal of closure()
    def closure():      # define local function
        global g007     # define global variable
        nonlocal l007   # define nonlocal variable
        g007 = l007 = 7 # modify global g007 and nonlocal l007
    closure()
    print("inner g007 = %d  l007 = %d" % (g007, l007)) # print local g007 and l007

scope_test()
print("final g007 = %d  l007 = %d" % (g007, l007)) # print global g007 and l007

# inner g007 = 8  l007 = 7
# final g007 = 7  l007 = 9
```

Â∞èÁªìÔºö

1. global ÂèòÈáèÊü•ÊâæÈ°∫Â∫èÔºö Top Level -> Ê®°ÂùóÂëΩÂêçÁ©∫Èó¥ -> Python ÂÜÖÁΩÆ‰ΩúÁî®ÂüüÔºõ
2. Âè™ÊúâÊ®°Âùó/Á±ª/ÂáΩÊï∞ËÉΩÂºïÂÖ•Êñ∞‰ΩúÁî®ÂüüÔºõ
3. ÂÜÖÈÉ®‰ΩúÁî®ÂüüÂ£∞ÊòéÂèòÈáè‰ºöË¶ÜÁõñÂ§ñÈÉ®ÂèòÈáèÔºå‰∏çÂ£∞ÊòéÁõ¥Êé•Áî®Â∞±ÈÄêÁ∫ßÂêë‰∏äÊêúÁ¥¢ÂèòÈáèÂèòÈáèÔºõ
4. nonlocal ÂèòÈáèÂè™Êü•ÊâæÂ§ñ‰∏ÄÂ±Ç‰ΩúÁî®Âüü„ÄÇ



## ==‚ö° Scopes and Namespaces
- The Python Tutorial 9.2.1. Scopes and Namespaces Example

This is an example demonstrating how to reference the different scopes and namespaces, and how global and nonlocal affect variable binding:

```py
def scope_test():
    """A simple scope test example class"""
    def do_local():
        spam = "local spam"

    def do_nonlocal():
        nonlocal spam
        spam = "nonlocal spam"

    def do_global():
        global spam
        spam = "global spam"

    spam = "test spam"
    do_local()
    print("After local assignment:", spam)
    do_nonlocal()
    print("After nonlocal assignment:", spam)
    do_global()
    print("After global assignment:", spam)

scope_test()
print("In global scope:", spam)
```

The output of the example code is:

    After local assignment: test spam
    After nonlocal assignment: nonlocal spam
    After global assignment: nonlocal spam
    In global scope: global spam

Note how the local assignment (which is default) didn‚Äôt change scope_test‚Äôs binding of spam. The nonlocal assignment changed scope_test‚Äôs binding of spam, and the global assignment changed the module-level binding.

You can also see that there was no previous binding for spam before the global assignment.




## ==‚ö° Anaconda
[Anaconda‰∏ãËΩΩ](https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/)

Anaconda ÊòØ‰∏Ä‰∏™ÂºÄÊ∫êÁöÑÂåÖ„ÄÅÁéØÂ¢ÉÁÆ°ÁêÜÂô®ÔºåÂèØ‰ª•Áî®‰∫éÂú®Âêå‰∏Ä‰∏™Êú∫Âô®‰∏äÂÆâË£Ö‰∏çÂêåÁâàÊú¨ÁöÑËΩØ‰ª∂ÂåÖÂèäÂÖ∂‰æùËµñÔºåÂπ∂ËÉΩÂ§üÂú®‰∏çÂêåÁöÑÁéØÂ¢É‰πãÈó¥ÂàáÊç¢„ÄÇAnaconda ÊåáÁöÑÊòØ‰∏Ä‰∏™ÂºÄÊ∫êÁöÑ Python ÂèëË°åÁâàÊú¨ÔºåÂÖ∂ÂåÖÂê´‰∫Ü conda„ÄÅPython Á≠â180Â§ö‰∏™ÁßëÂ≠¶ÂåÖÂèäÂÖ∂‰æùËµñÈ°π„ÄÇ Âõ†‰∏∫ÂåÖÂê´‰∫ÜÂ§ßÈáèÁöÑÁßëÂ≠¶ÂåÖÔºåAnaconda ÁöÑ‰∏ãËΩΩÊñá‰ª∂ÊØîËæÉÂ§ßÔºàÁ∫¶ 531 MBÔºâÔºåÂ¶ÇÊûúÂè™ÈúÄË¶ÅÊüê‰∫õÂåÖÔºåÊàñËÄÖÈúÄË¶ÅËäÇÁúÅÂ∏¶ÂÆΩÊàñÂ≠òÂÇ®Á©∫Èó¥Ôºå‰πüÂèØ‰ª•‰ΩøÁî®MinicondaËøô‰∏™ËæÉÂ∞èÁöÑÂèëË°åÁâàÔºå‰ªÖÂåÖÂê´condaÂíå Python„ÄÇ

Êàë‰ª¨Â∏∏Â∏∏‰ºöÈÅáÂà∞ËøôÊ†∑ÁöÑÊÉÖÂÜµÔºåÊ≠£Âú®ÂÅöÁöÑÈ°πÁõÆAÂíåÈ°πÁõÆBÂàÜÂà´Âü∫‰∫épython2Âíåpython3ÔºåËÄåÁ¨¨ÁîµËÑëÂè™ËÉΩÂÆâË£Ö‰∏Ä‰∏™ÁéØÂ¢ÉÔºåËøô‰∏™Êó∂ÂÄôAnacondaÂ∞±Ê¥æ‰∏ä‰∫ÜÁî®Âú∫ÔºåÂÆÉÂèØ‰ª•ÂàõÂª∫Â§ö‰∏™‰∫í‰∏çÂπ≤Êâ∞ÁöÑÁéØÂ¢ÉÔºåÂàÜÂà´ËøêË°å‰∏çÂêåÁâàÊú¨ÁöÑËΩØ‰ª∂ÂåÖÔºå‰ª•ËææÂà∞ÂÖºÂÆπÁöÑÁõÆÁöÑ„ÄÇ

Anaconda ÈÄöËøáÁÆ°ÁêÜÂ∑•ÂÖ∑ÂåÖ„ÄÅÂºÄÂèëÁéØÂ¢É„ÄÅPythonÁâàÊú¨ÔºåÂ§ßÂ§ßÁÆÄÂåñ‰∫Ü‰Ω†ÁöÑÂ∑•‰ΩúÊµÅÁ®ã„ÄÇ‰∏ç‰ªÖÂèØ‰ª•Êñπ‰æøÂú∞ÂÆâË£Ö„ÄÅÊõ¥Êñ∞„ÄÅÂç∏ËΩΩÂ∑•ÂÖ∑ÂåÖÔºåËÄå‰∏îÂÆâË£ÖÊó∂ËÉΩËá™Âä®ÂÆâË£ÖÁõ∏Â∫îÁöÑ‰æùËµñÂåÖÔºåÂêåÊó∂ËøòËÉΩ‰ΩøÁî®‰∏çÂêåÁöÑËôöÊãüÁéØÂ¢ÉÈöîÁ¶ª‰∏çÂêåË¶ÅÊ±ÇÁöÑÈ°πÁõÆ„ÄÇ

ÊúâÊó∂‰∏ãËΩΩÁâπÂà´ÊÖ¢ÔºåÊòØÂõ†‰∏∫AnacondaÈªòËÆ§ÁöÑÈïúÂÉèÊ∫êÂú®ÂõΩÂ§ñÔºåÈùûÂ∏∏‰∏çÁ®≥ÂÆö„ÄÇËøôÈáåÂèØ‰ª•Êç¢ÊàêÊ∏ÖÂçéÁöÑÈïúÂÉèÊ∫êÔºå‰∏ãËΩΩÈÄüÂ∫¶ÂèØ‰ª•ÊèêÂçáÂ∞ÜËøë10ÂÄç„ÄÇ

Âú® conda ÁöÑËÆæËÆ°‰∏≠ÔºåÁõÆÂΩï pkgs ÊòØ‰∏ãËΩΩ„ÄÅÂ≠òÊîæÁºìÂ≠òÔºå‰ª•ÂèäÊèêÂèñ‰∏ãËΩΩÂåÖÁöÑÂú∞Êñπ„ÄÇÂêåÊó∂Ôºåanaconda ‰∏ÄËµ∑Êê∫Â∏¶ÁöÑÂåÖ‰πü‰ºöÊîæÂú®ËøôÈáå„ÄÇ

ÂÆÉÊúâ‰∏Ä‰∏™ÈùûÂ∏∏ÂÖ≥ÈîÆÁöÑ‰ΩúÁî®ÔºöÊàë‰ª¨Âú®ÊûÑÂª∫‰∏Ä‰∫õenvsÁöÑÊó∂ÂÄôÔºåÂØπ‰∏Ä‰∫õÂåÖÁöÑ‰æùËµñ‰ºöÈÄöËøáÁ°¨ÁõòÈìæÊé•ÈìæÊé•Âà∞ pkgs ÁõÆÂΩïÔºåËøôÊ†∑ËôöÊãüÁéØÂ¢ÉÁîüÊàêÁöÑÈÄüÂ∫¶Â§ßÂ§ßÂä†Âø´ÔºåÂç†Áî®Á©∫Èó¥Â∞±Â§ßÂ§ßÂáèÂ∞è‰∫ÜÔºÅÔºÅÔºÅ

Ê∏ÖÁêÜ pkgs ÁöÑÊñπÂºèÔºå‰∏ÄÊòØÁõ¥Êé•Âà†Èô§ pkgsÔºåÂ§ßÂ§ßËäÇÁúÅÁ©∫Èó¥„ÄÇ‰ΩÜÂùèÂ§ÑÂ∞±ÊòØÂΩìÂàõÂª∫Êñ∞ÁéØÂ¢ÉÊó∂ÔºåÁé∞ÊúâÂåÖÔºàÂú®ÂÖ∂‰ªñÁéØÂ¢É‰∏≠ÔºâÁöÑÂÖ±‰∫´Êñá‰ª∂Â∞Ü‰∏çÂÜçÂÖ±‰∫´Á°¨ÈìæÊé•„ÄÇÂÆòÊñπÊé®ËçêÁöÑÊñπÂºèÊõ¥Âä†ÂÆâÂÖ®ÔºåÈÄöËøáÂëΩ‰ª§Êù•Âà†Èô§Ôºö

    conda clean -h

Ê∏ÖÁêÜÁöÑÊñπÂºèÔºåtarballs Â∞±ÊòØÊâìÂåÖÂ§á‰ªΩÊñá‰ª∂Ôºö

    -a, --all   Remove index cache, lock files, unused cache packages, and tarballs.
    -i, --index-cache       Remove index cache.
    -l, --lock  Remove all conda lock files.
    -p, --packages  Remove unused packages from writable package caches. WARNING: This does not check for packages installed using symlinks back to the package cache.
    -t, --tarballs  Remove cached package tarballs.


ÂÆâË£ÖÔºåÈ¶ñÂÖàÂª∫Á´ãÈÖçÁΩÆÊñá‰ª∂Ôºö

windows‰∏ãÁöÑË∑ØÂæÑ‰∏∫ `C:\Users\xxx\pip\pip.ini`
linux‰∏ãÁöÑË∑ØÂæÑ‰∏∫ `~/.pip/pip.conf`

    [global]
    index-url = https://pypi.tuna.tsinghua.edu.cn/simple
    [install]
    trusted-host=pypi.tuna.tsinghua.edu.cn

ÁÑ∂ÂêéÊâßË°å conda ÂëΩ‰ª§ËÆæÁΩÆÂÆâË£ÖÊ∫êÈïúÂÉèÂú∞ÂùÄÔºåshow_channel_urls ÂèØ‰ª•Âú®ÂÆâË£ÖÊó∂ÊòæÁ§∫Áõ∏Â∫îÁöÑÂÆâË£ÖÊ∫êÂú∞ÂùÄÔºö

    conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
    conda config --set show_channel_urls yes

ÈïúÂÉèÊ∫êÁöÑÂàáÊç¢ÂÆåÊàêÔºåÊ£ÄÊµãÂëΩ‰ª§Ë°å conda infoÔºåÂÖ∂ÂÆÉÂëΩ‰ª§ÂèÇËÄÉÔºö

    activate                             // ÂàáÊç¢Âà∞ÈªòËÆ§baseÁéØÂ¢É
    activate py3                         // ÂàáÊç¢Âà∞py3ÁéØÂ¢É
    conda create -n py3 python=3         // ÂàõÂª∫‰∏Ä‰∏™Âêç‰∏∫py3ÁöÑÁéØÂ¢ÉÂπ∂ÊåáÂÆöpythonÁâàÊú¨‰∏∫3(ÁöÑÊúÄÊñ∞ÁâàÊú¨)
    conda list                           // ÂàóÂá∫ÂΩìÂâçÁéØÂ¢ÉÁöÑÊâÄÊúâÂåÖ
    conda env list                       // ÂàóÂá∫condaÁÆ°ÁêÜÁöÑÊâÄÊúâÁéØÂ¢É
    conda install requests               // ÂÆâË£ÖrequestsÂåÖ
    conda remove requests                // Âç∏ËΩΩrequetsÂåÖ
    conda remove -n py3 --all            // Âà†Èô§learnÁéØÂ¢ÉÂèä‰∏ãÂ±ûÊâÄÊúâÂåÖ
    conda update requests                // Êõ¥Êñ∞requestsÂåÖ
    conda env export > environment.yaml  // ÂØºÂá∫ÂΩìÂâçÁéØÂ¢ÉÁöÑÂåÖ‰ø°ÊÅØ
    conda env create -f environment.yaml // Áî®ÈÖçÁΩÆÊñá‰ª∂ÂàõÂª∫Êñ∞ÁöÑËôöÊãüÁéØÂ¢É


Windows ‰∏ãÈÄöËøá Anaconda ÂÆâË£Ö tensorflow ÁöÑÊñπÊ≥ïÔºå

AnacondaÁâàÊú¨‰∏∫Anaconda 4.4.0ÔºåÂØπÂ∫îÁöÑpythonÁâàÊú¨‰∏∫3.6ÔºåÊÉ≥Áõ¥Êé•‰ΩøÁî®python35ÁâàÁöÑAnacondaÔºåÂèØ‰ª•ÂéªÊ∏ÖÂçéÈïúÂÉèÔºåÊâæÂØπÂ∫îÁöÑAnaconda4.2.0ÁöÑÁâàÊú¨ËøõË°å‰∏ãËΩΩ„ÄÇ 

ÂëΩ‰ª§È™åËØÅÂÆâË£Ö

    >conda --version

ÈÖçÁΩÆ python 3.5

ÂâçÈù¢ÊèêÂà∞‰∫ÜÔºåÊàë‰ª¨ÊâÄ‰∏ãËΩΩÁöÑAnacondaÁöÑÈªòËÆ§ÁéØÂ¢ÉÊòØpython3.6ÁöÑÔºåËÄåtensorflowÁõÆÂâçÊîØÊåÅÁöÑÊòØpython3.5ÁöÑÔºåÊâÄ‰ª•Êàë‰ª¨Â∞±ÈúÄË¶ÅÂú®Anaconda‰∏äÈÖçÁΩÆpython3.5ÁöÑÁéØÂ¢É„ÄÇ 
Âú®cmd‰∏≠ËæìÂÖ•>conda create --name python35 python=3.5 

ÂΩìÁÑ∂Ôºåpython35ÁöÑÁéØÂ¢ÉÂêç‰Ω†ÂèØ‰ª•Ëá™Ë°åÂëΩÂêçÔºåÂÆòÊñπÊïôÁ®ã‰∏äÂëΩÂêçÊòØtensorflowÔºåËøáÁ®ã‰∏≠‰ºöÊèêÁ§∫ËæìÂÖ•y/n,ËæìÂÖ•yÂç≥ÂèØÔºåËæìÂÖ•3.5‰ºöËá™Âä®ÈÄâÊã©3.5.x‰∏≠ÊúÄÈ´òÁâàÊú¨Ôºå‰Ω†ÂèØ‰ª•ËæìÂÖ•3.5.xËá™Ë°åÈÄâÊã©ÁâàÊú¨„ÄÇÁ≠âÂæÖ‰∏Ä‰ºöÂÆâË£ÖÂÆåÊàêÂêéÔºåÂú®cmd‰∏≠ÈîÆÂÖ•

    >conda info --envs 

Á°ÆËÆ§ÂàöÊâçÁöÑÁéØÂ¢ÉÈÖçÁΩÆÊàêÂäü„ÄÇ

TensorflowÂÆâË£Ö

‰Ωú‰∏∫ÂàùÂ≠¶ËÄÖÔºåÊàë‰ª¨ÂÆâË£ÖcpuÁâàÊú¨ÁöÑtensorflowË∂≥Â§ü‰ΩøÁî®ÔºåÂ¶ÇÈúÄÂÆâË£ÖgpuÁâàÁöÑÔºåË∑ücpuÁöÑÂ∞èÂêåÂ§ßÂºÇÔºåÂÆòÊñπÊïôÁ®ãÂÜôÁöÑË∂≥Â§üÊ∏ÖÊ•öÔºåÈúÄË¶ÅÊòæÂç°‰∏∫NvidiaÔºåÂπ∂‰∏îÈÖçÁΩÆcudaÊâçÂèØ‰ª•‰ΩøÁî®„ÄÇËøôÈáåÊàë‰ª¨ÂÆâË£ÖcpuÁâàÊú¨„ÄÇ 
ËæìÂÖ•ÂëΩ‰ª§ÂàáÊç¢Âà∞python35ÁöÑÁéØÂ¢É„ÄÇ deactivate ÂèØÂàáÊç¢Âà∞ÈªòËÆ§ÁéØÂ¢É„ÄÇ

    >activate python35

Âú®python35ÁöÑÁéØÂ¢É‰∏ãÔºå‰ΩøÁî®pipÂÆâË£Ötensorflow„ÄÇ

    >pip install --upgrade --ignore-installed tensorflow

ÂÆâË£ÖÂÆåÊàêÂêéÔºåÊµãËØïÂÆâË£ÖÁöÑtensorflowÔºõ 
Âú®python35ÁéØÂ¢É‰∏ãÔºåÈîÆÂÖ•>pythonÂêéÔºåËøõË°åÂ¶Ç‰∏ãÊìç‰Ωú

    >>> import tensorflow as tf
    >>> hello = tf.constant('Hello,tensorflow')
    >>> sess = tf.Session()
    >>> print(sess.run(hello))

ËøôÈáå‰ºöÂá∫Áé∞ÂæàÂ§öÁöÑWarningÔºåÊöÇÊó∂Ê≤°ÊúâÂΩ±ÂìçÔºåÊÑèÊÄùÂ§ßÊ¶ÇÊòØÂèØ‰ª•‰ºòÂåñcpuÊÄßËÉΩÔºåÂêéÈù¢Á†îÁ©∂‰∏Ä‰∏ãËøõË°åËß£ÂÜ≥„ÄÇ

ÂÆâË£ÖSpyderÂíåipython

ÊâìÂºÄ Anaconda NavigatorÔºåÂú®EnvironmentsÈáåÁöÑpython35ÁéØÂ¢É‰∏≠ÔºåÈÄâÊã©ÈÄâÈ°π‰∏∫Not installedÔºåÂú®ÊêúÁ¥¢Ê°Ü‰∏≠ÊêúÁ¥¢spyÂíåipyÊâæÂà∞spyderÂíåipythonËøõË°åÂãæÈÄâÔºåÁÇπÂáªapplyËøõË°åÂÆâË£ÖÔºåÊúâÂæàÂ§öÁõ∏ÂÖ≥ÁöÑ‰æùËµñÂåÖ‰∏ÄÂπ∂‰ºöÂÆâË£Ö‰∏ä„ÄÇ 

Êüê‰∫õÁâàÊú¨ Anaconda ‰ºöÂú®ÈÖçÁΩÆÁéØÂ¢ÉÊó∂Âá∫Áé∞Êó†Ê≥ïÂÆö‰ΩçÁ®ãÂ∫èËæìÂÖ•ÁÇπ OPENSSL_sk_new_reserve ÈóÆÈ¢òÔºåËøôÊòØÂõ†‰∏∫ Anaconda\Library\bin ÁõÆÂΩï‰∏ãÁöÑ libssl-1_1-x64.dll ÁâàÊú¨ÈóÆÈ¢òÔºåÂèØ‰ª•Áî® Anaconda\DLLS ÁõÆÂΩï‰∏ãÁöÑÁâàÊú¨Êõø‰ª£„ÄÇ

    >conda create  -n py27 python=2.7
    Collecting package metadata (repodata.json): done
    Solving environment: done


    ==> WARNING: A newer version of conda exists. <==
      current version: 4.7.11
      latest version: 4.7.12

    Please update conda by running

        $ conda update -n base -c defaults conda



    ## Package Plan ##

      environment location: C:\Anaconda3\envs\py27

      added / updated specs:
        - python=2.7


    The following packages will be downloaded:

        package                    |            build
        ---------------------------|-----------------
        certifi-2016.2.28          |           py27_0         213 KB  https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free
        pip-9.0.1                  |           py27_1         1.6 MB  https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free
        python-2.7.13              |                1        23.8 MB  https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free
        setuptools-36.4.0          |           py27_1         525 KB  https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free
        vc-9                       |                0          705 B  https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free
        vs2008_runtime-9.00.30729.5054|                0        1016 KB  https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free
        wheel-0.29.0               |           py27_0         121 KB  https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free
        wincertstore-0.2           |           py27_0          14 KB  https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free
        ------------------------------------------------------------
                                               Total:        27.3 MB

    The following NEW packages will be INSTALLED:

      certifi            anaconda/pkgs/free/win-64::certifi-2016.2.28-py27_0
      pip                anaconda/pkgs/free/win-64::pip-9.0.1-py27_1
      python             anaconda/pkgs/free/win-64::python-2.7.13-1
      setuptools         anaconda/pkgs/free/win-64::setuptools-36.4.0-py27_1
      vc                 anaconda/pkgs/free/win-64::vc-9-0
      vs2008_runtime     anaconda/pkgs/free/win-64::vs2008_runtime-9.00.30729.5054-0
      wheel              anaconda/pkgs/free/win-64::wheel-0.29.0-py27_0
      wincertstore       anaconda/pkgs/free/win-64::wincertstore-0.2-py27_0


    Proceed ([y]/n)? y


    Downloading and Extracting Packages
    vs2008_runtime-9.00. | 1016 KB   | ############################################################################ | 100%
    setuptools-36.4.0    | 525 KB    | ############################################################################ | 100%
    certifi-2016.2.28    | 213 KB    | ############################################################################ | 100%
    vc-9                 | 705 B     | ############################################################################ | 100%
    wincertstore-0.2     | 14 KB     | ############################################################################ | 100%
    python-2.7.13        | 23.8 MB   | ############################################################################ | 100%
    wheel-0.29.0         | 121 KB    | ############################################################################ | 100%
    pip-9.0.1            | 1.6 MB    | ############################################################################ | 100%
    Preparing transaction: done
    Verifying transaction: done
    Executing transaction: done
    #
    # To activate this environment, use
    #
    #     $ conda activate py27
    #
    # To deactivate an active environment, use
    #
    #     $ conda deactivate

    >conda env list
    # conda environments:
    #
    base                  *  C:\Anaconda3
    py27                     C:\Anaconda3\envs\py27



## ==‚ö° Python 2.7 Âíå 3.7 Â∑ÆÂà´

Âå∫Âà´‰∏Ä: print ËØ≠Ê≥ï‰ΩøÁî®

>>> print "Hello Python"  # Python 2.7
>>> print("Hello Python") # Python 3.7


‰æãÂ≠ê:Âú® Python 3.7 ‰ΩøÁî®ÂèåÂºïÂè∑Ëß¶Âèë SyntaxError ÂºÇÂ∏∏Êú∫Âà∂ÔºåÊèêÁ§∫ Did you mean print("Hello Python")  

print Êç¢Ë°åÂíå‰∏çÊç¢Ë°åÂå∫Âà´

- Python 2.7 print ‰∏çÊç¢Ë°å‰ΩøÁî®","Âç≥ÂèØ
- Python 3.7 print ‰∏çÊç¢Ë°å‰ΩøÁî®end=""


Âå∫Âà´‰∫å: raw_input()Âíåinput()

- Python 2.7 ‰ΩøÁî® raw_input() Êé•Êî∂Â≠óÁ¨¶‰∏≤Ôºåinput() Êé•Êî∂Êï∞Â≠ó int/float„ÄÇ
- Python 3.7 ‰ªÖÂ≠òÂú® input()Ôºå‰∏§ËÄÖÂêàÂπ∂ÔºåÊé•Êî∂‰ªªÊÑèÊ†ºÂºè ËøîÂõû string


Âå∫Âà´‰∏â: ÂáΩÊï∞ cmp()

python 2.7 ‰ΩøÁî® cmp(x,y) ÂáΩÊï∞ÊØîËæÉ 2 ‰∏™ÂØπË±°ÔºåÂ¶ÇÊûú x < y ËøîÂõû -1, Â¶ÇÊûú x == y ËøîÂõû 0, Â¶ÇÊûú x > y ËøîÂõû 1
python 3.7 ÁßªÈô§ cmp()ÔºåÈúÄË¶ÅÂÆûÁé∞ÊØîËæÉÂäüËÉΩÔºåÂºïÂÖ• operator Ê®°ÂùóÔºåÈÄÇÂêà‰ªª‰ΩïÂØπË±°

    >>> import operator
    >>> operator.eq('hello', 'name');
    False
    >>> operator.eq('hello', 'hello');
    True

Âå∫Âà´Âõõ: string Â≠óÊØç Â§ßÂ∞èÂÜôÂ≠óÁ¨¶‰∏≤

- string.letters ÂåÖÂê´ÊâÄÊúâÂ≠óÊØçÔºàÂ§ßÂÜôÊàñÂ∞èÂÜôÔºâÁöÑÂ≠óÁ¨¶‰∏≤
- Python 3.0 ‰∏≠ string.ascii_letters


## ==‚ö° Waf build Â∑•ÂÖ∑
- [The Waf Book](https://waf.io/book/#_projects_and_commands)

Waf ÊòØÁî®Êù•Â∏ÆÂä©ÁºñËØëËΩØ‰ª∂Â∑•Á®ãÁöÑ Python Â∑•ÂÖ∑„ÄÇ

Waf ËÑöÊú¨‰∏éÂëΩ‰ª§

build ‰∫Ü‰πãÂêéÔºåÂèØ‰ª•Ë∑üË∏™Âà∞ `${SRC}` Âíå `${TGT}` ÊúâÂÖ≥ËÅîÁöÑÊñá‰ª∂ÔºåÂè™Êúâ `${SRC}` Ë¢´‰øÆÊîπËøáÔºå‰∏ãÊ¨°‰ºöÈáçÊñ∞ build Ëøô‰∏™Êñá‰ª∂ÔºåÊÉ≥ÊÉ≥Â¶ÇÊûú‰∏Ä‰∏™ project ÈùûÂ∏∏Â§ßÔºåÂú®ÊµãËØïËøáÁ®ã‰∏≠ÊàñËÄÖÂèëÂ∏ÉÔºåÊØèÊ¨°ÈÉΩË¶ÅÂÖ®ÈÉ® build ‰∏ÄÈÅçÔºåÂ∞ΩÁÆ°‰Ω†Âè™‰øÆÊîπ‰∫Ü‰∏Ä‰∏™Êñá‰ª∂ÔºåÂΩìÁÑ∂Â¶ÇÊûú‰Ω†Áü•ÈÅì‰Ω†Êîπ‰∫ÜÂì™‰∏™Êñá‰ª∂ÔºåÂèØ‰ª•ÂçïÁã¨ build ÈÇ£‰∏™Êñá‰ª∂Ôºå‰ΩÜÊòØË∞ÅËÉΩËÆ∞ÂæóÊ∏ÖËá™Â∑±‰øÆÊîπ‰∫ÜÂì™‰∫õÊñá‰ª∂Ôºåwaf ÂèØ‰ª•Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºå‰∏çËøá waf ËôΩÁÑ∂ÂèØ‰ª•Áî®Áõ∏ÂØπË∑ØÂæÑÔºå‰ΩÜÊòØÊúÄÁªàËøòÊòØÁªùÂØπË∑ØÂæÑÔºåÂ¶ÇÊûúÁßªÂä®‰∫Ü project Êñá‰ª∂Â§πÔºåÈÇ£‰πà SRC Âíå TGT ÁöÑÂÖ≥Á≥ªÂ∞±‰∏¢Â§±‰∫ÜÔºåÂ¶ÇÊûú build ÂÖ≥Á≥ª‰πüËÉΩÁî®Áõ∏ÂØπË∑ØÂæÑÔºåÈÇ£Â∞±Êõ¥ÂÆåÁæé‰∫Ü„ÄÇ

ËΩØ‰ª∂ÈÄöÂ∏∏Êúâ‰øùÂ≠òÂú®ÁâàÊú¨ÁÆ°ÁêÜÁ≥ªÁªü git, subversion ‰∏≠ÔºåÊúâ‰∫õÁî®‰∫éÊèèËø∞Â¶Ç‰ΩïÂ§ÑÁêÜËøô‰∫õÊ∫êÊñá‰ª∂ÁöÑÁºñËØëËÑöÊú¨ build scripts/Makefiles...„ÄÇ‰∏Ä‰∫õÁîüÊàêÊñá‰ª∂ build files ÈÄöÂ∏∏Áî± Ê∫êÊñá‰ª∂ËΩ¨Êç¢ËÄåÊù•Ôºå‰ΩÜÂÆÉ‰ª¨ÊòØÂèØÈÄâÁöÑ„ÄÇÂú® Waf ‰∏≠ÁºñËØëËÑöÊú¨ÊòØÈÇ£‰∫õÂëΩÂêç‰∏∫ wscript ÁöÑÊñá‰ª∂„ÄÇ

ÈÄöÂ∏∏Ôºå‰∏Ä‰∏™Â∑•Á®ãÂåÖÂê´‰∏ãÈù¢Ëã•Âπ≤Èò∂ÊÆµÔºö

- ÈÖçÁΩÆÔºàconfigureÔºâÔºö ÈÖçÁΩÆÂ∑•Á®ãÔºåÊâæÂà∞‰æùËµñÈ°πÁöÑ‰ΩçÁΩÆ
- ÁºñËØëÔºàbuildÔºâÔºö Â∞ÜÊ∫êÊñá‰ª∂ËΩ¨Êç¢‰∏∫ÁîüÊàêÊñá‰ª∂
- ÂÆâË£ÖÔºàinstallÔºâÔºö ÂÆâË£ÖÁîüÊàêÊñá‰ª∂
- Âç∏ËΩΩÔºàuninstallÔºâÔºö Âç∏ËΩΩÁîüÊàêÊñá‰ª∂
- ÊâìÂåÖÔºàdistÔºâÔºö ÁîüÊàêÊ∫êÊñá‰ª∂ÁöÑÂ≠òÊ°£
- Ê∏ÖÁêÜÔºàcleanÔºâÔºö Âà†Èô§ÁîüÊàêÊñá‰ª∂

ÊØè‰∏ÄÈò∂ÊÆµÂú® wscript Êñá‰ª∂‰∏≠ÈÉΩÊòØ‰ª•‰∏Ä‰∏™ Python ÂáΩÊï∞ÊûÑÈÄ†ÁöÑÔºåËØ•ÂáΩÊï∞‰ΩøÁî® waflib.Context.Context ÁöÑ‰∏Ä‰∏™ÂÆû‰æã‰Ωú‰∏∫ÂáΩÊï∞„ÄÇ

ËÆ©Êàë‰ª¨‰ªéÂú®Êñá‰ª∂Â§π /tmp/myproject ‰∏ã Êñ∞Âª∫‰∏Ä‰∏™ wscript Êñá‰ª∂ÂºÄÂßãÔºö

    def configure(conf):
        print("configure!")

    def build(bld):
        print("build!")

Êàë‰ª¨‰πüÈúÄË¶Å‰∏Ä‰∏™ Waf ‰∫åËøõÂà∂Êñá‰ª∂ÔºåÂ¶Ç http://waf.googlecode.com/files/waf-1.6.1 Âπ∂ÊääËØ•Êñá‰ª∂Êã∑Ë¥ùÂà∞Â∑•Á®ãÁõÆÂΩï‰∏ãÔºö

    $ cd /tmp/myproject
    $ wget http://waf.googlecode.com/files/waf-1.6.1

Êàë‰ª¨Âè™ÈúÄÁÆÄÂçïÂú∞Â∞ÜÂëΩ‰ª§‰Ωú‰∏∫ÂèÇÊï∞‰º†ÈÄíÁªô waf Âç≥ÂèØËøêË°åÊ≠§Â∑•Á®ãÔºö

    $ ./waf-1.6.1 configure build
    configure!
    build!

ÁõÆÊ†á
ÁºñËØëÁ≥ªÁªüÁöÑ‰∏Ä‰∏™ÈáçË¶ÅÁªÑÊàêÈÉ®ÂàÜÊòØÂ£∞ÊòéÁõÆÊ†áÁöÑÂàõÂª∫ËøáÁ®ã„ÄÇËøôÈáåÊúâ‰∏Ä‰∏™ÈùûÂ∏∏ÁÆÄÂçïÁöÑ‰æãÂ≠êÔºö

    def build(bld):
        tg = bld(rule='cp ${SRC} ${TGT}', source='wscript', target='foo.txt')
        bld(rule='cp ${SRC} ${TGT}', source='foo.txt', target='bar.txt')

Ë∞ÉÁî® bld(..) ÂàõÂª∫‰∫Ü‰∏Ä‰∏™ ‰ªªÂä°ÁîüÊàêÂô®Ôºàtask generatorÔºâ ÔºåÂÆÉÁî®Êù•ÁîüÊàê ‰ªªÂä°ÔºàtasksÔºâ „ÄÇ ‰ªªÂä°ÂàôÂÆûÈôÖËøêË°åÂëΩ‰ª§ cp„ÄÇ ÂëΩ‰ª§Áõ¥Âà∞ÊâÄÊúâËÑöÊú¨ÈÉΩË¢´ËØªÂèñÂêéÊâç‰ºöËøêË°åÔºåËøôÂØπËÆ°ÁÆóÁºñËØëÈ°∫Â∫èÈùûÂ∏∏ÈáçË¶Å„ÄÇ

Ë°®ËææÂºè ${SRC} Âíå ${TGT} ÊòØÂø´Êç∑ÊñπÂºèÔºåÁî®Êù•ÈÅøÂÖçÊñá‰ª∂ÂêçÈáçÂ§ç„ÄÇÊõ¥Â§öÁöÑÂø´Êç∑ÊñπÂºèÂèØ‰ª•ÈÄöËøá‰ΩøÁî® ${} Á¨¶ÂêàÂÆö‰πâÔºåËØ•Á¨¶Âè∑ËÉΩ‰ªé bld.env Â±ûÊÄßËØªÂèñÂØπÂ∫îÁöÑÂÄº„ÄÇ

    def build(bld):
        bld.env.MESSAGE = 'Hello, world!'
        bld(rule='echo ${MESSAGE}', always=True)

bld ÂØπË±°ÊòØÁ±ª waflib.Build.BuildContextÔºåÂÆÉÁöÑ env Â±ûÊÄßÊòØÁ±ª waflib.ConfigSet.ConfigSet ÁöÑ‰∏Ä‰∏™ÂÆû‰æã„ÄÇ

Ëøô‰∫õÂÄºË¢´‰øùÂ≠òÂú®Ê≠§ÂØπË±°‰∏≠‰ª•‰æø‰∫éÂÖ±‰∫´/‰øùÂ≠ò/Âä†ËΩΩ„ÄÇËøôÈáåÊòØÂ¶Ç‰ΩïÂú®ÈÖçÁΩÆÂíåÁºñËØëËøáÁ®ã‰∏≠ÂÖ±‰∫´Êï∞ÊçÆÊù•ÂÆûÁé∞Âíå‰∏ä‰∏™‰æãÂ≠êÂêåÊ†∑ÁöÑ‰∫ãÊÉÖÔºö

    def configure(cnf):
        cnf.env.MESSAGE = 'Hello, world!'

    def build(bld):
        bld(rule='echo ${MESSAGE}', always=True)

ËÑöÊú¨‰∏éÂ∑•ÂÖ∑
‰∏∫ËÆ©‰∏Ä‰∏™ËÑöÊú¨‰ΩøÁî®Â≠êÁõÆÂΩï‰∏ãÁöÑÂè¶‰∏ÄËÑöÊú¨ÔºåÈúÄË¶Å‰ΩøÁî®ÊñπÊ≥ï waflib.Context.Context.recurse ÂèäÂåÖÂê´ wscript Êñá‰ª∂Â§πÁöÑÁõ∏ÂØπË∑ØÂæÑ„ÄÇ‰æãÂ¶ÇÔºåË∞ÉÁî® src/wscript ËÑöÊú¨‰∏≠ build ÂáΩÊï∞ÔºåÂ∫îËØ•ËøôÊ†∑ÂÜôÔºö„ÄÅ

    def build(bld):
        bld.recurse('src')

Waf ÈÄöËøáÁâπÂÆöÊ®°Âùó Waf tools Êèê‰æõ‰∫ÜÂØπÁâπÂÆöËØ≠Ë®ÄÂíåÁºñËØëÂô®ÁöÑÊîØÊåÅ„ÄÇËøô‰∫õÂ∑•ÂÖ∑‰∏é wscript Êñá‰ª∂Á±ª‰ºº‰∏îÊèê‰æõÂ¶Ç configure ÊàñËÄÖ build ÂáΩÊï∞„ÄÇËøôÈáåÊòØ‰∏Ä‰∏™CËØ≠Ë®ÄÁöÑÁÆÄÂçïÂ∑•Á®ãÔºö


    def options(opt):
        opt.load('compiler_c')
    def configure(cnf):
        cnf.load('compiler_c')
    def build(bld):
        bld(features='c cprogram', source='main.c', target='app')

options ÂáΩÊï∞ÊòØÂè¶‰∏Ä‰∏™È¢ÑÂÆö‰πâÁöÑÂëΩ‰ª§ÔºåÁî®Êù•ËÆæÁΩÆÂëΩ‰ª§Ë°åÈÄâÈ°π„ÄÇÂÆÉÁöÑÂèÇÊï∞ÊòØ waflib.Options.OptionsContext ÁöÑ‰∏Ä‰∏™ÂÆû‰æã„ÄÇ Êèê‰æõ‰∫ÜÂ∑•ÂÖ∑ compiler_cÁî®‰ª•Ê£ÄÊµãÊòØÂê¶Êúâ C ÁºñËØëÂô®Â≠òÂú®ÔºåÂπ∂ËÆæÁΩÆÂêÑÁßçÂèÇÊï∞Â¶Ç cnf.env.CFLAGS„ÄÇ

Áî® bld Â£∞ÊòéÁöÑ‰ªªÂä°ÁîüÊàêÂô®Âπ∂Ê≤°Êúâ ËßÑÂàôÔºàruleÔºâ ÂÖ≥ÈîÆÂ≠óÔºåËÄåÊòØÁî®‰∏ÄÁ≥ªÂàó ÁâπÊÄßÔºàfeaturesÔºâ Êù•ÂºïÁî®ÈÇ£‰∫õË∞ÉÁî®ÈÄÇÂΩìËßÑÂàôÁöÑÊñπÊ≥ï„ÄÇ Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠Ôºå‰∏Ä‰∏™ËßÑÂàôË¢´Ë∞ÉÁî®‰ª•ÁºñËØëÊñá‰ª∂ÔºåËÄåÂè¶‰∏Ä‰∏™Áî®Êù•ÈìæÊé•ÁõÆÊ†áÊñá‰ª∂Âà∞‰∫åËøõÂà∂Êñá‰ª∂ app „ÄÇ ËøòÂ≠òÂú®ÂÖ∂‰ªñ‰∏Ä‰∫õÂ∑•ÂÖ∑‰æùËµñÁöÑ ÁâπÊÄßÔºàfeaturesÔºâ Â¶ÇÔºö javacÔºåcs ÊàñËÄÖ tex „ÄÇ

‰∏Ä‰∏™ÂêåÊó∂‰ΩøÁî®CÂíåC++ÁöÑÂ∑•Á®ã
‰∏ãÈù¢ÊòØ‰∏Ä‰∏™Êõ¥Â§çÊùÇ‰∏Ä‰∫õÂ∑•Á®ãÁöÑËÑöÊú¨


    def options(opt):
        opt.load('compiler_c compiler_cxx')
    def configure(cnf):
        cnf.load('compiler_c compiler_cxx')
        configure.check(features='cxx cxxprogram', lib=['m'], cflags=['-Wall'], defines=['var=foo'], uselib_store='M')
    def build(bld):
        bld(features='c cshlib', source='b.c', target='mylib')
        bld(features='c cxx cxxprogram', source='a.c main.cpp', target='app', use=['M','mylib'], lib=['dl'])

ÊñπÊ≥ï waflib.Tools.c_config.check ‰ºöÂÜÖÈÉ®ÊâßË°åÁºñËØë‰ª•Ê£ÄÊµãÂú®Êìç‰ΩúÁ≥ªÁªü‰∏≠ÊòØÂê¶Â≠òÂú® libm Â∫ì„ÄÇÁÑ∂ÂêéÂÆÉ‰ºöÂÆö‰πâÂèòÈáèÂ¶ÇÔºö

    conf.env.LIB_M = ['m']
    conf.env.CFLAGS_M = ['-Wall']
    conf.env.DEFINES_M = ['var=foo']

ÈÄöËøáÂ£∞Êòé use=['M', 'mylib']ÔºåÁ®ãÂ∫è app ‰ºöÁªßÊâøÊâÄÊúâÂú®ÈÖçÁΩÆËøáÁ®ã‰∏≠ÂÆö‰πâÁöÑ M ÂèòÈáè„ÄÇËØ•Á®ãÂ∫è‰πü‰ºö‰ΩøÁî®Â∫ì mylib Âπ∂‰∏îÁºñËØëÈ°∫Â∫èÂíå‰æùËµñÈ°πÈÉΩ‰ºöÊõ¥Êîπ‰ª•‰Ωø mylib Âú® app ‰πãÂâçÈìæÊé•„ÄÇ

use Â±ûÊÄß‰πüÈÄÇÁî®‰∫éÂÖ∂‰ªñËØ≠Ë®ÄÂ¶ÇJavaÔºàjar Êñá‰ª∂‰πãÈó¥ÁöÑ‰æùËµñÔºâÊàñËÄÖC#ÔºàÁ®ãÂ∫èÈõÜ‰πãÈó¥ÁöÑ‰æùËµñÔºâ„ÄÇ


Â∑•Á®ãÁâπÂÆöÊâ©Â±ï
feature ÂÖ≥ÈîÆÂ≠óÊòØÈ´òÂ±ÇÊ¨°ÁöÑÂØπÁé∞Êúâ Waf ÊñπÊ≥ïÁöÑÂºïÁî®„ÄÇ‰æãÂ¶ÇÔºö c feature ‰ºöÊ∑ªÂä†ÊñπÊ≥ï waflib.Tools.ccroot.apply_incpaths ‰ª•ÊâßË°å„ÄÇË¶ÅÊ∑ªÂä†‰∏Ä‰∏™‰∏∫ÊâÄÊúâCÁõÆÊ†áÂä†ÂÖ•‰ªªÂä°ÁîüÊàêÂô®Ë∑ØÂæÑÂà∞ÂåÖÂê´Ë∑ØÂæÑÁöÑÊñ∞ÊñπÊ≥ïÔºåÂèØ‰ª•ÈááÁî®Â¶Ç‰∏ãÂ£∞ÊòéÔºö


    from waflib import Utils
    from waflib.TaskGen import feature, before_method
    @feature('c')
    @before_method('apply_incpaths')
    def add_current_dir_to_includes(self):
        self.includes = Utils.to_list(self.includes)
        self.includes.append(self.path)

    def build(bld):
        tg = bld(features='c', source='main.c', target='app')

Ëøô‰∫õ feature ÊñπÊ≥ïË¢´ÁªëÂÆöÂà∞Á±ª waflib.TaskGen.task_gen ÔºåÂú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÊòØÂØπË±° tg ÁöÑÁ±ª„ÄÇÊñ∞ÁöÑ feature ÂèØ‰ª•‰ª•Áõ∏ÂêåÁöÑÊñπÂºèÂ£∞ÊòéÔºö


    from waflib.TaskGen import feature, after_method
    @feature('debug_tasks')
    @after_method('apply_link')
    def print_debug(self):
        print('tasks created %r' % self.tasks)

    def build(bld):
        tg = bld(features='c cprogram debug_tasks', source='main.c', target='app')

ÈÄöËøáÁªëÂÆöÊñ∞ÊñπÊ≥ïÂà∞ context Á±ªÔºå Â£∞ÊòéÂèØ‰ª•ÂèòÂæóÊõ¥Âä†Áî®Êà∑ÂèãÂ•Ω„ÄÇ


    from waflib.Build import BuildContext
    def enterprise_program(self, *k, **kw):
        kw['features'] = 'c cprogram debug_tasks'
        return self(*k, **kw)
    BuildContext.enterprise_program = enterprise_program

    def build(bld):
        # no feature line
        bld.enterprise_program(source='main.c', target='app')

Ëøô‰∫õËæÖÂä©‰ª£Á†ÅÊîæÂà∞ÂçïÁã¨Êñá‰ª∂‰∏≠Âç≥ÂèØ‰ª•Êàê‰∏∫‰∏Ä‰∏™ Waf Â∑•ÂÖ∑„ÄÇ‰∏∫‰∫Ü‰æø‰∫éÈÉ®ÁΩ≤ÔºåÊñ∞ÁöÑ Waf Â∑•ÂÖ∑ÁîöËá≥ÂèØ‰ª•Ë¢´Ê∑ªÂä†Âà∞ Waf Êñá‰ª∂‰∏≠„ÄÇ



## ==‚ö° Fabric & Invoke
- Fabric https://www.fabfile.org/
- Invoke https://www.pyinvoke.org/

ÁΩëÁªú‰∏äÂ∞Ü pip, virtualenv, fabric ÈÄöÁß∞‰∏∫ Python ‰∏âÂ§ßÁ•ûÂô®Ôºå‰∏Ä‰∏™Áî®Êù•ÁÆ°ÁêÜ‰æùËµñÔºå‰∏Ä‰∏™ÁÆ°ÁêÜËôöÊãüÁéØÂ¢ÉÔºåÂè¶‰∏Ä‰∏™Áî®Êù•ËøõË°åËá™Âä®ÂåñÂèëÂ∏É„ÄÇ

Fabric ÊòØ Python Ëá™Âä®ÂåñÂèëÂ∏ÉÂ∑•ÂÖ∑ÔºåÂÆÉÊèê‰æõ‰∫Ü‰∏∞ÂØåÁöÑÂêå SSH ‰∫§‰∫íÁöÑÊé•Âè£ÔºåÁî®Êù•Âú®Êú¨Âú∞„ÄÅËøúÁ®ãÊú∫Âô®‰∏äËá™Âä®Âåñ„ÄÅÊµÅÊ∞¥ÂåñÂú∞ÊâßË°å Shell ÂëΩ‰ª§„ÄÇ

Ê†∏ÂøÉÁöÑ invoke Âü∫Á°ÄÁªÑ‰ª∂ÊòØ‰∏Ä‰∏™ÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑ÔºåÂÆÉ‰∏ìÊ≥®‰∫éÈÄöËøá CLI Âíå shell ÂëΩ‰ª§Êù•ÊâßË°å‰ªªÂä°ÔºåÈÄöËøáÂÆÉÂèØ‰ª•ÂÆûÁé∞‰∏Ä‰∏™Ëá™Âä®ÂåñÊûÑÂª∫Â∑•ÂÖ∑„ÄÇ

    $ python3 -m pip install fabric
    $ python3 -m pip install invoke

Âú® Windows WSL Á≥ªÁªü‰∏äÂêØÁî® SSH ÊúçÂä°ÔºåÂÖàÈÄÇÂΩì‰øÆÊîπÈÖçÁΩÆÊñá‰ª∂ÔºåÊõ¥ÊîπÁ´ØÂè£ Port 22 ÊîπÊàê PortÔºåÊàñÂêØÁî®ÂØÜÁ†ÅÈ™åËØÅ PasswordAuthenticationÔºåÂπ∂ÂàõÂª∫ÂØÜÈí•ÂØπÔºö

```sh
$ sudo vi /etc/ssh/sshd_config
$ cd /etc/ssh              
$ sudo ssh-keygen -A
 ssh-keygen: generating new host keys: RSA DSA ECDSA ED25519   
$ sudo /etc/init.d/ssh start
  * Starting OpenBSD Secure Shell server sshd          [ OK ]
$ sudo service ssh restart

# ÂºÄÊú∫Ëá™ÂêØËÆæÁΩÆ
# vi /etc/rc.local
# service sshd start
```

ÂêØÁî®ÂØÜÁ†ÅÈ™åËØÅÂ∞±ÂèØ‰ª•‰ΩøÁî®Áî®Êà∑Ë¥¶Êà∑ÁôªÂΩïÔºö

    ssh root@localhost -p 22

Êú™ÂêØÁî®ÂØÜÁ†ÅÁôªÂΩïÔºå‰∏îÊú™Ê≠£Á°ÆÈÖçÁΩÆÁôªÂΩïÂØÜÈí•ÔºåÂ∞±ÂèØËÉΩÂá∫Áé∞ÂÖ¨Èí•ÊùÉÈôêÈóÆÈ¢ò Permission denied (publickey).

‰ΩøÁî®ÂÖ¨Èí•ÁôªÂΩïÈúÄË¶ÅÂú®ÊúçÂä°Âô®‰∏≠ËÆ∞ÂΩïÂèóËÆ§ÂèØÁöÑÂÖ¨Èí•Ôºå‰ª•‰∏ãÊÉÖÂÜµÈÉΩ‰ºöÂØºËá¥ÂÖ¨Èí•ËÆøÈóÆÊùÉÈôêË¢´ÊãíÁªùÔºö

- Êú¨Âú∞ËÆøÈóÆËøúÁ®ã‰∏ªÊú∫ÁöÑÂÖ¨Èí•Ê≤°ÊúâÊ∑ªÂä†ÊàñËÄÖË¢´ÂèñÊ∂àÔºàÊó†Ê≥ïËÆ§ËØÅÔºâ
- ËøúÁ®ãÊúçÂä°Âô®ÂÖ¨Èí•Êñá‰ª∂Â§πÊùÉÈôêÈîôËØØÔºå.ssh Âíå .ssh/authorized_keysÔºåÈúÄË¶Å‰øùËØÅÂè™ÊúâÁî®Êà∑Ëá™Â∑±ÊúâÊùÉÈôêÔºåÂê¶ÂàôÈ™åËØÅÊó†Êïà„ÄÇ

‰ΩøÁî® ssh-keygen ‰∏∫Êú¨Âú∞Êú∫Âô®ÁîüÊàêÁöÑ‰∏ÄÂØπÁßòÈí•ÔºåÂÖ¨Èí•Êñá‰ª∂ÁöÑÂÜÖÂÆπÔºåC:\Users\XXX\.ssh\id_rsa.pubÔºåÂ∫îËØ•‰øùÂ≠òÂú®ËøúÁ®ãÊúçÂä°Âô®Á´ØÂ∑≤ËÆ§ËØÅÁßòÈí•Êñá‰ª∂ÂÜÖ `~/.ssh/authorized_keys`„ÄÇÁôªÂΩïÊó∂ÔºåÊ≥®ÊÑèË¶ÅÊåáÂÆöÁõ∏Â∫îÁöÑÁî®Êà∑Ë¥¶Êà∑„ÄÇ


Á§∫ËåÉÔºåÈÄöËøá SSH ÁôªÂΩïÔºåÂú®Â§ö‰∏™ÊúçÂä°Âô®‰∏äÊâßË°åÂëΩ‰ª§Ôºö

```py
from fabric import Connection, SerialGroup

def disk_free(c):
    uname = c.run('uname -s', hide=True)
    if 'Linux' in uname.stdout:
        command = "df -h / | tail -n1 | awk '{print $5}'"
        return c.run(command, hide=True).stdout.strip()
    err = "No idea how to get disk space on {}!".format(uname)
    raise Exit(err)

for cxn in SerialGroup('web1', 'web2', 'db1'):
    print("{}: {}".format(cxn, disk_free(cxn)))

# Transfer files
# result = Connection('localhost').run('uname -s', hide=True)
c = Connection('web1')
c.put('myfiles.tgz', '/opt/mydata')
c.run('tar -C /opt/mydata -xzvf /opt/mydata/myfiles.tgz')
c.run('whoami')     # who am I?
c.sudo('whoami')    # as root
c.local('echo ---------- now from local')
c.local('dir /w')   # assuming client is windows

pool = SerialGroup('web1', 'web2', 'web3')
pool.put('myfiles.tgz', '/opt/mydata')
pool.run('tar -C /opt/mydata -xzvf /opt/mydata/myfiles.tgz')

```

Á§∫ËåÉÔºå‰ªªÂä°ËÑöÊú¨ tasks.py ÂÜÖÂÆπÂ¶Ç‰∏ãÔºå‰ΩøÁî® @task Ë£ÖÈ•∞Âô®ÂÆö‰πâ‰ªªÂä°ÂáΩÊï∞Ôºö

```py
from invoke import task

@task
def clean(c, docs=False, bytecode=False, extra=''):
    patterns = ['build']
    if docs:
        patterns.append('docs/_build')
    if bytecode:
        patterns.append('**/*.pyc')
    if extra:
        patterns.append(extra)
    for pattern in patterns:
        c.run("rm -rf {}".format(pattern))

@task
def build(c, docs=False):
    c.run("python setup.py build")
    if docs:
        c.run("sphinx-build docs docs/_build")
```

ÁâπÂà´ÁªßÊâøËá™ GNU Make ÈÄöÁî®Ê®°ÂºèÁöÑÊúÄÂ∞èÊ®°ÊùøÔºåÂÆûÁé∞Âú®‰∏ÄÊ¨°Ë∞ÉÁî®‰∏≠ËøêË°åÂ§ö‰∏™‰ªªÂä°ÁöÑËÉΩÂäõÔºö

    $ python3 -m invoke --list
    $ python3 -m invoke clean build

Áõ¥Êé•Âú®ËÑöÊú¨‰∏≠ËøêË°å‰ªªÂä°Ôºö

```py
from invoke import run
cmd = "pip install -r requirements.txt"
result = run(cmd, hide=True, warn=True)
print(result.ok)
print(result.stdout.splitlines()[-1])
```

‰ªªÂä°ÂèÇÊï∞ÂàóË°®‰∏éÂëΩ‰ª§Ë°åÔºö

```py
@task
def hi(c, name):
    print("Hi {}!".format(name))

# It can be invoked in the following ways, all resulting in ‚ÄúHi Name!‚Äù:
# $ invoke hi Name
# $ invoke hi --name Name
# $ invoke hi --name=Name
# $ invoke hi -n Name
# $ invoke hi -nName
```

‰ΩøÁî®ÂâçÁΩÆ‰ªªÂä°ÂíåÂêéÁΩÆ‰ªªÂä°Ôºåpre Âíå post Êï∞ÁªÑÊåáÂÆöÈ¢ÑÂÖàÊâßË°å„ÄÅÊàñÂêéÁª≠ÊâßË°åÁöÑ‰ªªÂä°ÔºåÈªòËÆ§Âú®ÂèÇÊï∞ÂàóË°®‰∏≠‰º†ÂÖ•‰ªªÂä°ÂáΩÊï∞ÂêçÂ∞±ÊòØÊåáÂÆö pre ‰ªªÂä°Ôºö

```py
from invoke import task

@task
def clean(c):
    c.run("rm -rf docs/_build")

# @task(pre=[clean], post=[moretask])
@task(clean)
def build(c):
    c.run("sphinx-build docs docs/_build")
```

ÂàõÂª∫‰ªªÂä°ÂëΩÂêçÁ©∫Èó¥ÔºåÂ∞Ü‰∏äÈù¢ÁöÑËÑöÊú¨ÂëΩÂêç‰∏∫ docs.py ‰Ωú‰∏∫ÂëΩÂêçÁ©∫Èó¥ docs ‰∏ãÁöÑ‰ªªÂä°ÔºåÂπ∂ÂàõÂª∫‰ª•‰∏ã‰ªªÂä°ËÑöÊú¨Ôºö

```py
from invoke import Collection, task
import docs

@task
def deploy(c):
    c.run("python setup.py sdist")
    c.run("twine upload dist/*")

namespace = Collection(docs, deploy)
# $ invoke --list
# Available tasks:
#     deploy
#     docs.build
#     docs.clean
```

‰ΩøÁî®ÂìçÂ∫îÔºåËá™Âä®Á≠îÂ§çÊ≠£Âú®Ë∞ÉÁî®ÁöÑÂëΩ‰ª§Ôºå‰æãÂ¶ÇÈô§ÁõÆÂΩï‰∏ãÁöÑÊñá‰ª∂Ôºö

```py
from invoke import task, Responder

@task
def always_ready(c):
    responder = Responder(
        # pattern=r"Are you ready? \[Y/n\] ",
        pattern=r"ÊòØÂê¶Á°ÆËÆ§(Y/N)?",
        response="y\n",
    )
    c.run("del /s cache_files", watchers=[responder])
```



# =üö© What‚Äôs New in Python
- Python 3.10.2 Documentation ¬ª What‚Äôs New in Python
- Python Changelog https://docs.python.org/3/whatsnew/changelog.html

The ‚ÄúWhat‚Äôs New in Python‚Äù series of essays takes tours through the most important changes between major Python versions. They are a ‚Äúmust read‚Äù for anyone wishing to stay up-to-date after a new release.

The ‚ÄúChangelog‚Äù is an HTML version of the file built from the contents of the Misc/NEWS.d directory tree, which contains all nontrivial changes to Python for the current version.


‰∫ÜËß£ Python ÂêÑÁâàÊú¨ÂºïÂÖ•ÁöÑÁâπÊÄßÂØπÊéíÈô§Âõ†‰∏∫ÁâàÊú¨Âá∫Áé∞ÁöÑÂÖºÂÆπÈóÆÈ¢òÂæàÊúâÂ∏ÆÂä©ÔºåÂèÇËÄÉÊ∫ê‰ª£Á†Å Doc\whatsnew ÁõÆÂΩï„ÄÇ

‰æãÂ¶ÇÔºåPython 3„ÄÇ10 ÂºïÂÖ•ÁöÑÊ®°ÂºèÂåπÈÖç match ÂíåÊ≥õÂûãÂà´ÂêçÔºàÂèØ‰ª•ÊåáÊ≥õÂûãÁöÑÂÖ∑‰ΩìÁ±ªÂûãÔºâÊàñÁ±ªÂûãÂà´Âêç„ÄÅUnion Á±ªÂûãÁ≠âÔºåËøô‰∫õÊñ∞ÂäüËÉΩÂú®ÊóßÁâàÊú¨‰∏äÂ∞±‰ºöÂá∫Áé∞ËøêË°åÈîôËØØÔºåÂèØËÉΩÊòØÊó†ÊïàËØ≠Ê≥ïÔºå‰πüÂèØ‰ª•ÊòØÊìç‰ΩúÈîôËØØ‰πãÁ±ªÔºåÊòæÂæóÈùûÂ∏∏Â•áÊÄ™Ôºö

```py
# Python 3.10+ is OK
a = 1
match a:
    case 1: print("one")
    case _: print(_)
# one
a = list[int]
print(type(a))
# <class 'types.GenericAlias'>

# Python 3.9- is fault
    match status:
          ^
SyntaxError: invalid syntax

TypeError: 'type' object is not subscriptable
```

Python 2.2 Âú®Á±ªÂûã‰∏äÊúâÈáçÂ§ßÊõ¥Êñ∞ÔºåPEPs 252 and 253: Type and Class ChangesÔºåÂºïÂÖ•Êñ∞ÂºèÁ±ªÔºåOld and New Classes„ÄÇÊñ∞Á±ªÂûãÂú®Â§öÁªßÊâøÊó∂Â§ÑÁêÜÂ§ö‰∏™ÂêåÂêçÊñπÊ≥ïÊó∂ÔºåÂØπÂ∫îËß£ÊûêÁÆóÊ≥ï MRO„ÄÇPython 3.0a1 ÁâàÊú¨ÂêéÔºåÊâÄÊúâÁ±ªÈÉΩÊòØÊñ∞ÂºèÁ±ªÂÆûÁé∞ÔºåÊóßÂºèÁ±ªÊàê‰∏∫ËøáÂéªÔºåPython-3.10.2\Misc\HISTORYÔºö Classic classes are a thing of the past. 

```py
class C(object):
    def __init__ (self):
        ...
    ...
```

ÂÖ∂‰∏≠ÔºåPython 2.x Âíå Python 3.x ‰∏§Â§ßÁâàÊú¨ÊòØÊñ≠Ë£ÇÂºèÊõ¥Êñ∞ÔºåPython 3.x ‰∏çÂêë‰∏ãÂÖºÂÆπÔºå‰∏é‰∏ä‰∏Ä‰ª£ËØ≠Ê≥ï‰∏äÊúâÂæàÂ§ß‰∏çÂêå„ÄÇÂú®ÈùûÁîü‰∫ßÁéØÂ¢ÉÔºåË≠¨Â¶ÇÂ≠¶‰π†Èò∂ÊÆµÔºå‰ΩøÁî®‰∏çÂêåÁâàÊú¨Âπ∂‰∏ç‰ºöÊúâÂ§™Â§ßÁöÑÂå∫Âà´Ôºå‰ΩÜÂª∫ËÆÆ‰ΩøÁî®ÊúÄÊñ∞ÁöÑ 3.x ÁâàÊú¨„ÄÇ

Python 3.0 ‰πüÂè´ Python 3000 Êàñ Py3K„ÄÇ

Âå∫Âà´‰∏Ä: print ËØ≠Âè•Âèò print() ÂáΩÊï∞

>>> print "Hello Python"  # Python 2.7
>>> print("Hello Python") # Python 3.7


‰æãÂ≠ê:Âú® Python 3.7 ‰ΩøÁî®ÂèåÂºïÂè∑Ëß¶Âèë SyntaxError ÂºÇÂ∏∏Êú∫Âà∂ÔºåÊèêÁ§∫ Did you mean print("Hello Python")  

print Êç¢Ë°åÂíå‰∏çÊç¢Ë°åÂå∫Âà´

- Python 2.7 print ‰∏çÊç¢Ë°å‰ΩøÁî®","Âç≥ÂèØ
- Python 3.7 print ‰∏çÊç¢Ë°å‰ΩøÁî® end=""


Âå∫Âà´‰∫å: raw_input() Âíå input()

- Python 2.7 ‰ΩøÁî® raw_input() Êé•Êî∂Â≠óÁ¨¶‰∏≤Ôºåinput() Êé•Êî∂Êï∞Â≠ó int/float„ÄÇ
- Python 3.7 ‰ªÖÂ≠òÂú® input()Ôºå‰∏§ËÄÖÂêàÂπ∂ÔºåÊé•Êî∂‰ªªÊÑèÊ†ºÂºè ËøîÂõû string


Âå∫Âà´‰∏â: ÂáΩÊï∞ cmp()

Python 2.7 ‰ΩøÁî® cmp(x,y) ÊØîËæÉ 2 ‰∏™ÂØπË±°ÔºåÂ¶ÇÊûú x < y ËøîÂõû -1, Â¶ÇÊûú x == y ËøîÂõû 0, Â¶ÇÊûú x > y ËøîÂõû 1
Python 3.7 ÁßªÈô§ cmp()ÔºåÈúÄË¶ÅÂÆûÁé∞ÊØîËæÉÂäüËÉΩÔºåÂºïÂÖ• operator Ê®°ÂùóÔºåÈÄÇÂêà‰ªª‰ΩïÂØπË±°

>>> import operator
>>> operator.eq('hello', 'name');
False
>>> operator.eq('hello', 'hello');
True

Âå∫Âà´Âõõ: string Â≠óÊØç Â§ßÂ∞èÂÜôÂ≠óÁ¨¶‰∏≤

- string.letters ÂåÖÂê´ÊâÄÊúâÂ≠óÊØçÔºàÂ§ßÂÜôÊàñÂ∞èÂÜôÔºâÁöÑÂ≠óÁ¨¶‰∏≤
- Python 3.0 ‰∏≠ string.ascii_letters

# =üö© C/C++ Extensions

Ê∫ê‰ª£Á†ÅÊñá‰ª∂ÂèÇËÄÉÂèäÂÆòÊñπÊñáÊ°£Ôºö

‚Ü™ Python-3.10.2\Doc\includes\custom.c
‚Ü™ Python-3.10.2\Doc\extending\newtypes_tutorial.rst

    +-- Doc\extending
    |   ‚Ä¢ -- index.rst               => Extending and Embedding the Python Interpreter
    |   ‚Ä¢ -- extending.rst              => Extending Python with C or C++
    |   ‚Ä¢ -- newtypes_tutorial.rst      => Defining Extension Types: Tutorial
    |   ‚Ä¢ -- newtypes.rst               => Defining Extension Types: Assorted Topics
    |   ‚Ä¢ -- building.rst               => Building C and C++ Extensions
    |   ‚Ä¢ -- windows.rst                => Building C and C++ Extensions on Windows
    |   ‚Ä¢ -- embedding.rst              => Embedding Python in Another Application

‰ΩøÁî® C/C++ ÂÆûÁé∞ Python Êâ©Â±ïÁöÑ‰∏ÄËà¨Áî®ÈÄîÔºö

- ‰ΩøÁî®Áé∞ÊúâÁöÑÂ∑≤ÁªèÁ®≥ÂÆöÁöÑ C/C++ Â∫ìÔºõ
- Â∞ÜÂÖ≥ÈîÆ‰ª£Á†Å/ÈúÄË¶ÅÊÄßËÉΩÊèê‰æõÁöÑÈÉ®ÂàÜ‰ΩøÁî® C/C++ ÂÆûÁé∞ÔºåËß£Èô§ GIL ÁöÑÈôêÂà∂Ôºõ
- Âà©Áî® Python ÊµãËØïÂ∑•ÂÖ∑ÂØπÁé∞ÊúâÁ≥ªÁªüËøõË°åÂ§ßËßÑÊ®°ÁöÑÊµãËØïÔºõ

‰ªé 1946 Âπ¥Á¨¨‰∏ÄÂè∞ÊâãÂä®Êìç‰ΩúÁöÑËÆ°ÁÆóÊú∫ËØûÁîüÔºåÂà∞1976Âπ¥4Êúà11Êó•ÔºåËãπÊûúÂèëÂ∏É‰∫ÜÁ¨¨‰∏ÄÂè∞ PC ËÆ°ÁÆóÊú∫ Apple IÔºå1977 Âπ¥ÂèëÂ∏É Apple II Âíå 1981 Âπ¥ÂèëÂ∏ÉÁöÑ IBM PCÔºåÂú®ËøôÁü≠Áü≠ 35 Âπ¥Èó¥ÔºåÁîµÂ≠êËÆ°ÁÆóÊú∫ÁöÑÂ∑®Â§ßÂèòÈù©Á¶ªÂ©ö‰∏çÂºÄÁ¨¨‰∫åÊ¨°‰∏ñÁïåÂ§ßÊàòÁöÑÂÇ¨Âåñ‰ΩúÁî®„ÄÇ

ÂõûÂà∞ Python ÁöÑÂèëÂ±ïÂè≤ÔºåPython Á¨¨‰∏Ä‰∏™ÂÖ¨ÂºÄÂèëË°åÁâàÂèëË°å‰∫é 1991 Âπ¥ÔºåÂêåÂπ¥ÔºåLinus Torvalds Âú®Âê∏Êî∂‰∫Ü MINIX Á≤æÂçéÁöÑÂü∫Á°Ä‰∏äÔºåÂÜôÂá∫‰∫ÜÂ±û‰∫éËá™Â∑±ÁöÑ Linux Êìç‰ΩúÁ≥ªÁªü„ÄÇÂà∞ 1981 ÊâçÂá∫Áé∞ IBM PC DOS 1.0ÔºåËøô‰∏çÊòØÂÆâÂÖ®ÁöÑÊìç‰ΩúÁ≥ªÁªüÔºå‰ªª‰ΩïËøõÁ®ãÈÉΩÂèØ‰ª•ËÆøÈóÆÂÖ∂‰ªñËøõÁ®ãÁöÑËµÑÊ∫ê„ÄÇ

GIL ÁÆÄË®Ä‰πãÂ∞±ÊòØËß£ÈáäÂô®ÂÆû‰æã‰∏≠‰ΩøÁî®ÁöÑ‰∏Ä‰∏™‰∫íÊñ•Èáè mutexÔºå‰πüÂ∞±ÊòØ‰∏Ä‰∏™ËµÑÊ∫êÈîÅÔºåÊó©Âú®Êìç‰ΩúÁ≥ªÁªüÁöÑÁ∫øÁ®ãÊ®°ÂûãÂΩ¢Êàê‰πãÂâçÂ∞±ÈááÁî®ÁöÑÊäÄÊúØÔºåÂ∞ΩÁÆ°Á∫øÁ®ã‰∏ÄËØçÊó©Âú® 1967 Âπ¥Â∑¶Âè≥Â∞±ÊèêÂá∫„ÄÇGIL ÁöÑ‰ΩøÁî®ÈÅøÂÖç‰∫ÜÂ§öÈáçÂØπË±°Âä†ÈîÅÂ∏¶Êù•ÁöÑÊ≠ªÈîÅÈóÆÈ¢òÔºå‰πüÁÆÄÂåñ‰∫Ü C ‰ª£Á†ÅÁöÑÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÂÆûÁé∞ÔºåÂπ∂‰∏îÊïàËÉΩ‰∏ä‰πü‰∏çËßÅÂæóÊØîÂØπË±°Âä†ÈîÅÊñπÂºèÂ∑Æ„ÄÇ

Êâ©Â±ïÂºÄÂèëÈúÄË¶ÅÁ®ç‰∏∫ËÆæÁΩÆ‰∏Ä‰∏ãÂºÄÂèëÁéØÂ¢ÉÔºåËøôÈúÄË¶Å‰∫ÜËß£‰∏Ä‰∫õ GCC„ÄÅClang„ÄÅMSVC Á≠âÁºñËØëÂô®ÁöÑÂÆâË£ÖÂèä‰ΩøÁî®ÊµÅÁ®ã„ÄÇ

Windows Á≥ªÁªü‰∏≠Ôºå‰∏ãËΩΩÊ∫ê‰ª£Á†ÅÂåÖÂπ∂ÂÆâË£Ö C/C++ ÂºÄÂèëÂ∑•ÂÖ∑Âç≥ÂèØÔºåÂ¶Ç MinGW GCC ÁºñËØëÂ∑•ÂÖ∑Ôºö

- A C++ library installed and knowledge of the path for command-line invocation
- Python development tools:
    - For Linux, this is the *python3-dev* or *python3-devel* package, depending on your distro.
    - For Windows, there are multiple options.
- Python 3.6 or greater
- A virtual environment (recommended, but not required)
- The *invoke* tool, will be using to build and test your Python bindings

The distutils package is deprecated and slated for removal in Python 3.12. Use setup tools or check PEP 632 for potential alternatives

ÁºñÂÜô Python Êâ©Â±ïÈúÄË¶Å‰ΩøÁî®Âà∞ÊúÄÂü∫Êú¨ÁöÑÂ∑•ÂÖ∑ÊòØ C/C++ ÁºñËØëÂô®ÔºåÂÖ∂Ê¨°ÊòØ distutils ÊàñÊúÄÊñ∞ÁöÑ setuptools Â∑•ÂÖ∑ÔºåÂÆÉ‰ª¨ ‰ºöË∞ÉÁî®ÁºñËØëÁîüÊàêÊâ©Â±ïÁöÑÂä®ÊÄÅÈìæÊé•Â∫ìÊñá‰ª∂ÔºåÂπ∂Â∞ÜÂÖ∂ÂÆâË£ÖÂà∞ site-packages ÁõÆÂΩï‰∏ã„ÄÇ

ËôΩÁÑ∂Ôºådistutils Â∑•ÂÖ∑ÁõÆÂâçÂ∑≤ÁªèË¢´ÊúÄÊñ∞ÁöÑ setuptools ÊâÄÂèñ‰ª£Ôºå‰ΩÜÊòØËøòÊòØÂÖºÂÆπÂèØÁî®Áä∂ÊÄÅ„ÄÇ

ÂèÇËÄÉ distutils.core Ê∫ê‰ª£Á†ÅÔºåÊàñËÄÖÊ∫ê‰ª£Á†Å Doc ÁõÆÂΩï‰∏ãÁöÑÁ§∫ËåÉÊñá‰ª∂ÔºåÂèØ‰ª•Êü•ËØ¢ÂèØÁî®ÁöÑÂèÇÊï∞ÔºåÂàóÂ¶ÇÔºå‰ΩøÁî® *library_dirs* Âíå *libraries* ÁªôÁºñËØëÂô®Ê∑ªÂä†Â∫ìÊñá‰ª∂ÂèäÂºïÁî®ÁõÆÂΩï„ÄÇ


## ==‚ö°  C/C++ Extensions with distutils
- PEP 632, Deprecate distutils module https://www.python.org/dev/peps/pep-0632
- Python Packaging User Guide https://packaging.python.org/
- Setup Tools https://setuptools.pypa.io/en/latest/
- Distributing Python Modules (Legacy version) https://setuptools.pypa.io/en/latest/deprecated/distutils/index.html
- Python Bindings: Calling C or C++ From Python by by Jim Anderson https://realpython.com/python-bindings-overview/
- What Is the Python Global Interpreter Lock (GIL)? https://realpython.com/python-gil/

‰ΩøÁî® C/C++ Êâ©Â±ï Python ÁõÆÁöÑÊòØÈÄöËøáÊâ©Â±ïÂÆûÁé∞ C/C++ ‰ª£Á†ÅË∞ÉÁî® Python ‰ª£Á†ÅÂäüËÉΩÔºåÊàñËÄÖÂèçÂêëÊìç‰ΩúÔºåËøô‰∏™ËøáÁ®ã‰ºöÊ∂âÂèäÊï∞ÊçÆÁ±ªÂûãÁöÑËΩ¨Êç¢Ôºå‰ª•ÂèäÂú® C/C++ Âíå Python ‰πãÈó¥‰º†ÈÄíÊï∞ÊçÆ„ÄÇ

Âõ†‰∏∫‰∏§ÁßçËØ≠Ë®ÄÊï∞ÊçÆÁ±ªÂûãÂá†‰πé‰∏çÂèØËÉΩ‰∏ÄËá¥Ôºå‰º†ÈÄí‰πãÂâçÂ∞±ÈúÄË¶ÅÊúâ‰∏Ä‰∏™È¢ÑÂÖàÂ§ÑÁêÜÁöÑËøáÁ®ãÔºåMarshalling Data TypesÔºö

The process of transforming the memory representation of an object to a data format suitable for storage or transmission. (Source)

- Êï¥Êï∞ÔºåPython ‰ΩøÁî®‰ªªÊÑèÁ≤æÂ∫¶ÁöÑÊï∞ÊçÆÁªìÊûÑÂÆûÁé∞ÔºåËÄå C ËØ≠Ë®ÄÊòØÂõ∫ÂÆöÁ≤æÂ∫¶ÁöÑÔºõ
- ÊµÆÁÇπÊï∞ÔºåPython ÂèØ‰ª•Â≠òÂÇ®ÊØî C Êõ¥Â§ß„ÄÅ‰πüÊõ¥Â∞èÁöÑÊµÆÁÇπÊï∞ÔºåËΩ¨Êç¢Êó∂Ë¶ÅÁ°Æ‰øùÂÆÉ‰ª¨‰øùÊåÅÂú®ËåÉÂõ¥ÂÜÖ„ÄÇ
- Â§çÊï∞ÔºåPython Âíå C ËØ≠Ë®ÄÈÉΩÊúâÂ§çÊï∞Ôºå‰ΩÜÂêéËÄÖÊ≤°ÊúâÁõ∏Â∫î marshal/unmarshal ÊñπÊ≥ï„ÄÇ
- Â≠óÁ¨¶‰∏≤ÔºåPython ÁöÑÂ≠óÁ¨¶‰∏≤ÊòØ‰∏ÄÁßçÂ§çÊùÇÁªìÊûÑ‰ΩìÔºå‰ΩøÁî® Unicode ÁºñÁ†ÅÔºåÂíå C ËØ≠Ë®ÄÁöÑÂ≠óÁ¨¶‰∏≤‰∏çÂêå„ÄÇ
- Â∏ÉÂ∞îÂÄºÔºåËøôÁßçÁÆÄÂçïÁöÑÊï∞ÊçÆÂú® Python Âíå C ËØ≠Ë®ÄÈÉΩÈùûÂ∏∏Áõ∏‰ººÔºåÂè™Êúâ‰∏§‰∏™ÂÄºÔºåÊâÄ‰ª•Â§ÑÁêÜËµ∑Êù•Áõ∏ÂΩìÁÆÄÂçï„ÄÇ

Python Ê†πÊçÆÊâÄÊúâÂØπË±°Âú®ÂÜÖÂ≠ò‰∏≠ÂèØÂê¶‰øÆÊîπÔºåÂàÜ‰∏∫‰∏§Á±ªÔºåmutable or immutableÔºåÂÉèÂ≠óÁ¨¶‰∏≤Êï∞ÊçÆÂ∫èÂàóÔºåÂÆö‰πâÂêéÂ∞±ÊòØÂõ∫ÂÆö‰∏çËÉΩ‰øÆÊîπÔºåÂ±û‰∫é immutable Á±ªÂûãÂØπË±°„ÄÇ

C ËØ≠Ë®ÄÁöÑÂáΩÊï∞ÂèÇÊï∞‰πüÊúâÁõ∏‰ººÁöÑÊ¶ÇÂøµÔºåpass-by-value or pass-by-referenceÔºåÊâÄÊúâÂèÇÊï∞ÈªòËÆ§ÈÉΩÊòØÊåâÂÄº‰º†ÈÄíÔºåÂç≥Â∞ÜÂ§çÂà∂ÁöÑ‰º†ÈÄíÂà∞ÂáΩÊï∞ÂÜÖÈÉ®ÔºåÈô§Èùû‰ΩøÁî®ÊåáÈíàÊâçËÉΩÂÆûÁé∞ÊåâÂºïÁî®ÊñπÂºè‰º†ÈÄíÂèÇÊï∞„ÄÇ

Èô§Èùû‰Ω†ÈúÄË¶ÅÂÆûÁé∞‰∏ëÈôãÂíå‰∏çÂèØÁßªÊ§çÁöÑÂ∫îÁî®ÔºåÂê¶Âàô Python ‰∏ç‰ºöÁªô‰Ω†‰∏Ä‰∏™ÊåáÂêëÂØπË±°ÁöÑÊåáÈíà„ÄÇÂ¶ÇÊûúÊÇ®ÊÉ≥Âú® C ËØ≠Ë®Ä‰∏≠‰øÆÊîπ Python ÂØπË±°ÔºåÈÇ£‰πàÊÇ®ÈúÄË¶ÅÈááÂèñÈ¢ùÂ§ñÁöÑÊ≠•È™§Êù•ÂÆûÁé∞Ëøô‰∏ÄÁÇπ„ÄÇÂàõÂª∫ Python ÁªëÂÆöÊó∂Ê∑ªÂä†‰∏çÂèØÊõ¥ÊîπÊÄßÁöÑÊ£ÄÊü•Ê∏ÖÂçïÔºåËøôÂèØ‰ª•Âä©‰Ω†ÁêÜËß£Â¶Ç‰ΩïÂ§ÑÁêÜ Python Âíå C Â§ÑÁêÜÂÜÖÂ≠òÁÆ°ÁêÜÊñπÂºèÁöÑÂ∑ÆÂºÇ„ÄÇ

C Âíå Python ÂÜÖÂ≠òÁÆ°ÁêÜÊñπÂºèÂ∑ÆÂà´ÂæàÂ§ßÔºåC ËØ≠Ë®ÄÈÄöËøá *malloc* Âíå *free* Á≠âÂáΩÊï∞Áî≥ËØ∑ÂÜÖÂ≠òÂíåÈáäÊîæÂÜÖÂ≠òÔºåËÄå Python ÂÆûÁé∞‰∫Ü GC - Garbage collectorÔºåÂÆÉÈÄöËøáÂºïÁî®ËÆ°Êï∞ÁöÑÊñπÂºèÊù•Â§ÑÁêÜÂÜÖÂ≠òÂõûÊî∂ÈóÆÈ¢ò„ÄÇÂâçËÄÖ‰ºòÁÇπÊòØËá™Áî±Â∫¶ÈùûÂ∏∏Â§ßÔºå‰ΩÜÊòØÈúÄË¶ÅÂºÄÂèëËÄÖËá™Ë°åÁÆ°ÁêÜÂÜÖÂ≠òÁöÑÂàÜÈÖç„ÄÇ

‰æãÂ¶ÇÔºåPython ËÑöÊú¨‰∏≠Ôºå`x = 3` Â∞±‰ºöÂú®Ëß£ÈáäÂô®ÂÜÖÈÉ®ÂàÜÈÖçÂÜÖÂ≠ò‰øùÂ≠ò‰∏Ä‰∏™ PyLongObject ÂØπË±°„ÄÇËÄå C ËØ≠Ë®ÄÂàôË∞ÉÁî®ÂáΩÊï∞Âä®ÊÄÅÂàÜÈÖçÂíåÈáäÊîæÂÜÖÂ≠òÔºö

```c
int* iPtr = (int*)malloc(sizeof(int));
free(iPtr)
```


ÁºñÂÜôÁºñËØë„ÄÅÂÆâË£ÖËÑöÊú¨ setup.py ÂÜÖÂÆπÔºåÊâßË°åÂÆÉÂ∞±‰ºöÁºñËØëÊ®°ÂùóÂπ∂Â∞ÜÊ®°ÂùóÊñá‰ª∂ÂÆâË£ÖÂà∞ site-packages ÁõÆÂΩïÔºö

```py
from distutils.core import setup, Extension
# ref Python310\Lib\distutils\core.py

spam = Extension('spam',
    library_dirs = ['c:/Python310/libs'],
    libraries = ['_tkinter', 'python3', 'python310'],
    sources = ['spammodule.c'])

setup (name = 'spamp',
    version = '1.0',
    description = 'This is a spamp package',
    ext_modules = [spam])
```

ÊàñËÄÖ‰ΩøÁî® setuptools Êõø‰ª£ distutils ÂèëÂ∏ÉÂ∑•ÂÖ∑ÔºåÁºñÂÜô setup.py ËÑöÊú¨ÔºåÂπ∂ÊâßË°å python setup.py build Êàñ install ÂëΩ‰ª§ËøõË°åÁºñËØë„ÄÅÂÆâË£ÖÊìç‰ΩúÔºö

```py
from setuptools import setup, Extension

setup(
    name='spamp',
    version='0.0.1',
    packages=['spamp'],
    description="This is a spamp package",
    ext_modules=[Extension("spam", sources=["spamp/spammodule.c"])],
    # install_requires=[
    #     'requests',
    #     'importlib; python_version == "2.6"',
    # ],
)
```


ÂèØËÉΩÈúÄË¶ÅÊ†πÊçÆÊü•ËØ¢Âà∞ÁöÑ Python Â∫ìÊñá‰ª∂‰ΩøÁî®ÁöÑÁºñËØëÂô®ÁâàÊú¨Êù•ÁºñËØëÊâ©Â±ïÔºö

>>> import sys
>>> sys.version
'3.10.2 (tags/v3.10.2:a58ebcc, Jan 17 2022, 14:12:15) [MSC v.1929 64 bit (AMD64)]'

Êâ©Â±ïÊ®°ÂùóÂÆûÁé∞‰ª£Á†ÅÊñá‰ª∂ÂèÇËÄÉ spammodule.cÔºö

```c
#define PY_SSIZE_T_CLEAN
#include <Python.h>
    
static PyObject *
spam_system(PyObject *self, PyObject *args)
{
    const char *command;
    int sts;

    if (!PyArg_ParseTuple(args, "s", &command))
        return NULL;
    sts = system(command);
    return PyLong_FromLong(sts);
};

static PyMethodDef SpamMethods[] = {
    // ...
    { "system", spam_system, METH_VARARGS, "Execute a shell command"},
    // ...
    { NULL, NULL, 0, NULL } /* Sentinel */
};

static struct PyModuleDef spammodule = {
    PyModuleDef_HEAD_INIT,
    "spam",     /* name of module */
    "spam_doc", /* module documentation, may be NULL */
    -1,         /* size of per-interpreter state of the module,
                   or -1 if the module keeps state in global variables. */
    SpamMethods
};


PyMODINIT_FUNC
PyInit_spam(void) // module initialization function
{
    return PyModule_Create(&spammodule);
}
```

ÊâßË°åÁºñËØëÂëΩ‰ª§‰ºöË∞ÉÁî® C/C++ ÁºñËØëÂô®ÔºåÂπ∂Âú®ÊûÑÂª∫ËæìÂá∫ÁõÆÂΩïÁîüÊàê pyd Âä®ÊÄÅÂ∫ìÊ®°ÂùóÊñá‰ª∂ÔºåÈúÄË¶ÅÊâßË°åÂÆâË£ÖÂëΩ‰ª§ÊâçËÉΩÊ≠£Â∏∏‰ΩøÁî®Êâ©Â±ïÊ®°ÂùóÔºåÂê¶ÂàôÔºåÊ®°ÂùóÂèØ‰ª•Ë¢´Âä†ËΩΩÔºå‰ΩÜÊòØÂèØËÉΩÊâæ‰∏çÂà∞ÊñπÊ≥ïÂÆö‰πâ„ÄÇ

Âä®ÊÄÅÊâ©Â±ïÂ∫ìÂè™ÊòØ‰ºóÂ§öÂ∫ìÊñá‰ª∂Ê†ºÂºè‰∏≠ÁöÑ‰∏ÄÁßçÔºåÂèÇËÄÉÂÆòÊñπ‰ª£Á†ÅÊñáÊ°£ Library and Extension FAQÔºö Python-3.10.2\Doc\faq\library.rst

1) modules written in Python (.py);
2) modules written in C and dynamically loaded (.dll, .pyd, .so, .sl, etc);
3) modules written in C and linked with the interpreter;


```sh
> python setup.py build
# output build/lib.win-amd64-3.10/spam.cp310-win_amd64.pyd
> python setup.py install
running install
running build
running build_ext
running install_lib
copying build/lib.win-amd64-3.10/spam.cp310-win_amd64.pyd -> /py3102/Lib/site-packages
running install_egg_info
Writing /py3102/Lib/site-packages/spamp-1.0-py3.10.egg-info
```

ÁºñÂÜôÊ®°ÂùóÊµãËØïËÑöÊú¨Ôºö

```py
import spam

spam.system("dir")

print(f"""
    {'__doc__':>16} = {spam.__doc__}
    {'__file__':>16} = {spam.__file__}
    {'__loader__':>16} = {spam.__loader__}
    {'__name__':>16} = {spam.__name__}
    {'__package__':>16} = {spam.__package__}
    {'__spec__':>16} = {spam.__spec__}
    """)
    # {'__path__':>16} = {spam.__path__}
```

Áõ∏Â∫îÁöÑÊ®°Âùó‰ø°ÊÅØÊñá‰ª∂ egg-info Êñá‰ª∂ÂÜÖÂÆπÂ¶Ç‰∏ãÔºåÂÖ∂ÂÆÉÈÖçÁΩÆËÆæÁΩÆÂèÇËÄÉ Python310\Lib\distutils\core.py ‰ª£Á†ÅÊñá‰ª∂Ôºö

```yaml
Metadata-Version: 1.0
Name: spamp
Version: 1.0
Summary: This is a spamp package
Home-page: UNKNOWN
Author: UNKNOWN
Author-email: UNKNOWN
License: UNKNOWN
Description: UNKNOWN
Platform: UNKNOWN
```

ËøôÊòØÂÆåÂÖ®Âü∫‰∫é C ËØ≠Ë®ÄËøõË°åÊâ©Â±ïÂ∫ìÂáΩÊï∞ÁöÑÂ§çÊùÇÊûÑÂª∫ÊñπÊ≥ïÔºå‰ΩÜÊòØÔºåÊúâÊó∂‰Ω†ÈúÄË¶ÅÂÅöÁöÑÂè™ÊòØË∞ÉÁî®‰∏Ä‰∫õÁ≥ªÁªüË∞ÉÁî®Êàñ‰∏Ä‰∫õ C Â∫ìÂáΩÊï∞ÔºåÂèØ‰ª•‰ΩøÁî® Python Áé∞ÊúâÁöÑ ctypes Ê®°ÂùóÊàñ cffi Á≠âÂ∑•ÂÖ∑Â∫ìÊù•ÁÆÄÂåñÊâ©Â±ïÁöÑÂºÄÂèëËøáÁ®ã„ÄÇ

C/C++ Â∑•Á®ãÊèê‰æõ Python Êé•Âè£ÔºåÊúâÂà©‰∫éËûçÂêàËøõ Python ÁöÑÁîüÊÄÅ„ÄÇÁé∞Âú® Python Âú®Â∫îÁî®Â±ÇÔºåÊúâÂÖ∂ÂæóÂ§©Áã¨ÂéöÁöÑ‰ºòÂäø„ÄÇÂ∞§ÂÖ∂Âõ†‰∏∫‰∫∫Â∑•Êô∫ËÉΩÂíåÂ§ßÊï∞ÊçÆÁöÑÊé®Ê≥¢Âä©ÊæúÔºå Python Áé∞Âú®‰ª•ÂèäÊú™Êù•ÔºåÂ∞ÜÈïøÊúüÊòØÊúÄÊµÅË°åÁöÑËØ≠Ë®Ä‰πã‰∏Ä„ÄÇ

ÈÇ£ C/C++ ÊÄé‰πàÊèê‰æõ Python Êé•Âè£Âë¢ÔºüÊèê‰æõÂÆûÁé∞ÁöÑÊ°ÜÊû∂ÈùûÂ∏∏Â§öÔºåÊØîÂ¶ÇÔºö

- ctypes: C ‰∏é Python ÁªëÂÆöÔºåPython ÂÜÖÂª∫Ê®°Âùó
- Boost.Python: C++ ‰∏é Python ÁªëÂÆöÔºå Boost Ê®°Âùó
- pybind11: C++11 ‰∏é Python ÁªëÂÆöÔºå ÂáèÂéª‰∫ÜÊóß C++ ÊîØÊåÅÔºåÊõ¥ËΩªÈáèÂåñ

PyBind11 ÊòØ header-only ÂºÄÊ∫êÂ∫ìÔºå‰∏çÈúÄË¶ÅÁºñËØëÂä®ÊÄÅÈìæÊé•Â∫ìÔºåÁõ¥Êé•‰ΩøÁî®Â§¥Êñá‰ª∂„ÄÇ

    git clone git@github.com:pybind/pybind11.git

Âè¶Â§ñÔºåÈÄöËøáÂ∞ÜÂÖ≥ÈîÆÈÉ®ÂàÜËΩ¨Êç¢‰∏∫ C/C++ÔºåÊòØÊëÜËÑ± Python GIL ÈôêÂà∂ÁöÑÊñπÊ≥ïÔºåÂèØ‰ª•Áî®Êù•Âä†Âø´ Python ‰ª£Á†ÅÁöÑÁâπÂÆöÈÉ®ÂàÜÁöÑÈÄüÂ∫¶„ÄÇ



## ==‚ö°  C/C++ Extensions with ctypes
- Python Bindings: Calling C or C++ From Python by by Jim Anderson https://realpython.com/python-bindings-overview/#ctypes
- https://github.dev/realpython/materials/blob/master/python-bindings/
- Understanding ‚Äúextern‚Äù keyword in C https://www.geeksforgeeks.org/understanding-extern-keyword-in-c/


Python 2.5 ÂºÄÂßãÂÜÖÁΩÆ‰∫Ü ctypes Ê®°ÂùóÔºåÈÄöËøáÂÆÉÂèØ‰ª•ÂæàÊñπ‰æøÂú∞ÂÆûÁé∞ C/C++ Êâ©Â±ïÂè™ÈúÄË¶Å‰ª•‰∏ã‰∏â‰∏™Ê≠•È™§ÔºåÊó†ÈúÄË¶ÅÂÖ∂ÂÆÉÈ¢ùÂ§ñÁöÑÊìç‰ΩúÔºåÊîØÊåÅÂêÑÁßç C/C++ Êï∞ÊçÆÁ±ªÂûãËΩ¨Êç¢Ôºö

- Load your library.
- Wrap some of your input parameters.
- Tell ctypes the return type of your function.

ÂÆòÊñπÊ∫ê‰ª£Á†ÅÊñáÊ°£ÂèÇËÄÉÔºö

    +-- Doc\library
    |  ‚úí python.rst            => Python Runtime Services
    |   ‚Ä¢ - gc.rst                   => `gc` --- Garbage Collector interface
    |  ‚úí allos.rst             => Generic Operating System Services
    |   ‚Ä¢ - ctypes.rst               => `ctypes` --- A foreign function library for Python

Á§∫ËåÉÔºå‰ΩøÁî® ctypes Â∫ìÊé•Âè£Âä†ËΩΩ Linux Â∫ìÊñá‰ª∂ÔºåÂπ∂Ë∞ÉÁî®Â∫ìÂáΩÊï∞ÔºåÊ≥®ÊÑèÊï∞ÊçÆÁ±ªÂûãÁöÑËΩ¨Êç¢ÔºåÂåÖÊã¨ÊåáÂÆöÂáΩÊï∞ÁöÑËøîÂõûÁ±ªÂûãÔºåÊñáÊ°£‰∏≠ Fundamental data types ÊúâËØ¶ÁªÜÁöÑÁ±ªÂûãÂàóË°®Ôºö

```py
import ctypes
import sys
import pathlib
import os

def test(lib):
    # Sample data for our call:
    x, y = 6, 2.3

    # This will not work: Don't know how to convert parameter 2
    # answer = lib.mult(x, y)

    # This produces a bad answer:
    answer = lib.mult(x, ctypes.c_float(y))
    print(f"    In Python: int: {x} float {y:.1f} return bad val {answer:.1f}")

    # You need tell ctypes that the function returns a float
    lib.mult.restype = ctypes.c_float
    # lib.mult.argtypes = [ctypes.c_int, ctypes.c_float]
    # answer = lib.mult(1, 0.1)
    answer = lib.mult(x, ctypes.c_float(y))
    print(f"    In Python: int: {x} float {y:.1f} return val {answer:.1f}")

def load_lib(lib):
   # Load the shared library into ctypes
   # libname = os.path.abspath(os.getcwd())+ f"/lib{lib}.so"
   libname = str(pathlib.Path().absolute()) + f"/lib{lib}.so"
   if sys.platform.startswith("win"):
      libname = os.path.abspath(".") + f"\\{lib}.dll"
   lib = ctypes.CDLL(libname)
   print("lib load: %s" % (lib))
   return lib

if __name__ == "__main__":
   os.add_dll_directory("C:/mingw/bin")
   test(load_lib("cmult"))
   test(load_lib("cppmult"))
```

‰ª•‰∏ãÊòØ Invoke ÈÖçÁΩÆËÑöÊú¨Êñá‰ª∂ tasks.pyÔºåÊâßË°åÂÆÉ‰ª•ÊûÑÂª∫ C/C++ ËØ≠Ë®ÄÂÆûÁé∞ÁöÑÂä®ÊÄÅÂ∫ìÔºö

```py
from invoke import run, task, Context
import sys
import os

on_win = sys.platform.startswith("win")

@task()
def build_cmult(c, path=None):
    """Build the shared library for the sample C code"""
    # Moving this type hint into signature causes an error (???)
    c: Context
    if on_win:
        if not path:
            print("Path is missing")
        else:
            # Using c.cd didn't work with paths that have spaces :/
            path = f'"{path}vcvars32.bat" x64'  # Enter the VS venv
            path += f'&& cd "{os.getcwd()}/python-bindings"'  # Change to current dir
            path += "&& cl /o ../cmult.dll /LD cmult.c"  # Compile
            # Uncomment line below, to suppress stdout
            # path = path.replace("&&", " >nul &&") + " >nul"
            c.run(path)
    else:
        print("Building C Library")
        run("gcc -c -Wall -Werror -fpic cmult.c -I /usr/include/python3.7")
        run("gcc -shared -o libcmult.so cmult.o")
        print("* Complete")

@task()
def build_cppmult(c):
    """Build the shared library for the sample C++ code"""
    print("Building C++ Library")
    run(
        "cd python-bindings & "
        "g++ -O3 -Wall -Werror -shared -std=c++11 -fPIC cppmult.cpp "
        "-o ../cppmult.dll "
    )
    print("* Complete")


if __name__ == '__main__':
    vcvar = "C:/Program Files (x86)/Microsoft Visual Studio/2017/BuildTools/VC/Auxiliary/Build/"
    build_cmult(Context(), vcvar)
    build_cppmult(Context())
```

Ê†πÊçÆÂ∫ì‰ΩøÁî®ÁöÑÂèÇÊï∞ÂÖ•Ê†àÁ∫¶ÂÆöÊñπÂºè‰∏çÂêåÔºåÊúâ CDLL„ÄÅOleDLL„ÄÅWinDLL„ÄÅPyDLL Á≠âÂ∫ìÁ±ªÂûãÂä†ËΩΩÊñπÂºèÔºå‰∏ªË¶ÅÊòØ `cdecl` Âíå 
`stdcall` ‰∏§ÁßçÂèÇÊï∞ÂÖ•Ê†àÁ∫¶ÂÆöÊñπÂºè„ÄÇ

Ê≥®ÊÑèÔºåÁºñËØëÁöÑÂä®ÊÄÅÂ∫ìÂíå Python ÁâàÊú¨ 32-bit Êàñ 64-bit Ë¶ÅÂåπÈÖçÔºåÂê¶Âàô‰ºöÂá∫Áé∞Á±ª‰ººÈîôËØØÔºö[WinError 193] %1 ‰∏çÊòØÊúâÊïàÁöÑ Win32 Â∫îÁî®Á®ãÂ∫è„ÄÇÂëΩ‰ª§Ë°åË∞ÉÁî® MSVC Êó∂ÔºåÊ≠£Á°ÆÊåáÂÆöÂåπÈÖçÁöÑ x86 Êàñ x64„ÄÇ

Ê≥®ÊÑèÔºåPython ‰ΩøÁî®Á≥ªÁªüÁöÑ API Âä†ËΩΩÂä®ÊÄÅÂ∫ìËøò‰ºöÊ∂âÂèä‰æùËµñÂä®ÊÄÅÂ∫ìÔºåÊâÄ‰ª•Âú® Window Á≥ªÁªü‰∏ä‰ΩøÁî® GCC ÁºñËØëÁöÑÂä®ÊÄÅÂ∫ìÂØºÂÖ•Êó∂ÂèØËÉΩ‰ºöÂá∫Áé∞ÂºÇÂ∏∏ÔºöFileNotFoundError: Could not find module (or one of its dependencies).

ÈúÄË¶ÅÂ∞ÜË¢´‰æùËµñÁöÑÂä®ÊÄÅÂ∫ìÊñá‰ª∂Ë∑ØÂæÑÊ∑ªÂä†Âà∞ÊêúÁ¥¢ÁõÆÂΩï‰∏≠ÔºåÊü•ËØ¢‰æùËµñ‰∫Ü‰ªÄ‰πàÂä®ÊÄÅÂ∫ìÔºåÂèØ‰ª•ÈÄöËøá dumpbin Â∑•ÂÖ∑Êü•ËØ¢ÔºåÂ¶Ç‰∏ãÔºö

    os.add_dll_directory("C:/mingw/bin")

    dumpbin /Imports libcmult.so

Âú® Windows Á≥ªÁªü‰∏ã‰ΩøÁî® GCC ÁºñËØë C++ Âä®ÊÄÅÂ∫ìÊó∂ÔºåËøòÊòØÂá∫Áé∞‰∫ÜÂºÇÂ∏∏Ôºå‰∏çÂèä MSVC Á®≥ÂÆöÔºöOSError: exception: access violation reading.

Êó¢ÁÑ∂ÊòØÂÜÖÂ≠òËÆøÈóÆËøùËßÑÔºåÈÇ£Â∞±Á¶ª‰∏çÂºÄÈîôËØØÁöÑÊåáÈíàÔºåËøô‰∏™ÂºÇÂ∏∏ÊòØÂú® `_call_function_pointer` Ë∞ÉÁî®Â∫ìÂáΩÊï∞Êó∂ÂèëÂá∫ÁöÑ„ÄÇ


‰ª•‰∏ãÊòØ C ËØ≠Ë®ÄÂÆûÁé∞ÁöÑÂ∫ìÂáΩÊï∞ÔºåÂæÖ Python ÈÄöËøá ctypes Êé•Âè£Ë∞ÉÁî®Ôºö

```c
#include <stdio.h>
#include "cmult.h"

float mult(int int_param, float float_param) {
    float return_value = int_param * float_param;
    printf("    In cmult : int %d float %.1f returning  %.1f\n", int_param,
            float_param, return_value);
    return return_value;
}
```

Âíå‰∏ÄËà¨ C Á®ãÂ∫èÂå∫Âà´‰∏çÂ§ßÔºå‰∏ªË¶ÅÊòØÂ§¥Êñá‰ª∂‰∏∫Âä®ÊÄÅÂ∫ìÂÆö‰πâ‰∫ÜÂØºÂá∫Á¨¶Âè∑ÔºåÂÆÉÂèØ‰ª•ËÆ©ÂÖ∂ÂÆÉÁ®ãÂ∫èÊâæÂà∞Â∫ìÂáΩÊï∞Ôºö

```c
#ifdef _MSC_VER
    #define EXPORT_SYMBOL __declspec(dllexport)
#else
    #define EXPORT_SYMBOL
#endif

EXPORT_SYMBOL float mult(int int_param, float float_param);
```

‰ª•‰∏ãÊòØ C++ ËØ≠Ë®ÄÁ®ãÂ∫è cppmult.cpp ÂÆûÁé∞ÁöÑÂ∫ìÂáΩÊï∞Ôºö

```cpp
#include <iostream>
#include <iomanip>
#include "cppmult.hpp"

float mult(int int_param, float float_param) {
    float return_value = int_param * float_param;
    std::cout << std::setprecision(2) << std::fixed
              << "    In cppmul: int " << int_param
              << " float " <<  float_param
              << " returning  " << return_value
              << std::endl;
    return return_value;
}
```

Â§¥Êñá‰ª∂ "cppmult.hpp" Âü∫Êú¨Âíå C ËØ≠Ë®Ä‰∏ÄËá¥ÔºåÈô§‰∫ÜÂ¢ûÂä†‰∫Ü `extern "c"` ÂÖ≥ÈîÆÂ≠óÂëäËØâ C++ ÁºñËØëÂô®ËøôÈáåÂåÖÂê´ C ËØ≠Ë®ÄÁ¨¶Âè∑Ôºå‰∏çË¶ÅËøõË°åÂêçÂ≠óÊ∑∑ÊùÇÔºö

```cpp
#ifdef _MSC_VER
    #define EXPORT_SYMBOL __declspec(dllexport)
#else
    #define EXPORT_SYMBOL
#endif

#ifdef __cplusplus
extern "C" {
#endif

EXPORT_SYMBOL float mult(int int_param, float float_param);

#ifdef __cplusplus
}
#endif
```

C ËØ≠Ë®ÄÁöÑ `extern` ÂÖ≥ÈîÆÂ≠ó‰∏ªË¶ÅÊòØÂÆö‰πâ `external linkage` ÈùôÊÄÅÈìæÊé•ÔºåË°®Á§∫Á¨¶Âè∑ÂèØ‰ª•Âú®Êï¥‰∏™Â∑•Á®ã‰∏≠‰ΩøÁî®ÔºåËÄå‰∏ç‰ªÖ‰ªÖÂú®Â±ÄÈÉ®ÊàñÊñá‰ª∂ÂÜÖÊúâÊïàÔºå‰ΩúÁî®ÂåÖÊã¨Ôºö

1. Â£∞ÊòéÁ¨¶Âè∑ÂèØ‰ΩøÁî®‰ªªÊÑèÊ¨°‰ΩÜ‰∏çÂàÜÈÖçÂÜÖÂ≠òÔºåÂ¶Ç `extern int var`Ôºõ
2. extern ÂÖ≥ÈîÆÂ≠óÁî®Êù•Êâ©Â±ïÁ¨¶Âè∑Âú®ÂêÑ‰∏™Á®ãÂ∫è‰∏≠ÂèØËßÅÔºõ
3. Âõ†‰∏∫ÂáΩÊï∞ÈªòËÆ§Â∞±ÊòØÊï¥‰∏™Á®ãÂ∫èÂèØËßÅÔºåÊâÄ‰ª•‰∏çÈúÄË¶ÅÊòæÂºè‰ΩøÁî® extern ÂÖ≥ÈîÆÂ≠óÔºõ 
4. Áî®Âú®ÂèòÈáè‰∏äÔºåÂè™ÊòØË°®Á§∫Â£∞ÊòéËÄå‰∏çÊòØÂÆö‰πâÔºå‰ΩøÁî®ÂàùÂßãÂåñÂÄºÂàôÊòØÂÆö‰πâÁ¨¶Âè∑Ôºå‰ªÖ‰ΩøÁî®‰∏ÄÊ¨°ÔºåÂ¶Ç `extern int var = 1`Ôºõ


## ==‚ö°  C/C++ Extensions with PyBind11
- https://realpython.com/python-bindings-overview/#pybind11
- https://pybind11.readthedocs.io/en/stable/

PyBind11 ÊòØ‰∏Ä‰∏™ËΩªÈáèÁ∫ßÁöÑ hpp Â§¥Êñá‰ª∂Â∫ìÔºåÂÆÉÂú® Python Âíå C++ Á®ãÂ∫è‰πãÈó¥ÂÖ¨ÂºÄÁ±ªÂûãÔºå‰∏ªË¶ÅÁî®‰∫éÂàõÂª∫Áé∞Êúâ C++ ‰ª£Á†ÅÁöÑ Python ÁªëÂÆöÔºåÊîØÊåÅ C++11 ËßÑËåÉ„ÄÇÂÆÉÁöÑÁõÆÊ†áÂíåËØ≠Ê≥ïÁ±ª‰ºº‰∫é David Abrahams ÁöÑ Boost.Python Â∫ìÔºöÈÄöËøá‰ΩøÁî®ÁºñËØëÊó∂Ëá™ÁúÅÊù•Êé®Êñ≠Á±ªÂûã‰ø°ÊÅØÔºå‰ªéËÄåÊúÄÂ§ßÈôêÂ∫¶Âú∞ÂáèÂ∞ë‰º†ÁªüÊâ©Â±ïÊ®°Âùó‰∏≠ÁöÑÊ†∑Êùø‰ª£Á†Å„ÄÇ

Boost.Python ÁöÑ‰∏ªË¶ÅÈóÆÈ¢òÊòØÂÆÉÁªìÊûÑÂ∫ûÂ§ßËÄåÂ§çÊùÇÔºåÂá†‰πéÂèØ‰ª•‰∏éÁé∞ÊúâÁöÑÊâÄÊúâ C++ ÁºñËØëÂô®‰∏ÄËµ∑‰ΩøÁî®„ÄÇËøôÁßçÂÖºÂÆπÊÄßÊòØÊúâ‰ª£‰ª∑ÁöÑÔºö‰∏∫‰∫ÜÊîØÊåÅÊúÄÂè§ËÄÅÂíåÊºèÊ¥ûÊúÄÂ§öÁöÑÁºñËØëÂô®Ê†∑Êú¨ÔºåÈúÄË¶Å‰ΩøÁî®Êô¶Ê∂©ÈöæÊáÇÁöÑÊ®°ÊùøÊäÄÂ∑ßÂíåÂèòÈÄöÊñπÊ≥ï„ÄÇ

Â¶ÇÊûúÊ≤°ÊúâÊ≥®ÈáäÔºåPyBind11 Ê†∏ÂøÉÂ§¥Êñá‰ª∂Âè™ÈúÄË¶ÅÂ§ßÁ∫¶ 4K Ë°å‰ª£Á†ÅÔºåÂπ∂‰∏î‰æùËµñ‰∫é C++ Ê†áÂáÜÂ∫ìÂíå Python 2.7 Êàñ 3.5+ÔºåÊàñ PyPy„ÄÇ

Áî±‰∫é‰∏Ä‰∫õÊñ∞ÁöÑ C++11 ËØ≠Ë®ÄÁâπÊÄßÔºàÁâπÂà´ÊòØÔºöÂÖÉÁªÑ„ÄÅlambda ÂáΩÊï∞ÂíåÂèØÂèòÂèÇÊï∞Ê®°ÊùøÔºâÔºåËøôÁßçÁ¥ßÂáëÁöÑÂÆûÁé∞Êàê‰∏∫ÂèØËÉΩ„ÄÇËá™ÂàõÂª∫‰ª•Êù•ÔºåËØ•Â∫ìÂú®ËÆ∏Â§öÊñπÈù¢ÈÉΩË∂ÖË∂ä‰∫Ü Boost.PythonÔºå‰ªéËÄåÂú®ËÆ∏Â§öÂ∏∏ËßÅÊÉÖÂÜµ‰∏ãÊòæÁùÄÁÆÄÂåñ‰∫ÜÁªëÂÆö‰ª£Á†Å„ÄÇ

PyBind11 Áõ∏ÊØî ctypes„ÄÅCFFI Ëøô‰∫õËæÉÂéüÂßãÁöÑÊ°ÜÊû∂ÔºåÊúÄÂ§ßÁöÑ‰ºòÂäøÊòØÊîØÊåÅ C++11 Á≠âÊñ∞ÁâπÊÄßÔºåÂåÖÊã¨Ôºö

- class Á±ªÂΩ¢ÁöÑÊîØÊåÅÔºõ
- polymorphic subclassing Â§öÊÄÅÂ≠êÁ±ªÂûãÊîØÊåÅÔºõ
- ‰ª•ÂèäÊñπ‰æøÂú∞Âä®ÊÄÅÊ∑ªÂä†Â±ûÊÄßÔºåËÄåÂÖ∂ÂÆÉÂü∫‰∫é C ËØ≠Ë®ÄÁöÑÂ∑•ÂÖ∑Ê≤°ÊúâËøô‰πàÊñπ‰æøÁöÑÊìç‰ΩúÔºõ

pybind11 can map the following core C++ features to Python:

01. Functions accepting and returning custom data structures per value, reference, or pointer
02. Instance methods and static methods
03. Overloaded functions
04. Instance attributes and static attributes
05. Arbitrary exception types
06. Enumerations
07. Callbacks
08. Iterators and ranges
09. Custom operators
10. Single and multiple inheritance
11. STL data structures
12. Smart pointers with reference counting like std::shared_ptr
13. Internal references with correct reference counting
14. C++ classes with virtual (and pure virtual) methods can be extended in Python

ÂÆâË£Ö pybind11

    pip install pybind11

Âú® git Â∑•Á®ã‰∏≠ÔºåÂèØ‰ª•Â∞ÜÂÖ∂‰Ωú‰∏∫Â≠êÊ®°ÂùóÂä†ËΩΩÔºö

    git submodule add -b stable git@github.com:pybind/pybind11.git extern/pybind11
    git submodule update --init

ÊàñËÄÖ‰ΩøÁî® Microsoft vcpkg ‰æùËµñÁÆ°ÁêÜÂ∑•ÂÖ∑ËøõË°åÂÆâË£ÖÔºö

```sh
git clone https://github.com/Microsoft/vcpkg.git
cd vcpkg
./bootstrap-vcpkg.sh
./vcpkg integrate install
vcpkg install pybind11
```

PyBind11 Ê∫ê‰ª£Á†Å‰∏≠ÂåÖÂê´‰∫Ü CMake ÁºñÂÜôÁöÑÊµãËØïËÑöÊú¨ÔºåÂÆÉ‰ºöÂ∞ùËØïÈÄöËøá *PYTHON_EXECUTABLE* ÂèòÈáèÊåáÂÆö Python ‰∏ªÁ®ãÂ∫èÔºåÂπ∂ÈÄöËøáËÑöÊú¨Êü•ËØ¢ sysconfig Ê®°ÂùóÊèê‰æõÁöÑ‰ø°ÊÅØÊù•Á°ÆÂÆöÂ∫ìÊñá‰ª∂‰ΩçÁΩÆ„ÄÇÂú® Linux Á≥ªÁªü‰∏äÂÆâË£ÖÂ•Ω python-dev Êàñ python3-dev ÂºÄÂèëÂåÖÔºå‰ª•Âèä cmake Â∑•ÂÖ∑Â∞±ÂèØ‰ª•ËøõË°åÊµãËØï„ÄÇ

ÈÉ®ÂàÜÊµãËØï‰æùËµñ Boost.PythonÔºåËøôÊòØÂèØÈÄâÁöÑÔºåÊ†πÊçÆÈúÄË¶ÅÂÆâË£ÖÔºåÂè¶Â§ñËøòÈúÄË¶ÅÁî®Âà∞ build„ÄÅnumpy„ÄÅpytest ‰ª•Âèä scipy ÁßëÂ≠¶ËÆ°ÁÆóÁ≠âÊ®°ÂùóÔºåÂèØ‰ª•Áõ¥Êé•ÈÄöËøá‰æùËµñÂàóË°®Êñá‰ª∂ÂÆâË£Ö„ÄÇ

```sh
# vcpkg install boost-python:x64-windows
# vcpkg install boost-python:x64-mingw
# pip freeze > requirements.txt
pip install -r requirements.txt

mkdir build
cd build
# Linux/macOS
cmake ..
make check -j 4
# Windows
cmake -A x64 ..
cmake --build . --config Release --target check
```

Windows Á≥ªÁªü‰∏äÔºåcmake ÈªòËÆ§ÁîüÊàê Win32 Âπ≥Âè∞ÊûÑÊû∂ÁöÑËÑöÊú¨ÔºåÂèØ‰ª•ÊåáÂÆö 64-bit ÁõÆÊ†áÂπ≥Âè∞ÊûÑÊû∂„ÄÇ

ÈúÄË¶Å Visual Studio 2015 ‰ª•‰∏äÊîØÊåÅ PyBind11 ‰æùËµñÁöÑ C++11 ËØ≠Ë®ÄÁâπÊÄß„ÄÇVisual Studio 2017 (MSVC 14.1) ‰∏äÂêØÁî® C++17ÔºåÈúÄË¶Å‰∏∫ PyBind11 ‰º†ÂÖ• `/permissive-` ÁºñËØëÂô®ÈÄâÈ°π„ÄÇ


Âú® Linux Á≥ªÁªüÂèØ‰ª•‰ΩøÁî® `python3 -m pybind11 --includes` ÂëΩ‰ª§Êù•Ëé∑ÂèñÂ§¥Êñá‰ª∂ÁöÑ‰ΩçÁΩÆÔºåbash ÊîØÊåÅÁªôÂëΩ‰ª§Âä†ÂèçÂºïÂè∑‰ª•Ëé∑ÂæóÂëΩ‰ª§ËæìÂá∫ÁöÑÂÜÖÂÆπ„ÄÇÂú® Windows Âπ≥Âè∞‰∏äÔºåÈúÄË¶ÅÁªôÁºñËØëÂô®ÊåáÂÆöÈìæÊé•ÁöÑ Python Â∫ìÊñá‰ª∂ÂêçÂèä‰ΩçÁΩÆÔºåÂê¶Âàô‰ºöÂá∫Áé∞Á¨¶Âè∑Êú™ÂÆö‰πâÈîôËØØ„ÄÇÂú® Linux Âπ≥Âè∞‰∏äÔºåÂÆâË£ÖÂºÄÂèëÂåÖÂêé sudo apt install python3.9-devÔºåÂ∞±ÂèØ‰ª•Ëá™Âä®ÂÆö‰ΩçÂà∞Â∫ìÊñá‰ª∂„ÄÇ

```py
import sysconfig
print(sysconfig.get_config_var('EXT_SUFFIX'))
# Python-3.10.2\Misc\python-config.in
```

Âíå CFFI Á±ª‰ººÔºåPyBind11 ‰πüÈúÄË¶ÅÁºñÂÜô‰ª£Á†ÅÊù•ÁªëÂÆöÂä®ÊÄÅÂ∫ìÂØºÂá∫ÁöÑÁ¨¶Âè∑Ôºå‰ΩÜÊòØ‰ΩøÁî®ÁöÑÊòØÊ†áÂáÜÁöÑ C++ Á®ãÂ∫èÔºå‰ª•‰∏ãÊòØÊúÄÁÆÄÂçïÁöÑ Python Ê®°ÂùóÁªëÂÆöÔºö

```cpp
// pybind11_wrapper.cpp
#include <pybind11/pybind11.h>
#include <cppmult.hpp>

PYBIND11_MODULE(pybind11_example, m) {
    m.doc() = "pybind11 example plugin"; // Optional module docstring
    m.def("cpp_function", &cppmult, "A function that multiplies two numbers");
}
```

PyBind11 ÁöÑÁªëÂÆö‰ª£Á†ÅÁºñÂÜôÂíå CPython Ê®°ÂùóÁªìÊûÑÂÆö‰πâÊúâËÆ∏Â§öÁ±ª‰ººÔºåÈÄöËøá *PYBIND11_MODULE* ÂÆèÂÆûÁé∞‰∏Ä‰∏™ CPython Ê®°ÂùóÔºåËß£ÈáäÂô®ËøêË°åÊó∂‰ºöÂØπÊ®°ÂùóËøõË°åÂàùÂßãÂåñ„ÄÇÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØÊ®°ÂùóÂêçÔºåÂç≥ËÑöÊú¨‰∏≠ÈÄöËøá import ÂØºÂÖ•Ê®°ÂùóÂêçÁß∞ÔºåÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÊòØ py::module ÂèòÈáèÂêç„ÄÇËøô‰∏™ÂÆèÁöÑÁªìÊûÑÈùûÂ∏∏Â∑ßÂ¶ôÂú∞ÈÄöËøáÂµåÂ•óÂÖ∂ÂÆÉÂÆèÂÆö‰πâÂÆûÁé∞‰∫ÜÂÆåÊï¥ÁöÑ CPython Ê®°ÂùóÁöÑÂÆûÁé∞ÔºåÂπ∂‰∏îÁÆÄÂåñÁöÑÂéüÂßã C Ë®ÄËØ≠‰ª£Á†ÅÊñπÂºèÁöÑÂÆûÁé∞„ÄÇ

‰∏∫‰∫ÜÊü•ÁúãÂÆèÂ±ïÂºÄÁöÑÂÜÖÂÆπÔºåÂèØ‰ª•‰ΩøÁî® g++ -E -P ÂëΩ‰ª§ÔºåÂÆÉÂè™Â∞ÜÂÆèÂ±ïÂºÄ‰ΩÜ‰∏çÁºñËØëÁ®ãÂ∫èÔºåËä±Êã¨Âè∑ÈÉ®ÂàÜÂ±ïÂºÄÂêéÂ∞±ÊòØÔºö

```c
extern "C" {
    float mult(int int_param, float float_param);
}

void pybind11_init_pybind11_example(::pybind11::module_ & (m)) 
{
    m.doc() = "pybind11 example plugin";
    m.def("cpp_function", &mult, "A function which multiplies two numbers");
}
```

m.doc() ÊòØÁªôÊ®°ÂùóÂÆö‰πâ docstringÔºåÂèØ‰ª•‰ΩøÁî® `R"pbdoc(...)pbdoc"` ÂÆö‰πâÂ§öË°åÊñáÊ°£ÂÜÖÂÆπ„ÄÇ

m.def() ÂÆö‰πâÊ®°ÂùóÁöÑÊñπÊ≥ïÔºåÂíå CPython Ê®°ÂùóÁöÑ *PyMethodDef* ÁªìÊûÑ‰∏ÄËá¥ÔºåÂÆÉ‰ºöÂ∞Ü mult Â∫ìÂáΩÊï∞ÂØºËá¥‰∏∫Ê®°ÂùóÊñπÊ≥ï cpp_functionÔºåÂêéÈù¢ÊòØËøô‰∏™Ê®°ÂùóÊñπÊ≥ï __doc__ ËØ¥ÊòéÂÜÖÂÆπ„ÄÇ

Â±ïÂºÄÁªìÊûÑÊòØ‰∏Ä‰∏™ÂÆåÊï¥ÁöÑ C++ Á®ãÂ∫èÔºåÈúÄË¶ÅÊ†πÊçÆÁ≥ªÁªüÂÆâË£ÖÁöÑÁºñËØëÂô®ÂØπÊ®°Âùó‰ª£Á†ÅËøõË°åÁºñËØëÔºåÂ¶ÇÊåáÂÆö PyBind11 Âíå Python Â§¥Êñá‰ª∂Ë∑ØÂæÑÂèäÂØºÂÖ•Â∫ìÊñá‰ª∂ÁöÑÊåáÂÆö„ÄÇ

ÂèØ‰ª•ÂÖàÂ∞ÜÂ∫ìÂáΩÊï∞ÁöÑÂÆûÁé∞ÁºñËØëÂà∞Áã¨Á´ãÁöÑÂä®ÊÄÅÈìæÊé•Â∫ìÊñá‰ª∂Ôºå‰πüÂèØ‰ª•Âíå PyBind11 ÂÆûÁé∞ÁöÑÊ®°Âùó‰∏ÄËµ∑ÁºñËØëÔºåÈÄöÂ∏∏Ë¶ÅÁªëÂÆöÁöÑÂ∫ìÈÉΩÊòØ‰∫ãÂÖàÁºñËØëÂ•ΩÁöÑ shared library„ÄÇ


Âõ†‰∏∫ PyBind11 ÁöÑÂÆûÁé∞ÊñπÂºè‰∏çÈúÄË¶ÅÂÉè Cython ÈÇ£Ê†∑ÁªèËøá‰∏Ä‰∏™ËΩ¨ËØëÊìç‰ΩúÔºåÊâÄ‰ª•Âè™ÈúÄË¶Å‰ΩøÁî® setuptools ÁºñÂÜô‰∏ÄËà¨ÁöÑÂÆâË£ÖËÑöÊú¨Âç≥ÂèØÔºåÊâßË°åÁõ∏Â∫îÁöÑ python setup.py ÂëΩ‰ª§ÁºñËØë„ÄÅÂÆâË£ÖÊ®°ÂùóÔºö

```py
from setuptools import setup, Extension
import os
import sys
import pybind11

os.chdir("python-bindings")
os.popen("chcp 65001")

if __name__ == '__main__':
    sys.argv = [__file__, "build", "-c", "msvc", "install"]

setup(
    name='pybind11_example',
    version='0.0.1',
    # packages=['pybind11_example'],
    description="This is pybind11_example package",
    ext_modules=[Extension("pybind11_example", 
        sources=["pybind11_wrapper.cpp", "cppmult.cpp"], 
        include_dirs=['.', pybind11.get_include()],
        # extra_compile_args=["/std:c++17", "/UPYBIND11_CPP14"],
        )],
    setup_requires=["pybind11>=2.9.2"],
    install_requires=[
        'pybind11>=2.9.2; python_version == "3.10"',
    ],
)
# python setup.py build -c mingw32
# python setup.py install
# python setup.py build -c mingw32 install
```

‰ΩøÁî® MSVC 14 (2019) ÁºñËØë PyBind11 2.10.0.dev1 Êó∂ÔºåÂá∫Áé∞Â∏∏Áî®Ë°®ËææÂºèÂØπË±°Ê≤°ÊúâËøõË°åÂàùÂßãÂåñÈîôËØØÔºö

    common.h(1037): error C2737: 'pybind11::overload_cast': 'constexpr' object must be initialized

MSVC 2019 ÁöÑÁâàÊú¨Âè∑ MSC_VER ÂÆö‰πâ‰∏∫ 1926ÔºåÈÄöËøá‰ª•‰∏ãÂÆèÂÆö‰πâÂèØ‰ª•Êü•ÁúãÂà∞ÔºåËÄå PyBind11 ‰∏≠ÊåáÂÆö `_MSC_VER < 1920` MSVC 2017 Êâç‰ºöÂØπ overload_cast ÂàùÂßãÂåñÔºåÊõ¥Ê≠£ÁâàÊú¨Âè∑ÂèØ‰ª•Ëß£ÂÜ≥Ôºö

    #define PP_STR(T) #T
    #define PP_GET(T) PP_STR(T)
    #pragma message (PP_GET(_MSC_VER))

ËøôÈáåÊúâ‰∏Ä‰∏™Êõ¥ÈÄöÁî®ÁöÑ #PRAGMA message ÂÆûÁé∞Ôºö

```c
// GCC preprocessor documentation 
// https://gcc.gnu.org/onlinedocs/cpp/Pragmas.html
// https://stackoverflow.com/questions/24225006/warning-and-error-as-macro
#if defined( __clang__ )
#   define PRAGMA( x )        _Pragma( #x )
#elif defined( __GNUC__ )
#   define PRAGMA( x )        _Pragma( #x )
#elif defined( _MSC_VER )
#   define PRAGMA( x )       __pragma( x )
#endif

#define STRINGIFY( str )      #str
#define STR( str )            STRINGIFY( str )

#define LINE                  STR( __LINE__ )
#define FILE                  __FILE__
#define FILE_LINE             __FILE__ "(" LINE ")"

#define LOG( info , msg )     PRAGMA( message( FILE_LINE ": " #info ": " msg ) )

LOG(INFO, STR(_MSC_VER))
```

ÁºñÂÜôÊµãËØïËÑöÊú¨Ôºö

```py
import os
os.add_dll_directory("c:/mingw/bin")

# pybind11_test.py
import pybind11_example
a = 2
b = 3.1
ans = pybind11_example.cpp_function(a, b)
print(f"PyBind11 mult: {a} * {b} = {ans}")

# cython_test.py
import cython_example

x, y = 6, 2.3
answer = cython_example.pymult(x, y)
print(f"Cython mult: int: {x} float {y:.1f} = {answer:.1f}")
```

‰ª•‰∏ãÊòØÁºñËØëËÑöÊú¨ tasks.pyÔºåÂèØ‰ª•Áõ¥Êé•ÊâßË°åÔºå‰πüÂèØ‰ª•ÈÄöËøá invoke all Ê®°ÂùóÂëΩ‰ª§ÊâßË°åÔºö

```py
import invoke
import glob
import shutil
import os
import sys
import sysconfig
import pybind11

# Python-3.10.2\Misc\python-config.in
ext = sysconfig.get_config_var('EXT_SUFFIX')
inc = ['-I' + sysconfig.get_path('include'), '-I' + pybind11.get_include(), "-I."]

on_win = sys.platform.startswith("win")

def print_banner(msg):
    print("==================================================")
    print("= {} ".format(msg))

def compile_python_module(cpp_name, extension_name, libs = ""):
    if on_win:
        libs += " -LC:/Python310/libs -lpython3 -lpython310"
    # invoke.run(f"g++ -E -P {' '.join(inc)} {cpp_name}")
    invoke.run(
        "g++ -O3 -Wall -Werror -shared -std=c++11 -fPIC -DMS_WIN64 "
        # "`python -m pybind11 --includes` "
        # "-I /usr/include/python3.7 -I .  "
        "{3} "
        "{0} "
        "-o {1}{2} " # `python3.7-config --extension-suffix` 
        "-L. {4} -Wl,-rpath,.".format(cpp_name, extension_name, ext, " ".join(inc), libs)
    )

@invoke.task()
def build_pybind11(c):
    """Build the pybind11 wrapper library"""
    print_banner("Building PyBind11 Module")
    compile_python_module("pybind11_wrapper.cpp cppmult.cpp", "pybind11_example")
    print("* Complete")


@invoke.task()
def build_cppmult(c):
    """Build the shared library for the sample C++ code"""
    print_banner("Building C++ Library")
    
    libname = "libcppmult.so"
    if on_win: libname = "cppmult.dll" 

    invoke.run(
        "g++ -O3 -Wall -Werror -shared -std=c++11 -fPIC cppmult.cpp "
        "-o {} ".format(libname)
    )
    print("* Complete")

@invoke.task(build_cppmult)
def build_cython(c):
    """Build the cython extension module"""
    print_banner("Building Cython Module")
    # Run cython on the pyx file to create a .cpp file
    invoke.run("cython --cplus -3 cython_example.pyx -o cython_wrapper.cpp")

    # Compile and link the cython wrapper library
    compile_python_module("cython_wrapper.cpp", "cython_example", "-lcppmult")
    print("* Complete")

@invoke.task
def clean(c):
    """Remove any built objects"""
    for file_pattern in (
        "*.o",
        "*.so",
        "*.obj",
        "*.dll",
        "*.exp",
        "*.lib",
        "*.pyd",
        "cython_wrapper.cpp",
        "cffi_example*",
        "Release*",
        "Build*",
    ):
        for file in glob.glob(file_pattern, root_dir=c.cwd):
            if os.path.isdir(file):
                shutil.rmtree(file)
            else:
                os.remove(file)

@invoke.task(
    clean,
    build_pybind11,
    build_cython,
)
def all(c):
    """Build and run all tests"""
    pass

if __name__ == '__main__':
    if os.path.exists("python-bindings"):
        os.chdir("python-bindings")
    import __main__
    program = invoke.Program(namespace=invoke.Collection.from_module(__main__))
    program.run(argv=[__file__, "all"])
```

## ==‚ö°  C/C++ Extensions with Cython
- Cython‚Äôs Documentation https://cython.readthedocs.io/en/latest/


Cython Êï¥‰∏™ÁºñËØëÊµÅÁ®ãÂíå PyBind11 ÊñπÂºèÂÆûÁé∞ÁöÑÊâ©Â±ïÁ±ª‰ººÔºåÈÉΩÊòØÁºñËØë C/C++ Âä®ÊÄÅÈìæÊé•Â∫ìÔºåÂè™ÊòØ Cython ÂÆûÁé∞Ê®°ÂùóÁöÑÁªëÂÆöÂ∞±ÂÉèÁºñÂÜô Python ËÑöÊú¨‰∏ÄÊ†∑„ÄÇ

‰πüÂ∞±ÊòØÂ§ö‰∫Ü‰∏Ä‰∏™‰∏≠Èó¥ËØ≠Ë®ÄÂ§ÑÁêÜËøáÁ®ãÔºåÂèØ‰ª•ÊâãÂä®Ë∞ÉÁî® cython ÂëΩ‰ª§Â∞Ü pyx ‰ª£Á†ÅËΩ¨Â∫è‰∏∫ C/C++ ‰ª£Á†Å„ÄÇ

```py
# cython_example.pyx
""" Example cython interface definition """
# cython --cplus -3 cython_example.pyx -o cython_wrapper.cpp

cdef extern from "cppmult.hpp":
    float mult(int int_param, float float_param)

def pymult( int_param, float_param ):
    return mult( int_param, float_param )
```

ÂÆâË£Ö cython Ê®°ÂùóÔºåÂπ∂ÊâßË°å‰ª•‰∏ãÂëΩ‰ª§ÔºåÂ∞±‰ºöÊåâËÑöÊú¨ÁîüÊàê C++ Ê®°Âùó‰ª£Á†ÅÔºåÁÑ∂ÂêéÂÜçËøõË°åÁºñËØëÔºåÊ®°ÂùóÂêçÁß∞ÂíåËÑöÊú¨Êñá‰ª∂Âêç‰∏ÄËá¥ cython_exampleÔºåÂ∫ìÂáΩÊï∞ÂØºÂá∫Âà∞Ê®°ÂùóÁöÑÂêçÁß∞‰∏∫ pymultÔºö

```sh
python3 -m pip install cython
cython --cplus -3 cython_example.pyx -o cython_wrapper.cpp
```

Cython ÊòØ‰∏Ä‰∏™Áõ∏ÂØπÂ§çÊùÇÁöÑÂ∑•ÂÖ∑ÔºåÂÆÉÂèØ‰ª•‰∏∫ C/C++ ÂàõÂª∫ÁöÑ Python ÁªëÂÆöÊèê‰æõÊ∑±Â±ÇÊ¨°ÁöÑÊéßÂà∂ÔºåÊèê‰æõÁ±ª‰ºº Python ËØ≠Ë®ÄÁöÑÊñπÊ≥ïÊù•ÁºñÂÜôÊâãÂä®ÊéßÂà∂ GIL ÁöÑ‰ª£Á†ÅÔºåËøôÂèØ‰ª•ÊòæËëóÂä†Âø´Êüê‰∫õÁ±ªÂûãÁöÑÈóÆÈ¢òÂ§ÑÁêÜ„ÄÇÁÑ∂ËÄåÔºåËøôÁßçÁ±ª‰ºº Python ÁöÑËØ≠Ë®ÄÔºåPyrexÔºåÂπ∂‰∏çÂÆåÂÖ®ÊòØ Python ËØ≠Ë®ÄÔºåÊâÄ‰ª•ÂΩì‰Ω†Âø´ÈÄü‰∫ÜËß£ C Âíå Python ÁöÑÂì™‰∫õÈÉ®ÂàÜÈÄÇÂêà‰∫éÂì™‰∫õÂú∞ÊñπÊó∂ÔºåÂ≠¶‰π†Êõ≤Á∫øÂ∞±‰ºöÂπ≥Áºì‰∫õ„ÄÇ

‰∏∫Êâ©Â±ïÁºñÂÜô setup.py ÂÆâË£ÖËÑöÊú¨Ôºö

```py
# file: setup.py
from setuptools import setup, Extension
from Cython.Build import cythonize
import os
import sys

if os.path.exists("python-bindings"): os.chdir("python-bindings")
if sys.platform.startswith("win"):    os.popen("chcp 65001")

if __name__ == '__main__':
    # sys.argv = [__file__, "build", "-c", "msvc", "install"]
    sys.argv = [__file__, "build", "-c", "mingw32", "install"]

extension = Extension(
    name="cython_example",
    sources=["cython_example.pyx", "cppmult.cpp"], 
    language="c++",
    extra_compile_args=["-DMS_WIN64"],
    include_dirs=['.'],
    # library_dirs=['.'],
    # libraries=["cppmult"],
)

setup(
    name="cython_mult",
    version="0.0.3",
    author="Jenago",
    author_email="254141293@qq.com",
    url="https://github.com/jimboyeah/run-snippet",
    description="Hello World!",
    ext_modules=cythonize([extension])
)
```

Âú® Windows Á≥ªÁªü‰∏ã‰ΩøÁî® Mingw-w64 ÁºñËØë Cython Ê®°ÂùóÔºå‰ºöÂá∫Áé∞ ModuleSetupCode.c Êä•ÈîôÔºådiv-by-zeroÔºåÂõ†‰∏∫ `SIZEOF_VOID_P` ÂÆèÂÆö‰πâÂíåÂÆûÈôÖËÆ°ÁÆóÂÄº `sizeof(void*)` ‰∏çÁõ∏Á≠âÔºåÂú®ÁºñËØëÂèÇÊï∞‰∏≠‰º†ÂÖ•ÂÆèÂÆö‰πâ -DMS_WIN64 ÂèØ‰ª•Ëß£ÂÜ≥„ÄÇ


## ==‚ö°  C/C++ Extensions with cffi
- Python Bindings: Calling C or C++ From Python by by Jim Anderson https://realpython.com/python-bindings-overview/#cffi
- C Foreign Function Interface https://cffi.readthedocs.io/en/latest/
- CFFI Overview https://cffi.readthedocs.io/en/latest/overview.html

CFFI ÊòØ Python ÁöÑ C Â§ñÈÉ®ÂáΩÊï∞Êé•Âè£ÔºåÂÆÉÈááÁî®‰∏ÄÁßçÊõ¥Âä†Ëá™Âä®ÂåñÁöÑÊñπÊ≥ïÊù•ÁîüÊàê Python ÁªëÂÆö„ÄÇ CFFI ÊúâÂ§öÁßçÊûÑÂª∫Âíå‰ΩøÁî® Python ÁªëÂÆöÁöÑÊñπÂºè„ÄÇ Êúâ‰∏§‰∏™‰∏çÂêåÁöÑÈÄâÈ°πÂèØ‰æõÈÄâÊã©ÔºåËøô‰∏∫ÊÇ®Êèê‰æõ‰∫ÜÂõõÁßçÂèØËÉΩÁöÑÊ®°ÂºèÔºö

‚û° ABI vs API Ê®°ÂºèÔºåÂú®Á®≥ÂÆö‰∏é‰æøÂà©‰πãÈó¥ÊùÉË°°Ôºö
    ‚û° API Ê®°Âºè‰ΩøÁî® C ÁºñËØëÂô®ÁîüÊàêÂÆåÊï¥ÁöÑ Python Ê®°ÂùóÔºåÊñáÊ°£Âº∫ÁÉàÂª∫ËÆÆ‰ΩøÁî® API Ê®°Âºè„ÄÇ
    ‚û° ABI Ê®°ÂºèÂä†ËΩΩÂÖ±‰∫´Â∫ìÂπ∂Áõ¥Êé•‰∏éÂÖ∂‰∫§‰∫í„ÄÇ Â¶ÇÊûú‰∏çËøêË°åÁºñËØëÂô®ÔºåÂàôÊ≠£Á°ÆÊûÑÈÄ†ÁªìÊûÑÂíåÂèÇÊï∞ÂæàÂÆπÊòìÂá∫Èîô„ÄÇ 
‚û° in-line vs out-of-line Ê®°ÂºèÔºåÂú®ÈÄüÂ∫¶Âíå‰æøÂà©ÊÄß‰πãÈó¥ÁöÑÊùÉË°°Ôºö
    ‚û° In-line mode Âú®ÊØèÊ¨°ËÑöÊú¨ËøêË°åÊó∂ÔºåÈÉΩ‰ºöÁºñËØë Python ÁªëÂÆö„ÄÇËøôÂæàÊñπ‰æøÔºåÂõ†‰∏∫ÊÇ®‰∏çÈúÄË¶ÅÈ¢ùÂ§ñÁöÑÊûÑÂª∫Ê≠•È™§„ÄÇ‰ΩÜÊòØÔºåÂÆÉÁöÑÁ°Æ‰ºö‰ΩøÊÇ®ÁöÑÁ®ãÂ∫èÂèòÊÖ¢„ÄÇ
    ‚û° Out-of-line mode ÈúÄË¶Å‰∏Ä‰∏™È¢ùÂ§ñÁöÑÊ≠•È™§Êù•‰∏ÄÊ¨°ÁîüÊàê Python ÁªëÂÆöÔºåÁÑ∂ÂêéÂú®ÊØèÊ¨°ËøêË°åÁ®ãÂ∫èÊó∂ÈÉΩ‰ΩøÁî®ÂÆÉ‰ª¨„ÄÇËøôË¶ÅÂø´ÂæóÂ§öÔºå‰ΩÜÊòØÂØπ‰∫éÊÇ®ÁöÑÂ∫îÁî®Á®ãÂ∫èÂèØËÉΩÂπ∂‰∏çÈáçË¶Å„ÄÇ

Áî±‰∫é CFFI ‰∏çÊòØÊ†áÂáÜÂ∫ìÁöÑ‰∏ÄÈÉ®ÂàÜÔºå‰ΩøÁî® pip ËøõË°åÂÆâË£ÖÔºåÂª∫ËÆÆÊÇ®‰∏∫Ê≠§ÂàõÂª∫‰∏Ä‰∏™ËôöÊãüÁéØÂ¢ÉÔºåËøô‰ºöÂ∞ÜËΩØ‰ª∂ÂåÖÂÆâË£ÖÂà∞ÊÇ®ÁöÑËôöÊãüÁéØÂ¢É‰∏≠ÔºåÈÅøÂÖç‰∏éÂÖ∂ÂÆÉËôöÊãüÁéØÂ¢ÉÁöÑÁâàÊú¨Áõ∏ÂÜ≤Á™Å„ÄÇ

    $ python3 -m pip install cffi

‰∏çÂêå‰∫é ctypesÔºå‰ΩøÁî® CFFI Êàñ PyBind11 ÈÉΩÊòØÂàõÂª∫ÂÆåÊï¥ÁöÑ Python Êâ©Â±ïÊ®°ÂùóÔºåÂèØ‰ª•‰ΩøÁî® import ËØ≠Âè•ÂØºÂÖ•ÊñπÂºèÊù•‰ΩøÁî®„ÄÇ

Âú®Â§ßÂûãÁöÑÊ®°Âùó‰∏≠‰ΩøÁî® CFFI ËÄå‰∏çÊòØ ctypesÔºåËøôÂèØ‰ª•Â§ßÂ§ßÊèêÈ´òËá™Âä®ÂåñÊïàÁéá„ÄÇ

CFFI Python bindings Âè™ÈúÄË¶Å‰∏â‰∏™Ê≠•È™§Ôºö

1. Write some Python code describing the bindings.
2. Run that code to generate a loadable module.
3. Modify the calling code to import and use your newly created module.

ÂÅáËÆæ‰ΩøÁî® CFFI ÁªëÂÆö‰∏Ä‰∏™ÂØºÂá∫‰∫ÜÂáΩÊï∞ `float pi_approx(int n);` ÁöÑÂ∫ì piapproxÔºåÂú®‰∏çÂêåÂπ≥Âè∞‰∏ãÂ∫ìÊñá‰ª∂Ê†ºÂºè‰∏çÂêåÔºåÈùôÊÄÅÂ∫ì‰πüÈÄÇÁî®Ôºö

- Windows: piapprox.dll, piapprox.lib (static library) 
- Linux and others: libpiapprox.so, libpiapprox.a  (static library)
- OS X: libpiapprox.dylib

Ë¶ÅÂú® Python ‰∏≠Ë∞ÉÁî®Ëøô‰∏™Â∫ìÂáΩÊï∞ÔºåÂ∞±ÂàõÂª∫‰ª•‰∏ã *piapprox_build.py* ËÑöÊú¨ÔºåË∞ÉÁî® cdef() ‰º†ÂÖ•ÂéüÂûãÂ£∞ÊòéÔºå‰∏çÊîØÊåÅ C/C++ ÁöÑÈ¢ÑÂ§ÑÁêÜ„ÄÇË∞ÉÁî® set_source() ‰º†ÂÖ•Ë¶ÅÁîüÊàêÁöÑÂ∞ÅË£ÖÂ±ÇÊñá‰ª∂ÂêçÂèäÂºïÁî®ÁöÑÂ§¥Êñá‰ª∂ÔºåËøòÊúâ C/C++ ÁºñËØëÂô®ÂèÇÊï∞„ÄÇ

API Mode, calling the C standard library

```py
from cffi import FFI
ffibuilder = FFI()

# cdef() expects a single string declaring the C types, functions and
# globals needed to use the shared object. It must be in valid C syntax.
ffibuilder.cdef("""
    float pi_approx(int n);
""")

# set_source() gives the name of the python extension module to
# produce, and some C source code as a string.  This C code needs
# to make the declarated functions, types and globals available,
# so it is often just the "#include".
ffibuilder.set_source("pi_cffi",
"""
     #include "pi.h"   // the C header of the library
""",
    extra_link_args=["-Wl,-rpath,."],
    include_dirs=[this_dir.as_posix()],
    library_dirs=[this_dir.as_posix()],
    libraries=['piapprox'])   # library name, for the linker

if __name__ == "__main__":
    ffibuilder.compile(verbose=True)
```

ÊâßË°å‰ª•‰∏äËÑöÊú¨ÂêéÔºåÁîüÊàê pi_cffi.c Êñá‰ª∂ÔºåÂÆÉÂÆûÁé∞‰∫Ü‰∏Ä‰∏™ÂÆåÊï¥ÁöÑ CPython Ê®°ÂùóÔºåÂπ∂‰∏îÂ∞ÜÂ£∞ÊòéÁöÑÂ∫ìÂáΩÊï∞ËøûÁªìÂà∞Ê®°Âùó‰∏≠‰æõË∞ÉÁî®„ÄÇ

ÊâßË°åÁºñËØëÊó∂ÈúÄË¶ÅÊ≠£Á°ÆÁöÑÁºñËØëÂô®ËæìÂÖ•ÔºåÂåÖÂê´ Python Â§¥Êñá‰ª∂ÁöÑ‰ΩçÁΩÆÔºåÊ∫ê‰ª£Á†ÅÂèäÂÖ∂ÂÆÉÁõ∏ÂÖ≥Â§¥Êñá‰ª∂„ÄÇ‰ΩøÁî®ÁöÑÂèÇÊï∞Âíå distutils Ê®°ÂùóÁöÑ Extension Á±ªÂûãÁ±ª‰ºº„ÄÇ

ÁºñËØëÂÆåÊàêÂπ∂ÂÆâË£ÖÊ®°ÂùóÂêéÂ∞±ÂèØ‰ª•Âú® Python ËÑöÊú¨‰∏≠Ë∞ÉÁî®Â∫ìÂáΩÊï∞Ôºö

```py
from pi_cffi import ffi, lib
print(lib.pi_approx(5000))
```

Ê≠£Á°ÆÈÖçÁΩÆËÑöÊú¨Âπ∂ÊâßË°åÁºñËØëÂêéÔºåËøòÂèØ‰ª•‰ΩøÁî®ÊúÄÊñ∞ÂÜÖÁΩÆÁöÑ Setuptools ÂèëÂ∏ÉÂ∑•ÂÖ∑Ë∞ÉÁî® piapprox_build.py ËÑöÊú¨ËøõË°åÁºñËØëÂπ∂ÂÆâË£ÖÊ®°ÂùóÂà∞ site-packages ÁõÆÂΩïÔºåÁºñÂÜôÁ±ª‰ºº‰ª•‰∏ãÁöÑÂÆâË£ÖËÑöÊú¨ *setup.py*ÔºåÂπ∂ÊâßË°å python setup.py build Êàñ install ÂëΩ‰ª§ËøõË°åÁºñËØë„ÄÅÂÆâË£ÖÊìç‰ΩúÔºö

```py
from setuptools import setup, Extension

setup(
    name='cffi_example',
    version='0.0.1',
    # packages=['cffi_example'],
    description="This is cffi_example package",
    # cffi_modules=["piapprox_build:ffibuilder"], # "filename:global"
    # cffi_modules=["tasks.py:ffi"], # 'path/build.py:ffi_variable'
    ext_modules=[Extension("cffi_example", 
        sources=["cffi_example.c", "python-bindings/cppmult.cpp"], 
        include_dirs=['python-bindings']
        )],
    setup_requires=["cffi>=1.15.0"],
    install_requires=[
        'cffi>=1.15.0; python_version == "3.10"',
    ],
)
```

Setuptools Â∑•ÂÖ∑Êú¨Ë∫´Â∞±ÂèØ‰ª•Ë∞ÉÁî®ÁºñËØëÁ®ãÂ∫èËøõË°åÁºñËØëÔºåÁîüÊàê cffi Ê®°ÂùóÂÆûÁé∞‰ª£Á†ÅÂêéÔºå‰πüÂèØ‰ª•Áõ¥‰ΩøÁî® setup.py ËÑöÊú¨‰∏≠ËÆæÁΩÆÁöÑ ext_modules Êù•ÁºñËØëÊ®°Âùó„ÄÇÊ†πÊçÆÊòØÂê¶‰ΩøÁî®‰∫ÜÊ®°ÂùóÁõÆÂΩïÊù•‰ΩøÁî® packages ÂèÇÊï∞ÔºåÂÆÉÊåáÂÆöÊ®°ÂùóÁõÆÂΩïË∑ØÂæÑ„ÄÇ

ÊâßË°åËÑöÊú¨Êó∂Ôºå‰º†ÈÄí --help Ëé∑Âèñ‰ΩøÁî®Â∏ÆÂä©Ôºå‰æãÂ¶ÇÊü•ÁúãÂèØÊåáÂÆöÁöÑÁºñËØëÂô®Á±ªÂûãÔºö

```sh
> python setup.py build --help-compiler
List of available compilers:
  --compiler=bcpp     Borland C++ Compiler
  --compiler=cygwin   Cygwin port of GNU C Compiler for Win32
  --compiler=mingw32  Mingw32 port of GNU C Compiler for Win32
  --compiler=msvc     Microsoft Visual C++
  --compiler=unix     standard UNIX-style compiler
```

Âú®‰ΩøÁî® Visual Studio 2015 ÊàñÊõ¥È´òÁâàÊú¨Êó∂ÔºåÂπ∂‰∏îÊåáÂÆöÁºñËØëÂô®‰∏∫ mingw32 Â∞±‰ºöËß¶Âèë‰∏Ä‰∏™ÂºÇÂ∏∏ Unknown MS Compiler versionÔºåÈúÄË¶ÅÁªô distutils/cygwinccompiler.py Êñá‰ª∂ÊâìË°•‰∏ÅÔºå‰øÆÊîπ get_msvcr() ÂáΩÊï∞Ôºö

```py
# https://bugs.python.org/issue25251
# https://bugs.python.org/file40608/patch.diff
elif msc_ver == '1700':
    # Visual Studio 2012 / Visual C++ 11.0
    return ['msvcr110']
elif msc_ver == '1800':
    # Visual Studio 2013 / Visual C++ 12.0
    return ['msvcr120']
elif msc_ver == '1929':
# elif msc_ver == '1900':
    # Visual Studio 2015 / Visual C++ 14.0
    # "msvcr140.dll no longer exists" http://blogs.msdn.com/b/vcblog/archive/2014/06/03/visual-studio-14-ctp.aspx
    return ['vcruntime140']
```

Âè¶Â§ñÔºåÂ¶ÇÊûú‰ΩøÁî® 32-bit ÁºñËØëÂô®ÁºñËØë 64-bit Êâ©Â±ïÂ∞±‰ºöËß¶ÂèëÔºöLONG_BIT definition appears wrong for platform (bad gcc/glibc config?). Ê≠£Á°ÆÁöÑÊÉÖÂÜµ‰∏ã LONG_BIT Á≠â‰∫é 8 * SIZEOF_LONGÔºåÂ¶ÇÊûú‰ΩøÁî® 32-bit ÁºñËØëÂô®ÔºåLONG_BIT ËÆæÁΩÆ‰∏∫ 32ÔºåÂíåÁõÆÊ†áÂÄº 64 ‰∏çÂåπÈÖç„ÄÇ

Âè¶Â§ñÔºåÊ®°Âùó‰æùËµñÂ§ñÈÉ® DLL Êó∂ÔºåPython 3.8 ÈªòËÆ§ `ctypes.CDLL` Âä†ËΩΩ‰ø°‰ªªË∑ØÂæÑÁöÑÂ∫ìÊñá‰ª∂ÔºåËøôÂèØËÉΩÂØºËá¥ ImportError ÂºÇÂ∏∏ÔºåÂèÇËÄÉ whatsnew 3.8 ctypes„ÄÇÈúÄË¶ÅÈÄöËøá os.add_dll_directory() Ê®°ÂùóÊñπÊ≥ïÊåáÂÆö DLL ÊâÄÂú®ÁõÆÂΩïÔºå‰ΩøÁî® dumpbin /imports ÂëΩ‰ª§Êü•ËØ¢‰æùËµñÔºåÊàñËÄÖ‰ΩøÁî® CFF Explorer Â∑•ÂÖ∑Ôºö

    ImportError: DLL load failed while importing cffi_example: Êâæ‰∏çÂà∞ÊåáÂÆöÁöÑÊ®°Âùó„ÄÇ

‰ª•‰∏ãÊòØ Python Bindings: Calling C or C++ From Python by by Jim Anderson ÊñáÁ´†ÈÖçÂ•óËÑöÊú¨ tasks.py ÂèÇËÄÉÔºö

```py
from invoke import run, task, Context
import cffi
import pathlib
import re

print("Building CFFI Module")
ffi = cffi.FFI()

run("chcp 65001")
this_dir = pathlib.Path("python-bindings").resolve()
h_file_name = this_dir / "cmult.h"
with open(h_file_name) as h_file:
    # cffi does not like our preprocessor directives, so we remove them
    lns = h_file.read().splitlines()
    flt = filter(lambda ln: not re.match(r" *#", ln), lns)
    flt = map(lambda ln: ln.replace("EXPORT_SYMBOL ", ""), flt)
    ffi.cdef(str("\n").join(flt))

ffi.set_source(
    "cffi_example",
    # Since we are calling a fully built library directly no custom source
    # is necessary. We need to include the .h files, though, because behind
    # the scenes cffi generates a .c file which contains a Python-friendly
    # wrapper around each of the functions.
    '#include "cmult.h"',
    # The important thing is to include the pre-built lib in the list of
    # libraries we are linking against:
    libraries=["cmult"],
    sources=["python-bindings/cppmult.cpp"], 
    library_dirs=[this_dir.as_posix()],
    include_dirs=[this_dir.as_posix()],
    extra_link_args=["-Wl,-rpath,."],
)

ffi.compile(verbose=True)
print("* Complete")
```

Âä†ËΩΩ cffi_example Ê®°ÂùóÂπ∂ÊµãËØïÔºö

```py
import os
os.add_dll_directory("c:/mingw/bin")

from cffi_example import ffi, lib
lib.mult(1, 2.0)
```


Simple example (ABI level, in-line)

```py
>>> from cffi import FFI
>>> ffi = FFI()
>>> ffi.cdef("""
...     int printf(const char *format, ...);   // copy-pasted from the man page
... """)
>>> C = ffi.dlopen(None)                     # loads the entire C namespace
>>> arg = ffi.new("char[]", b"world")        # equivalent to C code: char arg[] = "world";
>>> C.printf(b"hi there, %s.\n", arg)        # call printf
hi there, world.
17                                           # this is the return value
>>>
```

Êú¨‰æã‰∏çË∞ÉÁî®‰ªª‰Ωï C ÁºñËØëÂô®ÔºåÂç≥ÊâÄË∞ìÁöÑ ABI Ê®°Âºè‰∏ãÂ∑•‰ΩúÔºåËøôÊÑèÂë≥ÁùÄÂ¶ÇÊûúË∞ÉÁî®Êüê‰∏™ÂáΩÊï∞ÊàñËÆøÈóÆ cdef() ‰∏≠Â£∞ÊòéÈîôËØØÁöÑÁªìÊûÑÁöÑÊüê‰∫õÂ≠óÊÆµÔºåÂÆÉÂ∞Ü‰ΩøÁî®Á®ãÂ∫èÂ¥©Ê∫É„ÄÇ

Windows ‰∏äÁöÑ Python 3 ‰∏çËÉΩÊ≠£Á°ÆÊâßË°å ffi.dlopen(None)ÔºåËøô‰∏™ÈóÆÈ¢òÂæàÊ∑∑‰π±ÔºåÊó†Ê≥ïÁúüÊ≠£Ëß£ÂÜ≥„ÄÇÂ¶ÇÊûú‰ΩøÁî®  ffi.dlopen("path.dll") ‰ªéÁ≥ªÁªüÂä†ËΩΩÂ≠òÂú®ÁöÑ DLL Êù•Âä†ËΩΩÂπ∂Ë∞ÉÁî®ÂáΩÊï∞ÔºåÂàô‰∏ç‰ºöÂá∫Áé∞ÈóÆÈ¢ò„ÄÇ

Â¶ÇÊûúÂèØ‰ª•ÈÄâÊã©‰ΩøÁî® C ÁºñËØëÂô®ÂÆâË£ÖÊ®°ÂùóÔºåÂº∫ÁÉàÂª∫ËÆÆ‰ΩøÁî® API Ê®°ÂºèÔºåÈÄüÂ∫¶‰πüÊõ¥Âø´„ÄÇ

Struct/Array Example (minimal, in-line)

```py
from cffi import FFI
ffi = FFI()
ffi.cdef("""
    typedef struct {
        unsigned char r, g, b;
    } pixel_t;
""")
image = ffi.new("pixel_t[]", 800*600)

f = open('data', 'rb')     # binary mode -- important
f.readinto(ffi.buffer(image))
f.close()

image[100].r = 255
image[100].g = 192
image[100].b = 128

f = open('data', 'wb')
f.write(ffi.buffer(image))
f.close()
```






## ==‚ö°  C/C++ Extensions with SWIG
- SWIG Tutorial https://www.swig.org/tutorial.html

SWIG - Simplified Wrapper and Interface Generator ÊòØ‰∏Ä‰∏™ÈÄöÁî®Ë∑®Âπ≥Âè∞ÁöÑËØ≠Ë®ÄÊ°•Êé•Â∑•ÂÖ∑ÔºåÁ±ª‰ºº interface definition language (IDL) ÔºåËÉΩÂ∞Ü C/C++ ÁöÑÁ®ãÂ∫è‰∏éËÑöÊú¨ËØ≠Ë®ÄÔºåÂ¶Ç PerlÔºåPythonÔºåRuby Âíå Tcl ËøõË°åÁªëÂÆö„ÄÇ

ÊúÄÊñ∞ÁöÑ SWIG-4.0.0 ÊîØÊåÅ‰∫ÜÂ§ßÈáèÊµÅË°åÁºñÁ®ãËØ≠Ë®ÄÔºåÂåÖÊã¨ C#„ÄÅD„ÄÅGo„ÄÅGuile„ÄÅJava„ÄÅJavascript„ÄÅLua„ÄÅMzScheme/Racket„ÄÅOCaml„ÄÅOctave„ÄÅPerl„ÄÅPHP„ÄÅPython„ÄÅR„ÄÅRuby„ÄÅScilab„ÄÅTcl„ÄÇ

SWIG ÊòØÁõÆÁöÑÂ∞±ÊòØË¶Å‰∏∫ C/C++ API Êèê‰æõËÑöÊú¨ËØ≠Ë®ÄÁöÑÊé•Âè£ÔºåÊâÄÂÅöÁöÑ‰∫ãÊÉÖÂÖ∂ÂÆûÂ∞±ÊòØ‰∏§‰ª∂‰∫ãÔºö

- Ê†πÊçÆË¶ÅË∞ÉÁî®ÁöÑ C API ÁîüÊàê Wrapper ÂáΩÊï∞Ôºå‰Ωú‰∏∫ËÉ∂Ê∞¥Êù•ËÆ©ËÑöÊú¨Ëß£ÊûêÂô®ÂíåÂ∫ïÂ±ÇÂáΩÊï∞ËøõË°å‰∫§‰∫í„ÄÇ
- ‰∏∫ÁîüÊàêÁöÑ Wrapper ÂáΩÊï∞ÁîüÊàêËÑöÊú¨ËØ≠Ë®ÄÁöÑË∞ÉÁî®Êé•Âè£„ÄÇ

To illustrate the use of SWIG, suppose you have some C functions you want added to Tcl, Perl, Python, Java and C#. Specifically, let's say you have them in a file 'example.c'

```c
/* File : example.c */

#include <time.h>
double My_variable = 3.0;

int fact(int n) {
    if (n <= 1) return 1;
    else return n*fact(n-1);
}

int my_mod(int x, int y) {
    return (x%y);
}
   
char *get_time()
{
    time_t ltime;
    time(&ltime);
    return ctime(&ltime);
}
```

Interface file

Now, in order to add these files to your favorite language, you need to write an "interface file" which is the input to SWIG. An interface file for these C functions might look like this :

```sh
 /* example.i */
 %module example
 %{
 /* Put header files here or function declarations like below */
 extern double My_variable;
 extern int fact(int n);
 extern int my_mod(int x, int y);
 extern char *get_time();
 %}
 
 extern double My_variable;
 extern int fact(int n);
 extern int my_mod(int x, int y);
 extern char *get_time();
```
 
Building a Tcl module
At the UNIX prompt, type the following (shown for Linux, see the SWIG Wiki Shared Libraries FAQ page for help with other operating systems):

```sh
 unix % swig -tcl example.i
 unix % gcc -fpic -c example.c example_wrap.c -I/usr/local/include 
 unix % gcc -shared example.o example_wrap.o -o example.so
 unix % tclsh
 % load ./example.so example
 % puts $My_variable
 3.0
 % fact 5
 120
 % my_mod 7 3
 1
 % get_time
 Sun Feb 11 23:01:07 2018
 
 % 
```
 
The swig command produces a file *example_wrap.c* that should be compiled and linked with the rest of the program. In this case, we have built a dynamically loadable extension that can be loaded into the Tcl interpreter using the 'load' command.


Building a Python module
Turning C code into a Python module is also easy. Simply do the following (shown for Irix, see the SWIG Wiki Shared Libraries FAQ page for help with other operating systems):
 
```sh
 unix % swig -python example.i
 unix % gcc -c example.c example_wrap.c -I/usr/local/include/python2.7
 unix % ld -shared example.o example_wrap.o -o _example.so 
```

We can now use the Python module as follows :

```sh
 >>> import example
 >>> example.fact(5)
 120
 >>> example.my_mod(7,3)
 1
 >>> example.get_time()
 'Sun Feb 11 23:01:07 2018'
 >>>
```
 
Building a Perl module
You can also build a Perl5 module as follows (shown for Linux, see the SWIG Wiki Shared Libraries FAQ page for help with other operating systems):

```sh
 unix % swig -perl5 example.i
 unix % gcc -c `perl -MConfig -e 'print join(" ", @Config{qw(ccflags optimize cccdlflags)}, \
        "-I$Config{archlib}/CORE")'` example.c example_wrap.c
 unix % gcc `perl -MConfig -e 'print $Config{lddlflags}'` example.o example_wrap.o -o example.so
 unix % perl
 use example;
 print $example::My_variable,"\n";
 print example::fact(5),"\n";
 print example::get_time(),"\n";
 <ctrl-d>
 3.0
 120
 Sun Feb 11 23:01:07 2018
 unix % 
```
 
Building a Java module
SWIG will also generate JNI code for accessing C/C++ code from Java. Here is an example building a Java module (shown for Cygwin, see the SWIG Wiki Shared Libraries FAQ page for help with other operating systems):

```sh
 $ swig -java example.i
 $ gcc -c example.c example_wrap.c -I/c/jdk1.3.1/include -I/c/jdk1.3.1/include/win32
 $ gcc -shared example.o  example_wrap.o -mno-cygwin -Wl,--add-stdcall-alias  -o example.dll
 $ cat main.java
 public class main {
   public static void main(String argv[]) {
     System.loadLibrary("example");
     System.out.println(example.getMy_variable());
     System.out.println(example.fact(5));
     System.out.println(example.get_time());
   }
 }
 $ javac main.java
 $ java main
 3.0
 120
 Mon Mar  4 18:20:31  2002
 $
```
 
Building a C# module
SWIG will also generate code for accessing C/C++ code from C# using PInvoke. Here is an example building a C# module (shown for Linux, see the SWIG Wiki Shared Libraries FAQ page for help with other operating systems). It uses the open source Mono C# compiler which runs on Windows and most Unix systems, but the Microsoft C# compiler (csc.exe) works equally well on Windows:

```sh
 $ swig -csharp example.i
 $ gcc -c -fpic example.c example_wrap.c
 $ gcc -shared example.o  example_wrap.o   -o libexample.so
 $ mono-csc -out:runme.exe *.cs
 $ cat runme.cs
 using System;
 public class runme {
     static void Main() {
         Console.WriteLine(example.My_variable);
         Console.WriteLine(example.fact(5));
         Console.WriteLine(example.get_time());
     }
 }
 $ ./runme.exe
 3
 120
 Thu Nov 17 21:24:13 2016
 
 $
```
 
SWIG for the truly lazy
As it turns out, it is not always necessary to write a special interface file. If you have a header file, you can often just include it directly in the SWIG interface. For example:

```sh
 %module example
 %{
 /* Includes the header in the wrapper code */
 #include "header.h"
 %}
 
 /* Parse the header file to generate wrappers */
 %include "header.h"
```
 
Alternatively, some people might just include SWIG directives in a header file with conditional compilation. For example:

```sh
 #ifdef SWIG
 %module example
 %{
 #include "header.h"
 %}
 #endif
 
 extern int fact(int n);
 ...
```
 
Running SWIG under Microsoft Windows
SWIG also works perfectly well under all known 32-bit and 64-bit versions of Windows. SWIG is typically invoked from the command prompt and can be used with NMAKE or as custom builds from Visual Studio. Modules are typically compiled in the form of a DLL that can be dynamically loaded into Java, Python, or whatever language you are using.

That's it (well, more or less)
That's about everything you need to know to get started. Here's the short checklist :

- Make sure you specify a module name.
- Use ISO C/C++ syntax
- Figure out how to compile a shared library module / dynamic link library (may require reading a few man pages for your compiler).
- Relax.


Surely there's more to it...
The above example is intentionally simple, but the general idea extends to more complicated C/C++ programming tasks. In fact, it is important to know that SWIG is a fairly complete C++ compiler with support for nearly every language feature. This includes preprocessing, pointers, classes, inheritance, and even C++ templates. SWIG can also be used to package structures and classes into proxy classes in the target language---exposing the underlying functionality in a very natural manner.

To illustrate, suppose you wanted to wrap the following C++ data structure:

```sh
 // pair.h.  A pair like the STL
 namespace std {
    template<class T1, class T2> struct pair {
        T1 first;
        T2 second;
        pair() : first(T1()), second(T2()) { };
        pair(const T1 &f, const T2 &s) : first(f), second(s) { }
    };
 }
```
 
To wrap with SWIG, you might specify the following interface:

```sh
 // pair.i - SWIG interface
 %module pair
 %{
 #include "pair.h"
 %}
 
 // Ignore the default constructor
 %ignore std::pair::pair();      
 
 // Parse the original header file
 %include "pair.h"
 
 // Instantiate some templates
 
 %template(pairii) std::pair<int,int>;
 %template(pairdi) std::pair<double,int>;
```
 
Now, compiling for Linux (Python):

```sh
 $ swig -python -c++ pair.i
 $ g++ -c -fpic pair_wrap.c -I/usr/include/python2.7
 $ g++ -shared pair_wrap.o -o _pair.so
 $ python
 Python 2.7.15 (default, Nov 12 2018, 14:31:15) 
 [GCC 7.3.0] on linux2
 Type "help", "copyright", "credits" or "license" for more information.
 >>> import pair
 >>> a = pair.pairii(3,4)
 >>> a.first
 3
 >>> a.second
 4
 >>> a.second = 16
 >>> a.second
 16
 >>> b = pair.pairdi(3.5,8)
 >>> b.first
 3.5
 >>> b.second
 8
```


# =üö© Abstract Objects Layer


    +-- Doc\c-api
    |  ‚úí -- abstract.rst            => Abstract Objects Layer
    |   ‚Ä¢ -- object.rst                 => Object Protocol
    |   ‚Ä¢ -- call.rst                   => Call Protocol
    |   ‚Ä¢ -- number.rst                 => Number Protocol
    |   ‚Ä¢ -- sequence.rst               => Sequence Protocol
    |   ‚Ä¢ -- mapping.rst                => Mapping Protocol
    |   ‚Ä¢ -- iter.rst                   => Iterator Protocol
    |   ‚Ä¢ -- buffer.rst                 => Buffer Protocol
    |   ‚Ä¢ -- objbuffer.rst              => Old Buffer Protocol

## ==‚ö° Zero-Copy & Buffer Protocol

Less copies in Python with the buffer protocol and memoryviews
https://eli.thegreenplace.net/2011/11/28/less-copies-in-python-with-the-buffer-protocol-and-memoryviews

Python‰ΩøÁî®Zero-CopyÂíåBuffer ProtocolÂÆûÁé∞È´òÊÄßËÉΩÁºñÁ®ã
https://www.cnblogs.com/erhuabushuo/p/10314803.html

ÂÆâË£Ö‰∏Ä‰∏™ÂÜÖÂ≠òÂàÜÊûêÂ∑•ÂÖ∑Ôºö

```sh
# https://pypi.org/project/memory-profiler/
$ pip install -U memory_profiler
$ python -m memory_profiler example.py
# A function decorator is also available. Use as follows:
# from memory_profiler import profile
```

Â§ÑÁêÜÂ§ßÈáèÊï∞ÊçÆÊó∂ÔºåÂÖÖÂàÜÂà©Áî® buffer Êï∞ÊçÆÈÅøÂÖçÊã∑Ë¥ùÊòØ‰∏Ä‰∏™ÈùûÂ∏∏ÊúâÊïàÁéáÁöÑÊèêÈÄüÊñπÊ°à„ÄÇ

ÂΩì‰Ω†ÂØπÂ≠óÁ¨¶‰∏≤Â§ßÊâπÈáèÁöÑÊã∑Ë¥ùÔºåÂàáÁâáÂíå‰øÆÊîπÊìç‰ΩúÊó∂ÊòØÁõ∏ÂΩì‰ΩéÊïàÁöÑ„ÄÇ‰∏∫‰ªÄ‰πàÔºü

ÂÅáËÆæ‰∏Ä‰∏™ËØªÂèñ‰∫åËøõÂà∂Êï∞ÊçÆÁöÑÂ§ßÊñá‰ª∂Á§∫‰æãÔºåÁÑ∂ÂêéÂ∞ÜÈÉ®ÂàÜÊï∞ÊçÆÊã∑Ë¥ùÂà∞Âè¶Â§ñ‰∏Ä‰∏™Êñá‰ª∂„ÄÇË¶ÅÂ±ïÁ§∫ËØ•Á®ãÂ∫èÊâÄ‰ΩøÁî®ÁöÑÂÜÖÂ≠òÔºåmemory_profiler Êâ©Â±ïÂèØ‰ª•‰∏ÄË°å‰∏ÄË°åËßÇÂØüÁ®ãÂ∫èÊâÄ‰ΩøÁî®ÁöÑÂÜÖÂ≠ò„ÄÇ

```py
from memory_profiler import profile
import sys

@profile
def read_random():
    nul = "/dev/null" if sys.platform != "win32" else "NUL"
    bigfile = "/dev/urandom" if sys.platform != "win32" else \
        "c:/videos/qian99703-7015009652802866445.mp4"

    with open(bigfile, "rb") as source:
        content = source.read(1024 * 10000)
        content_to_write = content[1024:]
    print(f"content length: {len(content)}, content to write length {len(content_to_write)}")
    with open(nul, "wb") as target:
        target.write(content_to_write)


if __name__ == "__main__":
    read_random()
```



```sh
content length: 2292793, content to write length 2291769
Filename: C:\coding\md-code\coding\__main__.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
    47     19.7 MiB     19.7 MiB           1   @profile
    48                                         def read_random():
    49     19.8 MiB      0.0 MiB           1       nul = "/dev/null" if sys.platform != "win32" else "NUL"
    50     19.8 MiB      0.0 MiB           2       bigfile = "/dev/urandom" if sys.platform != "win32" else \
    51     19.8 MiB      0.0 MiB           1           "c:/videos/qian99703-7015009652802866445.mp4"
    52                                         
    53     24.1 MiB      0.0 MiB           2       with open(bigfile, "rb") as source:
    54     21.9 MiB      2.2 MiB           1           content = source.read(1024 * 10000)
    55     24.1 MiB      2.2 MiB           1           content_to_write = content[1024:]
    56     24.1 MiB      0.0 MiB           1       print(f"content length: {len(content)}, content to write length {len(content_to_write)}")
    57     24.1 MiB      0.0 MiB           2       with open(nul, "wb") as target:
    58     24.1 MiB      0.0 MiB           1           target.write(content_to_write)
```

ËØªÂèñÂ§ßÊñá‰ª∂ÂàÜÈÖçÂ•Ω buffer ÂÜÖÂ≠òÂêéÔºåÂÜçÊù•‰ª•Â≠óÁ¨¶‰∏≤Â≠òÂÇ®Ëøô‰∏™Êï∞ÊçÆ„ÄÇ‰πãÂêéÁöÑÂàáÁâá content[1024:]Êåá‰ª§Ë∂äËøáÂºÄÂ§¥ÁöÑ 1KB Êï∞ÊçÆËøõË°åÊï∞ÊçÆÊã∑Ë¥ùÔºå‰πüÂàÜÈÖçÂá†‰πéÂêåÊ†∑ÁöÑÂ∞∫ÂØ∏ÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÔºåÂè™ÊòØÂ∞ë‰∫Ü 1kb„ÄÇ

Â¶ÇÊûúÂ§ÑÁêÜÁ±ª‰ººÂ§ßÈáèÁöÑÂ≠óËäÇÊï∞ÁªÑÂØπË±°Êìç‰ΩúÈÇ£ÊòØÁÆÄÁõ¥Â∞±ÊòØÁÅæÈöæÔºåC ËØ≠Ë®Ä‰ΩøÁî® memcpy() ÂàÜÈÖçÂÜÖÂ≠òÂæàÂø´Ôºå‰ΩÜÈúÄË¶ÅÊ≥®ÊÑèÊòØÔºöÂú®ÂÜÖÂ≠ò‰ΩøÁî®‰ª•ÂèäÊÄª‰ΩìÊÄßËÉΩÊù•ËØ¥ÔºåÂ§çÂà∂ÂÜÖÂ≠òÂæàÊÖ¢„ÄÇ

ÈÄöËøá C ËØ≠Ë®ÄÊâ©Â±ïÔºåÂèØ‰ª•ÈÅøÂÖçÁºìÂÜ≤Âå∫Êã∑Ë¥ùÔºåPython buffer protocol ‰ΩøÁî® C-API ÂÆûÁé∞ÂêÑÁßçÁ±ªÂûãÁöÑÁºìÂÜ≤Âå∫„ÄÇ

ÂΩì‰∏Ä‰∏™ÂØπË±°ÂÆûÁé∞‰∫ÜËØ•ÂçèËÆÆÔºåÂ∞±ÂèØ‰ª•‰ΩøÁî® memoryview Á±ªÊûÑÈÄ†‰∏Ä‰∏™Êó†Êã∑Ë¥ùÁöÑÂºïÁî®ÂéüÂßãÂÜÖÂ≠òÊï∞ÊçÆÁöÑÂØπË±°ÔºåÂØπÂÜÖÁΩÆÂ∑≤ÁªèÂÆûÁé∞ÁöÑÂ≠óÁ¨¶Á±ªÂûãÔºåÂèØ‰ª•Áõ¥Êé•‰ΩøÁî® `memoryview(content)[1024:]` Êù•ÈÅøÂÖç buffer ÈáçÂ§çÊã∑Ë¥ù„ÄÇ

Áõ∏ÊØîÊã∑Ë¥ùÁöÑÊñπÂºèÔºåÁõ¥Êé•ËäÇÁúÅ‰∫ÜÂ§ßÊ¶Ç 50% ÁöÑÂÜÖÂ≠òÂºÄÈîÄ„ÄÇÂú®Â§ÑÁêÜ sockets ÈÄö‰ø°ÁöÑÊó∂ÂÄôÊûÅÂÖ∂ÊúâÁî®ÔºåÂèëÈÄÅÊï∞ÊçÆÊó∂ÔºåÊâÄÊúâÁöÑÊï∞ÊçÆÂèØËÉΩÂπ∂Ê≤°ÊúâÂú®‰∏ÄÊ¨°Ë∞ÉÁî®Â∞±ÂèëÈÄÅÔºåÈÅøÂÖçÊã∑Ë¥ùÂ∞±ÂèØ‰ª•ÊûÅÂ§ßÊèêÈ´òÊïàÁéá„ÄÇ

Python  New I/O Library Â∑≤ÁªèÂÆûÁé∞‰∫Ü buffer protocol Êú∫Âà∂ÔºåÊàë‰ª¨Âπ∂‰∏çÈúÄË¶ÅmemoryviewÂØπË±°ÔºåÊàëÂèØ‰ª•ËØ∑Ê±Ç I/O ÂáΩÊï∞ÂÜôÂÖ•Êàë‰ª¨È¢ÑÂÆö‰πâÂ•ΩÁöÑÂØπË±°

Buffer protocol Êúâ‰∏§ÊñπÈù¢Ôºö

- Êï∞ÊçÆÁîü‰∫ßÊñπÂØºÂá∫ "buffer interface" ‰ª•ËÆ∏ÂèØÂéüÂßã buffer Ë¢´ËÆøÈóÆÔºåÂèÇËÄÉ `buffer-structs`Ôºõ
- Êï∞ÊçÆÊ∂àË¥πÊñπÔºåÊúâÂ§öÁßçÊñπÊ≥ïÁõ¥Êé•ËÆøÈóÆÂéüÂßã buffer Êï∞ÊçÆÔºåÂ¶ÇÔºåÈÄöËøáÊñπÊ≥ïÂèÇÊï∞ÊåáÂÆö memoryviewÔºõ

ÁÆÄÂçïÁöÑÊï∞ÊçÆÁ±ªÂûãÂØπË±°ÔºåÂ¶Ç `bytes` Êàñ `bytearray` ÈÉΩÂÖ¨ÂºÄ‰∫ÜÂ≠óËäÇÊñπÂºèÁöÑÂéüÂßã bufferÔºåÂÖ∂ÂÆÉÊñπÂºè‰πüÂèØ‰ª•Ôºå`array.array` Â∞±ÂèØ‰ª•Êèê‰æõÂ§öÂ≠óËäÇÁöÑÂÄº„ÄÇ

ÂéüÂßãÊï∞ÊçÆÊ∂àË¥πÁöÑÊé•Âè£ÊñπÊ≥ïÂ¶Ç `~io.BufferedIOBase.write` ÂèØ‰ª•Â∞ÜÂéüÂßã buffer Êï∞ÊçÆÂÜôÂÖ•Âà∞Êñá‰ª∂ÔºåÂè™ÈúÄË¶Å‰º†ÂÖ•ÂØπË±°ÂÖ∑ÊúâÂè™ËØªËÆøÈóÆ„ÄÇËÄå `~io.BufferedIOBase.readinto` Êé•Âè£ÊñπÊ≥ïÂèØ‰ª•Â∞ÜÂéüÂßã buffer ËØªÂèñÂπ∂ÂÜôÂÖ•ÂèÇÊï∞ÊåáÂÆöÁöÑ bufferÔºåË¶ÅÊ±ÇËØªÂÜôËÆøÈóÆ„ÄÇ

ÈÄöËøá memoryview ËøòÂèØ‰ª•Â∞ÜÊï∞ÊçÆÂÜôÂÖ•ÊåáÂÆöÂÅèÁßªÁöÑ‰ΩçÁΩÆÔºö

```py
ba = bytearray(8)
# Reference the _bytearray_ from offset 4 to its end
ba_at_4 = memoryview(ba)[4:]
with open("/dev/urandom", "rb") as source:
# Write the content of /dev/urandom from offset 4 to the end of the
# bytearray, effectively reading 4 bytes only
    source.readinto(ba_at_4)
```


# =üö© Python Setup and Usage

ÂèÇËÄÉÊ∫ê‰ª£Á†ÅÊñáÊ°£Ôºö

    +-- Doc\using
    |   ‚Ä¢ -- index.rst               => Python Setup and Usage
    |   ‚Ä¢ -- cmdline.rst                => Command line and environment
    |   ‚Ä¢ -- configure.rst              => Configure Python
    |   ‚Ä¢ -- editors.rst                => Editors and IDEs
    |   ‚Ä¢ -- mac.rst                    => Using Python on a Mac
    |   ‚Ä¢ -- unix.rst                   => Using Python on Unix platforms
    |   ‚Ä¢ -- venv-create.inc            => Virtual Environments Creation
    |   ‚Ä¢ -- windows.rst                => Using Python on Windows

This part of the documentation is devoted to general information on the setup of the Python environment on different platforms, the invocation of the interpreter and things that make working with Python easier.

‚Ä¢1. Command line and environment
‚ó¶ 1.1. Command line
‚óæ1.1.1. Interface options
‚óæ1.1.2. Generic options
‚óæ1.1.3. Miscellaneous options
‚óæ1.1.4. Options you shouldn‚Äôt use

‚ó¶ 1.2. Environment variables
‚óæ1.2.1. Debug-mode variables


‚Ä¢2. Using Python on Unix platforms
‚ó¶ 2.1. Getting and installing the latest version of Python
‚óæ2.1.1. On Linux
‚óæ2.1.2. On FreeBSD and OpenBSD
‚óæ2.1.3. On OpenSolaris

‚ó¶ 2.2. Building Python
‚ó¶ 2.3. Python-related paths and files
‚ó¶ 2.4. Miscellaneous

‚Ä¢3. Using Python on Windows
‚ó¶ 3.1. The full installer
‚óæ3.1.1. Installation steps
‚óæ3.1.2. Removing the MAX_PATH Limitation
‚óæ3.1.3. Installing Without UI
‚óæ3.1.4. Installing Without Downloading
‚óæ3.1.5. Modifying an install

‚ó¶ 3.2. The Microsoft Store package
‚óæ3.2.1. Known Issues

‚ó¶ 3.3. The nuget.org packages
‚ó¶ 3.4. The embeddable package
‚óæ3.4.1. Python Application
‚óæ3.4.2. Embedding Python

‚ó¶ 3.5. Alternative bundles
‚ó¶ 3.6. Configuring Python
‚óæ3.6.1. Excursus: Setting environment variables
‚óæ3.6.2. Finding the Python executable

‚ó¶ 3.7. UTF-8 mode
‚ó¶ 3.8. Python Launcher for Windows
‚óæ3.8.1. Getting started
‚óæ3.8.1.1. From the command-line
‚óæ3.8.1.2. Virtual environments
‚óæ3.8.1.3. From a script
‚óæ3.8.1.4. From file associations

‚óæ3.8.2. Shebang Lines
‚óæ3.8.3. Arguments in shebang lines
‚óæ3.8.4. Customization
‚óæ3.8.4.1. Customization via INI files
‚óæ3.8.4.2. Customizing default Python versions

‚óæ3.8.5. Diagnostics

‚ó¶ 3.9. Finding modules
‚ó¶ 3.10. Additional modules
‚óæ3.10.1. PyWin32
‚óæ3.10.2. cx_Freeze
‚óæ3.10.3. WConio

‚ó¶ 3.11. Compiling Python on Windows
‚ó¶ 3.12. Other Platforms

‚Ä¢4. Using Python on a Macintosh
‚ó¶ 4.1. Getting and Installing MacPython
‚óæ4.1.1. How to run a Python script
‚óæ4.1.2. Running scripts with a GUI
‚óæ4.1.3. Configuration

‚ó¶ 4.2. The IDE
‚ó¶ 4.3. Installing Additional Python Packages
‚ó¶ 4.4. GUI Programming on the Mac
‚ó¶ 4.5. Distributing Python Applications on the Mac
‚ó¶ 4.6. Other Resources

‚Ä¢5. Editors and IDEs


## ==‚ö° 1. Command line and environment

The CPython interpreter scans the command line and the environment for various settings.


CPython implementation detail: Other implementations‚Äô command line schemes may differ. See Alternate Implementations for further resources.


### ===üóù 1.1. Command line

When invoking Python, you may specify any of these options:


    python [-bBdEhiIOqsSuvVWx?] [-c command | -m module-name | script | - ] [args]


The most common use case is, of course, a simple invocation of a script:

    python myscript.py


### ===üóù 1.1.1. Interface options

The interpreter interface resembles that of the UNIX shell, but provides some additional methods of invocation:

1. ‚Ä¢ When called with standard input connected to a tty device, it prompts for commands and executes them until an `EOF` (an end-of-file character, you can produce that with `Ctrl-D` on UNIX or `Ctrl-Z`, Enter on Windows) is read.
2. ‚Ä¢ When called with a file name argument or with a file as standard input, it reads and executes a script from that file.
3. ‚Ä¢ When called with a directory name argument, it reads and executes an appropriately named script from that directory.
4. ‚Ä¢ When called with `-c command`, it executes the Python statement(s) given as command. Here command may contain multiple statements separated by newlines. Leading whitespace is significant in Python statements!
5. ‚Ä¢ When called with `-m module-name`, the given module is located on the Python module path and executed as a script.

In non-interactive mode, the entire input is parsed before it is executed.

An interface option terminates the list of options consumed by the interpreter, all consecutive arguments will end up in `sys.argv` ‚Äì note that the first element, subscript zero (`sys.argv[0]`), is a string reflecting the program‚Äôs source.

‚û° `-c <command>`
Execute the Python code in command. command can be one or more statements separated by newlines, with significant leading whitespace as in normal module code.

If this option is given, the first element of `sys.argv` will be "-c" and the current directory will be added to the start of `sys.path` (allowing modules in that directory to be imported as top level modules).

Raises an auditing event `cpython.run_command` with argument command.

‚û° `-m <module-name>`
Search `sys.path` for the named module and execute its contents as the __main__ module.

Since the argument is a module name, you must not give a file extension (.py). The module name should be a valid absolute Python module name, but the implementation may not always enforce this (e.g. it may allow you to use a name that includes a hyphen).

Package names (including namespace packages) are also permitted. When a package name is supplied instead of a normal module, the interpreter will execute <pkg>.__main__ as the main module. This behaviour is deliberately similar to the handling of directories and zipfiles that are passed to the interpreter as the script argument.

Note:
 This option cannot be used with built-in modules and extension modules written in C, since they do not have Python module files. However, it can still be used for precompiled modules, even if the original source file is not available.
 

If this option is given, the first element of `sys.argv` will be the full path to the module file (while the module file is being located, the first element will be set to "`-m`"). As with the `-c` option, the current directory will be added to the start of sys.path.

`-I` option can be used to run the script in isolated mode where `sys.path` contains neither the current directory nor the user‚Äôs site-packages directory. All PYTHON* environment variables are ignored, too.

Many standard library modules contain code that is invoked on their execution as a script. An example is the timeit module:


    python -m timeit -s 'setup here' 'benchmarked code here'
    python -m timeit -h # for details


Raises an auditing event `cpython.run_module` with argument module-name.

See also:
 runpy.run_module() Equivalent functionality directly available to Python code
PEP 338 ‚Äì Executing modules as scripts https://www.python.org/dev/peps/pep-0338
Changed in version 3.1: Supply the package name to run a __main__ submodule.

Changed in version 3.4: namespace packages are also supported


‚û° `-`
Read commands from standard input (``sys.stdin``). If standard input is a terminal, `-i` is implied.

If this option is given, the first element of `sys.argv` will be "-" and the current directory will be added to the start of `sys.path`.

Raises an auditing event cpython.run_stdin with no arguments.

‚û° `<script>`
Execute the Python code contained in script, which must be a filesystem path (absolute or relative) referring to either a Python file, a directory containing a __main__.py file, or a zipfile containing a __main__.py file.

If this option is given, the first element of `sys.argv` will be the script name as given on the command line.

If the script name refers directly to a Python file, the directory containing that file is added to the start of `sys.path`, and the file is executed as the __main__ module.

If the script name refers to a directory or zipfile, the script name is added to the start of `sys.path` and the __main__.py file in that location is executed as the __main__ module.

Raises an auditing event cpython.run_file with argument filename.

See also:
 runpy.run_path() Equivalent functionality directly available to Python code

If no interface option is given, `-i` is implied, `sys.argv[0]` is an empty string ("") and the current directory will be added to the start of `sys.path`. Also, tab-completion and history editing is automatically enabled, if available on your platform (see Readline configuration).

See also: Python Tutorial - 2.1 Invoking the Interpreter
Changed in version 3.4: Automatic enabling of tab-completion and history editing.



### ===üóù 1.1.2. Generic options

‚û° `-?` `-h` `--help`
Print a short description of all command line options.

‚û° `-V` `--version`
Print the Python version number and exit. Example output could be:

>Python 3.8.0b2+

When given twice, print more information about the build, like:


    Python 3.8.0b2+ (3.8:0c076caaa8, Apr 20 2019, 21:55:00)
    [GCC 6.2.0 20161005]
New in version 3.6: The -VV option.



### ===üóù 1.1.3. Miscellaneous options


‚û° `-b`
Issue a warning when comparing bytes or bytearray with str or bytes with int. Issue an error when the option is given twice (-bb).

Changed in version 3.5: Affects comparisons of bytes with int.


‚û° `-B`
If given, Python won‚Äôt try to write .pyc files on the import of source modules. See also PYTHONDONTWRITEBYTECODE.
--check-hash-based-pycs default|always|never
Control the validation behavior of hash-based .pyc files. See Cached bytecode invalidation. When set to default, checked and unchecked hash-based bytecode cache files are validated according to their default semantics. When set to always, all hash-based .pyc files, whether checked or unchecked, are validated against their corresponding source file. When set to never, hash-based .pyc files are not validated against their corresponding source files.

The semantics of timestamp-based .pyc files are unaffected by this option.

‚û° `-d`
Turn on parser debugging output (for expert only, depending on compilation options). See also PYTHONDEBUG.

‚û° `-E`
Ignore all PYTHON* environment variables, e.g. PYTHONPATH and PYTHONHOME, that might be set.

‚û° `-i`
When a script is passed as first argument or the `-c` option is used, enter interactive mode after executing the script or the command, even when `sys.stdin` does not appear to be a terminal. The PYTHONSTARTUP file is not read.

This can be useful to inspect global variables or a stack trace when a script raises an exception. See also PYTHONINSPECT.

‚û° `-I`
Run Python in isolated mode. This also implies `-E` and `-s`. In isolated mode `sys.path` contains neither the script‚Äôs directory nor the user‚Äôs site-packages directory. All PYTHON* environment variables are ignored, too. Further restrictions may be imposed to prevent the user from injecting malicious code.

New in version 3.4.


‚û° `-O`
Remove assert statements and any code conditional on the value of __debug__. Augment the filename for compiled (bytecode) files by adding .opt-1 before the .pyc extension (see PEP 488). See also PYTHONOPTIMIZE.

Changed in version 3.5: Modify .pyc filenames according to PEP 488.


‚û° `-OO`
Do -O and also discard docstrings. Augment the filename for compiled (bytecode) files by adding .opt-2 before the .pyc extension (see PEP 488).

Changed in version 3.5: Modify .pyc filenames according to PEP 488.


‚û° `-q`
Don‚Äôt display the copyright and version messages even in interactive mode.

New in version 3.2.


‚û° `-R`
Turn on hash randomization. This option only has an effect if the PYTHONHASHSEED environment variable is set to 0, since hash randomization is enabled by default.

On previous versions of Python, this option turns on hash randomization, so that the __hash__() values of str and bytes objects are ‚Äúsalted‚Äù with an unpredictable random value. Although they remain constant within an individual Python process, they are not predictable between repeated invocations of Python.

Hash randomization is intended to provide protection against a denial-of-service caused by carefully-chosen inputs that exploit the worst case performance of a dict construction, O(n^2) complexity. See http://www.ocert.org/advisories/ocert-2011-003.html for details.

PYTHONHASHSEED allows you to set a fixed value for the hash seed secret.

Changed in version 3.7: The option is no longer ignored.


New in version 3.2.3.


‚û° `-s`
Don‚Äôt add the user site-packages directory to `sys.path`.

See also:
 PEP 370 ‚Äì Per user site-packages directory
 

‚û° `-S`
Disable the import of the module site and the site-dependent manipulations of `sys.path` that it entails. Also disable these manipulations if site is explicitly imported later (call `site.main()` if you want them to be triggered).

‚û° `-u`
Force the `stdout` and `stderr` streams to be unbuffered. This option has no effect on the `stdin` stream.

See also PYTHONUNBUFFERED.

Changed in version 3.7: The text layer of the `stdout` and `stderr` streams now is unbuffered.


‚û° `-v`
Print a message each time a module is initialized, showing the place (filename or built-in module) from which it is loaded. When given twice (`-vv`), print a message for each file that is checked for when searching for a module. Also provides information on module cleanup at exit. See also PYTHONVERBOSE.

‚û° `-W arg`
Warning control. Python‚Äôs warning machinery by default prints warning messages to `sys.stderr`. A typical warning message has the following form:


    file:line: category: message


By default, each warning is printed once for each source line where it occurs. This option controls how often warnings are printed.

Multiple `-W` options may be given; when a warning matches more than one option, the action for the last matching option is performed. Invalid `-W` options are ignored (though, a warning message is printed about invalid options when the first warning is issued).

Warnings can also be controlled using the PYTHONWARNINGS environment variable and from within a Python program using the warnings module.

The simplest settings apply a particular action unconditionally to all warnings emitted by a process (even those that are otherwise ignored by default):


    -Wdefault  # Warn once per call location
    -Werror    # Convert to exceptions
    -Walways   # Warn every time
    -Wmodule   # Warn once per calling module
    -Wonce     # Warn once per Python process
    -Wignore   # Never warn


The action names can be abbreviated as desired (e.g. -Wi, -Wd, -Wa, -We) and the interpreter will resolve them to the appropriate action name.

See The Warnings Filter and Describing Warning Filters for more details.

‚û° `-x`
Skip the first line of the source, allowing use of non-Unix forms of `#!cmd`. This is intended for a DOS specific hack only.

‚û° `-X`
Reserved for various implementation-specific options. CPython currently defines the following possible values:

‚Ä¢ `-X faulthandler` to enable faulthandler;
‚Ä¢ `-X oldparser`: enable the traditional LL(1) parser. See also PYTHONOLDPARSER and PEP 617.
‚Ä¢ `-X showrefcount` to output the total reference count and number of used memory blocks when the program finishes or after each statement in the interactive interpreter. This only works on debug builds.
‚Ä¢ `-X tracemalloc` to start tracing Python memory allocations using the tracemalloc module. By default, only the most recent frame is stored in a traceback of a trace. Use -X tracemalloc=NFRAME to start tracing with a traceback limit of NFRAME frames. See the tracemalloc.start() for more information.
‚Ä¢ `-X importtime` to show how long each import takes. It shows module name, cumulative time (including nested imports) and self time (excluding nested imports). Note that its output may be broken in multi-threaded application. Typical usage is python3 -X importtime -c 'import asyncio'. See also PYTHONPROFILEIMPORTTIME.
‚Ä¢ `-X dev`: enable Python Development Mode, introducing additional runtime checks that are too expensive to be enabled by default.
‚Ä¢ `-X utf8` enables UTF-8 mode for operating system interfaces, overriding the default locale-aware mode. `-X utf8=0` explicitly disables UTF-8 mode (even when it would otherwise activate automatically). See PYTHONUTF8 for more details.
‚Ä¢ `-X pycache_prefix`=PATH enables writing .pyc files to a parallel tree rooted at the given directory instead of to the code tree. See also PYTHONPYCACHEPREFIX.

It also allows passing arbitrary values and retrieving them through the `sys._xoptions dictionary`.

Changed in version 3.2: The -X option was added.
New in version 3.3: The -X faulthandler option.
New in version 3.4: The -X showrefcount and -X tracemalloc options.
New in version 3.6: The -X showalloccount option.
New in version 3.7: The -X importtime, -X dev and -X utf8 options.
New in version 3.8: The -X pycache_prefix option. The -X dev option now logs close() exceptions in io.IOBase destructor.
Changed in version 3.9: Using -X dev option, check encoding and errors arguments on string encoding and decoding operations.

The -X showalloccount option has been removed.

Deprecated since version 3.9, will be removed in version 3.10: The -X oldparser option.


### ===üóù 1.1.4. Options you shouldn‚Äôt use

‚û° `-J`
Reserved for use by Jython.


### ===üóù 1.2. Environment variables

These environment variables influence Python‚Äôs behavior, they are processed before the command-line switches other than `-E` or `-I`. It is customary that command-line switches override environmental variables where there is a conflict.

‚û° `PYTHONHOME`
Change the location of the standard Python libraries. By default, the libraries are searched in prefix/lib/pythonversion and exec_prefix/lib/pythonversion, where prefix and exec_prefix are installation-dependent directories, both defaulting to /usr/local.

When PYTHONHOME is set to a single directory, its value replaces both prefix and exec_prefix. To specify different values for these, set PYTHONHOME to prefix:exec_prefix.
‚û° `PYTHONPATH`
Augment the default search path for module files. The format is the same as the shell‚Äôs PATH: one or more directory pathnames separated by os.pathsep (e.g. colons on Unix or semicolons on Windows). Non-existent directories are silently ignored.

In addition to normal directories, individual PYTHONPATH entries may refer to zipfiles containing pure Python modules (in either source or compiled form). Extension modules cannot be imported from zipfiles.

The default search path is installation dependent, but generally begins with prefix/lib/pythonversion (see PYTHONHOME above). It is always appended to PYTHONPATH.

An additional directory will be inserted in the search path in front of PYTHONPATH as described above under Interface options. The search path can be manipulated from within a Python program as the variable `sys.path`.
‚û° `PYTHONPLATLIBDIR`
If this is set to a non-empty string, it overrides the sys.platlibdir value.

New in version 3.9.

‚û° `PYTHONSTARTUP`
If this is the name of a readable file, the Python commands in that file are executed before the first prompt is displayed in interactive mode. The file is executed in the same namespace where interactive commands are executed so that objects defined or imported in it can be used without qualification in the interactive session. You can also change the prompts sys.ps1 and sys.ps2 and the hook sys.__interactivehook__ in this file.

Raises an auditing event cpython.run_startup with the filename as the argument when called on startup.
‚û° `PYTHONOPTIMIZE`
If this is set to a non-empty string it is equivalent to specifying the -O option. If set to an integer, it is equivalent to specifying -O multiple times.
‚û° `PYTHONBREAKPOINT`
If this is set, it names a callable using dotted-path notation. The module containing the callable will be imported and then the callable will be run by the default implementation of sys.breakpointhook() which itself is called by built-in breakpoint(). If not set, or set to the empty string, it is equivalent to the value ‚Äúpdb.set_trace‚Äù. Setting this to the string ‚Äú0‚Äù causes the default implementation of sys.breakpointhook() to do nothing but return immediately.

New in version 3.7.

‚û° `PYTHONDEBUG`
If this is set to a non-empty string it is equivalent to specifying the -d option. If set to an integer, it is equivalent to specifying -d multiple times.
‚û° `PYTHONOLDPARSER`
If this is set to a non-empty string, enable the traditional LL(1) parser.

See also the -X oldparser option and PEP 617.

Deprecated since version 3.9, will be removed in version 3.10.

‚û° `PYTHONINSPECT`
If this is set to a non-empty string it is equivalent to specifying the -i option.

This variable can also be modified by Python code using os.environ to force inspect mode on program termination.
‚û° `PYTHONUNBUFFERED`
If this is set to a non-empty string it is equivalent to specifying the -u option.
‚û° `PYTHONVERBOSE`
If this is set to a non-empty string it is equivalent to specifying the -v option. If set to an integer, it is equivalent to specifying -v multiple times.
‚û° `PYTHONCASEOK`
If this is set, Python ignores case in import statements. This only works on Windows and OS X.
‚û° `PYTHONDONTWRITEBYTECODE`
If this is set to a non-empty string, Python won‚Äôt try to write .pyc files on the import of source modules. This is equivalent to specifying the -B option.
‚û° `PYTHONPYCACHEPREFIX`
If this is set, Python will write .pyc files in a mirror directory tree at this path, instead of in __pycache__ directories within the source tree. This is equivalent to specifying the -X pycache_prefix=PATH option.

New in version 3.8.

‚û° `PYTHONHASHSEED`
If this variable is not set or set to random, a random value is used to seed the hashes of str and bytes objects.

If PYTHONHASHSEED is set to an integer value, it is used as a fixed seed for generating the hash() of the types covered by the hash randomization.

Its purpose is to allow repeatable hashing, such as for selftests for the interpreter itself, or to allow a cluster of python processes to share hash values.

The integer must be a decimal number in the range [0,4294967295]. Specifying the value 0 will disable hash randomization.

New in version 3.2.3.

‚û° `PYTHONIOENCODING`
If this is set before running the interpreter, it overrides the encoding used for stdin/stdout/stderr, in the syntax encodingname:errorhandler. Both the encodingname and the :errorhandler parts are optional and have the same meaning as in str.encode().

For stderr, the :errorhandler part is ignored; the handler will always be 'backslashreplace'.

Changed in version 3.4: The encodingname part is now optional.


Changed in version 3.6: On Windows, the encoding specified by this variable is ignored for interactive console buffers unless PYTHONLEGACYWINDOWSSTDIO is also specified. Files and pipes redirected through the standard streams are not affected.

‚û° `PYTHONNOUSERSITE`
If this is set, Python won‚Äôt add the user site-packages directory to `sys.path`.

See also:
 PEP 370 ‚Äì Per user site-packages directory
 
‚û° `PYTHONUSERBASE`
Defines the user base directory, which is used to compute the path of the user site-packages directory and Distutils installation paths for python setup.py install --user.

See also:
 PEP 370 ‚Äì Per user site-packages directory
 
‚û° `PYTHONEXECUTABLE`
If this environment variable is set, sys.argv[0] will be set to its value instead of the value got through the C runtime. Only works on Mac OS X.
‚û° `PYTHONWARNINGS`
This is equivalent to the -W option. If set to a comma separated string, it is equivalent to specifying -W multiple times, with filters later in the list taking precedence over those earlier in the list.

The simplest settings apply a particular action unconditionally to all warnings emitted by a process (even those that are otherwise ignored by default):

    PYTHONWARNINGS=default  # Warn once per call location
    PYTHONWARNINGS=error    # Convert to exceptions
    PYTHONWARNINGS=always   # Warn every time
    PYTHONWARNINGS=module   # Warn once per calling module
    PYTHONWARNINGS=once     # Warn once per Python process
    PYTHONWARNINGS=ignore   # Never warn

See The Warnings Filter and Describing Warning Filters for more details.


‚û° `PYTHONFAULTHANDLER`
If this environment variable is set to a non-empty string, `faulthandler.enable()` is called at startup: install a handler for SIGSEGV, SIGFPE, SIGABRT, SIGBUS and SIGILL signals to dump the Python traceback. This is equivalent to `-X faulthandler` option.

New in version 3.3.


‚û° `PYTHONTRACEMALLOC`
If this environment variable is set to a non-empty string, start tracing Python memory allocations using the tracemalloc module. The value of the variable is the maximum number of frames stored in a traceback of a trace. For example, PYTHONTRACEMALLOC=1 stores only the most recent frame. See the tracemalloc.start() for more information.

New in version 3.4.


‚û° `PYTHONPROFILEIMPORTTIME`
If this environment variable is set to a non-empty string, Python will show how long each import takes. This is exactly equivalent to setting -X importtime on the command line.

New in version 3.7.


‚û° `PYTHONASYNCIODEBUG`
If this environment variable is set to a non-empty string, enable the debug mode of the asyncio module.

New in version 3.4.


‚û° `PYTHONMALLOC`
Set the Python memory allocators and/or install debug hooks.

Set the family of memory allocators used by Python:
‚Ä¢ default: use the default memory allocators.
‚Ä¢ malloc: use the malloc() function of the C library for all domains (PYMEM_DOMAIN_RAW, PYMEM_DOMAIN_MEM, PYMEM_DOMAIN_OBJ).
‚Ä¢ pymalloc: use the pymalloc allocator for PYMEM_DOMAIN_MEM and PYMEM_DOMAIN_OBJ domains and use the malloc() function for the PYMEM_DOMAIN_RAW domain.

Install debug hooks:
‚Ä¢ debug: install debug hooks on top of the default memory allocators.
‚Ä¢ malloc_debug: same as malloc but also install debug hooks.
‚Ä¢ pymalloc_debug: same as pymalloc but also install debug hooks.

See the default memory allocators and the PyMem_SetupDebugHooks() function (install debug hooks on Python memory allocators).

Changed in version 3.7: Added the "default" allocator.


New in version 3.6.


‚û° `PYTHONMALLOCSTATS`
If set to a non-empty string, Python will print statistics of the pymalloc memory allocator every time a new pymalloc object arena is created, and on shutdown.

This variable is ignored if the PYTHONMALLOC environment variable is used to force the malloc() allocator of the C library, or if Python is configured without pymalloc support.

Changed in version 3.6: This variable can now also be used on Python compiled in release mode. It now has no effect if set to an empty string.


‚û° `PYTHONLEGACYWINDOWSFSENCODING`
If set to a non-empty string, the default filesystem encoding and errors mode will revert to their pre-3.6 values of ‚Äòmbcs‚Äô and ‚Äòreplace‚Äô, respectively. Otherwise, the new defaults ‚Äòutf-8‚Äô and ‚Äòsurrogatepass‚Äô are used.

This may also be enabled at runtime with `sys._enablelegacywindowsfsencoding()`.

Availability: Windows.

New in version 3.6: See PEP 529 for more details.


‚û° `PYTHONLEGACYWINDOWSSTDIO`
If set to a non-empty string, does not use the new console reader and writer. This means that Unicode characters will be encoded according to the active console code page, rather than using utf-8.

This variable is ignored if the standard streams are redirected (to files or pipes) rather than referring to console buffers.

Availability: Windows.

New in version 3.6.


‚û° `PYTHONCOERCECLOCALE`
If set to the value 0, causes the main Python command line application to skip coercing the legacy ASCII-based C and POSIX locales to a more capable UTF-8 based alternative.

If this variable is not set (or is set to a value other than 0), the `LC_ALL` locale override environment variable is also not set, and the current locale reported for the `LC_CTYPE` category is either the default C locale, or else the explicitly ASCII-based POSIX locale, then the Python CLI will attempt to configure the following locales for the `LC_CTYPE` category in the order listed before loading the interpreter runtime:
‚Ä¢ C.UTF-8
‚Ä¢ C.utf8
‚Ä¢ UTF-8

If setting one of these locale categories succeeds, then the `LC_CTYPE` environment variable will also be set accordingly in the current process environment before the Python runtime is initialized. This ensures that in addition to being seen by both the interpreter itself and other locale-aware components running in the same process (such as the GNU readline library), the updated setting is also seen in subprocesses (regardless of whether or not those processes are running a Python interpreter), as well as in operations that query the environment rather than the current C locale (such as Python‚Äôs own `locale.getdefaultlocale()`).

Configuring one of these locales (either explicitly or via the above implicit locale coercion) automatically enables the surrogateescape error handler for `sys.stdin` and `sys.stdout` (`sys.stderr` continues to use backslashreplace as it does in any other locale). This stream handling behavior can be overridden using PYTHONIOENCODING as usual.

For debugging purposes, setting PYTHONCOERCECLOCALE=warn will cause Python to emit warning messages on stderr if either the locale coercion activates, or else if a locale that would have triggered coercion is still active when the Python runtime is initialized.

Also note that even when locale coercion is disabled, or when it fails to find a suitable target locale, PYTHONUTF8 will still activate by default in legacy ASCII-based locales. Both features must be disabled in order to force the interpreter to use ASCII instead of UTF-8 for system interfaces.

Availability: Unix/Linux.

New in version 3.7: See PEP 538 for more details.


‚û° `PYTHONDEVMODE`
If this environment variable is set to a non-empty string, enable Python Development Mode, introducing additional runtime checks that are too expensive to be enabled by default.

New in version 3.7.


‚û° `PYTHONUTF8`
If set to 1, enables the interpreter‚Äôs UTF-8 mode, where UTF-8 is used as the text encoding for system interfaces, regardless of the current locale setting.

This means that:


‚Ä¢ `sys.getfilesystemencoding()` returns 'UTF-8' (the locale encoding is ignored).
‚Ä¢ `locale.getpreferredencoding()` returns 'UTF-8' (the locale encoding is ignored, and the function‚Äôs do_setlocale parameter has no effect).
‚Ä¢ `sys.stdin`, `sys.stdout`, and `sys.stderr` all use UTF-8 as their text encoding, with the surrogateescape error handler being enabled for `sys.stdin` and `sys.stdout` (`sys.stderr` continues to use backslashreplace as it does in the default locale-aware mode)

As a consequence of the changes in those lower level APIs, other higher level APIs also exhibit different default behaviours:


‚Ä¢ Command line arguments, environment variables and filenames are decoded to text using the UTF-8 encoding.
‚Ä¢ `os.fsdecode()` and `os.fsencode()` use the UTF-8 encoding.
‚Ä¢ `open()`, `io.open()`, and `codecs.open()` use the UTF-8 encoding by default. However, they still use the strict error handler by default so that attempting to open a binary file in text mode is likely to raise an exception rather than producing nonsense data.

Note that the standard stream settings in UTF-8 mode can be overridden by PYTHONIOENCODING (just as they can be in the default locale-aware mode).

If set to 0, the interpreter runs in its default locale-aware mode.

Setting any other non-empty string causes an error during interpreter initialisation.

If this environment variable is not set at all, then the interpreter defaults to using the current locale settings, unless the current locale is identified as a legacy ASCII-based locale (as described for PYTHONCOERCECLOCALE), and locale coercion is either disabled or fails. In such legacy locales, the interpreter will default to enabling UTF-8 mode unless explicitly instructed not to do so.

Also available as the -X utf8 option.

New in version 3.7: See PEP 540 for more details.


### ===üóù 1.2.1. Debug-mode variables

Setting these variables only has an effect in a debug build of Python.

‚û° `PYTHONTHREADDEBUG`
If set, Python will print threading debug info.

Need Python configured with the --with-pydebug build option.

‚û° `PYTHONDUMPREFS`
If set, Python will dump objects and reference counts still alive after shutting down the interpreter.

Need Python configured with the --with-trace-refs build option.



## ==‚ö° operators ËøêÁÆóÁ¨¶

ÂèÇËÄÉÊ∫ê‰ª£Á†ÅÊñáÊ°£Ôºö

‚û° The Python Standard Library - Built-in Types: stdtypes.rst
‚û° The Python Language Reference - Expressions: expressions.rst

Python ËØ≠Ë®ÄÊîØÊåÅ‰ª•‰∏ãÁ±ªÂûãÁöÑËøêÁÆóÁ¨¶:

- ÁÆóÊúØËøêÁÆóÁ¨¶
- ÊØîËæÉÔºàÂÖ≥Á≥ªÔºâËøêÁÆóÁ¨¶
- ËµãÂÄºËøêÁÆóÁ¨¶
- ÈÄªËæëËøêÁÆóÁ¨¶
- ‰ΩçËøêÁÆóÁ¨¶
- ÊàêÂëòËøêÁÆóÁ¨¶
- Ê†áËØÜËøêÁÆóÁ¨¶
- ËøêÁÆóÁ¨¶‰ºòÂÖàÁ∫ß


These are the Boolean operations, ordered by ascending priority:

+-------------+---------------------------------+-------+
| Operation   | Result                          | Notes |
+=============+=================================+=======+
| ``x or y``  | if *x* is false, then *y*, else | \(1)  |
|             | *x*                             |       |
+-------------+---------------------------------+-------+
| ``x and y`` | if *x* is false, then *x*, else | \(2)  |
|             | *y*                             |       |
+-------------+---------------------------------+-------+
| ``not x``   | if *x* is false, then ``True``, | \(3)  |
|             | else ``False``                  |       |
+-------------+---------------------------------+-------+

This table summarizes the comparison operations:

+------------+-------------------------+
| Operation  | Meaning                 |
+============+=========================+
| ``<``      | strictly less than      |
+------------+-------------------------+
| ``<=``     | less than or equal      |
+------------+-------------------------+
| ``>``      | strictly greater than   |
+------------+-------------------------+
| ``>=``     | greater than or equal   |
+------------+-------------------------+
| ``==``     | equal                   |
+------------+-------------------------+
| ``!=``     | not equal               |
+------------+-------------------------+
| ``is``     | object identity         |
+------------+-------------------------+
| ``is not`` | negated object identity |
+------------+-------------------------+

All numeric types (except complex) support the following operations (for priorities of
the operations, see :ref:`operator-summary`):

+---------------------+---------------------------------+---------+--------------------+
| Operation           | Result                          | Notes   | Full documentation |
+=====================+=================================+=========+====================+
| ``x + y``           | sum of *x* and *y*              |         |                    |
+---------------------+---------------------------------+---------+--------------------+
| ``x - y``           | difference of *x* and *y*       |         |                    |
+---------------------+---------------------------------+---------+--------------------+
| ``x * y``           | product of *x* and *y*          |         |                    |
+---------------------+---------------------------------+---------+--------------------+
| ``x / y``           | quotient of *x* and *y*         |         |                    |
+---------------------+---------------------------------+---------+--------------------+
| ``x // y``          | floored quotient of *x* and     | \(1)    |                    |
|                     | *y*                             |         |                    |
+---------------------+---------------------------------+---------+--------------------+
| ``x % y``           | remainder of ``x / y``          | \(2)    |                    |
+---------------------+---------------------------------+---------+--------------------+
| ``-x``              | *x* negated                     |         |                    |
+---------------------+---------------------------------+---------+--------------------+
| ``+x``              | *x* unchanged                   |         |                    |
+---------------------+---------------------------------+---------+--------------------+
| ``abs(x)``          | absolute value or magnitude of  |         | :func:`abs`        |
|                     | *x*                             |         |                    |
+---------------------+---------------------------------+---------+--------------------+
| ``int(x)``          | *x* converted to integer        | \(3)\(6)| :func:`int`        |
+---------------------+---------------------------------+---------+--------------------+
| ``float(x)``        | *x* converted to floating point | \(4)\(6)| :func:`float`      |
+---------------------+---------------------------------+---------+--------------------+
| ``complex(re, im)`` | a complex number with real part | \(6)    | :func:`complex`    |
|                     | *re*, imaginary part *im*.      |         |                    |
|                     | *im* defaults to zero.          |         |                    |
+---------------------+---------------------------------+---------+--------------------+
|  ``c.conjugate()``  | conjugate of the complex number |         |                    |
|                     | *c*                             |         |                    |
+---------------------+---------------------------------+---------+--------------------+
| ``divmod(x, y)``    | the pair ``(x // y, x % y)``    | \(2)    | :func:`divmod`     |
+---------------------+---------------------------------+---------+--------------------+
| ``pow(x, y)``       | *x* to the power *y*            | \(5)    | :func:`pow`        |
+---------------------+---------------------------------+---------+--------------------+
| ``x ** y``          | *x* to the power *y*            | \(5)    |                    |
+---------------------+---------------------------------+---------+--------------------+

All :class:`numbers.Real` types (:class:`int` and :class:`float`) also include
the following operations:

+--------------------+---------------------------------------------+
| Operation          | Result                                      |
+====================+=============================================+
| :func:`math.trunc(\| *x* truncated to :class:`~numbers.Integral` |
| x) <math.trunc>`   |                                             |
+--------------------+---------------------------------------------+
| :func:`round(x[,   | *x* rounded to *n* digits,                  |
| n]) <round>`       | rounding half to even. If *n* is            |
|                    | omitted, it defaults to 0.                  |
+--------------------+---------------------------------------------+
| :func:`math.floor(\| the greatest :class:`~numbers.Integral`     |
| x) <math.floor>`   | <= *x*                                      |
+--------------------+---------------------------------------------+
| :func:`math.ceil(x)| the least :class:`~numbers.Integral` >= *x* |
| <math.ceil>`       |                                             |
+--------------------+---------------------------------------------+

This table lists the bitwise operations sorted in ascending priority:

+------------+--------------------------------+----------+
| Operation  | Result                         | Notes    |
+============+================================+==========+
| ``x | y``  | bitwise :dfn:`or` of *x* and   | \(4)     |
|            | *y*                            |          |
+------------+--------------------------------+----------+
| ``x ^ y``  | bitwise :dfn:`exclusive or` of | \(4)     |
|            | *x* and *y*                    |          |
+------------+--------------------------------+----------+
| ``x & y``  | bitwise :dfn:`and` of *x* and  | \(4)     |
|            | *y*                            |          |
+------------+--------------------------------+----------+
| ``x << n`` | *x* shifted left by *n* bits   | (1)(2)   |
+------------+--------------------------------+----------+
| ``x >> n`` | *x* shifted right by *n* bits  | (1)(3)   |
+------------+--------------------------------+----------+
| ``~x``     | the bits of *x* inverted       |          |
+------------+--------------------------------+----------+


Common Sequence Operations

+--------------------------+--------------------------------+----------+
| Operation                | Result                         | Notes    |
+==========================+================================+==========+
| ``x in s``               | ``True`` if an item of *s* is  | \(1)     |
|                          | equal to *x*, else ``False``   |          |
+--------------------------+--------------------------------+----------+
| ``x not in s``           | ``False`` if an item of *s* is | \(1)     |
|                          | equal to *x*, else ``True``    |          |
+--------------------------+--------------------------------+----------+
| ``s + t``                | the concatenation of *s* and   | (6)(7)   |
|                          | *t*                            |          |
+--------------------------+--------------------------------+----------+
| ``s * n`` or             | equivalent to adding *s* to    | (2)(7)   |
| ``n * s``                | itself *n* times               |          |
+--------------------------+--------------------------------+----------+
| ``s[i]``                 | *i*\ th item of *s*, origin 0  | \(3)     |
+--------------------------+--------------------------------+----------+
| ``s[i:j]``               | slice of *s* from *i* to *j*   | (3)(4)   |
+--------------------------+--------------------------------+----------+
| ``s[i:j:k]``             | slice of *s* from *i* to *j*   | (3)(5)   |
|                          | with step *k*                  |          |
+--------------------------+--------------------------------+----------+
| ``len(s)``               | length of *s*                  |          |
+--------------------------+--------------------------------+----------+
| ``min(s)``               | smallest item of *s*           |          |
+--------------------------+--------------------------------+----------+
| ``max(s)``               | largest item of *s*            |          |
+--------------------------+--------------------------------+----------+
| ``s.index(x[, i[, j]])`` | index of the first occurrence  | \(8)     |
|                          | of *x* in *s* (at or after     |          |
|                          | index *i* and before index *j*)|          |
+--------------------------+--------------------------------+----------+
| ``s.count(x)``           | total number of occurrences of |          |
|                          | *x* in *s*                     |          |
+--------------------------+--------------------------------+----------+

Mutable Sequence Types

+------------------------------+--------------------------------+---------------------+
| Operation                    | Result                         | Notes               |
+==============================+================================+=====================+
| ``s[i] = x``                 | item *i* of *s* is replaced by |                     |
|                              | *x*                            |                     |
+------------------------------+--------------------------------+---------------------+
| ``s[i:j] = t``               | slice of *s* from *i* to *j*   |                     |
|                              | is replaced by the contents of |                     |
|                              | the iterable *t*               |                     |
+------------------------------+--------------------------------+---------------------+
| ``del s[i:j]``               | same as ``s[i:j] = []``        |                     |
+------------------------------+--------------------------------+---------------------+
| ``s[i:j:k] = t``             | the elements of ``s[i:j:k]``   | \(1)                |
|                              | are replaced by those of *t*   |                     |
+------------------------------+--------------------------------+---------------------+
| ``del s[i:j:k]``             | removes the elements of        |                     |
|                              | ``s[i:j:k]`` from the list     |                     |
+------------------------------+--------------------------------+---------------------+
| ``s.append(x)``              | appends *x* to the end of the  |                     |
|                              | sequence (same as              |                     |
|                              | ``s[len(s):len(s)] = [x]``)    |                     |
+------------------------------+--------------------------------+---------------------+
| ``s.clear()``                | removes all items from *s*     | \(5)                |
|                              | (same as ``del s[:]``)         |                     |
+------------------------------+--------------------------------+---------------------+
| ``s.copy()``                 | creates a shallow copy of *s*  | \(5)                |
|                              | (same as ``s[:]``)             |                     |
+------------------------------+--------------------------------+---------------------+
| ``s.extend(t)`` or           | extends *s* with the           |                     |
| ``s += t``                   | contents of *t* (for the       |                     |
|                              | most part the same as          |                     |
|                              | ``s[len(s):len(s)] = t``)      |                     |
+------------------------------+--------------------------------+---------------------+
| ``s *= n``                   | updates *s* with its contents  | \(6)                |
|                              | repeated *n* times             |                     |
+------------------------------+--------------------------------+---------------------+
| ``s.insert(i, x)``           | inserts *x* into *s* at the    |                     |
|                              | index given by *i*             |                     |
|                              | (same as ``s[i:i] = [x]``)     |                     |
+------------------------------+--------------------------------+---------------------+
| ``s.pop()`` or ``s.pop(i)``  | retrieves the item at *i* and  | \(2)                |
|                              | also removes it from *s*       |                     |
+------------------------------+--------------------------------+---------------------+
| ``s.remove(x)``              | remove the first item from *s* | \(3)                |
|                              | where ``s[i]`` is equal to *x* |                     |
+------------------------------+--------------------------------+---------------------+
| ``s.reverse()``              | reverses the items of *s* in   | \(4)                |
|                              | place                          |                     |
+------------------------------+--------------------------------+---------------------+

‰ª•‰∏ãÂÅáËÆæÂèòÈáèÔºö a=10Ôºåb=20Ôºö

    ËøêÁÆóÁ¨¶ ÊèèËø∞  ÂÆû‰æã
    +       Âä† - ‰∏§‰∏™ÂØπË±°Áõ∏Âä†  a + b ËæìÂá∫ÁªìÊûú 30
    -       Âáè - ÂæóÂà∞Ë¥üÊï∞ÊàñÊòØ‰∏Ä‰∏™Êï∞ÂáèÂéªÂè¶‰∏Ä‰∏™Êï∞ a - b ËæìÂá∫ÁªìÊûú -10
    *       ‰πò - ‰∏§‰∏™Êï∞Áõ∏‰πòÊàñÊòØËøîÂõû‰∏Ä‰∏™Ë¢´ÈáçÂ§çËã•Âπ≤Ê¨°ÁöÑÂ≠óÁ¨¶‰∏≤   a * b ËæìÂá∫ÁªìÊûú 200
    /       Èô§ - xÈô§‰ª•y    b / a ËæìÂá∫ÁªìÊûú 2
    %       ÂèñÊ®° - ËøîÂõûÈô§Ê≥ïÁöÑ‰ΩôÊï∞    b % a ËæìÂá∫ÁªìÊûú 0
    **      ÂπÇ - ËøîÂõûxÁöÑyÊ¨°ÂπÇ a**b ‰∏∫10ÁöÑ20Ê¨°ÊñπÔºå ËæìÂá∫ÁªìÊûú 100000000000000000000
    //      ÂèñÊï¥Èô§ - ËøîÂõûÂïÜÁöÑÊï¥Êï∞ÈÉ®ÂàÜÔºàÂêë‰∏ãÂèñÊï¥Ôºâ    

    >>> 9//2
    4
    >>> -9//2
    -5

‰ª•‰∏ãÂÆû‰æãÊºîÁ§∫‰∫Ü Python ÊâÄÊúâÁÆóÊúØËøêÁÆóÁ¨¶ÁöÑÊìç‰ΩúÔºö

ÂÆû‰æã(Python 2.0+)

    #!/usr/bin/python
    # -*- coding: UTF-8 -*-
     
    a = 21
    b = 10
    c = 0
     
    c = a + b
    print "1 - c ÁöÑÂÄº‰∏∫Ôºö", c
     
    c = a - b
    print "2 - c ÁöÑÂÄº‰∏∫Ôºö", c 
     
    c = a * b
    print "3 - c ÁöÑÂÄº‰∏∫Ôºö", c 
     
    c = a / b
    print "4 - c ÁöÑÂÄº‰∏∫Ôºö", c 
     
    c = a % b
    print "5 - c ÁöÑÂÄº‰∏∫Ôºö", c
     
    # ‰øÆÊîπÂèòÈáè a „ÄÅb „ÄÅc

    a = 2
    b = 3
    c = a**b 
    print "6 - c ÁöÑÂÄº‰∏∫Ôºö", c
     
    a = 10
    b = 5
    c = a//b 
    print "7 - c ÁöÑÂÄº‰∏∫Ôºö", c

‰ª•‰∏äÂÆû‰æãËæìÂá∫ÁªìÊûúÔºö

    1 - c ÁöÑÂÄº‰∏∫Ôºö 31
    2 - c ÁöÑÂÄº‰∏∫Ôºö 11
    3 - c ÁöÑÂÄº‰∏∫Ôºö 210
    4 - c ÁöÑÂÄº‰∏∫Ôºö 2
    5 - c ÁöÑÂÄº‰∏∫Ôºö 1
    6 - c ÁöÑÂÄº‰∏∫Ôºö 8
    7 - c ÁöÑÂÄº‰∏∫Ôºö 2

Ê≥®ÊÑèÔºöPython2.x ÈáåÔºåÊï¥Êï∞Èô§Êï¥Êï∞ÔºåÂè™ËÉΩÂæóÂá∫Êï¥Êï∞„ÄÇÂ¶ÇÊûúË¶ÅÂæóÂà∞Â∞èÊï∞ÈÉ®ÂàÜÔºåÊääÂÖ∂‰∏≠‰∏Ä‰∏™Êï∞ÊîπÊàêÊµÆÁÇπÊï∞Âç≥ÂèØ„ÄÇ

    >>> 1/2
    0
    >>> 1.0/2
    0.5
    >>> 1/float(2)
    0.5

### Compare Operators ÊØîËæÉËøêÁÆóÁ¨¶

‰ª•‰∏ãÂÅáËÆæÂèòÈáèa‰∏∫10ÔºåÂèòÈáèb‰∏∫20Ôºö

    ËøêÁÆóÁ¨¶ ÊèèËø∞  ÂÆû‰æã
    ==      Á≠â‰∫é - ÊØîËæÉÂØπË±°ÊòØÂê¶Áõ∏Á≠â   (a == b) ËøîÂõû False„ÄÇ
    !=      ‰∏çÁ≠â‰∫é - ÊØîËæÉ‰∏§‰∏™ÂØπË±°ÊòØÂê¶‰∏çÁõ∏Á≠â   (a != b) ËøîÂõû true.
    <>      ‰∏çÁ≠â‰∫é - ÊØîËæÉ‰∏§‰∏™ÂØπË±°ÊòØÂê¶‰∏çÁõ∏Á≠â   (a <> b) ËøîÂõû true„ÄÇËøô‰∏™ËøêÁÆóÁ¨¶Á±ª‰ºº != „ÄÇ
    >       Â§ß‰∫é - ËøîÂõûxÊòØÂê¶Â§ß‰∫éy   (a > b) ËøîÂõû False„ÄÇ
    <       Â∞è‰∫é - ËøîÂõûxÊòØÂê¶Â∞è‰∫éy„ÄÇÊâÄÊúâÊØîËæÉËøêÁÆóÁ¨¶ËøîÂõû1Ë°®Á§∫ÁúüÔºåËøîÂõû0Ë°®Á§∫ÂÅá„ÄÇËøôÂàÜÂà´‰∏éÁâπÊÆäÁöÑÂèòÈáèTrueÂíåFalseÁ≠â‰ª∑„ÄÇ   (a < b) ËøîÂõû true„ÄÇ
    >=      Â§ß‰∫éÁ≠â‰∫é    - ËøîÂõûxÊòØÂê¶Â§ß‰∫éÁ≠â‰∫éy„ÄÇ   (a >= b) ËøîÂõû False„ÄÇ
    <=      Â∞è‰∫éÁ≠â‰∫é -  ËøîÂõûxÊòØÂê¶Â∞è‰∫éÁ≠â‰∫éy„ÄÇ (a <= b) ËøîÂõû true„ÄÇ

‰ª•‰∏ãÂÆû‰æãÊºîÁ§∫‰∫ÜPythonÊâÄÊúâÊØîËæÉËøêÁÆóÁ¨¶ÁöÑÊìç‰ΩúÔºö
ÂÆû‰æã(Python 2.0+)

    #!/usr/bin/python
    # -*- coding: UTF-8 -*-
     
    a = 21
    b = 10
    c = 0
     
    if  a == b :
       print "1 - a Á≠â‰∫é b"
    else:
       print "1 - a ‰∏çÁ≠â‰∫é b"
     
    if  a != b :
       print "2 - a ‰∏çÁ≠â‰∫é b"
    else:
       print "2 - a Á≠â‰∫é b"
     
    if  a <> b :
       print "3 - a ‰∏çÁ≠â‰∫é b"
    else:
       print "3 - a Á≠â‰∫é b"
     
    if  a < b :
       print "4 - a Â∞è‰∫é b" 
    else:
       print "4 - a Â§ß‰∫éÁ≠â‰∫é b"
     
    if  a > b :
       print "5 - a Â§ß‰∫é b"
    else:
       print "5 - a Â∞è‰∫éÁ≠â‰∫é b"
     
    # ‰øÆÊîπÂèòÈáè a Âíå b ÁöÑÂÄº
    a = 5
    b = 20
    if  a <= b :
       print "6 - a Â∞è‰∫éÁ≠â‰∫é b"
    else:
       print "6 - a Â§ß‰∫é  b"
     
    if  b >= a :
       print "7 - b Â§ß‰∫éÁ≠â‰∫é a"
    else:
       print "7 - b Â∞è‰∫é a"

‰ª•‰∏äÂÆû‰æãËæìÂá∫ÁªìÊûúÔºö

    1 - a ‰∏çÁ≠â‰∫é b
    2 - a ‰∏çÁ≠â‰∫é b
    3 - a ‰∏çÁ≠â‰∫é b
    4 - a Â§ß‰∫éÁ≠â‰∫é b
    5 - a Â§ß‰∫é b
    6 - a Â∞è‰∫éÁ≠â‰∫é b
    7 - b Â§ß‰∫éÁ≠â‰∫é a

### Assignment Operators ËµãÂÄºËøêÁÆóÁ¨¶

‰ª•‰∏ãÂÅáËÆæÂèòÈáèa‰∏∫10ÔºåÂèòÈáèb‰∏∫20Ôºö

    ËøêÁÆóÁ¨¶ ÊèèËø∞  ÂÆû‰æã
    =       ÁÆÄÂçïÁöÑËµãÂÄºËøêÁÆóÁ¨¶    c = a + b Â∞Ü a + b ÁöÑËøêÁÆóÁªìÊûúËµãÂÄº‰∏∫ c
    +=      Âä†Ê≥ïËµãÂÄºËøêÁÆóÁ¨¶ c += a Á≠âÊïà‰∫é c = c + a
    -=      ÂáèÊ≥ïËµãÂÄºËøêÁÆóÁ¨¶ c -= a Á≠âÊïà‰∫é c = c - a
    *=      ‰πòÊ≥ïËµãÂÄºËøêÁÆóÁ¨¶ c *= a Á≠âÊïà‰∫é c = c * a
    /=      Èô§Ê≥ïËµãÂÄºËøêÁÆóÁ¨¶ c /= a Á≠âÊïà‰∫é c = c / a
    %=      ÂèñÊ®°ËµãÂÄºËøêÁÆóÁ¨¶ c %= a Á≠âÊïà‰∫é c = c % a
    **=     ÂπÇËµãÂÄºËøêÁÆóÁ¨¶  c **= a Á≠âÊïà‰∫é c = c ** a
    //=     ÂèñÊï¥Èô§ËµãÂÄºËøêÁÆóÁ¨¶    c //= a Á≠âÊïà‰∫é c = c // a

‰ª•‰∏ãÂÆû‰æãÊºîÁ§∫‰∫ÜPythonÊâÄÊúâËµãÂÄºËøêÁÆóÁ¨¶ÁöÑÊìç‰ΩúÔºö
ÂÆû‰æã(Python 2.0+)

    #!/usr/bin/python
    # -*- coding: UTF-8 -*-
     
    a = 21
    b = 10
    c = 0
     
    c = a + b
    print "1 - c ÁöÑÂÄº‰∏∫Ôºö", c
     
    c += a
    print "2 - c ÁöÑÂÄº‰∏∫Ôºö", c 
     
    c *= a
    print "3 - c ÁöÑÂÄº‰∏∫Ôºö", c 
     
    c /= a 
    print "4 - c ÁöÑÂÄº‰∏∫Ôºö", c 
     
    c = 2
    c %= a
    print "5 - c ÁöÑÂÄº‰∏∫Ôºö", c
     
    c **= a
    print "6 - c ÁöÑÂÄº‰∏∫Ôºö", c
     
    c //= a
    print "7 - c ÁöÑÂÄº‰∏∫Ôºö", c

‰ª•‰∏äÂÆû‰æãËæìÂá∫ÁªìÊûúÔºö

    1 - c ÁöÑÂÄº‰∏∫Ôºö 31
    2 - c ÁöÑÂÄº‰∏∫Ôºö 52
    3 - c ÁöÑÂÄº‰∏∫Ôºö 1092
    4 - c ÁöÑÂÄº‰∏∫Ôºö 52
    5 - c ÁöÑÂÄº‰∏∫Ôºö 2
    6 - c ÁöÑÂÄº‰∏∫Ôºö 2097152
    7 - c ÁöÑÂÄº‰∏∫Ôºö 99864

### Bitwish Operators ‰ΩçËøêÁÆóÁ¨¶
Êåâ‰ΩçËøêÁÆóÁ¨¶ÊòØÊääÊï∞Â≠óÁúã‰Ωú‰∫åËøõÂà∂Êù•ËøõË°åËÆ°ÁÆóÁöÑ„ÄÇPython‰∏≠ÁöÑÊåâ‰ΩçËøêÁÆóÊ≥ïÂàôÂ¶Ç‰∏ãÔºö

‰∏ãË°®‰∏≠ÂèòÈáè a ‰∏∫ 60Ôºåb ‰∏∫ 13Ôºå‰∫åËøõÂà∂Ê†ºÂºèÂ¶Ç‰∏ãÔºö

    a = 0011 1100
    b = 0000 1101

    a&b = 0000 1100
    a|b = 0011 1101
    a^b = 0011 0001
    ~a  = 1100 0011

    ËøêÁÆóÁ¨¶ ÊèèËø∞  ÂÆû‰æã
    &       Êåâ‰Ωç‰∏éËøêÁÆóÁ¨¶ÔºöÂèÇ‰∏éËøêÁÆóÁöÑ‰∏§‰∏™ÂÄº,Â¶ÇÊûú‰∏§‰∏™Áõ∏Â∫î‰ΩçÈÉΩ‰∏∫1,ÂàôËØ•‰ΩçÁöÑÁªìÊûú‰∏∫1,Âê¶Âàô‰∏∫0    (a & b) ËæìÂá∫ÁªìÊûú 12 Ôºå‰∫åËøõÂà∂Ëß£ÈáäÔºö 0000 1100
    |       Êåâ‰ΩçÊàñËøêÁÆóÁ¨¶ÔºöÂè™Ë¶ÅÂØπÂ∫îÁöÑ‰∫å‰∏™‰∫åËøõ‰ΩçÊúâ‰∏Ä‰∏™‰∏∫1Êó∂ÔºåÁªìÊûú‰ΩçÂ∞±‰∏∫1„ÄÇ (a | b) ËæìÂá∫ÁªìÊûú 61 Ôºå‰∫åËøõÂà∂Ëß£ÈáäÔºö 0011 1101
    ^       Êåâ‰ΩçÂºÇÊàñËøêÁÆóÁ¨¶ÔºöÂΩì‰∏§ÂØπÂ∫îÁöÑ‰∫åËøõ‰ΩçÁõ∏ÂºÇÊó∂ÔºåÁªìÊûú‰∏∫1    (a ^ b) ËæìÂá∫ÁªìÊûú 49 Ôºå‰∫åËøõÂà∂Ëß£ÈáäÔºö 0011 0001
    ~       Êåâ‰ΩçÂèñÂèçËøêÁÆóÁ¨¶ÔºöÂØπÊï∞ÊçÆÁöÑÊØè‰∏™‰∫åËøõÂà∂‰ΩçÂèñÂèç,Âç≥Êää1Âèò‰∏∫0,Êää0Âèò‰∏∫1 „ÄÇ~x Á±ª‰ºº‰∫é -x-1  (~a ) ËæìÂá∫ÁªìÊûú -61 Ôºå‰∫åËøõÂà∂Ëß£ÈáäÔºö 1100 0011ÔºåÂú®‰∏Ä‰∏™ÊúâÁ¨¶Âè∑‰∫åËøõÂà∂Êï∞ÁöÑË°•Á†ÅÂΩ¢Âºè„ÄÇ
    <<      Â∑¶ÁßªÂä®ËøêÁÆóÁ¨¶ÔºöËøêÁÆóÊï∞ÁöÑÂêÑ‰∫åËøõ‰ΩçÂÖ®ÈÉ®Â∑¶ÁßªËã•Âπ≤‰ΩçÔºåÁî± << Âè≥ËæπÁöÑÊï∞Â≠óÊåáÂÆö‰∫ÜÁßªÂä®ÁöÑ‰ΩçÊï∞ÔºåÈ´ò‰Ωç‰∏¢ÂºÉÔºå‰Ωé‰ΩçË°•0„ÄÇ    a << 2 ËæìÂá∫ÁªìÊûú 240 Ôºå‰∫åËøõÂà∂Ëß£ÈáäÔºö 1111 0000
    >>      Âè≥ÁßªÂä®ËøêÁÆóÁ¨¶ÔºöÊää">>"Â∑¶ËæπÁöÑËøêÁÆóÊï∞ÁöÑÂêÑ‰∫åËøõ‰ΩçÂÖ®ÈÉ®Âè≥ÁßªËã•Âπ≤‰ΩçÔºå>> Âè≥ËæπÁöÑÊï∞Â≠óÊåáÂÆö‰∫ÜÁßªÂä®ÁöÑ‰ΩçÊï∞ a >> 2 ËæìÂá∫ÁªìÊûú 15 Ôºå‰∫åËøõÂà∂Ëß£ÈáäÔºö 0000 1111

‰ª•‰∏ãÂÆû‰æãÊºîÁ§∫‰∫ÜPythonÊâÄÊúâ‰ΩçËøêÁÆóÁ¨¶ÁöÑÊìç‰ΩúÔºö
ÂÆû‰æã(Python 2.0+)

    #!/usr/bin/python
    # -*- coding: UTF-8 -*-
     
    a = 60            # 60 = 0011 1100 
    b = 13            # 13 = 0000 1101 
    c = 0
     
    c = a & b;        # 12 = 0000 1100
    print "1 - c ÁöÑÂÄº‰∏∫Ôºö", c
     
    c = a | b;        # 61 = 0011 1101 
    print "2 - c ÁöÑÂÄº‰∏∫Ôºö", c
     
    c = a ^ b;        # 49 = 0011 0001
    print "3 - c ÁöÑÂÄº‰∏∫Ôºö", c
     
    c = ~a;           # -61 = 1100 0011
    print "4 - c ÁöÑÂÄº‰∏∫Ôºö", c
     
    c = a << 2;       # 240 = 1111 0000
    print "5 - c ÁöÑÂÄº‰∏∫Ôºö", c
     
    c = a >> 2;       # 15 = 0000 1111
    print "6 - c ÁöÑÂÄº‰∏∫Ôºö", c

‰ª•‰∏äÂÆû‰æãËæìÂá∫ÁªìÊûúÔºö

    1 - c ÁöÑÂÄº‰∏∫Ôºö 12
    2 - c ÁöÑÂÄº‰∏∫Ôºö 61
    3 - c ÁöÑÂÄº‰∏∫Ôºö 49
    4 - c ÁöÑÂÄº‰∏∫Ôºö -61
    5 - c ÁöÑÂÄº‰∏∫Ôºö 240
    6 - c ÁöÑÂÄº‰∏∫Ôºö 15

### ÈÄªËæëËøêÁÆóÁ¨¶
PythonËØ≠Ë®ÄÊîØÊåÅÈÄªËæëËøêÁÆóÁ¨¶Ôºå‰ª•‰∏ãÂÅáËÆæÂèòÈáè a ‰∏∫ 10, b‰∏∫ 20:

    ËøêÁÆóÁ¨¶ ÈÄªËæëË°®ËææÂºè   ÊèèËø∞  ÂÆû‰æã
    and x and y Â∏ÉÂ∞î"‰∏é" - Â¶ÇÊûú x ‰∏∫ FalseÔºåx and y ËøîÂõû FalseÔºåÂê¶ÂàôÂÆÉËøîÂõû y ÁöÑËÆ°ÁÆóÂÄº„ÄÇ (a and b) ËøîÂõû 20„ÄÇ
    or  x or y  Â∏ÉÂ∞î"Êàñ"   - Â¶ÇÊûú x ÊòØÈùû 0ÔºåÂÆÉËøîÂõû x ÁöÑÂÄºÔºåÂê¶ÂàôÂÆÉËøîÂõû y ÁöÑËÆ°ÁÆóÂÄº„ÄÇ  (a or b) ËøîÂõû 10„ÄÇ
    not not x   Â∏ÉÂ∞î"Èùû" - Â¶ÇÊûú x ‰∏∫ TrueÔºåËøîÂõû False „ÄÇÂ¶ÇÊûú x ‰∏∫ FalseÔºåÂÆÉËøîÂõû True„ÄÇ    not(a and b) ËøîÂõû False

‰ª•‰∏äÂÆû‰æãËæìÂá∫ÁªìÊûúÔºö

ÂÆû‰æã(Python 2.0+)

```py
#!/usr/bin/python
# -*- coding: UTF-8 -*-
 
a = 10
b = 20
 
if  a and b :
   print "1 - ÂèòÈáè a Âíå b ÈÉΩ‰∏∫ true"
else:
   print "1 - ÂèòÈáè a Âíå b Êúâ‰∏Ä‰∏™‰∏ç‰∏∫ true"
 
if  a or b :
   print "2 - ÂèòÈáè a Âíå b ÈÉΩ‰∏∫ trueÔºåÊàñÂÖ∂‰∏≠‰∏Ä‰∏™ÂèòÈáè‰∏∫ true"
else:
   print "2 - ÂèòÈáè a Âíå b ÈÉΩ‰∏ç‰∏∫ true"
 
# ‰øÆÊîπÂèòÈáè a ÁöÑÂÄº

a = 0
if  a and b :
   print "3 - ÂèòÈáè a Âíå b ÈÉΩ‰∏∫ true"
else:
   print "3 - ÂèòÈáè a Âíå b Êúâ‰∏Ä‰∏™‰∏ç‰∏∫ true"
 
if  a or b :
   print "4 - ÂèòÈáè a Âíå b ÈÉΩ‰∏∫ trueÔºåÊàñÂÖ∂‰∏≠‰∏Ä‰∏™ÂèòÈáè‰∏∫ true"
else:
   print "4 - ÂèòÈáè a Âíå b ÈÉΩ‰∏ç‰∏∫ true"
 
if not( a and b ):
   print "5 - ÂèòÈáè a Âíå b ÈÉΩ‰∏∫ falseÔºåÊàñÂÖ∂‰∏≠‰∏Ä‰∏™ÂèòÈáè‰∏∫ false"
else:
   print "5 - ÂèòÈáè a Âíå b ÈÉΩ‰∏∫ true"
```

‰ª•‰∏äÂÆû‰æãËæìÂá∫ÁªìÊûúÔºö

    1 - ÂèòÈáè a Âíå b ÈÉΩ‰∏∫ true
    2 - ÂèòÈáè a Âíå b ÈÉΩ‰∏∫ trueÔºåÊàñÂÖ∂‰∏≠‰∏Ä‰∏™ÂèòÈáè‰∏∫ true
    3 - ÂèòÈáè a Âíå b Êúâ‰∏Ä‰∏™‰∏ç‰∏∫ true
    4 - ÂèòÈáè a Âíå b ÈÉΩ‰∏∫ trueÔºåÊàñÂÖ∂‰∏≠‰∏Ä‰∏™ÂèòÈáè‰∏∫ true
    5 - ÂèòÈáè a Âíå b ÈÉΩ‰∏∫ falseÔºåÊàñÂÖ∂‰∏≠‰∏Ä‰∏™ÂèòÈáè‰∏∫ false

### Member Operator ÊàêÂëòËøêÁÆóÁ¨¶
Èô§‰∫Ü‰ª•‰∏äÁöÑ‰∏Ä‰∫õËøêÁÆóÁ¨¶‰πãÂ§ñÔºåPythonËøòÊîØÊåÅÊàêÂëòËøêÁÆóÁ¨¶ÔºåÊµãËØïÂÆû‰æã‰∏≠ÂåÖÂê´‰∫Ü‰∏ÄÁ≥ªÂàóÁöÑÊàêÂëòÔºåÂåÖÊã¨Â≠óÁ¨¶‰∏≤ÔºåÂàóË°®ÊàñÂÖÉÁªÑ„ÄÇ

    ËøêÁÆóÁ¨¶ ÊèèËø∞  ÂÆû‰æã
    in      Â¶ÇÊûúÂú®ÊåáÂÆöÁöÑÂ∫èÂàó‰∏≠ÊâæÂà∞ÂÄºËøîÂõû TrueÔºåÂê¶ÂàôËøîÂõû False„ÄÇ x Âú® y Â∫èÂàó‰∏≠ , Â¶ÇÊûú x Âú® y Â∫èÂàó‰∏≠ËøîÂõû True„ÄÇ
    not in  Â¶ÇÊûúÂú®ÊåáÂÆöÁöÑÂ∫èÂàó‰∏≠Ê≤°ÊúâÊâæÂà∞ÂÄºËøîÂõû TrueÔºåÂê¶ÂàôËøîÂõû False„ÄÇ   x ‰∏çÂú® y Â∫èÂàó‰∏≠ , Â¶ÇÊûú x ‰∏çÂú® y Â∫èÂàó‰∏≠ËøîÂõû True„ÄÇ

‰ª•‰∏ãÂÆû‰æãÊºîÁ§∫‰∫ÜPythonÊâÄÊúâÊàêÂëòËøêÁÆóÁ¨¶ÁöÑÊìç‰ΩúÔºö

ÂÆû‰æã(Python 2.0+)

    #!/usr/bin/python
    # -*- coding: UTF-8 -*-
     
    a = 10
    b = 20
    list = [1, 2, 3, 4, 5 ];
     
    if ( a in list ):
       print "1 - ÂèòÈáè a Âú®ÁªôÂÆöÁöÑÂàóË°®‰∏≠ list ‰∏≠"
    else:
       print "1 - ÂèòÈáè a ‰∏çÂú®ÁªôÂÆöÁöÑÂàóË°®‰∏≠ list ‰∏≠"
     
    if ( b not in list ):
       print "2 - ÂèòÈáè b ‰∏çÂú®ÁªôÂÆöÁöÑÂàóË°®‰∏≠ list ‰∏≠"
    else:
       print "2 - ÂèòÈáè b Âú®ÁªôÂÆöÁöÑÂàóË°®‰∏≠ list ‰∏≠"
     
    # ‰øÆÊîπÂèòÈáè a ÁöÑÂÄº

    a = 2
    if ( a in list ):
       print "3 - ÂèòÈáè a Âú®ÁªôÂÆöÁöÑÂàóË°®‰∏≠ list ‰∏≠"
    else:
       print "3 - ÂèòÈáè a ‰∏çÂú®ÁªôÂÆöÁöÑÂàóË°®‰∏≠ list ‰∏≠"

‰ª•‰∏äÂÆû‰æãËæìÂá∫ÁªìÊûúÔºö

    1 - ÂèòÈáè a ‰∏çÂú®ÁªôÂÆöÁöÑÂàóË°®‰∏≠ list ‰∏≠
    2 - ÂèòÈáè b ‰∏çÂú®ÁªôÂÆöÁöÑÂàóË°®‰∏≠ list ‰∏≠
    3 - ÂèòÈáè a Âú®ÁªôÂÆöÁöÑÂàóË°®‰∏≠ list ‰∏≠

## ==‚ö° Types Á±ªÂûãÁ≥ªÁªü

|  ‚úí [The Python Standard Library](library\index.rst)
|   |   ‚Ä¢ [Python library Introduction](library\intro.rst)
|   |   ‚Ä¢ [61 Built-in Functions](library\functions.rst)
|   |   ‚Ä¢ [Built-in Constants](library\constants.rst)
|   |   ‚Ä¢ [Built-in Types](library\stdtypes.rst)
|   |   ‚Ä¢ [Built-in Exceptions](library\exceptions.rst)

- Truth Value Testing
- Boolean Operations --- :keyword:`!and`, :keyword:`!or`, :keyword:`!not`
- Comparisons

- Numeric Types --- :class:`int`, :class:`float`, :class:`complex`
- Iterator Types
- Sequence Types --- :class:`list`, :class:`tuple`, :class:`range`
- Text Sequence Type --- :class:`str`
- Binary Sequence Types --- :class:`bytes`, :class:`bytearray`, :class:`memoryview`
- Set Types --- :class:`set`, :class:`frozenset`
- Mapping Types --- :class:`dict`
- Context Manager Types
- Type Annotation Types --- :ref:`Generic Alias <types-genericalias>`, :ref:`Union <types-union>`
- Other Built-in Types
    - Modules
    - Classes and Class Instances
    - Functions
    - Methods
    - Code Objects
    - Type Objects
    - The Null Object
    - The Ellipsis Object
    - The NotImplemented Object
    - Boolean Values
    - Internal Objects
- Special Attributes
    - .. attribute:: object.__dict__
    - .. attribute:: instance.__class__
    - .. attribute:: class.__bases__
    - .. attribute:: definition.__name__
    - .. attribute:: definition.__qualname__
    - .. attribute:: class.__mro__
    - .. method:: class.mro()
    - .. method:: class.__subclasses__
- Integer string conversion length limitation

Python ÊòØ‰∏ÄÈó®Âä®ÊÄÅËØ≠Ë®ÄÔºå‰πüÊòØÂä®ÊÄÅÁ±ªÂûãËØ≠Ë®ÄÔºåÊòØÂº∫Á±ªÂûãÁöÑÂä®ÊÄÅÁ±ªÂûã„ÄÇË∞àËÆ∫‰∏Ä‰∏™ËØ≠Ë®ÄÁöÑÁ±ªÂûãÁ≥ªÁªüÊó∂ÔºåÈúÄË¶ÅÂÖàÁ°ÆËÆ§
ËøôÈó®ËØ≠Ë®ÄÁöÑÁ±ªÂûãÁ≥ªÁªüÊòØÂä®ÊÄÅÁ±ªÂûãÔºàÁªìÊûÑËøêË°åÊó∂ÂèØÂèòÔºâÔºåËøòÊòØÈùôÊÄÅÁ±ªÂûãÔºàÁºñËØëÊó∂Á°ÆÂÆûÁ±ªÂûãÁªìÊûÑÔºâ„ÄÇ‰ª•ÂèäÁ±ªÂûãÁöÑÂº∫Âº±
Ë¶ÅÊ±ÇÔºåÂº∫Á±ªÂûãËØ≠Ë®ÄÔºåÂç≥‰∏çÂêåÁ±ªÂûã‰πãÈó¥‰∏çËÉΩÁõ¥Êé•ËµãÂÄº„ÄÇ

- Dynamic Programming Language
- Static Programming Language

C/C++„ÄÅJava„ÄÅGo„ÄÅRust Á≠âÈÉΩÊòØÂÖ∏ÂûãÁöÑÈùôÊÄÅËØ≠Ë®ÄÁ±ªÂûãËØ≠Ë®ÄÔºåËøòÊúâ TypeScript ËÑöÊú¨‰πüÊòØÔºåÂ∞ΩÁÆ°ÁõÆÂâçÂÆÉÈÄöÂ∏∏‰ºö
ËΩ¨ËØë‰∏∫ JavaScript ËÑöÊú¨ÂÜçËøêË°åÔºåËÄåÂêéËÄÖÊòØÂä®ÊÄÅÁ±ªÂûãËÑöÊú¨ËØ≠Ë®Ä„ÄÇÈùôÊÄÅËØ≠Ë®ÄÁöÑ‰ºòÁÇπÂæàÊòéÊòæÔºåÈ´òÊïà„ÄÅÂÆâÂÖ®ËßÑËåÉÔºåÂΩìÁÑ∂
Âä®ÊÄÅËØ≠Ë®Ä‰πüÊúâ‰ºòÁÇπÔºåÊòìÁî®ÁÅµÊ¥ªÊòØÂä®ÊÄÅËØ≠Ë®ÄÁöÑÊúÄÂ§ßÁâπÁÇπÔºåÂêåÊó∂Ëøô‰πüÂ∏¶Êù•‰∫ÜÈ°πÁõÆÁÆ°ÁêÜÈöæÁöÑÈóÆÈ¢ò„ÄÇ


Âà©Áî®ÂÜÖÁΩÆÂáΩÊï∞ type ÊûÑÈÄ†‰∏Ä‰∏™Á±ªÂûãÔºåÂØπÁöÑÔºåËøô‰∏™ÂáΩÊï∞ÊûÑÂª∫ÁöÑÊòØÁ±ªÂûãÂØπË±°ÔºåÂÆÉËøîÂõûÁöÑÂØπË±°Â∞±Â¶Ç class ÂÆö‰πâÁöÑÁ±ª„ÄÇ
ÁªìÂêà is ÂÖ≥ÈîÆÂ≠óÂèØ‰ª•Âà§Êñ≠ÊòØÂê¶ÊòØÁõ∏ÂêåÁöÑÁ±ªÂûãÔºö

```py
type("abc") is bytes           # false
type("abc".encode()) is bytes  # true
```


## ==‚ö° is id Á≠â‰ª∑Âà§Êñ≠

    +-- Doc\reference
    |   ‚Ä¢ -- index.rst               => The Python Language Reference
    |   ‚Ä¢ -- datamodel.rst              => Data model
    +-- Doc\library
    |  ‚úí index.rst         => The Python Standard Library
    |   ‚Ä¢ - intro.rst           => Python library Introduction
    |   ‚Ä¢ - functions.rst       => 61 Built-in Functions
    |   ‚Ä¢ - constants.rst       => Built-in Constants
    |   ‚Ä¢ - stdtypes.rst        => Built-in Types
    |   ‚Ä¢ - exceptions.rst      => Built-in Exceptions

Python ÊòØ OOP ËØ≠Ë®ÄÔºå‰∏ÄÂàáÁöÜÂØπË±°ÔºåÂà§Êñ≠Áõ∏Á≠âÊúâ‰∏§ÁßçÂΩ¢ÂºèÔºö

- == ËøêÁÆóÁ¨¶ÔºåÂè™ËøõË°åÂÄºÂà§Êñ≠Ôºå‰ºöË∞ÉÁî® __eq__ È≠îÊúØÂáΩÊï∞Ôºõ
- is ËøêÁÆóÁ¨¶ÔºåÂà§Êñ≠ÂºïÁî®ÊòØ‰∏çÊòØÂêå‰∏Ä‰∏™ÂØπË±°ÔºåÂà©Áî® id() ÂáΩÊï∞ÂèØ‰ª•Á°ÆÂÆöÊòØÂê¶ÊòØÂêå‰∏Ä‰∏™ÂºïÁî®Ôºõ
- id() Ê†áËØÜÂáΩÊï∞Áî®‰∫éËé∑ÂèñÂØπË±°ÁöÑÂ≠òÂÇ®ÂçïÂÖÉÂú∞ÂùÄÔºõ


```py
a = "hello"
b = "hello"
print("a = b? %s" % (a==b))     # True
print("a is b? %s" % (a is b))  # True

a = a+"!"
b = b+"!"
print("a = b? %s" % (a==b))     # True
print("a is b? %s" % (a is b))  # False
print(id(a), id(b))
```

Áõ∏ÂêåÁöÑÂ≠óÈù¢Â∏∏ÈáèÊÄªÊòØÂºïÁî®Âêå‰∏Ä‰∏™ÂØπË±°ÔºåÊó†ËÆ∫Â≠óÁ¨¶ÊàñÊï∞ÂÄº„ÄÇ‰ΩÜÊòØÁªèËøáËøêÁÆóÂ§ÑÁêÜÂêéÔºåÂ∞±ÂèòÂÖ∂ÂÆÉÂØπË±°ÔºåÂØπ‰∫é immutable ÂØπË±°ÊÄªÊòØ‰ºöÂàõÂª∫Êñ∞ÁöÑÂØπË±°Ôºö

- immutable ÂØπË±°Á±ªÂûãÂåÖÊã¨Ôºö Â≠óÁ¨¶‰∏≤ÂèäÊï∞ÂÄºÔºåstr, bool, int, float, set, tuple, byte, slice
- mutable ÂØπË±°Á±ªÂûãÂåÖÊã¨Ôºö dict, list, bytearray

is Êàñ is not Âà§Êñ≠‰∏§‰∏™Ê†áËØÜÁ¨¶ÊòØ‰∏çÊòØÂºïÁî®Ëá™‰∏Ä‰∏™ÂØπË±°ÔºåÂ¶ÇÊûúÂºïÁî®ÁöÑÊòØÂêå‰∏Ä‰∏™ÂØπË±°ÂàôËøîÂõû TrueÔºåÂê¶ÂàôËøîÂõû FalseÔºåÂä† not ÂàôÂèñÂèç„ÄÇ

    x is y      #==> id(x) == id(y)
    x is not y  #==> id(a) != id(b)

Ê≥®Ôºö id() ÂáΩÊï∞Áî®‰∫éËé∑ÂèñÂØπË±°ÂÜÖÂ≠òÂú∞ÂùÄ„ÄÇ

‚ùìËØ∑Ëß£Èáä is Âíå == Ëøô‰∏§‰∏™Êìç‰ΩúÁöÑÂå∫Âà´„ÄÇ

is Áî®‰∫éÂà§Êñ≠‰∏§‰∏™ÂèòÈáèÂºïÁî®ÂØπË±°ÊòØÂê¶‰∏∫Âêå‰∏Ä‰∏™(Âêå‰∏ÄÂùóÂÜÖÂ≠òÁ©∫Èó¥)Ôºå == Áî®‰∫éÂà§Êñ≠ÂºïÁî®ÂèòÈáèÁöÑÂÄºÊòØÂê¶Áõ∏Á≠â„ÄÇ

‚ùìÂú® Python ‰∏≠‰∏é None ÊØîËæÉÊó∂Ôºå‰∏∫‰ªÄ‰πàË¶ÅÁî® is None ËÄå‰∏çÊòØ == None„ÄÇ

actually, it isn't about programming style, is and == are very different:

- the is operator checks if the two items reference the same object
- the == operator checks if the objects that the two items reference are the identicle

The authoritative reason is because PEP-8 says so:

Comparisons to singletons like *None* should always be done with *is* or *is not*, never the equality operators.

```py
class Foo:
    def __eq__(self, other):
        return True
foo = Foo()

print(foo == None)   # True
print(foo is None)   # False
```

Â∏ÉÂ∞îÂÄºÁöÑÂÆûÁé∞ÂíåÊï¥ÂΩ¢ÊòØÂêåÊ∫êÁöÑÔºåTrue = 1ÔºåFalse = 0ÔºåÈÉΩÊòØÂü∫‰∫é *PyLongObject* ÂÆûÁé∞ÔºåÂèÇËÄÉ CPython *SETBUILTIN* ÂÆèÂÆö‰πâ„ÄÇ

Â∏ÉÂ∞îÂÄºÂíåÊï∞ÂÄºÁõ∏Âä†Â∞±‰ºöÂèòÊàêÊï∞ÂÄºÁ±ªÂûãÔºåËÄå Python ‰ºöÁºìÂ≠òÂ∞èÊï∞ÂÄºÊï¥ÂΩ¢ÂØπË±°ÔºåÊâÄ‰ª•Âú® [-5, 256] Ëøô‰∏™ËåÉÂõ¥ÁöÑÊï¥ÂΩ¢ÈÉΩ‰ºöÂºïÁî®Âêå‰∏Ä‰∏™Êï¥ÂΩ¢Êï∞ÂÄºÂØπË±°„ÄÇ

```py
print(None is None)  # True
print(False is False)# True
print(True is True)  # True

print(False+0 is False+0)   # True
print(True +0 is True +0)   # True
print(False+0. is False+0.) # False
print(True +0. is True +0.) # False
print(False+0 is False)     # False
print(True+ 0 is True)      # False
```

ÂÆû‰æãÔºåÁõ∏ÂêåÁöÑÊï∞ÂÄºÂú® CPython ‰∏≠ÂÖ∑ÊúâÁõ∏ÂêåÁöÑÂºïÁî®Ôºö

```py
a = 20
b = 20
c = 257.1
d = 257.1
( a is b ) and print( "‚úÖ - a is b")
( a is not c ) and print( "‚úÖ - a is not c")
( d is c ) and print( "‚úÖ - d is c")

a += 1
b += 1
c += 1
d += 1
( a is b ) and print( "‚úÖ - a is b")
( d is c ) and print( "‚õî - d is c")

# item =[ it for it in range(-6, 257)]
# for it in range(-6, 257):
#     print("{} is {}: {}".format(it, item[6+it], it is item[6+it]))
```

Python ÂêØÂä®Êó∂‰ºöÁîüÊàê‰∏Ä‰∏™Â∞èÊï¥ÂΩ¢Êï∞ÂÄºÂØπË±°ÁºìÂ≠ò small_ints [-5, 256] Ëøô‰∫õÊï∞ÂÄº‰ºöÁºìÂ≠ò‰∏ãÊù•Ôºå‰πüÂ∞±ÊòØÂàõÂª∫ÂíåÁºìÂ≠ò‰∏ÄÊ†∑ÁöÑÊï∞ÂÄºÂºïÁî®ÁöÑËøòÊòØÂêå‰∏Ä‰∏™Êï∞ÂÄºÂØπË±°ÔºåËøô‰πüÂ∞±ÊòØ‰∏∫‰Ωï 0 ÂÄºÂá∫Áé∞‰πàÂ§öÁöÑÂºïÁî®„ÄÇ‰ΩøÁî® is ËøêÁÆóÁ¨¶ÂèØ‰ª•Âà§Êñ≠‰∏§‰∏™Á≠âÂÄºÁöÑÊï∞ÂÄºÔºåÂ∞±ÊòØÂºïÁî®Âêå‰∏Ä‰∏™ÂØπË±°„ÄÇ‰ΩÜÊòØÔºåÂØπ‰∫éÁ≠â‰ªÄÁöÑÂ≠óÈù¢Â∏∏ÈáèÔºåÂÆÉ‰ª¨Êó†ËÆ∫‰ªÄ‰πàÂÄºÔºåÈÉΩÊòØÂêå‰∏Ä‰∏™ÂØπË±°ÂºïÁî®ÔºåÂΩìÂÆÉ‰ª¨Ë¢´‰øÆÊîπÂêéÔºåÂç≥ÊòØÂÄºÁõ∏Á≠â‰πü‰∏çÊòØÂºïÁî®Âêå‰∏Ä‰∏™Â≠óÈù¢ÈáèÂØπË±°„ÄÇ

    static PyLongObject small_ints[NSMALLNEGINTS + NSMALLPOSINTS]

Ê≥®ÊÑèÔºå‰ΩøÁî®‰∫§‰∫íÊ®°ÂºèËΩ¨ÂÖ•ËÑöÊú¨Êó∂ÔºåÊØè‰∏™ blocks ‰ª£Á†ÅÂùó‰∏≠ÁöÑÁõ∏ÂêåÂ∏∏ÈáèÊâç‰ºöÂºïÁî®Áõ∏ÂêåÂØπË±°„ÄÇÂ¶ÇÊûúÊòØÈÄöËøáÂõûËΩ¶ËæìÂÖ•ÁöÑÁõ∏ÂêåÂ∏∏ÈáèÔºåÂõ†‰∏∫ÂÆÉ‰ª¨ÂΩíÂ±û‰∏çÂêåÁöÑ blocks ÊâÄ‰ª•ÂºïÁî®‰∏çÂêåÁöÑÂØπË±°„ÄÇ


### Operator Priority ËøêÁÆóÁ¨¶‰ºòÂÖàÁ∫ß

‰ª•‰∏ãË°®Ê†ºÂàóÂá∫‰∫Ü‰ªéÊúÄÈ´òÂà∞ÊúÄ‰Ωé‰ºòÂÖàÁ∫ßÁöÑÊâÄÊúâËøêÁÆóÁ¨¶Ôºö

    ËøêÁÆóÁ¨¶     ÊèèËø∞
    **          ÊåáÊï∞ (ÊúÄÈ´ò‰ºòÂÖàÁ∫ß)
    ~ + -       Êåâ‰ΩçÁøªËΩ¨, ‰∏ÄÂÖÉÂä†Âè∑ÂíåÂáèÂè∑ (ÊúÄÂêé‰∏§‰∏™ÁöÑÊñπÊ≥ïÂêç‰∏∫ +@ Âíå -@)
    * / % //    ‰πòÔºåÈô§ÔºåÂèñÊ®°ÂíåÂèñÊï¥Èô§
    + -         Âä†Ê≥ïÂáèÊ≥ï
    >> <<       Âè≥ÁßªÔºåÂ∑¶ÁßªËøêÁÆóÁ¨¶
    &           ‰Ωç 'AND'
    ^ |         ‰ΩçËøêÁÆóÁ¨¶
    <= < > >=   ÊØîËæÉËøêÁÆóÁ¨¶
    <> == !=    Á≠â‰∫éËøêÁÆóÁ¨¶
    = %= /= //= -= += *= **=    ËµãÂÄºËøêÁÆóÁ¨¶
    is is not   Ê†áËØÜËøêÁÆóÁ¨¶
    in not in   ÊàêÂëòËøêÁÆóÁ¨¶
    not and or  ÈÄªËæëËøêÁÆóÁ¨¶

‰ª•‰∏ãÂÆû‰æãÊºîÁ§∫‰∫ÜPythonÊâÄÊúâËøêÁÆóÁ¨¶‰ºòÂÖàÁ∫ßÁöÑÊìç‰ΩúÔºö

ÂÆû‰æã(Python 2.0+)

    #!/usr/bin/python
    # -*- coding: UTF-8 -*-
     
    a = 20
    b = 10
    c = 15
    d = 5
    e = 0
     
    e = (a + b) * c / d       #( 30 * 15 ) / 5
    print "(a + b) * c / d ËøêÁÆóÁªìÊûú‰∏∫Ôºö",  e
     
    e = ((a + b) * c) / d     # (30 * 15 ) / 5
    print "((a + b) * c) / d ËøêÁÆóÁªìÊûú‰∏∫Ôºö",  e
     
    e = (a + b) * (c / d);    # (30) * (15/5)
    print "(a + b) * (c / d) ËøêÁÆóÁªìÊûú‰∏∫Ôºö",  e
     
    e = a + (b * c) / d;      #  20 + (150/5)
    print "a + (b * c) / d ËøêÁÆóÁªìÊûú‰∏∫Ôºö",  e

‰ª•‰∏äÂÆû‰æãËæìÂá∫ÁªìÊûúÔºö

    (a + b) * c / d ËøêÁÆóÁªìÊûú‰∏∫Ôºö 90
    ((a + b) * c) / d ËøêÁÆóÁªìÊûú‰∏∫Ôºö 90
    (a + b) * (c / d) ËøêÁÆóÁªìÊûú‰∏∫Ôºö 90
    a + (b * c) / d ËøêÁÆóÁªìÊûú‰∏∫Ôºö 50





## ==‚ö° string in Python


Â≠óÁ¨¶‰∏≤ÊòØ‰∏Ä‰∏™Âçï„ÄÅÂèåÂºïÂè∑ÂåÖÊã¨ÁöÑ„ÄÅÊúâÂ∫èÁöÑ„ÄÅÂ≠óÁ¨¶Â∫èÂàóÔºåÂ±û‰∫é immutable ÂØπË±°ÔºåÁî®‰∫éÂ≠òÂÇ®ÂíåË°®Á§∫Âü∫Êú¨ÁöÑÊñáÊú¨‰ø°ÊÅØÔºö

- Âè™ËÉΩÂ≠òÊîæ‰∏Ä‰∏™ÂÄº
- ‰∏çÂèØÂèò immutable
- ÊåâÁÖß‰ªéÂ∑¶Âà∞Âè≥ÁöÑÈ°∫Â∫èÂÆö‰πâÂ≠óÁ¨¶ÈõÜÂêàÔºå‰∏ãÊ†á‰ªé 0 ÂºÄÂßãÈ°∫Â∫èËÆøÈóÆÔºåÊúâÂ∫è
- ÂèØ‰ª•ÁªôÂ≠óÁ¨¶‰∏≤ÂèòÈáèÈáçÊñ∞ËµãÂÄº
- ÂèñÊ∂àÂºïÂè∑ÂÜÖÊâÄÊúâËΩ¨‰πâÂ≠óÁ¨¶ÁâπÊÆäÊÑè‰πâÔºåÂú®ÂºïÂè∑ÂâçÈù¢Âä† rÔºåÂ¶Ç `specialÔºùr'\t\n\r'`
- Unicode Â≠óÁ¨¶‰∏≤‰∏é r ËøûÁî®ÂøÖÈúÄÂú® r ÂâçÈù¢ÔºåÂ¶Ç `nameÔºùur'l\thf'` 

```py
words = "A coding programmer"
coding = words[2:8]  # [start:end)

charcode = ord('A') # 65
char     = chr(65)  # 'A'
print(charcode, char)

print('\x23' * len("19 duplication of #"))

ct = "Content-Type: text/plain; charset=UTF-8"
print(ct.lower().index("utf"))    # 34
print(ct.lower().rindex("utf"))   # 34
print(ct.lower().find("utf"))     # 34
print(ct.lower().rfind("utf"))    # 34

print("string".capitalize())     # ÊääÁ¨¨‰∏Ä‰∏™Â≠óÊØçËΩ¨Âåñ‰∏∫Â§ßÂÜôÂ≠óÊØçÔºåÂÖ∂‰ΩôÂ∞èÂÜô
print("string".title())          # ÊääÊØè‰∏™ÂçïËØçÁöÑÁ¨¨‰∏Ä‰∏™Â≠óÊØçËΩ¨Âåñ‰∏∫Â§ßÂÜôÔºåÂÖ∂‰ΩôÂ∞èÂÜô 
print("string".upper())          # ÊääÊâÄÊúâÂ≠óÁ¨¶‰∏≠ÁöÑÂ∞èÂÜôÂ≠óÊØçËΩ¨Êç¢ÊàêÂ§ßÂÜôÂ≠óÊØç
print("string".lower())          # ÊääÊâÄÊúâÂ≠óÁ¨¶‰∏≠ÁöÑÂ§ßÂÜôÂ≠óÊØçËΩ¨Êç¢ÊàêÂ∞èÂÜôÂ≠óÊØç
print("string".rjust(24))        # Âè≥ÂØπÈΩêÔºåÂ°´ÂÖÖÁ©∫Ê†º
print("string".ljust(24))        # Â∑¶ÂØπÈΩêÔºåÂ°´ÂÖÖÁ©∫Ê†º
```


### ===üëâ ËΩ¨‰πâÂ≠óÁ¨¶

Âú®Python‰∏≠Êúâ‰∏Ä‰∫õÁâπÊÆäÂ≠óÁ¨¶ÔºåÁî®‚Äú\‚ÄùÊù•ËøõË°åËΩ¨‰πâÔºåÊâÄÁî®Âà∞ÁöÑËΩ¨‰πâÂ≠óÁ¨¶Â¶Ç‰∏ãÊâÄÁ§∫Ôºö

- \' ÂçïÂºïÂè∑
- \" ÂèåÂºïÂè∑
- \a ÂèëÂá∫Á≥ªÁªüÂìçÈìÉÂ£∞
- \b ÈÄÄÊ†ºÁ¨¶
- \n Êç¢Ë°åÁ¨¶
- \t Ê®™ÂêëÂà∂Ë°®Á¨¶
- \v Á∫µÂêëÂà∂Ë°®Á¨¶
- \r ÂõûËΩ¶Á¨¶
- \f Êç¢È°µÁ¨¶
- \o ÂÖ´ËøõÂà∂Êï∞‰ª£Ë°®ÁöÑÂ≠óÁ¨¶
- \x ÂçÅÂÖ≠ËøõÂà∂Êï∞‰ª£Ë°®ÁöÑÂ≠óÁ¨¶
- \000 ÁªàÊ≠¢Á¨¶Ôºå\000ÂêéÁöÑÂ≠óÁ¨¶‰∏≤ÂÖ®ÈÉ®ÂøΩÁï•


### ===üëâ ËÆøÈóÆÂ≠óÁ¨¶‰∏≤‰∏≠ÁöÑÂÄº

PythonÂú®ËÆøÈóÆÂ≠óÁ¨¶‰∏≤ÁöÑÊó∂ÂÄôÔºåÈááÁî®ÂàáÁâáÊìç‰ΩúÔºåÁî®ÊñπÊã¨Âè∑Êù•Êà™ÂèñÂ≠óÁ¨¶‰∏≤Ôºõ

‰æãÂ¶ÇÔºö

    >>>str1 = 'Hello World!'
    >>>print(str1[:3], str1[:1], str1[0], str1[1])#ËæìÂá∫ÔºöHel H H e
    >>>print(str1[7:], str1[2:8])#ËæìÂá∫Ôºöorld! llo Wo

‰∏ãÈù¢ËØ¶ÁªÜËØ¥Êòé‰∏Ä‰∏ã‚Äú:‚ÄùÂú®ÈáåÈù¢ÊâÄËµ∑ÁöÑ‰ΩúÁî®;

    Ê†ºÂºèÔºö [start:end:step]
    [:] ÊèêÂèñ‰ªéÂºÄÂ§¥ÔºàÈªòËÆ§‰ΩçÁΩÆ0ÔºâÂà∞ÁªìÂ∞æÔºàÈªòËÆ§‰ΩçÁΩÆ-1ÔºâÁöÑÊï¥‰∏™Â≠óÁ¨¶‰∏≤
    [start:] ‰ªéstart ÊèêÂèñÂà∞ÁªìÂ∞æ
    [:end] ‰ªéÂºÄÂ§¥ÊèêÂèñÂà∞end - 1
    [start:end] ‰ªéstart ÊèêÂèñÂà∞end - 1
    [start:end:step] ‰ªéstart ÊèêÂèñÂà∞end - 1ÔºåÊØèstep ‰∏™Â≠óÁ¨¶ÊèêÂèñ‰∏Ä‰∏™

Â∑¶‰æßÁ¨¨‰∏Ä‰∏™Â≠óÁ¨¶ÁöÑ‰ΩçÁΩÆ/ÂÅèÁßªÈáè‰∏∫0ÔºåÂè≥‰æßÊúÄÂêé‰∏Ä‰∏™Â≠óÁ¨¶ÁöÑ‰ΩçÁΩÆ/ÂÅèÁßªÈáè‰∏∫-1

### ===üëâ Â≠óÁ¨¶‰∏≤ÁöÑËøêÁÆó

Âú®Python‰∏≠ÔºåÂ≠óÁ¨¶‰∏≤‰πüÊòØËÉΩËøêÁÆóÁöÑÔºåÂ∞±ÂÉè‰∏äÈù¢Áî®Âà∞ÁöÑ‚Äú+‚ÄùÔºàÂèÇËßÅ‚ÄúÂ≠óÁ¨¶‰∏≤(String)(‰∏ä)‚ÄùÔºâÔºåÂ∞Ü‰∏§‰∏™Â≠óÁ¨¶‰∏≤ËøõË°å‰∫ÜÊãºÊé•ÔºåÂ≠óÁ¨¶‰∏≤ËøêÁÆóÁöÑÁ¨¶Âè∑Âàó‰∏æÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö

    +ÔºöÂ≠óÁ¨¶‰∏≤ËøûÊé•
    *Ôºö ÈáçÂ§çËæìÂá∫Â≠óÁ¨¶‰∏≤
    []ÔºöÈÄöËøáÁ¥¢ÂºïËé∑ÂèñÂ≠óÁ¨¶‰∏≤‰∏≠ÁöÑÂ≠óÁ¨¶
    [:]ÔºöÊà™ÂèñÂ≠óÁ¨¶‰∏≤‰∏≠ÁöÑ‰∏ÄÈÉ®ÂàÜ
    inÔºö ÊàêÂëòËøêÁÆóÁ¨¶ÔºåÂ¶ÇÊûúÂ≠óÁ¨¶‰∏≤‰∏≠ÂåÖÂê´ÁªôÂÆöÁöÑÂ≠óÁ¨¶ÔºåËøîÂõûtrue
    not inÔºöÊàêÂëòËøêÁÆóÁ¨¶ÔºåÂ¶ÇÊûúÂ≠óÁ¨¶‰∏≤‰∏≠‰∏çÂåÖÂê´ÁªôÂÆöÁöÑÂ≠óÁ¨¶ÔºåËøîÂõûtrue
    r/RÔºö ÂéüÂßãÂ≠óÁ¨¶‰∏≤ÔºöÊâÄÊúâÁöÑÂ≠óÁ¨¶‰∏≤ÈÉΩÊòØÁõ¥Êé•ÊåâÁÖßÂ≠óÈù¢ÁöÑÊÑèÊÄùÊù•‰ΩøÁî®ÔºåÊ≤°ÊúâËΩ¨‰πâÁâπÊÆäÊàñ‰∏çËÉΩÊâìÂç∞ÁöÑÂ≠óÁ¨¶ÂéüÂßãÂ≠óÁ¨¶‰∏≤Âú®Â≠óÁ¨¶‰∏≤ÁöÑÁ¨¨‰∏Ä‰∏™ÂºïÂè∑ÂâçÂä†‰∏äÂ≠óÊØç‚Äòr‚Äô‰ª•Â§ñÔºàÂèØ‰ª•Â§ßÂ∞èÂÜôÔºâÔºå‰∏éÊôÆÈÄöÂ≠óÁ¨¶‰∏≤ÊúâÁùÄÂá†‰πéÂÆåÂÖ®Áõ∏ÂêåÁöÑËØ≠Ê≥ï„ÄÇ

‰ª•‰æãÂ≠êÊù•ËØ¥ÊòéÔºö


    >>>a = "Hello"
    >>>b = "Python"
    #inÁöÑÁî®Ê≥ï

    >>>if( "H" in a) :
    >>> print("H Âú®Â≠óÁ¨¶‰∏≤a‰∏≠")
    >>>else :
    >>> print("H ‰∏çÂú®Â≠óÁ¨¶‰∏≤a‰∏≠")
    H Âú®Â≠óÁ¨¶‰∏≤a‰∏≠

    #not inÁöÑÁî®Ê≥ï

    >>>if( "H" not in b) :
    >>> print("H ‰∏çÂú®Â≠óÁ¨¶‰∏≤b‰∏≠")
    >>>else :
    >>> print("H Âú®Â≠óÁ¨¶‰∏≤b‰∏≠")
    H ‰∏çÂú®Â≠óÁ¨¶‰∏≤b‰∏≠

    #r/RÁöÑÁî®Ê≥ï
    print(r'\n') #ËæìÂá∫Ôºö\n
    print(R'\n') #ËæìÂá∫Ôºö\n



### ===üëâ Â≠óÊØçÂ§ÑÁêÜ

- upper()    # ÂÖ®ÈÉ®Â§ßÂÜô
- lower()    # ÂÖ®ÈÉ®Â∞èÂÜô
- swapcase()    # Â§ßÂ∞èÂÜô‰∫íÊç¢
- capitalize()    # È¶ñÂ≠óÊØçÂ§ßÂÜôÔºåÂÖ∂‰ΩôÂ∞èÂÜô
- title()    # È¶ñÂ≠óÊØçÂ§ßÂÜô

### ===üëâ Ê†ºÂºèÂåñÁõ∏ÂÖ≥
 
- ljust(width)     # Ëé∑ÂèñÂõ∫ÂÆöÈïøÂ∫¶ÔºåÂ∑¶ÂØπÈΩêÔºåÂè≥Ëæπ‰∏çÂ§üÁî®Á©∫Ê†ºË°•ÈΩê
- rjust(width)     # Ëé∑ÂèñÂõ∫ÂÆöÈïøÂ∫¶ÔºåÂè≥ÂØπÈΩêÔºåÂ∑¶Ëæπ‰∏çÂ§üÁî®Á©∫Ê†ºË°•ÈΩê
- center(width)    # Ëé∑ÂèñÂõ∫ÂÆöÈïøÂ∫¶Ôºå‰∏≠Èó¥ÂØπÈΩêÔºå‰∏§Ëæπ‰∏çÂ§üÁî®Á©∫Ê†ºË°•ÈΩê
- zfill(width)     # Ëé∑ÂèñÂõ∫ÂÆöÈïøÂ∫¶ÔºåÂè≥ÂØπÈΩêÔºåÂ∑¶Ëæπ‰∏çË∂≥Áî®0Ë°•ÈΩê


### ===üëâ  Â≠óÁ¨¶‰∏≤ÊêúÁ¥¢Áõ∏ÂÖ≥
 
- find()     # ÊêúÁ¥¢ÊåáÂÆöÂ≠óÁ¨¶‰∏≤ÔºåÊ≤°ÊúâËøîÂõû-1
- index()    # Âêå‰∏äÔºå‰ΩÜÊòØÊâæ‰∏çÂà∞‰ºöÊä•Èîô
- rfind()    # ‰ªéÂè≥ËæπÂºÄÂßãÊü•Êâæ
- count()    # ÁªüËÆ°ÊåáÂÆöÁöÑÂ≠óÁ¨¶‰∏≤Âá∫Áé∞ÁöÑÊ¨°Êï∞
 
        # ‰∏äÈù¢ÊâÄÊúâÊñπÊ≥ïÈÉΩÂèØ‰ª•Áî®index‰ª£ÊõøÔºå‰∏çÂêåÁöÑÊòØ‰ΩøÁî®indexÊü•Êâæ‰∏çÂà∞‰ºöÊäõÂºÇÂ∏∏ÔºåËÄåfindËøîÂõû-1
        s='hello world'
        print(s.find('e'))  # ÊêúÁ¥¢ÊåáÂÆöÂ≠óÁ¨¶‰∏≤,Ê≤°ÊúâËøîÂõû-1
        print(s.find('w',1,2))  # È°æÂ§¥‰∏çÈ°æÂ∞æÔºåÊâæ‰∏çÂà∞ÂàôËøîÂõû-1‰∏ç‰ºöÊä•ÈîôÔºåÊâæÂà∞‰∫ÜÂàôÊòæÁ§∫Á¥¢Âºï
        print(s.index('w',1,2)) # Âêå‰∏äÔºå‰ΩÜÊòØÊâæ‰∏çÂà∞‰ºöÊä•Èîô
        print(s.count('o')) # ÁªüËÆ°ÊåáÂÆöÁöÑÂ≠óÁ¨¶‰∏≤Âá∫Áé∞ÁöÑÊ¨°Êï∞
        print(s.rfind('l')) # ‰ªéÂè≥ËæπÂºÄÂßãÊü•Êâæ
 

### ===üëâ Â≠óÁ¨¶‰∏≤ÊõøÊç¢

- replace('old','new')    # ÊõøÊç¢old‰∏∫new
- replace('old','new',Ê¨°Êï∞)    # ÊõøÊç¢ÊåáÂÆöÊ¨°Êï∞ÁöÑold‰∏∫new

        s='hello world'
        print(s.replace('world','python'))
        print(s.replace('l','p',2))
        print(s.replace('l','p',5))

        hello python
        heppo world
        heppo worpd


### ===üëâ trim Â≠óÁ¨¶‰∏≤ÂéªÁ©∫Ê†ºÂèäÂéªÊåáÂÆöÂ≠óÁ¨¶

- strip()    # Âéª‰∏§ËæπÁ©∫Ê†º
- lstrip()   # ÂéªÂ∑¶ËæπÁ©∫Ê†º
- rstrip()   # ÂéªÂè≥ËæπÁ©∫Ê†º
- split()    # ÈªòËÆ§ÊåâÁ©∫Ê†ºÂàÜÈöî
- split('ÊåáÂÆöÂ≠óÁ¨¶')    # ÊåâÊåáÂÆöÂ≠óÁ¨¶ÂàÜÂâ≤Â≠óÁ¨¶‰∏≤‰∏∫Êï∞ÁªÑ

        s='   h e-l lo   '
        print(s)
        print(s.strip())
        print(s.lstrip())
        print(s.rstrip())
        print(s.split('-'))
        print(s.split())
 

### ===üëâ Â≠óÁ¨¶‰∏≤Âà§Êñ≠Áõ∏ÂÖ≥

- startswith('start')    # ÊòØÂê¶‰ª•startÂºÄÂ§¥
- endswith('end')    # ÊòØÂê¶‰ª•endÁªìÂ∞æ
- isalnum()    # ÊòØÂê¶ÂÖ®‰∏∫Â≠óÊØçÊàñÊï∞Â≠ó
- isalpha()    # ÊòØÂê¶ÂÖ®Â≠óÊØç
- isdigit()    # ÊòØÂê¶ÂÖ®Êï∞Â≠ó
- islower()    # ÊòØÂê¶ÂÖ®Â∞èÂÜô
- isupper()    # ÊòØÂê¶ÂÖ®Â§ßÂÜô
- istitle()    # Âà§Êñ≠È¶ñÂ≠óÊØçÊòØÂê¶‰∏∫Â§ßÂÜô
- isspace()    # Âà§Êñ≠Â≠óÁ¨¶ÊòØÂê¶‰∏∫Á©∫Ê†º

### ===üëâ Âà∂Êï∞ËΩ¨Êç¢ Ê†ºÂºèÂåñÁ≠â

- bin()    # ÂçÅËøõÂà∂Êï∞ËΩ¨ÂÖ´ËøõÂà∂
- hex()    # ÂçÅËøõÂà∂Êï∞ËΩ¨ÂçÅÂÖ≠ËøõÂà∂
- format() # Ê†ºÂºèÂåñÂ≠óÁ¨¶‰∏≤ÔºåÁ±ª‰ºº%sÔºå‰º†ÈÄíÂÄºËÉΩÂ§ö‰∏çËÉΩÂ∞ë
- range()  # ÂáΩÊï∞ÔºöÂèØ‰ª•ÁîüÊàê‰∏Ä‰∏™Êï¥Êï∞Â∫èÂàó
- type()   # Êü•ÁúãÊï∞ÊçÆÁ±ªÂûã
- len()    # ËÆ°ÁÆóÂ≠óÁ¨¶‰∏≤ÈïøÂ∫¶
- "/".join(("a","b","c")) # ÊãºÊé•Â≠óÁ¨¶‰∏≤ a/b/c
- "/".join("abc") # Á≠âÊïàÊãºÊé•Â≠óÁ¨¶‰∏≤ a/b/c

### ===üëâ isdigit„ÄÅisdecimal„ÄÅisnumeric ÁöÑÂå∫Âà´

- isdigit()
    True: UnicodeÊï∞Â≠óÔºåbyteÊï∞Â≠óÔºàÂçïÂ≠óËäÇÔºâÔºåÂÖ®ËßíÊï∞Â≠óÔºàÂèåÂ≠óËäÇÔºâÔºåÁΩóÈ©¨Êï∞Â≠ó
    False: Ê±âÂ≠óÊï∞Â≠ó
    Error: Êó†
     
- isdecimal()
    True: UnicodeÊï∞Â≠óÔºåÔºåÂÖ®ËßíÊï∞Â≠óÔºàÂèåÂ≠óËäÇÔºâ
    False: ÁΩóÈ©¨Êï∞Â≠óÔºåÊ±âÂ≠óÊï∞Â≠ó
    Error: byteÊï∞Â≠óÔºàÂçïÂ≠óËäÇÔºâ
     
- isnumeric()
    True: UnicodeÊï∞Â≠óÔºåÂÖ®ËßíÊï∞Â≠óÔºàÂèåÂ≠óËäÇÔºâÔºåÁΩóÈ©¨Êï∞Â≠óÔºåÊ±âÂ≠óÊï∞Â≠ó
    False: Êó†
    Error: byteÊï∞Â≠óÔºàÂçïÂ≠óËäÇÔºâ



### ===üëâ string format

    name = 'John'
    price = 9999
    s = 'this name is %s %i' % (name, price)
    print(s)

    print('this name is %s'%(name))
    print('this price is %f'%(price))
    print('and price is %.2f'%(price))
    print('this name is {name} and price is {price}'.format(name=name, price=price))
    print("a is %(a) b is %(b)"%{"a": "Land", "b": 101})
    
    print("".join(tuple));

Êï¥Êï∞ÁöÑËæìÂá∫

    %o ‚Äî‚Äî oct ÂÖ´ËøõÂà∂
    %d ‚Äî‚Äî dec ÂçÅËøõÂà∂
    %x ‚Äî‚Äî hex ÂçÅÂÖ≠ËøõÂà∂

ÊµÆÁÇπËæìÂá∫

    3.1415926   {:.2f}  3.14    ‰øùÁïôÂ∞èÊï∞ÁÇπÂêé‰∏§‰Ωç
    3.1415926   {:+.2f} +3.14   Â∏¶Á¨¶Âè∑‰øùÁïôÂ∞èÊï∞ÁÇπÂêé‰∏§‰Ωç
    -1          {:+.2f} -1.00   Â∏¶Á¨¶Âè∑‰øùÁïôÂ∞èÊï∞ÁÇπÂêé‰∏§‰Ωç
    2.71828     {:.0f}  3       ‰∏çÂ∏¶Â∞èÊï∞
    5           {:0>2d} 05      Êï∞Â≠óË°•Èõ∂ (Â°´ÂÖÖÂ∑¶Ëæπ, ÂÆΩÂ∫¶‰∏∫2)
    5           {:x<4d} 5xxx    Êï∞Â≠óË°•x (Â°´ÂÖÖÂè≥Ëæπ, ÂÆΩÂ∫¶‰∏∫4)
    10          {:x<4d} 10xx    Êï∞Â≠óË°•x (Â°´ÂÖÖÂè≥Ëæπ, ÂÆΩÂ∫¶‰∏∫4)
    1000000     {:,}    1,000,000   ‰ª•ÈÄóÂè∑ÂàÜÈöîÁöÑÊï∞Â≠óÊ†ºÂºè
    0.25        {:.2%}  25.00%  ÁôæÂàÜÊØîÊ†ºÂºè
    1000000000  {:.2e}  1.00e+09    ÊåáÊï∞ËÆ∞Ê≥ï
    13          {:>10d}         13  Âè≥ÂØπÈΩê (ÈªòËÆ§, ÂÆΩÂ∫¶‰∏∫10)
    13          {:<10d} 13  Â∑¶ÂØπÈΩê (ÂÆΩÂ∫¶‰∏∫10)
    13          {:^10d}     13  ‰∏≠Èó¥ÂØπÈΩê (ÂÆΩÂ∫¶‰∏∫10)

    '{:b}'.format(11)     1011
    '{:d}'.format(11)     11
    '{:o}'.format(11)     13
    '{:x}'.format(11)     b
    '{:#x}'.format(11)    0xb
    '{:#X}'.format(11)    0XB

Â≠óÁ¨¶‰∏≤ËæìÂá∫

    %s
    %10s‚Äî‚ÄîÂè≥ÂØπÈΩêÔºåÂç†‰ΩçÁ¨¶10‰Ωç
    %-10s‚Äî‚ÄîÂ∑¶ÂØπÈΩêÔºåÂç†‰ΩçÁ¨¶10‰Ωç
    %.2s‚Äî‚ÄîÊà™Âèñ2‰ΩçÂ≠óÁ¨¶‰∏≤
    %10.2s‚Äî‚Äî10‰ΩçÂç†‰ΩçÁ¨¶ÔºåÊà™Âèñ‰∏§‰ΩçÂ≠óÁ¨¶‰∏≤



## ==‚ö° skills in Python

```py
# enumerate with index
list = ["iterable", "with", "index"]
for i, item in enumerate(list):
    print (i, item)

# dict comperhension
dict = [{ "index": i, "value": v} for i,v in enumerate(list)]
print(dict)

# Lazy eveluation: output 9
tenlams = [lambda :x for x in range(10)]
print( tenlams[2]() )

# share list/dict/set in argument
def share_list(share = []):
    print(share)
share_list("apple")
share_list("pie")

# eval code string
print(eval("[1,2,3]"))

# import os
# print(os.listdir())

# multiple context manager
with open("changelog.txt", encoding="utf-8") as source, \
    open('target.txt', 'w', encoding="utf-8") as target:
    target.write(source.read())
```






## ==‚ö° Python FAQs

    +-- Doc\faq
    |   ‚Ä¢ -- index.rst               => Python Frequently Asked Questions
    |   ‚Ä¢ -- design.rst                 => Design and History FAQ
    |   ‚Ä¢ -- extending.rst              => Extending/Embedding FAQ
    |   ‚Ä¢ -- general.rst                => General Python FAQ
    |   ‚Ä¢ -- gui.rst                    => Graphic User Interface FAQ
    |   ‚Ä¢ -- installed.rst              => "Why is Python Installed on my Computer?" FAQ
    |   ‚Ä¢ -- library.rst                => Library and Extension FAQ
    |   ‚Ä¢ -- programming.rst            => Programming FAQ
    |   ‚Ä¢ -- windows.rst                => Python on Windows FAQ


### ===üóù Monkey Patch

Monkey Patch ÂÖÅËÆ∏Âú®ËøêË°åÊúüÈó¥Âä®ÊÄÅ‰øÆÊîπ‰∏Ä‰∏™Á±ªÊàñÊ®°ÂùóÔºåÂõ†‰∏∫ Python ‰∏≠‰∏ÄÂàáÁöÜÂØπË±°ÔºåÂä®ÊÄÅÂàõÂª∫Âèä‰øÆÊîπÔºåÂåÖÊã¨Á±ª„ÄÅÊñπÊ≥ï„ÄÅÁîöËá≥ÊòØÊ®°Âùó„ÄÇ

Monkey Patch Ëøô‰∏™ËØçÂéüÊù•‰∏∫ Guerrilla PatchÔºåÊùÇÁâåÂÜõ„ÄÅÊ∏∏ÂáªÈòüÔºåËØ¥ÊòéËøôÈÉ®ÂàÜ‰∏çÊòØÂéüË£ÖÁöÑÔºåÂú®Ëã±ÊñáÈáå guerilla ÂèëÈü≥Âíå gorllia (Áå©Áå©)Áõ∏‰ººÔºåÂÜçÂêéÊù•Â∞±ÂÜô‰∫Ü monkey„ÄÇ

ËøôÈáåÊúâ‰∏Ä‰∏™ÊØîËæÉÂÆûÁî®ÁöÑ‰æãÂ≠êÔºåjson Ê®°Âùó‰ΩøÁî®‰∏∫‰æãÔºåÂêéÊù•ÂèëÁé∞ ujson ÊÄßËÉΩÊõ¥È´òÔºåÂ¶ÇÊûúËßâÂæóÊääÊØè‰∏™Êñá‰ª∂ÁöÑ import json ÊîπÊàê import ujson as json Â∞±ÂæàÈ∫ªÁÉ¶ÔºåÊàñËÄÖËØ¥ÊÉ≥ÊµãËØï‰∏Ä‰∏ãÁî® ujson ÊõøÊç¢ json ÊòØÂê¶Á¨¶ÂêàÈ¢ÑÊúüÔºåÂè™ÈúÄË¶ÅÂú®ÂÖ•Âè£Âä†‰∏äÂä®ÊÄÅ‰øÆÊîπÊé•Âè£ÁöÑ‰ª£Á†ÅÔºö

```py
import json  
import ujson  

def monkey_patch_json():  
    json.__name__ = 'ujson'  
    json.dumps = ujson.dumps  
    json.loads = ujson.loads  

monkey_patch_json()
```
ÂçïÂÖÉÊµãËØï unittest.mock Â∞±ÊòØ‰∏Ä‰∏™ÂÖ∏ÂûãÂ∫îÁî®Âú∫ÊôØÔºåÈÄöËøá‰øÆÊîπËøêË°åÊó∂ÔºåÂÆûÁé∞ÊµãËØïÈ¢ÑÂ§áÊù°‰ª∂„ÄÇ

Monkey Patch Â∏¶‰∫Ü‰æøÂà©ÁöÑÂêåÊó∂‰πüÊúâÊêû‰π±Ê∫ê‰ª£Á†Å‰ºòÈõÖÁöÑÈ£éÈô©ÔºåÊâÄ‰ª•Ëøô‰∏™ÂêçÂ≠óÊòØÁ¨¶ÂêàÁâπÁÇπÁöÑ„ÄÇ


### ===üóù UnboundLocalError

UnboundLocalError ÂæàÂ∏∏ËßÅÔºåÊ†πÊ∫êÊòØÂØπÂèòÈáèËµãÂÄº‰ºöÁ°ÆÂÆöÂÖ∂‰∏∫Êú¨Âú∞ÂèòÈáèÔºåÈô§Èùû‰ΩøÁî® global Êàñ nonlocal Â£∞ÊòéÔºåËÄåËØªÂèñÂèòÈáèÊ≤°ÊúâËøôÊ†∑ÁöÑÈóÆÈ¢ò„ÄÇ

https://eli.thegreenplace.net/2011/05/15/understanding-unboundlocalerror-in-python
https://docs.python.org/3/faq/programming.html#why-am-i-getting-an-unboundlocalerror-when-the-variable-has-a-value

```py
lst = [1, 2, 3]
x = 123

def foo():
    lst.append(5)   # OK
    print(lst)      # Ok read global variable

    # UnboundLocalError: local variable referenced before assignment
    # lst += [5]     # UnboundLocalError
    # x += 321       # UnboundLocalError

    # But two line above turn error when define lst as a local variabl
    # lst = 321       # Ok write local variable

foo()
print (lst)
```

So where does the exception come from? Quoting the FAQ:

This is because when you make an assignment to a variable in a scope, that variable becomes local to that scope and shadows any similarly named variable in the outer scope.

So what do we do about this? The solution is very simple - Python has the global statement just for this purpose.



## ==‚ö° prefix or postfix list item

in Python2 return list from map function
in Python3 return map from map function

```py
from pprint import pprint

def listfix(items):
    m = map(lambda x: 'prefix_'+x+'_postfix', items)
    return list(m)

a = ['abc','def','xyz']
print("["+"],[".join(a)+"]")

pprint( listfix(['abc','def','xyz']) )
```


## ==‚ö° if-else ternary ‰∏âÁõÆËøêÁÆó

    s = 100;
    # t = "000" if s<10 else "00"
    t = ("000" if s<10 else "00" if s<100 else "0")+str(s)+".ts"
    # t = (s<10 and ["000"] or ["00"])[0]+".ts"
    print(t)

Python Êõ¥Â§öÁöÑÊòØÁî®Áü≠Ë∑ØÊú∫Âà∂Ôºå

‰∏çÂêå‰∫éÁâ©ÁêÜÂ≠¶‰∏≠ÁöÑ„ÄåÁü≠Ë∑Ø„Äç(Short circuit)ÈÇ£Ëà¨Âç±Èô©ÔºåÁºñÁ®ãËØ≠Ë®ÄÁöÑÁü≠Ë∑ØÊú∫Âà∂ÈùûÂ∏∏ÊúâÁî®ÔºöÊù°‰ª∂Âà§Êñ≠Ë°®ËææÂºèÂú®‰ªéÂ∑¶Âà∞Âè≥ÊåâÈ°∫Â∫èÊâßË°åÁöÑËøáÁ®ã‰∏≠ÔºåÊèêÂâçÁ°ÆÂÆö‰∫ÜË°®ËææÂºèÁöÑ True/False ÁªìÊûúÔºå‰ªéËÄåÁªàÊ≠¢Âè≥ËæπÂâ©‰ΩôÁöÑËøêÁÆó„ÄÇ

    a = None
    b = "abc"
    print(a or b) # "abc"


## ==‚ö° tuple in Python
- [Built-in Types](libarary/stdtypes.rst)
- [New, Improved, and Deprecated Modules](whatsnew/3.1.rst)
- [collections.namedtuple](library/collections.rst)

```py
lists = ["a","b","c"]
a = (lists, "A")
b = [lists, 'B']
if isinstance(a, tuple):
    first,last = a
    print(dict(first=first, last=last))
    # {'first': ['a', 'b', 'c'], 'last': 'b'}
if isinstance(b, list):
    first,last = b
    print(dict(first=first, last=last))
    # {'first': ['a', 'b', 'c'], 'last': 'B'}
```

Á©∫ÂÄºÂà§Êñ≠Ôºö

```py
a,*b = [1,]
print(dict(a=a, b=b))
if b:
    print("b %s" % b)

a,*b = [1,]
print(dict(a=a, b=b))
if b:
    print("b %s" % b)

# {'a': 1, 'b': []}
# {'a': 1, 'b': []}


a,*b = [1,None]
print(dict(a=a, b=b))
if b:
    print("b %s" % b)

a,*b = [1,None]
print(dict(a=a, b=b))
if b:
    print("b %s" % b)

# {'a': 1, 'b': [None]}
# b [None]
# {'a': 1, 'b': [None]}
# b [None]
```

ÂëΩÂêçÂÖÉÁªÑ named tuple ÊòØ Python 3.1 Êñ∞ÂºïÂÖ•ÂäüËÉΩÔºåÂÖÉÁªÑÂèØ‰ª•ÂÉèÂ≠óÂÖ∏‰∏ÄÊ†∑‰ΩøÁî®Â≠óÊÆµÂêçÁß∞Ôºåsys.version_info Â∞±ÊòØ‰∏Ä‰∏™ÂëΩÂêçÂÖÉÁªÑÔºå

```py
import sys
from collections import namedtuple
Point = namedtuple('Point', 'x y')
pt1 = Point(1.0, 5.0)
pt2 = Point(2.5, 1.5)

from math import sqrt
line_length = sqrt((pt1.x-pt2.x)**2 + (pt1.y-pt2.y)**2)
print(line_length, sys.version_info)
```

tuple Âõ†‰∏∫‰ΩøÁî®ÁöÑÊòØÂúÜÊã¨Âè∑ÔºåÂíåÂáΩÊï∞Ë∞ÉÁî®„ÄÅÊù°‰ª∂Ë°®ËææÂºèÁ≠â‰ºöÊúâÊ∑∑Ê∑ÜÔºåÊâÄ‰ª•‰ΩøÁî®ÂêéÁºÄÈÄóÂè∑Ôºö

>>> n=(None)
print(type(n))
<class 'NoneType'>
>>> n=(None,)
print(type(n))
<class 'tuple'>

>>> n=[None]
print(type(n))
<class 'list'>


‰∏éÂ≠óÁ¨¶‰∏≤‰∏ÄÊ†∑ÔºåÂÖÉÁªÑ‰πãÈó¥ÂèØ‰ª•‰ΩøÁî® + Âè∑Âíå * Âè∑ËøõË°åËøêÁÆó„ÄÇËøôÂ∞±ÊÑèÂë≥ÁùÄ‰ªñ‰ª¨ÂèØ‰ª•ÁªÑÂêàÂíåÂ§çÂà∂ÔºåËøêÁÆóÂêé‰ºöÁîüÊàê‰∏Ä‰∏™Êñ∞ÁöÑÂÖÉÁªÑ„ÄÇ

```py
tuple = ("tuple", 10, 3.1415926535897932, "jimbowhy");
smart = ("that", "is", "ok", "for", "plus");
print(tuple);
print(tuple[1]);
print(tuple[1:3]);
print(tuple * 2);
print(tuple + smart);
print("tuple to string".join(tuple);

len((1, 2, 3))        # 3 ËÆ°ÁÆó tuple ÂÖÉÁ¥†‰∏™Êï∞
(1, 2, 3) + (4, 5, 6) # (1, 2, 3, 4, 5, 6) ËøûÊé• tuple
('Hi!',) * 4          # ('Hi!', 'Hi!', 'Hi!', 'Hi!') Â§çÂà∂ tuple ÂÖÉÁ¥†
3 in (1, 2, 3)        # True Ê£ÄÊü•ÂÖÉÁ¥†ÊòØÂê¶Âú® tuple ÂÜÖ
for x in (1, 2, 3): print x, # 1 2 3 Ëø≠‰ª£

L = ('spam', 'Spam', 'SPAM!')
# Python Ë°®ËææÂºè    ÁªìÊûú  ÊèèËø∞
L[2]    # 'SPAM!'   ËØªÂèñÁ¨¨‰∏â‰∏™ÂÖÉÁ¥†
L[-2]   # 'Spam'    ÂèçÂêëËØªÂèñÔºåËØªÂèñÂÄíÊï∞Á¨¨‰∫å‰∏™ÂÖÉÁ¥†
L[1:]   # ('Spam', 'SPAM!') Êà™ÂèñÂÖÉÁ¥†
```

ÂÖÉÁªÑÂåÖÂê´‰∫Ü‰ª•‰∏ãÂÜÖÁΩÆÂáΩÊï∞

- cmp(tuple1, tuple2)  ÊØîËæÉ‰∏§‰∏™ÂÖÉÁªÑÂÖÉÁ¥†„ÄÇ
- len(tuple)           ËÆ°ÁÆóÂÖÉÁªÑÂÖÉÁ¥†‰∏™Êï∞„ÄÇ
- max(tuple)           ËøîÂõûÂÖÉÁªÑ‰∏≠ÂÖÉÁ¥†ÊúÄÂ§ßÂÄº„ÄÇ
- min(tuple)           ËøîÂõûÂÖÉÁªÑ‰∏≠ÂÖÉÁ¥†ÊúÄÂ∞èÂÄº„ÄÇ
- tuple(seq)           Â∞ÜÂàóË°®ËΩ¨Êç¢‰∏∫ÂÖÉÁªÑ„ÄÇ

## ==‚ö° list in Python
- [Built-in Types](libarary/stdtypes.rst)

```py
list = ["this","is","a","list",1,2,3];
list[0] = "number";
print(list);
print(list[2:4]);
print(list[-1:]);
print(list * 3);
print(list + list);

list.append(4)
del list1[2]

len([1, 2, 3])        # 3
[1, 2, 3] + [4, 5, 6] # [1, 2, 3, 4, 5, 6]  ÁªÑÂêà
['Hi!'] * 4           # ['Hi!', 'Hi!', 'Hi!', 'Hi!']    ÈáçÂ§ç
3 in [1, 2, 3]        # True    ÂÖÉÁ¥†ÊòØÂê¶Â≠òÂú®‰∫éÂàóË°®‰∏≠
for x in [1, 2, 3]: print x,  ## 1 2 3  Ëø≠‰ª£
```

list ÂåÖÂê´‰ª•‰∏ãÂáΩÊï∞:

- cmp(list1, list2)         ÊØîËæÉ‰∏§‰∏™ÂàóË°®ÁöÑÂÖÉÁ¥†
- len(list)                 ÂàóË°®ÂÖÉÁ¥†‰∏™Êï∞
- max(list)                 ËøîÂõûÂàóË°®ÂÖÉÁ¥†ÊúÄÂ§ßÂÄº
- min(list)                 ËøîÂõûÂàóË°®ÂÖÉÁ¥†ÊúÄÂ∞èÂÄº
- list(seq)                 Â∞ÜÂÖÉÁªÑËΩ¨Êç¢‰∏∫ÂàóË°®

PythonÂåÖÂê´‰ª•‰∏ãÊñπÊ≥ï:

- list.append(obj)         Âú®ÂàóË°®Êú´Â∞æÊ∑ªÂä†Êñ∞ÁöÑÂØπË±°
- list.count(obj)          ÁªüËÆ°Êüê‰∏™ÂÖÉÁ¥†Âú®ÂàóË°®‰∏≠Âá∫Áé∞ÁöÑÊ¨°Êï∞
- list.extend(seq)         Âú®ÂàóË°®Êú´Â∞æ‰∏ÄÊ¨°ÊÄßËøΩÂä†Âè¶‰∏Ä‰∏™Â∫èÂàó‰∏≠ÁöÑÂ§ö‰∏™ÂÄºÔºàÁî®Êñ∞ÂàóË°®Êâ©Â±ïÂéüÊù•ÁöÑÂàóË°®Ôºâ
- list.index(obj)          ‰ªéÂàóË°®‰∏≠ÊâæÂá∫Êüê‰∏™ÂÄºÁ¨¨‰∏Ä‰∏™ÂåπÈÖçÈ°πÁöÑÁ¥¢Âºï‰ΩçÁΩÆ
- list.insert(index, obj)  Â∞ÜÂØπË±°ÊèíÂÖ•ÂàóË°®
- list.pop([index=-1])     ÁßªÈô§ÂàóË°®‰∏≠ÁöÑ‰∏Ä‰∏™ÂÖÉÁ¥†ÔºàÈªòËÆ§ÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥†ÔºâÔºåÂπ∂‰∏îËøîÂõûËØ•ÂÖÉÁ¥†ÁöÑÂÄº
- list.remove(obj)         ÁßªÈô§ÂàóË°®‰∏≠Êüê‰∏™ÂÄºÁöÑÁ¨¨‰∏Ä‰∏™ÂåπÈÖçÈ°π
- list.reverse()           ÂèçÂêëÂàóË°®‰∏≠ÂÖÉÁ¥†
- list.sort(cmp=None, key=None, reverse=False)                                ÂØπÂéüÂàóË°®ËøõË°åÊéíÂ∫è

>>> squares = []
>>> for x in range(10):
...     squares.append(x**2)
...
>>> squares
[0, 1, 4, 9, 16, 25, 36, 49, 64, 81]

Tuples lists sets dicts ËøôÂõõÁßçÊï∞ÊçÆÁ±ªÂûãÂ§™Â∏∏Áî®‰∫ÜÔºåÁâπÂà´ÊòØ tuples Âíå lists ‰∏§ËÄÖÂ§™Áõ∏‰ºº‰∫ÜÔºå‰ΩøÁî®ÁöÑÊØîËæÉÊñπÊ≥ï‰πüÊòØÔºå‰ΩÜÊòØËøôÂá†ÁßçÁ±ªÂûã‰∏≠Âè™Êúâ list ÊâçÊòØÂèØ‰ª•ÊéíÂ∫èÁöÑÔºö

```py
a=(1)   # <class 'int'>
b=(1,)  # <class 'tuple'>
print(type(a))
print(type(b))

a_tuple =  (1,(2 ),3) # a_tuple[1]: <class 'int'>
a_tuple =  (1,(2,),3) # a_tuple[1]: <class 'tuple'>

# dic = {'a':1,'b':2} >= {'a':1,'b':2}
# '>=' not supported between instances of 'dict' and 'dict'
sliceA = [1,2,3,4]
sliceB = [1,2,3,4]
sliceC = [1,2,3,3]
print(f'''
      sliceA is  sliceB ? {sliceA is sliceB} # False
    {sliceA} == {sliceB}? {sliceA == sliceB} # True
    {sliceA} == {sliceB}? {sliceA == sliceB} # True
    {sliceA} >= {sliceB}? {sliceA >= sliceB} # True
    {sliceC} >= {sliceB}? {sliceC >= sliceB} # False
    ''')
```
### ===üóù list ÂéªÁ©∫Â≠óÁ¨¶‰∏≤

    # ‰ΩøÁî® filter() ËøáÊª§ list ‰∏≠ÁöÑÁ©∫Â≠óÁ¨¶Âíå None
    list1 = ['1', '2', '3', '', '  ', None]
    a = list(filter(None, list1))
    print(a)  # ['1', '2', '3']
     
    # Áªô filter() ‰º†ÂÖ•ÂáΩÊï∞Ëá™ÂÆö‰πâËøáÊª§Âô®Ôºå‰æùÊ¨°‰ΩúÁî®‰∫éÊØè‰∏™ÂÖÉÁ¥†ÔºåËøîÂõûÁúüÂÄºË°®Á§∫‰øùÁïôËØ•ÂÖÉÁ¥†
    list2 = ['1', '2', '3', ' ', '    ', None]
    print(list(filter(lambda x: x and x.strip(), list2)))  # ['1', '2', '3', '422', '54']

    # Ê≥®ÊÑè: Pyhton2.7 ËøîÂõûÂàóË°®ÔºåPython3.x ËøîÂõûËø≠‰ª£Âô®ÂØπË±°


### ===üóù list ÂéªÈáçÁöÑÂ§öÁßçÊñπÊ≥ï
- [itertools groupby](library/itertools.rst#itertools.groupby)
- [functions reduce](library/functions.rst#reduce)

‰ª•‰∏ãÁöÑÂá†ÁßçÊÉÖÂÜµÈô§‰∫Ü for-inÔºåÂÖ∂ÂÆÉ‰∏§ÁßçÂéªÈáç‰πãÂêéÈ°∫Â∫è‰ºöÊîπÂèò:

    # for-in
    ids = [1,2,3,3,4,2,3,4,5,6,1]
    news_ids = []
    for id in ids:
        if id not in news_ids:
            news_ids.append(id)
    print(news_ids)

    # set
    ids = [1,4,3,3,4,2,3,4,5,6,1]
    ids = list(set(ids))

    # itertools.grouby
    import itertools
    ids = [1,4,3,3,4,2,3,4,5,6,1]
    ids.sort()
    it = itertools.groupby(ids)
    for k, g in it:
        print k

ÊÄé‰πàËÉΩ‰∏çÊîπÂèòÂéüÊù•ÁöÑÈ°∫Â∫èÂë¢ÔºüË¶ÅÁî®Âà∞ reduce 

    In [5]: ids = [1,4,3,3,4,2,3,4,5,6,1]
    In [6]: func = lambda x,y:x if y in x else x + [y]
    In [7]: reduce(func, [[], ] + ids)
    Out[7]: [1, 4, 3, 2, 5, 6]

ÂÖ∂‰∏≠ÁöÑ lambda x,y:x if y in x else x + [y] Á≠â‰ª∑‰∫é lambda x,y: y in x and x or x+[y] „ÄÇ
ÊÄùË∑ØÂÖ∂ÂÆûÂ∞±ÊòØÂÖàÊääidsÂèò‰∏∫[[], 1,4,3,......] ,ÁÑ∂ÂêéÂú®Âà©Áî®reduceÁöÑÁâπÊÄß.

ÂéªÂàóË°®ÂéªÈáçÔºå‰∏çÊîπÂèòÂéüÊù•ÁöÑÈ°∫Â∫èÔºåËøòÂèØ‰ª•‰ΩøÁî®‰∏Ä‰∏™Á©∫ÂàóË°®ÊääÂéüÂàóË°®ÈáåÈù¢‰∏çÈáçÂ§çÁöÑÊï∞ÊçÆ"Ë£ÖËµ∑Êù•"Ôºå‰æãÂ¶ÇÔºö

    list2 = []
    list1 = [1,2,3,2,2,2,4,6,5]
    for i in list1:
        if i not in list2:
            list2.append(i)
    list2
    [1, 2, 3, 4, 6, 5]

ÊàñËÄÖ‰ΩøÁî®Âà†Èô§ÂÖÉÁ¥†Á¥¢ÂºïÁöÑÊñπÊ≥ïÂØπÂàóË°®ÂéªÈáçÔºåÂπ∂‰∏î‰∏çÊîπÂèòÂéüÂàóË°®ÁöÑÈ°∫Â∫è

    # python forÂà†Èô§ÁöÑÊó∂ÂÄô‰ºöÂæÄÂâçÁßª(ÂûÉÂúæÂõûÊî∂Êú∫Âà∂)ÔºåÊú™ÈÅçÂéÜÂà∞ÁöÑÂêé‰∏Ä‰∏™Âç†‰∫ÜÂâç‰∏Ä‰∏™Ë¢´Âà†Èô§ÁöÑ"‰ΩçÁΩÆ"ÔºåÂØºËá¥Ëøô‰∏™Êï∞‰∏ç‰ºöË¢´ÈÅçÂéÜÂà∞ÔºåËÄå‰ΩøÊúÄÂêéÁöÑÁªìÊûúÈîôËØØ
    # Â±ÄÈÉ®ÂèòÈáèÂú®Ê†àÂÜÖÂ≠ò‰∏≠Â≠òÂú®,ÂΩìforÂæ™ÁéØËØ≠Âè•ÁªìÊùü,ÈÇ£‰πàÂèòÈáè‰ºöÂèäÊó∂Ë¢´gc(ÂûÉÂúæÂõûÊî∂Âô®)ÂèäÊó∂ÁöÑÈáäÊîæÊéâ,‰∏çÊµ™Ë¥πÁ©∫Èó¥Ôºõ
    # Â¶ÇÊûú‰ΩøÁî®Âæ™ÁéØ‰πãÂêéËøòÊÉ≥ÂéªËÆøÈóÆÂæ™ÁéØËØ≠Âè•‰∏≠ÊéßÂà∂ÈÇ£‰∏™ÂèòÈáè,‰ΩøÁî®whileÂæ™ÁéØ„ÄÇ
    # ÊâÄ‰ª•‰ΩøÁî®whileÂæ™ÁéØÂà†Èô§nums‰∏≠ÁöÑVal(ÁöÑ‰∏ãÊ†á)
    nums = [1,2,3,3,4,2,3,4,5,6,1]
    val = 3
    while val in nums:
          nums.pop(nums.index(val))
    print nums
    return len(nums)



## ==‚ö° dictionary in Python
- [Built-in Types](libarary/stdtypes.rst)

```py
dict = { "one":"this is a dictionary", "two":2, "three":3, 4:"four" };
tiny = { "id":1234 };
print( dict );
print( dict["one"] );
print( dict[4] );
del(dict[4]);
dict[5] = "something else";
for key in dict.keys(): print("dictionary key:", key);
dict.clear();

task = {}
item = {'1.jpg': "Thread #1"}
task['1.jpg'] = "Thread #1"
task['2.jpg'] = "Thread #2"
print(task)          # {'1.jpg': 'Thread #1', '2.jpg': 'Thread #2'} 
print(str(task))     # {'1.jpg': 'Thread #1', '2.jpg': 'Thread #2'} 
print(task.keys())   # dict_keys(['1.jpg', '2.jpg'])
print(task.items())  # dict_items([('1.jpg', 'Thread #1'), ('2.jpg', 'Thread #2')])
```

Dictionaries can be created by several means:

   * Use a comma-separated list of `key: value` pairs within braces:
     `{'jack': 4098, 'sjoerd': 4127}` or `{4098: 'jack', 4127: 'sjoerd'}`
   * Use a dict comprehension: `{}`, `{x: x ** 2 for x in range(10)}`
   * Use the type constructor: `dict()`, `dict([('foo', 100), ('bar', 200)])`, `dict(foo=100, bar=200)`

‰ΩøÁî® dict() ÊûÑÂª∫Â≠óÂÖ∏Â∞±‰∏çËÉΩ‰ΩøÁî®Êï∞Â≠óÂÅö key„ÄÇ

Python3 Ê≤°Êúâ dict.has_key() ÊñπÊ≥ïÔºå

    if dict.has_key("key"):
        pass 
    if "key" in dict:
        pass 

    print( dict['one'] if "one" in dict else "EMPTY");

Â≠óÂÖ∏ÂåÖÂê´‰∫Ü‰ª•‰∏ãÂÜÖÁΩÆÂáΩÊï∞Ôºö

- cmp(dict1, dict2)         ÊØîËæÉ‰∏§‰∏™Â≠óÂÖ∏ÂÖÉÁ¥†, Python 2 ÈÄÇÁî®„ÄÇ
- len(dict)                 ËÆ°ÁÆóÂ≠óÂÖ∏ÂÖÉÁ¥†‰∏™Êï∞ÔºåÂç≥ÈîÆÁöÑÊÄªÊï∞„ÄÇ
- str(dict)                 ËæìÂá∫Â≠óÂÖ∏ÂèØÊâìÂç∞ÁöÑÂ≠óÁ¨¶‰∏≤Ë°®Á§∫„ÄÇ
- type(variable)            ËøîÂõûËæìÂÖ•ÁöÑÂèòÈáèÁ±ªÂûãÔºåÂ¶ÇÊûúÂèòÈáèÊòØÂ≠óÂÖ∏Â∞±ËøîÂõûÂ≠óÂÖ∏Á±ªÂûã„ÄÇ

Python Â≠óÂÖ∏ÂåÖÂê´‰∫Ü‰ª•‰∏ãÂÜÖÁΩÆÊñπÊ≥ïÔºö

- dict.clear()                  Âà†Èô§Â≠óÂÖ∏ÂÜÖÊâÄÊúâÂÖÉÁ¥†
- dict.copy()                   ËøîÂõû‰∏Ä‰∏™Â≠óÂÖ∏ÁöÑÊµÖÂ§çÂà∂
- dict.fromkeys(seq[, val])     ÂàõÂª∫‰∏Ä‰∏™Êñ∞Â≠óÂÖ∏Ôºå‰ª•Â∫èÂàó seq ‰∏≠ÂÖÉÁ¥†ÂÅöÂ≠óÂÖ∏ÁöÑÈîÆÔºåval ‰∏∫Â≠óÂÖ∏ÊâÄÊúâÈîÆÂØπÂ∫îÁöÑÂàùÂßãÂÄº
- dict.get(key, default=None)   ËøîÂõûÊåáÂÆöÈîÆÁöÑÂÄºÔºåÂ¶ÇÊûúÂÄº‰∏çÂú®Â≠óÂÖ∏‰∏≠ËøîÂõûdefaultÂÄº
- dict.has_key(key)             Â¶ÇÊûúÈîÆÂú®Â≠óÂÖ∏dictÈáåËøîÂõûtrueÔºåÂê¶ÂàôËøîÂõûfalse
- dict.items()                  ‰ª•ÂàóË°®ËøîÂõûÂèØÈÅçÂéÜÁöÑ(ÈîÆ, ÂÄº)ÂÖÉÁªÑÊï∞ÁªÑ
- dict.keys()                   ‰ª•ÂàóË°®ËøîÂõû‰∏Ä‰∏™Â≠óÂÖ∏ÊâÄÊúâÁöÑÈîÆ
- dict.setdefault(key, default=None) Âíå get() Á±ª‰ºº, ‰ΩÜÂ¶ÇÊûúÈîÆ‰∏çÂ≠òÂú®‰∫éÂ≠óÂÖ∏‰∏≠ÔºåÂ∞Ü‰ºöÊ∑ªÂä†ÈîÆÂπ∂Â∞ÜÂÄºËÆæ‰∏∫ default
- dict.update(dict2)            ÊääÂ≠óÂÖ∏dict2ÁöÑÈîÆ/ÂÄºÂØπÊõ¥Êñ∞Âà∞dictÈáå
- dict.values()                 ‰ª•ÂàóË°®ËøîÂõûÂ≠óÂÖ∏‰∏≠ÁöÑÊâÄÊúâÂÄº
- dict.pop(key[,default])       Âà†Èô§Â≠óÂÖ∏ÁªôÂÆöÈîÆ key ÊâÄÂØπÂ∫îÁöÑÂÄºÔºåËøîÂõûÂÄº‰∏∫Ë¢´Âà†Èô§ÁöÑÂÄº„ÄÇkeyÂÄºÂøÖÈ°ªÁªôÂá∫„ÄÇ Âê¶ÂàôÔºåËøîÂõûdefaultÂÄº„ÄÇ
- dict.popitem()                ÈöèÊú∫ËøîÂõûÂπ∂Âà†Èô§Â≠óÂÖ∏‰∏≠ÁöÑ‰∏ÄÂØπÈîÆÂíåÂÄº„ÄÇ


## ==‚ö° set in Python
- [Built-in Types](libarary/stdtypes.rst)

ÈõÜÂêà‰∏≠ÁöÑÂÖÉÁ¥†‰∏ÄÂÆöË¶ÅÊª°Ë∂≥‰∏Ä‰∏™Âü∫Êú¨Êù°‰ª∂Ôºö‚ÄúËøô‰∏™‰∏úË•øÂøÖÈ°ªÊòØÂèØ‰ª•ËøõË°åÂìàÂ∏åÊëòË¶ÅÔºàHashableÔºâ‚ÄùÔºåÊàñËÄÖËØ¥ÂÆö‰πâ‰∫ÜÂØπË±°ÁöÑ __hash__ ÊñπÊ≥ï„ÄÇ

Python ÈáåÁöÑÂ≠óÂÖ∏ÂíåÈõÜÂêàÂØπË±°ÈÉΩÂü∫‰∫éÂìàÂ∏åË°®ÔºàHash TableÔºâÂÆûÁé∞ÔºåÂú®Êü•Êâæ‰∏Ä‰∏™ÂÖÉÁ¥†Êó∂ÁÆóÊ≥ïÊïàÁéáÈùûÂ∏∏È´òÔºåÂà§Êñ≠‰∏Ä‰∏™‰∏úË•øÊòØ‰∏çÊòØÂú®ÈõÜÂêàÈáåÁöÑÂπ≥ÂùáÊó∂Èó¥Â§çÊùÇÂ∫¶ÊòØÂ∏∏Êï∞ O(1)Ôºå‰∏ç‰ºöÈöèÁùÄÊï∞ÊçÆÂ¢ûÂä†ËÄåÂ¢ûÂä†„ÄÇ

ÈõÜÂêàÊòØ‰∏ÄÁßçÈáçË¶Å‰∏îÂü∫Á°ÄÁöÑÊï∞Â≠¶Ê¶ÇÂøµÔºå‰πüÊòØ‰∏ÄÁßçÂü∫Êú¨ÁöÑÊï∞ÊçÆÁªìÊûÑÔºö

```py
a = {1, 3, 5, 7}
b = {3, 5, 8}

symmetric_difference = a ^ b  # {8, 1, 7} 
difference   = a - b  # {1, 7} 
intersection = a & b  # {3, 5} 
union        = a | b  # {1, 3, 5, 7, 8} 

subset       = a >= b # b is subset of a? Falss, b has 8 but a doesn't
proper_subset= a > b  # b is proper subset of a?  Falss
isdisjoint   = a.isdisjoint(b) # is dis-joint? False

a = {(1,"a"), (2,"b"), (3,"c"), (4,"d"), }
b = {(1,"a"), (3,"c"), (4,"d"), }
print(a-b) # {(2, 'b')}


a = { {"1":"a"}, {2:"b"}, {3:"c"}, {4:"d"}, }
b = { {"1":"a"}, {3:"c"}, {4:"d"}, }
print(a-b) # TypeError: unhashable type: 'dict'
```

## ==‚ö° for a while in Python
- [Built-in Types](reference/index.rst)
- [Expression](reference/expression.rst)
- [Compound statements](reference/compound_stmts.rst)


```py
count = 0;
while( count<9 ):
    if( count%2!=0 ):
        print (count, "is odd.");
    else:
        print (count, "is event.");
    count = count + 1;
print ("while loop end.");
```

ÂèØ‰ª•‰ΩøÁî® takewhile(predicate, iterable) ÂáΩÊï∞Êù•ÁÆÄÂåñÊù°ÂµåÂ•óÔºåÂú®Ëø≠‰ª£ËøáÁ®ã‰∏≠‰∏çÊñ≠‰ΩøÁî®ÂΩìÂâçÂØπË±°‰Ωú‰∏∫ÂèÇÊï∞Ë∞ÉÁî® predicate ÂáΩÊï∞Âπ∂ÊµãËØïËøîÂõûÁªìÊûúÔºåÂ¶ÇÊûúÂáΩÊï∞ËøîÂõûÂÄº‰∏∫ÁúüÔºåÂàôÁîüÊàêÂΩìÂâçÂØπË±°ÔºåÂæ™ÁéØÁªßÁª≠„ÄÇ

    from itertools import takewhile

    for user in takewhile(is_qualified, users):
        pass

itertools ÈáåÈù¢ËøòÊúâ‰∏Ä‰∫õÂÖ∂‰ªñÊúâÊÑèÊÄùÁöÑÂ∑•ÂÖ∑ÂáΩÊï∞Ôºå‰ªñ‰ª¨ÈÉΩÂèØ‰ª•Áî®Êù•ÂíåÂæ™ÁéØÊê≠ÈÖç‰ΩøÁî®ÔºåÊØîÂ¶Ç‰ΩøÁî® chain ÂáΩÊï∞ÊâÅÂπ≥ÂåñÂèåÂ±ÇÂµåÂ•óÂæ™ÁéØ„ÄÅ‰ΩøÁî® zip_longest ÂáΩÊï∞‰∏ÄÊ¨°ÂêåÊó∂Âæ™ÁéØÂ§ö‰∏™ÂØπË±°Á≠âÁ≠â„ÄÇ

Python Ê≤°Êúâ C/C++ ÁöÑ for Âæ™ÁéØÁªìÊûÑÔºåÂè™Êúâ for in Êûö‰∏æÔºö

    for letter in 'Python':
        print(" Letter:", letter);

    datas = ["apricot", "beechnut", "carambola", "chestnut", "cumquat", "dates", "filbert", "gingko"];
    for fruitornut in datas:
        print("I love", fruitornut);

    for index in range(len(datas)):
        print(index, "in datas is", datas[index]);


## ==‚ö° time

    #!/usr/bin/python
    import time

    vt = time.time()
    vlt = time.localtime( vt )
    vat = time.asctime( vlt )
    print ("time.time(): %f " %  vt)
    print ( vlt )
    print ( vat )
    # ‰ª•‰∏äÂÆû‰æãËæìÂá∫ÁªìÊûú‰∏∫Ôºö
    # time.time(): 1234892919.655932
    # (2009, 2, 17, 10, 48, 39, 1, 48, 0)
    # Tue Feb 17 10:48:39 2009




## ==‚ö° Errors & Exceptions
The Python Tutorial 8. Errors and Exceptions - https://docs.python.org/3/tutorial/errors.html
BaseException https://docs.python.org/3/library/exceptions.html#BaseException

ÈîôËØØÁ±ªÂûã BaseException ÊòØÊâÄÊúâÂºÇÂ∏∏ÈîôËØØÁöÑÂü∫Á°ÄÁ±ªÔºåÂÆÉÂè≥‰∏§‰∏™ÂÖ¨ÂºÄÂ±ûÊÄßÔºö

- args ÂåÖÂê´ÂºÇÂ∏∏ÁöÑÊûÑÈÄ†ÂèÇÊï∞Ôºåtuple Á±ªÂûãÔºåÈÄöÂ∏∏Âè™ÂåÖÂê´‰∏Ä‰∏™ÈîôËØØ‰ø°ÊÅØÂ≠óÁ¨¶‰∏≤ÔºåÂÜÖÁΩÆÂºÇÂ∏∏Â¶Ç OSError Âè™Âè≥‰∏Ä‰∏™ÈîôËØØÂè∑ÔºåÂÖ≥ËÅîÁâπÂÆöÁöÑÈîôËØØ‰ø°ÊÅØ„ÄÇ
- with_traceback(tb) ‰∏∫ÂºÇÂ∏∏ÂØπË±°ËÆæÁΩÆ‰∏Ä‰∏™Êñ∞ÁöÑ traceback ÂØπË±°ÔºåÈÄöÂ∏∏Áî®Ê≥ïÂ¶Ç‰∏ãÔºö

        try:
            ...
        except SomeException:
            tb = sys.exc_info()[2]
            raise OtherException(...).with_traceback(tb)


## ==‚ö° sys.exc_info ÊçïËé∑ÂºÇÂ∏∏ËØ¶ÁªÜ‰ø°ÊÅØ

‰∏ÄËà¨Á®ãÂ∫è‰∏≠ÔºåÊàë‰ª¨ÈúÄË¶ÅÂØπÂºÇÂ∏∏ËøõË°åÊçïËé∑Êù•‰øùËØÅÁ®ãÂ∫èÁöÑÂÅ•Â£Æ„ÄÇ‰ΩÜÊòØdebugÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨ÂèØËÉΩÈúÄË¶ÅÂºÇÂ∏∏ÁöÑËØ¶ÁªÜ‰ø°ÊÅØÔºåËøôÊó∂ÂèØ‰ª•‰ΩøÁî®sys.exec_infoÊù•Â§ÑÁêÜÔºö

    import traceback
    import sys
    try:
         raise ValueError('this is an exception')
    except Exception as ex:
        ex_type, ex_val, ex_stack = sys.exc_info()
        print("ex_type:", ex_type)
        print("ex_name:", ex_type.__name__)
        print("ex_val:", ex_val)
        for stack in traceback.extract_tb(ex_stack):
            print(stack)

‰ª•‰∏ä‰ª£Á†ÅÊâßË°åÁªìÊûúÔºö

    ex_type: <class 'ValueError'>
    ex_name: ValueError
    ex_val: this is an exception
    <FrameSummary file test.py, line 4 in <module>>


## ==‚ö° traceback ÈîôËØØ‰ø°ÊÅØËøΩË∏™

traceback Ê®°ÂùóÂèØ‰ª•ÊâìÂç∞Âá∫Á®ãÂ∫èÂΩìÂâçÂÖ∑‰ΩìÁöÑÂºÇÂ∏∏‰ø°ÊÅØ„ÄÇÂ∏∏Áî®ÁöÑÂáΩÊï∞ÊòØ:

- traceback.format_exc() ‰ª•Â≠óÁ¨¶‰∏≤ËøîÂõûÂºÇÂ∏∏‰ø°ÊÅØ
- traceback.print_exc() Áõ¥Êé•ÊâìÂç∞Âá∫ÂºÇÂ∏∏‰ø°ÊÅØ

ÊµãËØï‰ª£Á†ÅÂ¶Ç‰∏ãÔºö

    import traceback
    import serial
     
    try:
        ser = serial.Serial('COM13', 115200)
        ser = serial.Serial('COM13', 115200)
    except:
        traceback.print_exc()


traceback.print_exc() Âíå traceback.format_exc() ËæìÂá∫ÁöÑÈîôËØØ‰ø°ÊÅØÊòØ‰∏ÄÊ®°‰∏ÄÊ†∑ÁöÑ„ÄÇtraceback.print_exc() ÂèØ‰ª•Â°´ÂÖ•fileÂèÇÊï∞ÔºåÊääÂºÇÂ∏∏‰ø°ÊÅØÂ°´ÂÖ•Âà∞ÊåáÂÆöÁöÑ file Èáå„ÄÇ

    import traceback
    import serial
     
    try:
        ser = serial.Serial('COM13', 115200)
        ser = serial.Serial('COM13', 115200)
    except:
        traceback.print_exc(file=open('error.txt','a'))


## ==‚ö° try-except

The Python Language Reference ¬ª 8. Compound statements

    8.4. The try statement

    The try statement specifies exception handlers and/or cleanup code for a group of statements:
    try_stmt  ::=  try1_stmt | try2_stmt
    try1_stmt ::=  "try" ":" suite
                   ("except" [expression ["as" identifier]] ":" suite)+
                   ["else" ":" suite]
                   ["finally" ":" suite]
    try2_stmt ::=  "try" ":" suite
                   "finally" ":" suite

ÂºÇÂ∏∏Âç≥ÊòØ‰∏Ä‰∏™‰∫ã‰ª∂ÔºåËØ•‰∫ã‰ª∂‰ºöÂú®Á®ãÂ∫èÊâßË°åËøáÁ®ã‰∏≠ÂèëÁîüÔºåÂΩ±Âìç‰∫ÜÁ®ãÂ∫èÁöÑÊ≠£Â∏∏ÊâßË°å„ÄÇPython Êèê‰æõ‰∫Ü‰∏§‰∏™ÈùûÂ∏∏ÈáçË¶ÅÁöÑÂäüËÉΩÊù•Â§ÑÁêÜ Python Á®ãÂ∫èÂú®ËøêË°å‰∏≠Âá∫Áé∞ÁöÑÂºÇÂ∏∏ÂíåÈîôËØØÔºå‰Ω†ÂèØ‰ª•‰ΩøÁî®ËØ•ÂäüËÉΩÊù•Ë∞ÉËØï Python Á®ãÂ∫è„ÄÇ

- Assertions Êñ≠Ë®Ä
- Exception ÂºÇÂ∏∏Â§ÑÁêÜ: try-except ÁªìÊûÑ

    - try / except  Catch and recover from exceptions raised by Python, or by you.
    - try / finally Perform cleanup actions, whether exceptions occur or not.
    - raise         Trigger an exception manually in your code.
    - assert        Conditionally trigger an exception in your code.
    - with / as     Implement context managers in Python 2.6, 3.0, and later (optional in 2.5).


‰ΩøÁî® except ËÄå‰∏çÂ∏¶‰ªª‰ΩïÂºÇÂ∏∏Á±ªÂûãÔºåÊàñÂ∏¶Â§öÁßçÂºÇÂ∏∏Á±ªÂûãÈÉΩÊòØÂèØ‰ª•ÁöÑ„ÄÇÂú® Python ÂºÇÂ∏∏‰∏≠ÔºåException ÊòØÂ∏∏ËßÑÂºÇÂ∏∏ÈîôËØØÁöÑÂü∫Á±ªÔºåÂèØ‰ª•ÊçïËé∑‰ªªÊÑèÈùûÁâπÂÆöÂ∏∏ËßÑÂºÇÂ∏∏Ôºå‰ª•‰∏ãÊòØ Python 2 ÁöÑËØ≠Ê≥ïÔºö

    s1 = 'hello'
    try:
        int(s1)
    # except Exception,e: Python 2
    except Exception as e:
        print e
        raise Exception('error triger')

Â¶ÇÊûú try ‰ª£Á†ÅÂùóÂèØËÉΩÂá∫Áé∞Â§öÁßçÈîôËØØÁ±ªÂûãÔºåÂèØ‰ª•ÁºñÂÜôÂ§ö‰∏™ except ‰ª£Á†ÅÂùóÊù•Â§ÑÁêÜÔºõÊ≠§Â§ñÔºåÂ¶ÇÊûúÊ≤°ÊúâÂèëÁîüÈîôËØØÔºåËøòÂèØ‰ª•Âú®except‰ª£Á†ÅÂùóÂêéÈù¢Âä†‰∏äelseËØ≠Âè•ÔºåÂΩìÊ≤°ÊúâÈîôËØØÁöÑÊó∂ÂÄôÔºå‰ºöËá™Âä®ÊâßË°åelseËØ≠Âè•Ôºö

    try:
        print('ÂºÄÂßãÔºö')
        r = 10 / int('2')
        print('ÁªìÊûúÔºö',r)
    except ValueError as e:
        print('ValueError:',e)
    except ZeroDivisionError as e:
        print('ZeroDivision:',r)
    except (OSError, TypeError) as reason:
        print('ÈîôËØØÁöÑÂéüÂõ†ÊòØ:', str(reason))
    else:
        print('Ê≤°ÊúâÂá∫ÈîôÔºÅ')
    finally:
        print('ÊúÄÂêéË¶ÅÊâßË°åÁöÑ‰ª£Á†Å')

‰æãÂ¶ÇÊ†áÂáÜÂ∫ì socket ÈÄö‰ø°‰∏≠ÔºåÁªëÂÆö‰∏ªÊú∫ÔºåÁ´ØÂè£ÔºåÁõëÂê¨ÔºåÊé•Êî∂ËøûÊé•ÔºåÂèëÈÄÅÊé•Êî∂Êï∞ÊçÆÁ≠âÁ≠âÈÉΩËÉΩ‰ºöËøîÂõûÈîôËØØÔºå‰∏∫‰∫Ü‰ΩøÁ®ãÂ∫èËøêË°åÊõ¥ÂèØÈù†ÔºåÂøÖÈ°ªËøõË°åÈîôËØØÊ£ÄÊü•ÔºåÂä†ÂÖ•ÂºÇÂ∏∏Â§ÑÁêÜÔºåSocket Ê®°ÂùóÂ∏∏ËßÅÁöÑÂºÇÂ∏∏Êúâ‰ª•‰∏ãÂá†‰∏™ÔºåÈÉΩÊòØ OSError ÂºÇÂ∏∏Ôºö

- socket.error    ‰∏é‰∏ÄËà¨I/OÂíåÈÄö‰ø°ÈóÆÈ¢òÊúâÂÖ≥ÁöÑ
- socket.gaierror Êü•ËØ¢DNSÊó∂Âá∫ÈîôÔºåError where Get Addrress Info from DNS
- socket.herror   ‰∏éÂÖ∂‰ªñÂú∞ÂùÄÈîôËØØÊúâÂÖ≥
- socket.timeout  Ë∂ÖÊó∂ÈîôËØØÔºå‰∏ésocket.settimeout()ËÆæÁΩÆÊúâÂÖ≥

ÈÄöËøáÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÂºÇÂ∏∏Á±ªÔºåÁ®ãÂ∫èÂèØ‰ª•ÂëΩÂêçÂÆÉ‰ª¨Ëá™Â∑±ÁöÑÂºÇÂ∏∏„ÄÇÂºÇÂ∏∏Â∫îËØ•ÊòØÂÖ∏ÂûãÁöÑÁªßÊâøËá™ExceptionÁ±ªÔºåÈÄöËøáÁõ¥Êé•ÊàñÈó¥Êé•ÁöÑÊñπÂºè„ÄÇ

‰ª•‰∏ã‰∏∫‰∏éRuntimeErrorÁõ∏ÂÖ≥ÁöÑÂÆû‰æã,ÂÆû‰æã‰∏≠ÂàõÂª∫‰∫Ü‰∏Ä‰∏™Á±ªÔºåÂü∫Á±ª‰∏∫RuntimeErrorÔºåÁî®‰∫éÂú®ÂºÇÂ∏∏Ëß¶ÂèëÊó∂ËæìÂá∫Êõ¥Â§öÁöÑ‰ø°ÊÅØ„ÄÇ

Âú®tryËØ≠Âè•Âùó‰∏≠ÔºåÁî®Êà∑Ëá™ÂÆö‰πâÁöÑÂºÇÂ∏∏ÂêéÊâßË°åexceptÂùóËØ≠Âè•ÔºåÂèòÈáè e ÊòØÁî®‰∫éÂàõÂª∫NetworkerrorÁ±ªÁöÑÂÆû‰æã„ÄÇ

    class Networkerror(RuntimeError):
        def __init__(self, arg):
            self.args = arg

Âú®‰Ω†ÂÆö‰πâ‰ª•‰∏äÁ±ªÂêéÔºå‰Ω†ÂèØ‰ª•Ëß¶ÂèëËØ•ÂºÇÂ∏∏ÔºåÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö
    
    try:
        raise Networkerror("Bad hostname")
    except Networkerror,e:
        print e.args

ÂºÇÂ∏∏ÂØπË±°ÊâÄÊê∫Â∏¶ÁöÑÂ≠óÁ¨¶‰∏≤‰ø°ÊÅØÊòØÈÄöËøá `__str__` È≠îÊúØÊñπÊ≥ïËé∑ÂèñÁöÑÔºåÂØπ‰∏Ä‰∏™ÂºÇÂ∏∏ÂØπË±° e ËøõË°å str(e) ËΩ¨ÂûãÂ∞±‰ºöËß¶ÂèëËøô‰∏™È≠îÊúØÊñπÊ≥ï„ÄÇ

- ArithmeticError   ÊâÄÊúâÊï∞ÂÄºËÆ°ÁÆóÈîôËØØÁöÑÂü∫Á±ª
- AssertionError    Êñ≠Ë®ÄËØ≠Âè•Â§±Ë¥•
- AttributeError    ÂØπË±°Ê≤°ÊúâËøô‰∏™Â±ûÊÄß
- BaseException     ÊâÄÊúâÂºÇÂ∏∏ÁöÑÂü∫Á±ª
- DeprecationWarning    ÂÖ≥‰∫éË¢´ÂºÉÁî®ÁöÑÁâπÂæÅÁöÑË≠¶Âëä
- EnvironmentError  Êìç‰ΩúÁ≥ªÁªüÈîôËØØÁöÑÂü∫Á±ª
- EOFError          Ê≤°ÊúâÂÜÖÂª∫ËæìÂÖ•,Âà∞ËææEOF Ê†áËÆ∞
- Exception         Â∏∏ËßÑÈîôËØØÁöÑÂü∫Á±ª
- FloatingPointError    ÊµÆÁÇπËÆ°ÁÆóÈîôËØØ
- FutureWarning     ÂÖ≥‰∫éÊûÑÈÄ†Â∞ÜÊù•ËØ≠‰πâ‰ºöÊúâÊîπÂèòÁöÑË≠¶Âëä
- GeneratorExit     ÁîüÊàêÂô®(generator)ÂèëÁîüÂºÇÂ∏∏Êù•ÈÄöÁü•ÈÄÄÂá∫
- ImportError       ÂØºÂÖ•Ê®°Âùó/ÂØπË±°Â§±Ë¥•
- IndentationError  Áº©ËøõÈîôËØØ
- IndexError        Â∫èÂàó‰∏≠Ê≤°ÊúâÊ≠§Á¥¢Âºï(index)
- IOError           ËæìÂÖ•/ËæìÂá∫Êìç‰ΩúÂ§±Ë¥•
- KeyboardInterrupt Áî®Êà∑‰∏≠Êñ≠ÊâßË°å(ÈÄöÂ∏∏ÊòØËæìÂÖ•^C)
- KeyError          Êò†Â∞Ñ‰∏≠Ê≤°ÊúâËøô‰∏™ÈîÆ
- LookupError       Êó†ÊïàÊï∞ÊçÆÊü•ËØ¢ÁöÑÂü∫Á±ª
- MemoryError       ÂÜÖÂ≠òÊ∫¢Âá∫ÈîôËØØ(ÂØπ‰∫éPython Ëß£ÈáäÂô®‰∏çÊòØËá¥ÂëΩÁöÑ)
- NameError         Êú™Â£∞Êòé/ÂàùÂßãÂåñÂØπË±° (Ê≤°ÊúâÂ±ûÊÄß)
- NotImplementedError   Â∞öÊú™ÂÆûÁé∞ÁöÑÊñπÊ≥ï
- OSError           Êìç‰ΩúÁ≥ªÁªüÈîôËØØ
- OverflowError     Êï∞ÂÄºËøêÁÆóË∂ÖÂá∫ÊúÄÂ§ßÈôêÂà∂
- OverflowWarning   ÊóßÁöÑÂÖ≥‰∫éËá™Âä®ÊèêÂçá‰∏∫ÈïøÊï¥Âûã(long)ÁöÑË≠¶Âëä
- PendingDeprecationWarning ÂÖ≥‰∫éÁâπÊÄßÂ∞Ü‰ºöË¢´Â∫üÂºÉÁöÑË≠¶Âëä
- ReferenceError    Âº±ÂºïÁî®(Weak reference)ËØïÂõæËÆøÈóÆÂ∑≤ÁªèÂûÉÂúæÂõûÊî∂‰∫ÜÁöÑÂØπË±°
- RuntimeError      ‰∏ÄËà¨ÁöÑËøêË°åÊó∂ÈîôËØØ
- RuntimeWarning    ÂèØÁñëÁöÑËøêË°åÊó∂Ë°å‰∏∫(runtime behavior)ÁöÑË≠¶Âëä
- StandardError     ÊâÄÊúâÁöÑÂÜÖÂª∫Ê†áÂáÜÂºÇÂ∏∏ÁöÑÂü∫Á±ª
- StopIteration     Ëø≠‰ª£Âô®Ê≤°ÊúâÊõ¥Â§öÁöÑÂÄº
- SyntaxError       Python ËØ≠Ê≥ïÈîôËØØ
- SyntaxWarning     ÂèØÁñëÁöÑËØ≠Ê≥ïÁöÑË≠¶Âëä
- SystemError       ‰∏ÄËà¨ÁöÑËß£ÈáäÂô®Á≥ªÁªüÈîôËØØ
- SystemExit        Ëß£ÈáäÂô®ËØ∑Ê±ÇÈÄÄÂá∫
- TabError          Tab ÂíåÁ©∫Ê†ºÊ∑∑Áî®
- TypeError         ÂØπÁ±ªÂûãÊó†ÊïàÁöÑÊìç‰Ωú
- UnboundLocalError ËÆøÈóÆÊú™ÂàùÂßãÂåñÁöÑÊú¨Âú∞ÂèòÈáè
- UnicodeDecodeError    Unicode Ëß£Á†ÅÊó∂ÁöÑÈîôËØØ
- UnicodeEncodeError    Unicode ÁºñÁ†ÅÊó∂ÈîôËØØ
- UnicodeError      Unicode Áõ∏ÂÖ≥ÁöÑÈîôËØØ
- UnicodeTranslateError Unicode ËΩ¨Êç¢Êó∂ÈîôËØØ
- UserWarning       Áî®Êà∑‰ª£Á†ÅÁîüÊàêÁöÑË≠¶Âëä
- ValueError        ‰º†ÂÖ•Êó†ÊïàÁöÑÂèÇÊï∞
- Warning           Ë≠¶ÂëäÁöÑÂü∫Á±ª
- WindowsError      Á≥ªÁªüË∞ÉÁî®Â§±Ë¥•
- ZeroDivisionError Èô§(ÊàñÂèñÊ®°)Èõ∂ (ÊâÄÊúâÊï∞ÊçÆÁ±ªÂûã)

## ==‚ö° Exception hierarchy

ÂèÇËÄÉ‰ª£Á†ÅÊñáÊ°£ Built-in Exceptions: exceptions.rst

The class hierarchy for built-in exceptions is:

    BaseException
     +-- SystemExit
     +-- KeyboardInterrupt
     +-- GeneratorExit
     +-- Exception
          +-- StopIteration
          +-- StopAsyncIteration
          +-- ArithmeticError
          |    +-- FloatingPointError
          |    +-- OverflowError
          |    +-- ZeroDivisionError
          +-- AssertionError
          +-- AttributeError
          +-- BufferError
          +-- EOFError
          +-- ImportError
          |    +-- ModuleNotFoundError
          +-- LookupError
          |    +-- IndexError
          |    +-- KeyError
          +-- MemoryError
          +-- NameError
          |    +-- UnboundLocalError
          +-- OSError
          |    +-- BlockingIOError
          |    +-- ChildProcessError
          |    +-- ConnectionError
          |    |    +-- BrokenPipeError
          |    |    +-- ConnectionAbortedError
          |    |    +-- ConnectionRefusedError
          |    |    +-- ConnectionResetError
          |    +-- FileExistsError
          |    +-- FileNotFoundError
          |    +-- InterruptedError
          |    +-- IsADirectoryError
          |    +-- NotADirectoryError
          |    +-- PermissionError
          |    +-- ProcessLookupError
          |    +-- TimeoutError
          +-- ReferenceError
          +-- RuntimeError
          |    +-- NotImplementedError
          |    +-- RecursionError
          +-- SyntaxError
          |    +-- IndentationError
          |         +-- TabError
          +-- SystemError
          +-- TypeError
          +-- ValueError
          |    +-- UnicodeError
          |         +-- UnicodeDecodeError
          |         +-- UnicodeEncodeError
          |         +-- UnicodeTranslateError
          +-- Warning
               +-- DeprecationWarning
               +-- PendingDeprecationWarning
               +-- RuntimeWarning
               +-- SyntaxWarning
               +-- UserWarning
               +-- FutureWarning
               +-- ImportWarning
               +-- UnicodeWarning
               +-- BytesWarning
               +-- ResourceWarning


## ==‚ö° pytest & assert
- https://docs.pytest.org/en/7.1.x/
- https://docs.pytest.org/en/7.1.x/reference/reference.html
- https://pluggy.readthedocs.io/en/stable/index.html


‰ªé Python Assertions Êñ≠Ë®ÄËØ¥Ëµ∑„ÄÇ

Python ÁöÑÊñ≠Ë®ÄËØ≠Âè• *assert* Âá∫Áé∞Êù°‰ª∂‰∏çÊàêÁ´ãÔºåÊñ≠Ë®ÄÂ§±Ë¥•Êó∂ÔºåÊâìÂç∞ÈîôËØØ‰ø°ÊÅØÂπ∂ÁªàÊ≠¢Á®ãÂ∫èÔºåÂèÇËÄÉ Simple statements„ÄÇ

Assert statements are a convenient way to insert debugging assertions into a
program:

       assert_stmt: "assert" `expression` ["," `expression`]

The simple form, ``assert expression``, is equivalent to ::

       if __debug__:
           if not expression: raise AssertionError

The extended form, ``assert expression1, expression2``, is equivalent to ::

       if __debug__:
           if not expression1: raise AssertionError(expression2)

Êñ≠Ë®ÄÁî®Ëµ∑Êù•ÈùûÂ∏∏ÁÆÄÂçïÔºå‰Ω†ÂèØ‰ª•Âú® assert ÂêéÈù¢Ë∑ü‰∏ä‰ªªÊÑèÂà§Êñ≠Êù°‰ª∂ÔºåÂ¶ÇÊûúÊñ≠Ë®ÄÂ§±Ë¥•Âàô‰ºöÊäõÂá∫ÂºÇÂ∏∏„ÄÇ

    >>> assert 1 + 1 == 2
    >>> assert isinstance('Hello', str)
    >>> assert isinstance('Hello', int)

    Traceback (most recent call last):
      File "<input>", line 1, in <module>
    AssertionError

ÂÖ∂ÂÆû assert Áúã‰∏äÂéª‰∏çÈîôÔºåÁÑ∂ËÄåÁî®Ëµ∑Êù•Âπ∂‰∏çÁàΩ„ÄÇÂ∞±ÊØîÂ¶ÇÊúâ‰∫∫ÂëäËØâ‰Ω†Á®ãÂ∫èÈîô‰∫ÜÔºå‰ΩÜÊòØ‰∏çÂëäËØâÂì™ÈáåÈîô‰∫Ü„ÄÇ

‰∏Ä‰∏™Á®çÂæÆÊîπËøõ‰∏Ä‰∏¢‰∏¢ÁöÑÊñπÊ°àÂ∞±ÊòØÊääÂøÖË¶ÅÁöÑ‰ø°ÊÅØ‰πüÊîæÂà∞ assert ËØ≠Âè•ÂêéÈù¢ÔºåÊØîÂ¶ÇËøôÊ†∑„ÄÇ

    >>> s = "nothin is impossible."
    >>> key = "nothing"
    >>> assert key in s, "Key: '{}' is not in Target: '{}'".format(key, s)

    Traceback (most recent call last):
      File "<input>", line 1, in <module>
    AssertionError: Key: 'nothing' is not in Target: 'nothin is impossible.'

Áúã‰∏äÂéªËøòË°åÂêßÔºå‰ΩÜÊòØÂÖ∂ÂÆûÂÜôÁöÑÂæàËõãÁñº„ÄÇÂÅáÂ¶Ç‰Ω†ÊòØ‰∏ÄÂêçÊµãËØïÊ±™ÔºåÊúâÊàêÂçÉ‰∏ä‰∏áÁöÑÊµãËØïÊ°à‰æãÈúÄË¶ÅÂÅöÊñ≠Ë®ÄÂÅöÈ™åËØÅÔºåÁõ∏‰ø°‰Ω†Èù¢ÂØπ‰ª•‰∏äÂÅöÊ≥ïÔºåÂøÉ‰∏≠‰∏ÄÂÆöÊúâÂçÉ‰∏áÂè™ÈÇ£ÁßçÈ©¨Â•îËÖæËÄåËøá„ÄÇ


pytest ÊòØ‰∏Ä‰∏™ËΩªÈáèÁ∫ßÁöÑÊµãËØïÊ°ÜÊû∂ÔºåÂÆÉÁîöËá≥Ê≤°ÊúâÂÆûÁé∞Ëá™Â∑±ÁöÑÊñ≠Ë®ÄÔºå‰ΩÜÊòØÂÆÉÊé•ÁÆ°‰∫Ü Python Ëá™Â∏¶ÁöÑÊñ≠Ë®ÄÔºåÂ¶ÇÊûúÊñ≠Ë®ÄÂ§±Ë¥•ÔºåÈÇ£‰πàÊ°ÜÊû∂Êú¨Ë∫´‰ºöÂ∞ΩÂèØËÉΩÂ§öÂú∞Êèê‰æõÊñ≠Ë®ÄÂ§±Ë¥•ÁöÑÂéüÂõ†„ÄÇÈÇ£‰πà‰πüÂ∞±ÊÑèÂë≥ÁùÄÔºåÁî® pytest ÂÆûÁé∞ÊµãËØïÔºå‰Ω†‰∏ÄË°å‰ª£Á†ÅÈÉΩ‰∏çÁî®Êîπ„ÄÇ

Áî®‰∫éÊµãËØïÁöÑËÑöÊú¨ÊàñÊµãËØïÔºåÂêçÁß∞‰ΩøÁî® test ÂâçÁºÄÔºåÊâßË°å pytest ‰ºöËá™Âä®Ë∞ÉÁî®ÔºåÂèØ‰ª•‰ΩøÁî®Á±ªÊù•ÁªÑÁªáÊµãËØïÂáΩÊï∞Ôºå‰ΩøÁî® Test ÂêçÁß∞ÂâçÁºÄ„ÄÇ

pytest ÁöÑ‰∏ªË¶ÅÂäüËÉΩ‰πã‰∏ÄÊòØ‰ΩøÁî®ÁÆÄÂçïÁöÑÊñ≠Ë®ÄËØ≠Âè•Ôºå‰ª•ÂèäÂú®Êñ≠Ë®ÄÂ§±Ë¥•Êó∂ÂØπË°®ËææÂºèËøõË°åËØ¶ÁªÜÁöÑËá™ÁúÅÔºåÂç≥Êñ≠Ë®ÄÈáçÂÜô Assertion Rewriting„ÄÇ

Êñ≠Ë®ÄÈáçÂÜôÂÆûÁé∞Êñ≠Ë®ÄÂ§±Ë¥•ÊÉÖÂÜµÁöÑÂ§ÑÁêÜÔºåPEP 302 ‚Äì New Import Hooks ÂèØ‰ª•ÂÆûÁé∞Ê®°ÂùóÂú®ÂØºÂÖ•Êó∂ÔºåÂú®Ë¢´ÁºñËØëÊàêÂ≠óËäÇÁ†Å‰πãÂâçÔºå‰øÆÊîπÂ∑≤Ëß£ÊûêÁöÑ AST„ÄÇpytest ÂêØÂä®Êó∂Â∞ΩÊó©ÂÆâË£Ö PEP 302 ÊâÄÊèèËø∞ÁöÑ Import Hooks ÔºåÂπ∂Âú®Ê®°ÂùóÂØºÂÖ•Êó∂ÊâßË°åÊñ≠Ë®ÄÈáçÂÜô„ÄÇ


Á§∫ËåÉÔºåtest_simple.pyÔºö

```py
import pytest
# mod = pytest.importorskip("mod")

def test_case():
    expected = "Hello"
    actual = "hello"
    assert expected == actual

if __name__ == '__main__':
    pytest.main()
"""
================================== FAILURES ===================================
__________________________________ test_case __________________________________

    def test_case():
        expected = "Hello"
        actual = "hello"
>       assert expected == actual
E       assert 'Hello' == 'hello'
E         - Hello
E         ? ^
E         + hello
E         ? ^

assertion_in_python.py:7: AssertionError
========================== 1 failed in 0.05 seconds ===========================
"""
```

ËøêË°å pytest Ê®°ÂùóËøõË°åÊµãËØïÔºö

```sh
pytest
pytest -q test_simple.py
python.exe -m pytest -q
```

Â¶ÇÊûúÂΩìÂâçÁõÆÂΩïÊúâ pyd Á≠âÊ®°ÂùóÊñá‰ª∂ÂæÖÂä†ËΩΩÔºåÂ∞±ÂèØ‰ª•ÈÄöËøá python -m ÊñπÂºèËøêË°åÔºåËøô‰ºöÂ∞ÜÂΩìÂâçÁõÆÂΩïËøΩÂä†Âà∞ÊêúÁ¥¢ÁõÆÂΩïÂàóË°®‰∏≠„ÄÇ

Èô§‰∫Ü‰ΩøÁî®ÂéüÁîüÁöÑ assert ËØ≠Âè•ÔºåÊµãËØïËÑöÊú¨‰∏≠ËøòÂèØ‰ª•‰ΩøÁî® pytest Ê®°ÂùóÊèê‰æõÁöÑÂÖ∂ÂÆÉÊñπÊ≥ïÔºö

- importorskip(modname, minversion=None, reason=None) ÂØºËá¥ÁöÑÊ®°ÂùóÊú™ÂÆâË£ÖÊó∂ÔºåÂ∞±‰ºöË∑≥ËøáËøô‰∏™ÊµãËØï„ÄÇ
- approx(expected, rel=None, abs=None, nan_ok=False) ÂÖÅËÆ∏ËØØÂ∑ÆÁöÑÊñ≠Ë®ÄÔºõ
- fail(reason[, pytrace=True, msg=None]) Áõ¥Êé•ÁªôÂá∫Â§±Ë¥•Áä∂ÊÄÅ‰ø°ÊÅØÔºõ
- skip(reason[, allow_module_level=False, msg=None]) Ë∑≥ËøáÊµãËØïÂπ∂ÁªôÂá∫ÁêÜÁî±Ôºõ
- xfail(reason='') Âº∫Âà∂‰ΩøÁî®‰∏Ä‰∏™ÁêÜÁî±Êù•ÁªìÊùü‰∏Ä‰∏™Ê≠£Âú®ÊµãËØïÊàñËÆæÁΩÆÁöÑÂáΩÊï∞Ôºõ
- exit(reason[, returncode=False, msg=None]) ÈÄÄÂá∫ÂΩìÂâçÁöÑÊµãËØï‰ªªÂä°Ôºõ
- main(args=None, plugins=None) ÂºÄÂßãÂú®ËøõÁ®ãÂÜÖËøõË°åÊµãËØïÔºõ
- `param(*values[, id][, marks])` Âú® pytest.mark.parametrize Êàñ parametrized fixtures ËÆæÁΩÆÂèÇÊï∞Ôºõ
- `with raises(expected_exception: Exception[, *, match])` as excinfo Êñ≠Ë®Ä‰ª£Á†ÅÂøó‰ºöÂºïËµ∑ÂºÇÂ∏∏Ôºõ
- `with deprecated_call()` Êñ≠Ë®Ä‰ª£Á†ÅÂùó‰ºö‰∫ßÁîüË≠¶Âëä: DeprecationWarning Êàñ PendingDeprecationWarningÔºõ
- `with warns(expected_warning: Exception[, match])` Êñ≠Ë®Ä‰ª£Á†ÅÂùó‰∫ßÁîüÊåáÂÆöÁöÑË≠¶ÂëäÔºõ
- `register_assert_rewrite(*names)` Êñ≠Ë®ÄÈáçÂÜôÔºåÊåáÂÆö‰∏ÄÁ≥ªÂàóË¶ÅÂú®ÂØºÂÖ•Êó∂ËøõË°åÈáçÂÜôÁöÑÊ®°ÂùóÂêçÔºõ
- freeze_includes() ËøîÂõû pytest ‰ΩøÁî®Âà∞ÁöÑÊ®°ÂùóÂêçÁß∞ÂàóË°®ÔºåÂÆÉ‰ª¨‰ºöÂåÖÂê´Âà∞ cx_freeze Ê®°Âùó„ÄÇ


pytest ÁöÑÊµãËØïÂáΩÊï∞‰∏≠ÔºåÈÄöËøá‰∏çÂêåÁöÑÂèÇÊï∞ÂêçÁß∞ÂèØ‰ª•Ëé∑Âèñ‰∏çÂêåÁöÑÂØπË±°ÔºåËøôÁßçÊ†πÊçÆÂèÇÊï∞ÂêçÊù•‰º†ÂÖ•ÁöÑÂØπË±°Áß∞‰∏∫ FixturesÔºå‰πüÂèØ‰ª•Âú® @pytest.fixture Ë£ÖÈ•∞ÁöÑÂáΩÊï∞‰∏≠‰ΩøÁî®„ÄÇ

pytest ÊúâÂãæÂ≠êÊèí‰ª∂Êú∫Âà∂Ôºå‰ΩøÁî® pluggy Ê®°ÂùóÂÆûÁé∞Ôºö

- ÊâÄÊúâ Hook API ‰ΩøÁî® pluggy.HookspecMarker Ë£ÖÈ•∞Ôºå@hookspecÔºõ
- ÊâÄÊúâÊèí‰ª∂ÂÆûÁé∞ÊñπÊ≥ï‰ΩøÁî® pluggy.HookimplMarker Ë£ÖÈ•∞Ôºå@hookimplÔºõ

Êèí‰ª∂ÁöÑ‰∏§ÁßçÁ±ªÂûãÔºö

- pip-installable plugins
- conftest.py: local per-directory plugins

Historic hooks ÊòØÊåáÂú®Ê≥®ÂÜå‰πãÂâçÂèØ‰ª•‰ΩøÁî® call_historic() Ë∞ÉÁî®ÁöÑÈí©Â≠ê„ÄÇ

```py
import pluggy

hookspec = pluggy.HookspecMarker("myproject")
hookimpl = pluggy.HookimplMarker("myproject")


class MySpec:
    """A hook specification namespace."""

    @hookspec
    def myhook(self, arg1, arg2):
        """My special little hook that you can customize."""


class Plugin_1:
    """A hook implementation namespace."""

    @hookimpl
    def myhook(self, arg1, arg2):
        print("inside Plugin_1.myhook()")
        return arg1 + arg2


class Plugin_2:
    """A 2nd hook implementation namespace."""

    @hookimpl
    def myhook(self, arg1, arg2):
        print("inside Plugin_2.myhook()")
        return arg1 - arg2


# create a manager and add the spec
pm = pluggy.PluginManager("myproject")
pm.add_hookspecs(MySpec)
# register plugins
pm.register(Plugin_1())
pm.register(Plugin_2())
# call our `myhook` hook
results = pm.hook.myhook(arg1=1, arg2=2)
print(results)
```

Âú®ÊµãËØïËÑöÊú¨ÁõÆÂΩï‰∏≠ÔºåÂèØ‰ª•ÊîæÁΩÆ‰∏Ä‰∏™Ëá™Âä®Âä†ËΩΩÁöÑÊèí‰ª∂Ôºåconftest.pyÔºåËøôÈáåÈù¢ÂèØ‰ª•‰ΩøÁî®ÂêÑÁßç Hooks ÂáΩÊï∞ÔºåÂÆÉ‰ª¨ÂÆö‰πâÂú® site-packages\_pytest\hookspec.py„ÄÇ

Bootstrapping hooks

   - pytest_load_initial_conftests(early_config, parser, args)
   - pytest_cmdline_preparse(config, args)
   - pytest_cmdline_parse(pluginmanager, args)
   - pytest_cmdline_main(config)

Initialization hooks

   - pytest_addoption(parser, pluginmanager)
   - pytest_addhooks(pluginmanager)
   - pytest_configure(config)
   - pytest_unconfigure(config)
   - pytest_sessionstart(session)
   - pytest_sessionfinish(session, exitstatus)
   - pytest_plugin_registered(plugin, manager)

Collection hooks

   - pytest_collection(session)
   - pytest_ignore_collect(collection_path, path, config)
   - pytest_collect_file(file_path, path, parent)
   - pytest_pycollect_makemodule(module_path, path, parent)
   - pytest_pycollect_makeitem(collector, name, obj)
   - pytest_generate_tests(metafunc)
   - pytest_make_parametrize_id(config, val, argname)
   - pytest_markeval_namespace(config)
   - pytest_collection_modifyitems(session, config, items)
   - pytest_collection_finish(session)

Test running (runtest) hooks

   - pytest_runtestloop(session)
   - pytest_runtest_protocol(item, nextitem)
   - pytest_runtest_logstart(nodeid, location)
   - pytest_runtest_logfinish(nodeid, location)
   - pytest_runtest_setup(item)
   - pytest_runtest_call(item)
   - pytest_runtest_teardown(item, nextitem)
   - pytest_runtest_makereport(item, call)
   - pytest_pyfunc_call(pyfuncitem)

Reporting hooks

   - pytest_collectstart(collector)
   - pytest_make_collect_report(collector)
   - pytest_itemcollected(item)
   - pytest_collectreport(report)
   - pytest_deselected(items)
   - pytest_report_header(config, start_path, startdir)
   - pytest_report_collectionfinish(config, start_path, startdir, items)
   - pytest_report_teststatus(report, config)
   - pytest_report_to_serializable(config, report)
   - pytest_report_from_serializable(config, data)
   - pytest_terminal_summary(terminalreporter, exitstatus, config)
   - pytest_fixture_setup(fixturedef, request)
   - pytest_fixture_post_finalizer(fixturedef, request)
   - pytest_warning_recorded(warning_message, when, nodeid, location)
   - pytest_runtest_logreport(report)
   - pytest_assertrepr_compare(config, op, left, right)
   - pytest_assertion_pass(item, lineno, orig, expl)

Debugging/Interaction hooks

   - pytest_internalerror(excrepr, excinfo)
   - pytest_keyboard_interrupt(excinfo)
   - pytest_exception_interact(node, call, report)
   - pytest_enter_pdb(config, pdb)
   - pytest_leave_pdb(config, pdb)


Êèê‰æõÈÖçÁΩÆÊñá‰ª∂ pytest.ini Á∫¶ÊùüÊµãËØïË°å‰∏∫Ôºö

```yaml
[pytest]
minversion = 3.10
norecursedirs = test_* extra_*
xfail_strict = True
addopts =
    # show summary of tests
    -ra
    # capture only Python print and C++ py::print, but not C output (low-level Python errors)
    --capture=sys
    # Show local info when a failure occurs
    --showlocals
log_cli_level = info
filterwarnings =
    # make warnings into errors but ignore certain third-party extension issues
    error
    # somehow, some DeprecationWarnings do not get turned into errors
    always::DeprecationWarning
    # importing scipy submodules on some version of Python
    ignore::ImportWarning
    # bogus numpy ABI warning (see numpy/#432)
    ignore:.*numpy.dtype size changed.*:RuntimeWarning
    ignore:.*numpy.ufunc size changed.*:RuntimeWarning

testpaths = "C:/Python310/pybind11/tests"
```

- *addopts*     Add the specified OPTS to the set of command line arguments
- *cache_dir*   Sets a directory where stores content of cache plugin.
- *console_output_style* Sets the console output style while running tests:
    - *classic*: classic pytest output.
    - *progress*: like classic pytest output, but with a progress indicator.
    - *count*: like progress, but shows progress as the number of tests completed instead of a percent.
- *doctest_encoding* Default encoding to use to decode text files with docstrings.
- *doctest_optionflags* One or more doctest flag names from the standard doctest module.
- *empty_parameter_set_mark* Allows to pick the action for empty parametersets in parameterization
    - *skip* skips tests with an empty parameterset (default)
    - *xfail* marks tests with an empty parameterset as xfail(run=False)
    - *fail_at_collect* raises an exception if parametrize collects an empty parameter set
- *python_classes* One or more name prefixes or glob-style patterns determining which classes are considered for test collection.
- *python_files* One or more Glob-style file patterns determining which python files are considered as test modules. 
- *python_functions* One or more name prefixes or glob-patterns determining which test functions and methods are considered tests.
- *pythonpath* Sets list of directories that should be added to the python search path.
- *testpaths* Sets list of directories that should be searched for tests when no specific directories.
- *norecursedirs* Set the directory basename patterns to avoid when recursing for test discovery. 
- *minversion* Specifies a minimal pytest version required for running tests.
- *log_file* Sets a file name relative to the pytest.ini file where log messages should be written to.
- *log_file_date_format* Sets a time.strftime()-compatible string that will be used when formatting dates for the logging file.
- *log_file_format* Sets a logging-compatible string used to format logging messages redirected to the logging file.
- *log_file_level* Sets the minimum log message level that should be captured for the logging file. 
- *log_format* Sets a logging-compatible string used to format captured logging messages.
- *log_level* Sets the minimum log message level that should be captured for logging capture. 


## ==‚ö° unit test

Python Ëá™Â∏¶ÁöÑ unittest ÂçïÂÖÉÊµãËØïÊ°ÜÊû∂Â∞±Êúâ‰∫ÜËá™Â∑±ÁöÑÊñ≠Ë®ÄÊñπÊ≥ï self.assertXXX()ÔºåËÄå‰∏î‰∏çÊé®Ëçê‰ΩøÁî® assert XXX ËØ≠Âè•„ÄÇ

    import unittest

    class TestStringMethods(unittest.TestCase):

        def test_upper(self):
            self.assertEqual('foo'.upper(), 'FoO')

    if __name__ == '__main__':
        unittest.main()
        
    """
    Failure
    Expected :'FOO'
    Actual   :'FoO'

    Traceback (most recent call last):
      File "assertion_in_python.py", line 6, in test_upper
        self.assertEqual('foo'.upper(), 'FoO')
    AssertionError: 'FOO' != 'FoO'
    """

## ==‚ö° assertpy

Python Êñ≠Ë®ÄËøò‰∏çÂ§üÂ•ΩÔºåÊâÄ‰ª•Â§ßÂÆ∂ÈÉΩ‰∫âÁõ∏ÂèëÊòéËá™Â∑±ÁöÑ assert ÂåÖÔºåÊé®Ëçê assertpyÔºåÂÆÉÂºÇÂ∏∏Âº∫Â§ßËÄå‰∏îÂ•ΩËØÑÂ¶ÇÊΩÆ„ÄÇ

    pip install assertpy

Áúã‰æãÂ≠ê:

    from assertpy import assert_that

    def test_something():
        assert_that(1 + 2).is_equal_to(3)
        assert_that('foobar')\
            .is_length(6)\
            .starts_with('foo')\
            .ends_with('bar')
        assert_that(['a', 'b', 'c'])\
            .contains('a')\
            .does_not_contain('x')

‰ªéÂÆÉÁöÑgithub ‰∏ªÈ°µ ÊñáÊ°£‰∏ä‰Ω†‰ºöÂèëÁé∞ÂÆÉÊîØÊåÅ‰∫ÜÂá†‰πé‰Ω†ËÉΩÊÉ≥Âà∞ÁöÑÊâÄÊúâÊµãËØïÂú∫ÊôØÔºåÂåÖÊã¨‰ΩÜ‰∏çÈôê‰∫é‰ª•‰∏ãÂàóË°®„ÄÇ

- Strings
- Numbers
- Lists
- Tuples
- Dicts
- Sets
- Booleans
- Dates
- Files
- Objects

ËÄå‰∏îÂÆÉÁöÑÊñ≠Ë®Ä‰ø°ÊÅØÁÆÄÊ¥ÅÊòé‰∫ÜÔºå‰∏çÂ§ö‰∏çÂ∞ë„ÄÇ

    Expected <foo> to be of length <4>, but was <3>.
    Expected <foo> to be empty string, but was not.
    Expected <False>, but was not.
    Expected <foo> to contain only digits, but did not.
    Expected <123> to contain only alphabetic chars, but did not.
    Expected <foo> to contain only uppercase chars, but did not.
    Expected <FOO> to contain only lowercase chars, but did not.
    Expected <foo> to be equal to <bar>, but was not.
    Expected <foo> to be not equal to <foo>, but was.
    Expected <foo> to be case-insensitive equal to <BAR>, but was not.

Âú®ÂèëÁé∞assertpy‰πãÂâçÊàë‰πüÊÉ≥ÂÜô‰∏Ä‰∏™Á±ª‰ººÁöÑÂåÖÔºåÂ∞ΩÂèØËÉΩÈÄöÁî®‰∏Ä‰∫õ„ÄÇ‰ΩÜÊòØÁé∞Âú®ÔºåÊàë‰∏∫ÊØõË¶ÅÈáçÊñ∞ÂéªÈÄ†ËΩÆÂ≠êÔºüÂÆåÂÖ®Ê≤°ÂøÖË¶ÅÔºÅ

Êñ≠Ë®ÄÂú®ËΩØ‰ª∂Á≥ªÁªü‰∏≠ÊúâÈùûÂ∏∏ÈáçË¶ÅÁöÑ‰ΩúÁî®ÔºåÂÜôÁöÑÂ•ΩÂèØ‰ª•ËÆ©‰Ω†ÁöÑÁ≥ªÁªüÊõ¥Á®≥ÂÆöÔºå‰πüÂèØ‰ª•ËÆ©‰Ω†ÊúâÊõ¥Â§öÈù¢ÂØπÔºàÂ•≥ÔºâÂØπË±°ÁöÑÊó∂Èó¥ÔºåËÄå‰∏çÊòØÂú®Ë∞ÉËØï‰ª£Á†Å„ÄÇ

Python‰∏≠ÈªòËÆ§ÁöÑÊñ≠Ë®ÄËØ≠Âè•ÂÖ∂ÂÆûËøòÊúâ‰∏Ä‰∏™‰ΩúÁî®ÔºåÂ¶ÇÊûú‰Ω†ÂÜô‰∫Ü‰∏Ä‰∏™Á±ªÂûãÁõ∏ÂÖ≥ÁöÑÊñ≠Ë®ÄÔºåIDE‰ºöÊääËøô‰∏™ÂØπË±°ÂΩìÊàêËøôÁßçÁ±ªÂûãÔºåËøôÊó∂ÂÄôÊô∫ËÉΩÊèêÁ§∫Â∞±ÊúâÂ¶ÇÁ•ûÂä©„ÄÇ

Ë¶Å‰∏çË¶ÅÊääÂÜÖÁΩÆÁöÑÊñ≠Ë®ÄËØ≠Âè•Êç¢ÊàêÂèØËØªÊÄßÊõ¥Â•ΩÂäüËÉΩÊõ¥Âº∫Â§ßÁöÑÁ¨¨‰∏âÊñπÊñ≠Ë®ÄÔºåÂÆåÂÖ®ÂèñÂÜ≥‰∫éÂÆûÈôÖÊÉÖÂÜµ„ÄÇÊØîÂ¶Ç‰Ω†ÁúüÁöÑÈúÄË¶ÅÈ™åËØÅÊüê‰∏™‰∏úË•øÂπ∂‰∏îÂæàÂÖ≥ÂøÉÈ™åËØÅÁªìÊûúÔºåÈÇ£‰πàÂøÖÈ°ª‰∏çËÉΩÁî®ÁÆÄÂçïÁöÑassertÔºõÂ¶ÇÊûú‰Ω†Âè™ÊòØÊãÖÂøÉÊüê‰∏™ÁÇπÂèØËÉΩÊúâÂùëÊàñËÄÖËÆ©IDEËÆ§ËØÜÊüê‰∏™ÂØπË±°ÔºåÁî®ÂÜÖÁΩÆÁöÑassertÊó¢ÁÆÄÂçïÂèàÊñπ‰æø„ÄÇ

ÊâÄ‰ª•ËØ¥ÔºåÈ°πÁõÆÁªèÈ™åËøòÊòØËõÆÈáçË¶ÅÁöÑ„ÄÇ


## ==‚ö° ptest

ptest ‰∏≠ÁöÑÊñ≠Ë®ÄÂèØËØªÊÄßÂæàÂ•ΩÔºåËÄå‰∏îÈÄöËøáIDEÁöÑÊô∫ËÉΩÊèêÁ§∫‰Ω†ËÉΩËΩªÊùæÂÆåÊàêÂêÑÁßçÊñ≠Ë®ÄËØ≠Âè•„ÄÇ

    from ptest.decorator import *
    from ptest.assertion import *

    @TestClass()
    class TestCases:
        @Test()
        def test1(self):
            actual = 'foo'
            expected = 'bar'
            assert_that(expected).is_equal_to(actual)

    """
    Start to run following 1 tests:
    ------------------------------
    ...
    [demo.assertion_in_python.TestCases.test1@Test] Failed with following message:
    ...
    AssertionError: Unexpectedly that the str <bar> is not equal to str <foo>.
    """

## ==‚ö° type cast

Êï∞ÂÄº„ÄÅÂ≠óÁ¨¶‰∏≤Âü∫Êú¨Á±ªÂûãËΩ¨Êç¢Ê∂âÂèä‰ª•‰∏ãÊñπÂºèÔºö

- Êï∞ÂÄºËΩ¨Êç¢Â≠óÁ¨¶‰∏≤ÔºåÁõÆÁöÑÊòØÂ∞ÜÊï∞ÂÄºËΩ¨Êç¢‰∏∫ b'\x30\x39' ËøôÂå∫Èó¥ÁöÑ 10 ‰∏™Êï∞Â≠óÂ≠óÁ¨¶Ë°®Á§∫ÂÜÖÁΩÆÂáΩÊï∞ hex() oct() bin() Êàñ str() ÂèØ‰ª•Â§ÑÁêÜÔºõ
- Â≠óÁ¨¶‰∏≤ËΩ¨Êç¢Êï∞ÂÄºÔºå‰∏ÄÊòØÂ≠óÈù¢‰∏≠ÊòØÊï∞Â≠óÂ≠óÁ¨¶ÁªÑÊàêÁöÑÂ≠óÁ¨¶‰∏≤Ëß£Êûê‰∏∫Êï∞ÂÄºÔºå‰ΩøÁî®ÂÜÖÁΩÆÁöÑ int() float() ÂáΩÊï∞Â§ÑÁêÜÔºõÂè¶‰∏ÄÁßçÊòØÂ∞ÜÂ≠óÁ¨¶ÂΩì‰ΩúÊï∞ÂÄºËøõË°åÂ§ÑÁêÜÔºõ

Binary Êï∞ÂÄºÊï∞ÊçÆËΩ¨Êç¢ËøòÈúÄË¶Å Binary Data Services ¬ª struct ‚Äî Interpret bytes as packed binary data

Ê†áÂáÜÂ∫ì‰∏≠ËøòÊúâ‰∏Ä‰∏™Â§ÑÁêÜ‰∫åËøõÂà∂Êï∞ÊçÆÁöÑÊ®°Âùó `codecs` (encoders and decoders)ÔºåÁºñÁ†Å‰∏éËß£Á†Å„ÄÇ


## ===üëâ cast to int

ÂèØ‰ª•Áî± float„ÄÅstr„ÄÅbytes ËΩ¨Êç¢ÔºåÂÖ∂‰ªñÁ±ªÂûãÂùá‰∏çÊîØÊåÅ„ÄÇ

float -> int ‰ºöÂéªÊéâÂ∞èÊï∞ÁÇπÂèäÂêéÈù¢ÁöÑÊï∞ÂÄºÔºå‰ªÖ‰øùÁïôÊï¥Êï∞ÈÉ®ÂàÜ„ÄÇ

    int(-12.94)     # -12

str -> int Â¶ÇÊûúÂ≠óÁ¨¶‰∏≤‰∏≠ÊúâÊï∞Â≠ó(0-9)ÂíåÊ≠£Ë¥üÂè∑(+/-)‰ª•Â§ñÁöÑÂ≠óÁ¨¶ÔºåÂ∞±‰ºöÊä•Èîô„ÄÇ

    int('1209')     # 1209
    int('-12')      # -12
    int('+1008')    # 1008

bytes -> int Â¶ÇÊûú bytes ‰∏≠ÊúâÊï∞Â≠ó(0-9)ÂíåÊ≠£Ë¥üÂè∑(+/-)‰ª•Â§ñÁöÑÂ≠óÁ¨¶ÔºåÂ∞±‰ºöÊä•Èîô„ÄÇ

    int(b'1209')     # 1209
    int(b'-12')      # -12
    int(b'+1008')    # 1008

Â≠óÈù¢ÈáèÊï∞Â≠óÂ≠óÁ¨¶‰∏≤ binary Êï∞ÊçÆÂèØ‰ª•‰ΩøÁî®ËøôÁßçÊñπÊ≥ïËß£ÊûêÂæóÂà∞Êï∞ÂÄº„ÄÇ


## ===üëâ cast to float

ÊîØÊåÅ int„ÄÅstr„ÄÅbytes ËΩ¨Êç¢ÔºåÂÖ∂‰ªñÁ±ªÂûãÂùá‰∏çÊîØÊåÅ„ÄÇ

int -> float Êó∂Ôºå‰ºöËá™Âä®ÁªôÊ∑ªÂä†‰∏Ä‰ΩçÂ∞èÊï∞„ÄÇ

    float(-1209)     # -1209.0

str -> float Â¶ÇÊûúÂ≠óÁ¨¶‰∏≤Âê´ÊúâÊ≠£Ë¥üÂè∑(+/-)„ÄÅÊï∞Â≠ó(0-9)ÂíåÂ∞èÊï∞ÁÇπ(.)‰ª•Â§ñÁöÑÂ≠óÁ¨¶ÔºåÂàô‰∏çÊîØÊåÅËΩ¨Êç¢„ÄÇ

    float('-1209')          # -1209.0
    float('-0120.29023')    # -120.29023

bytes -> float Â¶ÇÊûú bytes ‰∏≠Âê´ÊúâÊ≠£Ë¥üÂè∑(+/-)„ÄÅÊï∞Â≠ó(0-9)ÂíåÂ∞èÊï∞ÁÇπ(.)‰ª•Â§ñÁöÑÂ≠óÁ¨¶ÔºåÂàô‰∏çÊîØÊåÅËΩ¨Êç¢„ÄÇ

    float(b'-1209')         # -1209.0
    float(b'-0120.29023')   # -120.29023

## ===üëâ cast to complex

‰ªÖÊîØÊåÅ int„ÄÅfloat„ÄÅstr ËΩ¨Êç¢„ÄÇ

int -> complex Êó∂Ôºå‰ºöËá™Âä®Ê∑ªÂä†ËôöÊï∞ÈÉ®ÂàÜÂπ∂‰ª•0jË°®Á§∫„ÄÇ

    complex(12)         # (12+0j)

float -> complex Êó∂Ôºå‰ºöËá™Âä®Ê∑ªÂä†ËôöÊï∞ÈÉ®ÂàÜÂπ∂‰ª•0jË°®Á§∫„ÄÇ

    complex(-12.09)     # (-12.09+0j)

str -> complex Êó∂ÔºåÂ¶ÇÊûúËÉΩËΩ¨Êç¢Êàê int Êàñ floatÔºåÂàô‰ºöËΩ¨Êç¢ÂêéÂÜçËΩ¨‰∏∫ complex„ÄÇÂ¶ÇÊûúÂ≠óÁ¨¶‰∏≤ÂÆåÂÖ®Á¨¶Âêà complex Ë°®ËææÂºèËßÑÂàôÔºå‰πüÂèØ‰ª•ËΩ¨Êç¢‰∏∫ complex Á±ªÂûãÂÄº„ÄÇ

    complex('-12.09')       # (-12.09+0j)
    complex('-12.0')        # (-12+0j)ÔºåÂéªÈô§‰∫ÜÂ∞èÊï∞ÈÉ®ÂàÜ
    complex('-12')          # (-12+0j)
    complex('-12+9j')       # (-12+9j)
    complex('(-12+9j)')     # (-12+9j)
    complex('-12.0-2.0j')   # (-12-2j)ÔºåÂéªÈô§‰∫ÜÂ∞èÊï∞ÈÉ®ÂàÜ
    complex('-12.0-2.09j')  # (-12-2.09j)
    complex(b'12')          # Êä•ÈîôÔºå‰∏çÊîØÊåÅ bytes ËΩ¨Êç¢‰∏∫ complex
    complex('12 + 9j')      # Êä•ÈîôÔºåÂä†Âè∑‰∏§‰æß‰∏çÂèØÊúâÁ©∫Ê†º

## ===üëâ cast to bytes

string -> bytes

    str.encode("ABC")
    bytes("ABC", encoding='utf8')

## ===üëâ cast to str

ÂèØ‰ª•ÈÄöËøá str() ÂáΩÊï∞Â∞Ü‰ªªÊÑèÂØπË±°ËΩ¨Êç¢‰∏∫Â≠óÁ¨¶‰∏≤„ÄÇ

int -> str ‰ºöÁõ¥Êé•ÂÆåÂÖ®ËΩ¨Êç¢„ÄÇ

    str(12)     # 12

float -> str ‰ºöÂéªÈô§Êú´‰Ωç‰∏∫ 0 ÁöÑÂ∞èÊï∞ÈÉ®ÂàÜ„ÄÇ

    str(-12.90)     # -12.9

complex -> str ‰ºöÂÖàÂ∞ÜÂÄºËΩ¨Âåñ‰∏∫Ê†áÂáÜÁöÑ complex Ë°®ËææÂºèÔºåÁÑ∂ÂêéÂÜçËΩ¨Êç¢‰∏∫Â≠óÁ¨¶‰∏≤„ÄÇ

    str(complex(12 + 9j))   # (12+9j)
    str(complex(12, 9))     # (12+9j)

bytes -> str ÁöÑËΩ¨Êç¢ÊØîËæÉÁâπÊÆäÁÇπÔºåÂú® Python 3.x ‰∏≠ÔºåÂ≠óÁ¨¶‰∏≤ÂíåÂ≠óËäÇ‰∏çÂÜçÊ∑∑Ê∑ÜÔºåËÄåÊòØÂÆåÂÖ®‰∏çÂêåÁöÑÊï∞ÊçÆÁ±ªÂûã„ÄÇ

ËΩ¨Êç¢‰∏∫ÂèØÊâßË°åÁöÑË°®ËææÂºèÂ≠óÁ¨¶‰∏≤Ôºö

    str(b'hello world')        # b'hello world'
    b.decode()

str() ÂáΩÊï∞ÊåáÂÆö encoding ÂèÇÊï∞ÔºåÊàñËÄÖ‰ΩøÁî® bytes.decode() ÊñπÊ≥ïÔºåÂèØ‰ª•‰ΩúÂÆûÈôÖÊï∞ÊçÆÁöÑËΩ¨Êç¢Ôºö

    b'hello world'.decode()                             # hello world
    str(b'hello world', encoding='utf-8')               # hello world
    str(b'\xe4\xb8\xad\xe5\x9b\xbd', encoding='utf-8')  # ‰∏≠ÂõΩ

list -> str ‰ºöÂÖàÂ∞ÜÂÄºÊ†ºÂºèÂåñ‰∏∫Ê†áÂáÜÁöÑ list Ë°®ËææÂºèÔºåÁÑ∂ÂêéÂÜçËΩ¨Êç¢‰∏∫Â≠óÁ¨¶‰∏≤„ÄÇ

    str([])                      # []
    str([1, 2, 3])              # [1, 2, 3]
    ''.join(['a', 'b', 'c'])    # abc

tuple -> str ‰ºöÂÖàÂ∞ÜÂÄºÊ†ºÂºèÂåñ‰∏∫Ê†áÂáÜÁöÑ tuple Ë°®ËææÂºèÔºåÁÑ∂ÂêéÂÜçËΩ¨Êç¢‰∏∫Â≠óÁ¨¶‰∏≤„ÄÇ

    str(())                     # ()
    str((1, 2, 3))              # (1, 2, 3)
    ''.join(('a', 'b', 'c'))    # abc

dict -> str ‰ºöÂÖàÂ∞ÜÂÄºÊ†ºÂºèÂåñ‰∏∫Ê†áÂáÜÁöÑ dict Ë°®ËææÂºèÔºåÁÑ∂ÂêéÂÜçËΩ¨Êç¢‰∏∫Â≠óÁ¨¶‰∏≤„ÄÇ

    str({'name': 'hello', 'age': 18})       # {'name': 'hello', 'age': 18}
    str({})                                 # {}
    ''.join({'name': 'hello', 'age': 18})   # nameage

set -> str ‰ºöÂÖàÂ∞ÜÂÄºÊ†ºÂºèÂåñ‰∏∫Ê†áÂáÜÁöÑ set Ë°®ËææÂºèÔºåÁÑ∂ÂêéÂÜçËΩ¨Êç¢‰∏∫Â≠óÁ¨¶‰∏≤„ÄÇ

    str(set({}))                # set()
    str({1, 2, 3})              # {1, 2, 3}
    ''.join({'a', 'b', 'c'})    # abc

ËΩ¨Êç¢ÂÜÖÁΩÆÂØπË±°Ôºö

    str(int)                # <class 'int'>ÔºåËΩ¨Êç¢ÂÜÖÁΩÆÁ±ª
    str(hex)                # <built-in function hex>ÔºåËΩ¨Êç¢ÂÜÖÁΩÆÂáΩÊï∞

ËΩ¨Êç¢Á±ªÂÆû‰æãÔºö

    class Hello:
        pass


    obj = Hello()

    print(str(obj))

    # <__main__.Hello object at 0x1071c6630>

ËΩ¨Êç¢ÂáΩÊï∞Ôºö

    def hello():
        pass


    print(str(hello))

    # <function hello at 0x104d5a048>

bytes ‰ªÖÊîØÊåÅ str ËΩ¨Êç¢‰∏∫ bytes Á±ªÂûã„ÄÇ

    '‰∏≠ÂõΩ'.encode()                   # b'\xe4\xb8\xad\xe5\x9b\xbd'

    bytes('‰∏≠ÂõΩ', encoding='utf-8')   # b'\xe4\xb8\xad\xe5\x9b\xbd'

## ===üëâ cast to list

ÊîØÊåÅËΩ¨Êç¢‰∏∫ list ÁöÑÁ±ªÂûãÔºåÂè™ËÉΩÊòØÂ∫èÂàóÔºåÊØîÂ¶ÇÔºöstr„ÄÅtuple„ÄÅdict„ÄÅsetÁ≠â„ÄÇ

str -> list

    list('123abc')      # ['1', '2', '3', 'a', 'b', 'c']

bytes -> list ËΩ¨Êç¢‰ºöÂèñÊØè‰∏™Â≠óËäÇÁöÑ ASCII ÂçÅËøõÂà∂ÂÄºÂπ∂ÁªÑÂêàÊàêÂàóË°®

    list(b'hello')      # [104, 101, 108, 108, 111]

tuple -> list ËΩ¨Êç¢ÊØîËæÉÁÆÄÂçï„ÄÇ

    list((1, 2, 3))     # [1, 2, 3]

dict -> list Â≠óÂÖ∏ËΩ¨Êç¢ÂàóË°®‰ºöÂèñÈîÆÂêç‰Ωú‰∏∫ÂàóË°®ÁöÑÂÄº„ÄÇ

    list({'name': 'hello', 'age': 18})  # ['name', 'age']

set -> list ÈõÜÂêàËΩ¨Êç¢ÂàóË°®‰ºöÂÖàÂéªÈáç‰∏∫Ê†áÂáÜÁöÑÈõÜÂêàÊï∞ÂÄºÔºåÁÑ∂ÂêéÂÜçËΩ¨Êç¢„ÄÇ

    list({1, 2, 3, 3, 2, 1})    # [1, 2, 3]

## ===üëâ cast to tuple

‰∏éÂàóË°®‰∏ÄÊ†∑ÔºåÊîØÊåÅËΩ¨Êç¢‰∏∫ tuple ÁöÑÁ±ªÂûãÔºåÂè™ËÉΩÊòØÂ∫èÂàó„ÄÇ

str -> tuple

    tuple('‰∏≠ÂõΩ‰∫∫')    # ('‰∏≠', 'ÂõΩ', '‰∫∫')

bytes -> tuple ËΩ¨Êç¢‰ºöÂèñÊØè‰∏™Â≠óËäÇÁöÑ ASCII ÂçÅËøõÂà∂ÂÄºÂπ∂ÁªÑÂêàÊàêÂàóË°®„ÄÇ

    tuple(b'hello')     # (104, 101, 108, 108, 111)

list -> tuple

    tuple([1, 2, 3])    # (1, 2, 3)

dict -> tuple

    tuple({'name': 'hello', 'age': 18})     # ('name', 'age')

set -> tuple

    tuple({1, 2, 3, 3, 2, 1})       # (1, 2, 3)

## ===üëâ cast to dict

str -> dict ‰ΩøÁî® json Ê®°ÂùóËΩ¨Êç¢ JSON Â≠óÁ¨¶‰∏≤‰∏∫Â≠óÂÖ∏Êó∂ÔºåÈúÄË¶ÅÊ±ÇÂÆåÂÖ®Á¨¶Âêà JSON ËßÑËåÉÔºåÂ∞§ÂÖ∂Ê≥®ÊÑèÈîÆÂíåÂÄºÂè™ËÉΩÁî±ÂçïÂºïÂè∑ÂåÖË£πÔºåÂê¶Âàô‰ºöÊä•Èîô„ÄÇ

    import json

    user_info = '{"name": "john", "gender": "male", "age": 28}'
    print(json.loads(user_info))

    # {'name': 'john', 'gender': 'male', 'age': 28}

‰ΩøÁî® eval ÂáΩÊï∞ÔºåÂõ†‰∏∫ eval ÂáΩÊï∞ËÉΩÊâßË°å‰ªª‰ΩïÁ¨¶ÂêàËØ≠Ê≥ïÁöÑË°®ËææÂºèÂ≠óÁ¨¶‰∏≤ÔºåÊâÄ‰ª•Â≠òÂú®‰∏•ÈáçÁöÑÂÆâÂÖ®ÈóÆÈ¢òÔºå‰∏çÂª∫ËÆÆ„ÄÇ

    user_info = "{'name': 'john', 'gender': 'male', 'age': 28}"
    print(eval(user_info))

    # {'name': 'john', 'gender': 'male', 'age': 28}

‰ΩøÁî® ast.literal_eval ÊñπÊ≥ïËøõË°åËΩ¨Êç¢Êó¢‰∏çÂ≠òÂú®‰ΩøÁî® json ËøõË°åËΩ¨Êç¢ÁöÑÈóÆÈ¢òÔºå‰πü‰∏çÂ≠òÂú®‰ΩøÁî® eval ËøõË°åËΩ¨Êç¢ÁöÑ ÂÆâÂÖ®ÊÄßÈóÆÈ¢òÔºåÂõ†Ê≠§Êé®Ëçê‰ΩøÁî® ast.literal_eval„ÄÇ

    import ast

    user_info = "{'name': 'john', 'gender': 'male', 'age': 28}"
    user_dict = ast.literal_eval(user_info)
    print(user_dict)

    # {'name': 'john', 'gender': 'male', 'age': 28}

list -> dict ÈÄöËøá zip Â∞Ü 2 ‰∏™ÂàóË°®Êò†Â∞Ñ‰∏∫Â≠óÂÖ∏Ôºö

    list1 = [1, 2, 3, 4]
    list2 = [1, 2, 3]
    print(dict(zip(list1, list2)))

    # {1: 1, 2: 2, 3: 3}

Â∞ÜÂµåÂ•óÁöÑÂàóË°®ËΩ¨Êç¢‰∏∫Â≠óÂÖ∏Ôºö

    li = [
        [1, 111],
        [2, 222],
        [3, 333],
    ]

    print(dict(li))

    # {1: 111, 2: 222, 3: 333}

tuple -> dict ÈÄöËøá zip Â∞Ü 2 ‰∏™ÂÖÉÁªÑÊò†Â∞Ñ‰∏∫Â≠óÂÖ∏Ôºö

    tp1 = (1, 2, 3)
    tp2 = (1, 2, 3, 4)

    print(dict(zip(tp1, tp2)))

    # {1: 1, 2: 2, 3: 3}

Â∞ÜÂµåÂ•óÁöÑÂÖÉÁªÑËΩ¨Êç¢‰∏∫Â≠óÂÖ∏Ôºö

    tp = (
        (1, 111),
        (2, 222),
        (3, 333),
    )

    print(dict(tp))

    # {1: 111, 2: 222, 3: 333}

set -> dict ÈÄöËøá zip Â∞Ü 2 ‰∏™ÈõÜÂêàÊò†Â∞Ñ‰∏∫Â≠óÂÖ∏Ôºö

    set1 = {1, 2, 3}
    set2 = {'a', 'b', 'c'}

    print(dict(zip(set1, set2)))

    # {1: 'c', 2: 'a', 3: 'b'}

## ===üëâ cast to set

str -> set ÂÖàÂ∞ÜÂ≠óÁ¨¶ÂàáÂâ≤ÊàêÂÖÉÁªÑÔºåÁÑ∂ÂêéÂÜçÂéªÈáçËΩ¨Êç¢‰∏∫ÈõÜÂêà„ÄÇ

    print(set('hello'))     # {'l', 'o', 'e', 'h'}

bytes -> set ‰ºöÂèñÊØè‰∏™Â≠óËäÇÁöÑ ASCII ÂçÅËøõÂà∂ÂÄºÂπ∂ÁªÑÂêàÊàêÂÖÉÁªÑÔºåÂÜçÂéªÈáç„ÄÇ

    set(b'hello')           # {104, 108, 101, 111}

list -> set ÂÖàÂØπÂàóË°®ÂéªÈáçÔºåÂÜçËΩ¨Êç¢„ÄÇ

    set([1, 2, 3, 2, 1])    # {1, 2, 3}

tuple -> set ÂÖàÂØπÂàóË°®ÂéªÈáçÔºåÂÜçËΩ¨Êç¢„ÄÇ

    set((1, 2, 3, 2, 1))    # {1, 2, 3}

dict -> set ‰ºöÂèñÂ≠óÂÖ∏ÁöÑÈîÆÂêçÁªÑÂêàÊàêÈõÜÂêà„ÄÇ

    set({'name': 'hello', 'age': 18})

    # {'age', 'name'}


## ==‚ö° print

ÊâìÂç∞ÂáΩÊï∞ÔºåËøôÊòØ‰∏Ä‰∏™Â∏∏Áî®ÁöÑËæìÂá∫ÂáΩÊï∞„ÄÇ

print() ÂáΩÊï∞Ëá™Ë∫´ÊúâÈôêÂà∂ÔºåPython ÈªòËÆ§ÁºñÁ†ÅÊòØ gbkÔºå‰∏çËÉΩÂÆåÂÖ®ÊâìÂç∞ÊâÄÊúâÁöÑ UTF-8 Â≠óÁ¨¶„ÄÇ

    print('\u00bb')

    UnicodeEncodeError: 'gbk' codec can't encode character '\xbb' in position 0: illegal multibyte sequence

‰øÆÊîπÈªòËÆ§ÁºñÁ†Å‰∏∫ utf8Ôºågb18030Ôºågbk Á≠âÔºö

    import io
    import sys
    import urllib.request
    sys.stdout = io.TextIOWrapper(sys.stdout.buffer,encoding='utf8')
    res = urllib.request.urlopen('http://www.baidu.com')
    htmlBytes=res.read()
    print(htmlBytes.decode('utf-8'))


## ==‚ö° sys.argv & CLI
- [OptParse ÂàÜÊûêÂëΩ‰ª§Ë°åËæìÂÖ•Ê®°Âùó](https://www.jianshu.com/p/bec089061742)

Python Êèê‰æõ‰∫Ü getopt Ê®°ÂùóÊù•Ëé∑ÂèñÂëΩ‰ª§Ë°åÂèÇÊï∞ Command-Line Arguments„ÄÇ‰πüÂèØ‰ª•Áî® sys.argv Êù•Ëé∑ÂèñÂëΩ‰ª§Ë°åÂèÇÊï∞Ôºö

- sys.argv ÊòØÂëΩ‰ª§Ë°åÂèÇÊï∞ÂàóË°®„ÄÇ
- len(sys.argv) ÊòØÂëΩ‰ª§Ë°åÂèÇÊï∞‰∏™Êï∞„ÄÇ

Ê≥®Ôºösys.argv[0] Ë°®Á§∫ËÑöÊú¨ÂêçÔºåÂåÖÊã¨ÈÄöËøá python -m module ÊâßË°åÊ®°Âùó‰ª£Á†ÅÊó∂‰πüÊòØÔºåÂ§¥‰∏Ä‰∏™ÂèÇÊï∞ÊòØÂÖ•Âè£Êñá‰ª∂„ÄÇ

    #!/usr/bin/python
    # -*- coding: UTF-8 -*-

    import sys

    print 'argc:', len(sys.argv)
    print 'argv:', str(sys.argv)

    $ python test.py arg1 arg2 arg3
    argc: 4
    argv: ['test.py', 'arg1', 'arg2', 'arg3']

getopt Ê®°ÂùóÊòØ‰∏ìÈó®Â§ÑÁêÜÂëΩ‰ª§Ë°åÂèÇÊï∞ÁöÑÊ®°ÂùóÔºåÁî®‰∫éËé∑ÂèñÂëΩ‰ª§Ë°åÈÄâÈ°πÂíåÂèÇÊï∞Ôºå‰πüÂ∞±ÊòØ sys.argv„ÄÇÂëΩ‰ª§Ë°åÈÄâÈ°π‰ΩøÂæóÁ®ãÂ∫èÁöÑÂèÇÊï∞Êõ¥Âä†ÁÅµÊ¥ª„ÄÇÊîØÊåÅÁü≠ÈÄâÈ°πÊ®°ÂºèÔºà-ÔºâÂíåÈïøÈÄâÈ°πÊ®°ÂºèÔºà--Ôºâ„ÄÇ

ËØ•Ê®°ÂùóÊèê‰æõ‰∫Ü‰∏§‰∏™ÊñπÊ≥ïÂèä‰∏Ä‰∏™ÂºÇÂ∏∏Â§ÑÁêÜÊù•Ëß£ÊûêÂëΩ‰ª§Ë°åÂèÇÊï∞„ÄÇ

    getopt.getopt(args, options[, long_options])

ÊñπÊ≥ïÂèÇÊï∞ËØ¥ÊòéÔºö

`args` Ë¶ÅËß£ÊûêÁöÑÂëΩ‰ª§Ë°åÂèÇÊï∞ÂàóË°®„ÄÇ
`options` ‰ª•Â≠óÁ¨¶‰∏≤ÁöÑÊ†ºÂºèÂÆö‰πâÔºåoptions ÂêéÁöÑÂÜíÂè∑ : Ë°®Á§∫Â¶ÇÊûúËÆæÁΩÆËØ•ÈÄâÈ°πÔºåÂøÖÈ°ªÊúâÈôÑÂä†ÁöÑÂèÇÊï∞ÔºåÂê¶ÂàôÂ∞±‰∏çÈôÑÂä†ÂèÇÊï∞„ÄÇ
`long_options` ‰ª•ÂàóË°®ÁöÑÊ†ºÂºèÂÆö‰πâÔºålong_options ÂêéÁöÑÁ≠âÂè∑ = Ë°®Á§∫ËØ•ÈÄâÈ°πÂøÖÈ°ªÊúâÈôÑÂä†ÁöÑÂèÇÊï∞Ôºå‰∏çÂ∏¶ÂÜíÂè∑Ë°®Á§∫ËØ•ÈÄâÈ°π‰∏çÈôÑÂä†ÂèÇÊï∞„ÄÇ

ËØ•ÊñπÊ≥ïËøîÂõûÂÄºÁî±‰∏§‰∏™ÂÖÉÁ¥†ÁªÑÊàê: Á¨¨‰∏Ä‰∏™ÊòØ (option, value) ÂÖÉÁªÑÁöÑÂàóË°®„ÄÇ Á¨¨‰∫å‰∏™ÊòØÂèÇÊï∞ÂàóË°®ÔºåÂåÖÂê´ÈÇ£‰∫õÊ≤°Êúâ - Êàñ -- ÁöÑÂèÇÊï∞„ÄÇ

Âè¶Â§ñ‰∏Ä‰∏™ÊñπÊ≥ïÊòØ getopt.gnu_getopt()„ÄÇ

    Exception getopt.GetoptError

Âú®Ê≤°ÊúâÊâæÂà∞ÂèÇÊï∞ÂàóË°®ÔºåÊàñÈÄâÈ°πÁöÑÈúÄË¶ÅÁöÑÂèÇÊï∞‰∏∫Á©∫Êó∂‰ºöËß¶ÂèëËØ•ÂºÇÂ∏∏„ÄÇ

ÂºÇÂ∏∏ÁöÑÂèÇÊï∞ÊòØ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÔºåË°®Á§∫ÈîôËØØÁöÑÂéüÂõ†„ÄÇÂ±ûÊÄß msg Âíå opt ‰∏∫Áõ∏ÂÖ≥ÈÄâÈ°πÁöÑÈîôËØØ‰ø°ÊÅØ„ÄÇ

    #!/usr/bin/python
    # -*- coding: UTF-8 -*-

    import sys, getopt

    def main(argv):
       inputfile = ''
       outputfile = ''
       try:
          opts, args = getopt.getopt(argv,"hi:o:",["ifile=","ofile="])
       except getopt.GetoptError:
          print ('test.py -i <inputfile> -o <outputfile>')
          sys.exit(2)
       for opt, arg in opts:
          if opt == '-h':
             print ('test.py -i <inputfile> -o <outputfile>')
             sys.exit()
          elif opt in ("-i", "--ifile"):
             inputfile = arg
          elif opt in ("-o", "--ofile"):
             outputfile = arg
       print (' inputfile:', inputfile)
       print ('outputfile:', outputfile)

    if __name__ == "__main__":
       main(sys.argv[1:])


ÊâßË°å‰ª•‰∏ä‰ª£Á†ÅÔºåËæìÂá∫ÁªìÊûú‰∏∫Ôºö

    $ python test.py -h
    usage: test.py -i <inputfile> -o <outputfile>

    $ python test.py -i ifile -o ofile
     inputfile: ifile
    outputfile: ofile




## ==‚ö° type & dir Introspection ÂØπË±°Ëá™ÁúÅ

Ëá™ÁúÅ Introspection Âú®ËÆ°ÁÆóÊú∫ÁºñÁ®ãÈ¢ÜÂüüÈáåÔºåÊòØÊåáÂú®ËøêË°åÊó∂Êù•Âà§Êñ≠‰∏Ä‰∏™ÂØπË±°ÁöÑÁ±ªÂûãÁöÑËÉΩÂäõ„ÄÇÂÆÉÊòØ Python ‰Ωú‰∏∫Âä®ÊÄÅËß£ÊûêÂûãËØ≠Ë®ÄÁöÑÂº∫È°π‰πã‰∏ÄÔºåPython ‰∏≠ÊâÄÊúâ‰∏ÄÂàáÈÉΩÊòØ‰∏Ä‰∏™ÂØπË±°ÔºåËÄå‰∏îÊàë‰ª¨ÂèØ‰ª•‰ªîÁªÜÂãòÂØüÈÇ£‰∫õÂØπË±°„ÄÇPython ËøòÂåÖÂê´‰∫ÜËÆ∏Â§öÂÜÖÁΩÆÂáΩÊï∞ÂíåÊ®°ÂùóÊù•Â∏ÆÂä©Â§ÑÁêÜÁ±ªÂûã‰ø°ÊÅØ„ÄÇ

ÂÆÉ dir() ÊòØÁî®‰∫éËá™ÁúÅÁöÑÊúÄÈáçË¶ÅÁöÑÂáΩÊï∞‰πã‰∏ÄÔºåËøîÂõû‰∏Ä‰∏™ÂàóË°®ÔºåÂåÖÂê´‰∫Ü‰∏Ä‰∏™ÂØπË±°ÊâÄÊã•ÊúâÁöÑÂ±ûÊÄßÂíåÊñπÊ≥ïÔºö

    my_list = [1, 2, 3]
    dir(my_list)
    # [
    #  '__add__', '__class__', '__contains__', '__delattr__', '__delitem__',
    #  '__delslice__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__',
    #  '__getitem__', '__getslice__', '__gt__', '__hash__', '__iadd__', '__imul__',
    #  '__init__', '__iter__', '__le__', '__len__', '__lt__', '__mul__', '__ne__',
    #  '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__reversed__', '__rmul__',
    #  '__setattr__', '__setitem__', '__setslice__', '__sizeof__', '__str__',
    #  '__subclasshook__', 'append', 'count', 'extend', 'index', 'insert', 'pop',
    #  'remove', 'reverse', 'sort'
    # ]

    s = "ABC"
    print(dir(s))
    # [
    #  '__add__', '__class__', '__contains__', '__delattr__', '__dir__', '__doc__',
    #  '__eq__', '__format__', '__ge__', '__getattribute__', '__getitem__', 
    #  '__getnewargs__', '__gt__', '__hash__', '__init__', '__init_subclass__',
    #  '__iter__', '__le__', '__len__', '__lt__', '__mod__', '__mul__', '__ne__',
    #  '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__rmod__', '__rmul__',
    #  '__setattr__', '__sizeof__', '__str__', '__subclasshook__', 'capitalize',
    #  'casefold', 'center', 'count', 'encode', 'endswith', 'expandtabs', 'find',
    #  'format', 'format_map', 'index', 'isalnum', 'isalpha', 'isascii', 'isdecimal',
    #  'isdigit', 'isidentifier', 'islower', 'isnumeric', 'isprintable', 'isspace',
    #  'istitle', 'isupper', 'join', 'ljust', 'lower', 'lstrip', 'maketrans', 
    #  'partition', 'replace', 'rfind', 'rindex', 'rjust', 'rpartition', 'rsplit',
    #  'rstrip', 'split', 'splitlines', 'startswith', 'strip', 'swapcase', 'title',
    #  'translate', 'upper', 'zfill'
    # ]

    import queue

    q = queue.LifoQueue()
    q = queue.PriorityQueue()
    print(dir(q))

    # ['__class__', '__delattr__', '__dict__', '__dir__', '__doc__',
    #  '__eq__','__format__', '__ge__', '__getattribute__', '__gt__', '__hash__',
    #  '__init__','__init_subclass__', '__le__', '__lt__', '__module__', '__ne__',
    #  '__new__','__reduce__', '__reduce_ex__', '__repr__', '__setattr__',
    #  '__sizeof__','__str__', '__subclasshook__', '__weakref__', '_get', '_init',
    #  '_put', '_qsize','all_tasks_done', 'empty', 'full', 'get', 'get_nowait',
    #  'join', 'maxsize','mutex', 'not_empty', 'not_full', 'put', 'put_nowait',
    #  'qsize', 'queue','task_done', 'unfinished_tasks'
    # ]

    print(dir())
    # [
    #  '__annotations__', '__builtins__', '__cached__', '__doc__', '__file__', 
    #  '__loader__', '__name__', '__package__', '__spec__', 'q', 'queue'
    # ]


‰∏äÈù¢ÁöÑËá™ÁúÅÁªô‰∫ÜÊàë‰ª¨‰∏Ä‰∏™ÂàóË°®ÂØπË±°ÁöÑÊâÄÊúâÊñπÊ≥ïÁöÑÂêçÂ≠ó„ÄÇÂΩì‰Ω†Ê≤°Ê≥ïÂõûÂøÜËµ∑‰∏Ä‰∏™ÊñπÊ≥ïÁöÑÂêçÂ≠óÔºåËøô‰ºöÈùûÂ∏∏ÊúâÂ∏ÆÂä©„ÄÇÂ¶ÇÊûúÊàë‰ª¨ËøêË°ådir()ËÄå‰∏ç‰º†ÂÖ•ÂèÇÊï∞ÔºåÈÇ£‰πàÂÆÉ‰ºöËøîÂõûÂΩìÂâç‰ΩúÁî®ÂüüÁöÑÊâÄÊúâÂêçÂ≠ó„ÄÇ

type() ÂáΩÊï∞ËøîÂõû‰∏Ä‰∏™ÂØπË±°ÁöÑÁ±ªÂûãÔºö

    print(type(''))
    # Output: <type 'str'>

    print(type([]))
    # Output: <type 'list'>

    print(type({}))
    # Output: <type 'dict'>

    print(type(dict))
    # Output: <type 'type'>

    print(type(3))
    # Output: <type 'int'>

id() ÂáΩÊï∞ËøîÂõû‰ªªÊÑèÂØπË±°ÁöÑÂîØ‰∏ÄIDÔºå‰∏æ‰∏™‰æãÂ≠êÔºö

    print(id("name"))
    # Output: 3042185964152

inspect ÂèçÂ∞ÑÊ®°ÂùóÊèê‰æõ‰∫ÜËÆ∏Â§öÊúâÁî®ÁöÑÂáΩÊï∞Êù•Ëé∑ÂèñÂØπË±°ÁöÑ‰ø°ÊÅØ„ÄÇÊØîÊñπËØ¥Ôºå‰Ω†ÂèØ‰ª•Êü•Áúã‰∏Ä‰∏™ÂØπË±°ÁöÑÊàêÂëòÔºåÂè™ÈúÄËøêË°åÔºö

    import inspect
    print(inspect.getmembers(str))
    # Output: [('__add__', <slot wrapper '__add__' of ... ...

ËøòÊúâÂ•ΩÂ§ö‰∏™ÂÖ∂‰ªñÊñπÊ≥ï‰πüËÉΩÊúâÂä©‰∫éËá™ÁúÅ„ÄÇÂ¶ÇÊûú‰Ω†ÊÑøÊÑèÔºå‰Ω†ÂèØ‰ª•ÂéªÊé¢Á¥¢ÂÆÉ‰ª¨„ÄÇ


    # coding = UTF-8

    import re

    def test(f):
        if "function" == type(f).__name__:
            f("from test")
        elif "str" == type(f).__name__:
             print("Test:", f)

    def main():
        test(test)
        test("for test")

    main()



## ==‚ö° Mutation

Python ‰∏≠ÂèØÂèò mutable ‰∏é‰∏çÂèØÂèò immutable ÁöÑÊï∞ÊçÆÁ±ªÂûãËÆ©Êñ∞ÊâãÂæàÊòØÂ§¥Áóõ„ÄÇÁÆÄÂçïÁöÑËØ¥ÔºåÂèØÂèò mutable ÊÑèÂë≥ÁùÄÂèØ‰ª•Ë¢´ÊîπÂä®ÔºåËÄå‰∏çÂèØÂèò immutable ÁöÑÊÑèÊÄùÊòØÂ∏∏Èáè constant „ÄÇËÄÉËôë‰∏ãËøô‰∏™‰æãÂ≠êÔºö

    foo = ['hi']
    print(foo) # Output: ['hi']
    
    bar = foo
    bar += ['bye']

    print(foo) # Output: ['hi', 'bye']

ÊòØ‰∏çÊòØÊúüÊúõÁúãÂà∞‰∏§Ê¨° foo = ['hi']ÔºüÈúÄË¶ÅËÆ§ËØÜÂØπË±°ÂèØÂèòÊÄß mutabilityÔºåÊØèÂΩì‰Ω†Â∞Ü‰∏Ä‰∏™ÂèòÈáèËµãÂÄº‰∏∫Âè¶‰∏Ä‰∏™ÂèØÂèòÁ±ªÂûãÁöÑÂèòÈáèÊó∂ÔºåÂØπËøô‰∏™Êï∞ÊçÆÁöÑ‰ªªÊÑèÊîπÂä®‰ºöÂêåÊó∂ÂèçÊò†Âà∞Ëøô‰∏§‰∏™ÂèòÈáè‰∏äÂéª„ÄÇÊñ∞ÂèòÈáèÂè™‰∏çËøáÊòØËÄÅÂèòÈáèÁöÑ‰∏Ä‰∏™Âà´ÂêçËÄåÂ∑≤ÔºåËøô‰∏™ÊÉÖÂÜµÂè™ÊòØÈíàÂØπÂèØÂèòÊï∞ÊçÆÁ±ªÂûã„ÄÇ

‰∏ãÈù¢ÁöÑÂáΩÊï∞ÂíåÂèØÂèòÊï∞ÊçÆÁ±ªÂûãËÆ©‰Ω†‰∏Ä‰∏ãÂ∞±ÊòéÁôΩ‰∫ÜÔºö

    def add_to(num, target=[]):
        target.append(num)
        return target
    
    add_to(1) # Output: [1] 
    add_to(2) # Output: [1, 2] 
    add_to(3) # Output: [1, 2, 3]

‰Ω†ÂèØËÉΩÈ¢ÑÊúüÂÆÉË°®Áé∞ÁöÑ‰∏çÊòØËøôÊ†∑Â≠ê„ÄÇ‰Ω†ÂèØËÉΩÂ∏åÊúõÔºåÂΩì‰Ω†Ë∞ÉÁî® add_to Êó∂ÔºåÊúâ‰∏Ä‰∏™Êñ∞ÁöÑÂàóË°®Ë¢´ÂàõÂª∫„ÄÇ

Python ÂáΩÊï∞Ë¢´ÂÆö‰πâÊó∂ÔºåÈªòËÆ§ÂèÇÊï∞Âè™‰ºöËøêÁÆó‰∏ÄÊ¨°ÔºåËÄå‰∏çÊòØÊØèÊ¨°Ë¢´Ë∞ÉÁî®Êó∂ÈÉΩ‰ºöÈáçÊñ∞ËøêÁÆó„ÄÇ‰Ω†Â∫îËØ•Ê∞∏Ëøú‰∏çË¶ÅÂÆö‰πâÂèØÂèòÁ±ªÂûãÁöÑÈªòËÆ§ÂèÇÊï∞ÔºåÈô§Èùû‰Ω†Áü•ÈÅì‰Ω†Ê≠£Âú®ÂÅö‰ªÄ‰πà„ÄÇ‰Ω†Â∫îËØ•ÂÉèËøôÊ†∑ÂÅöÔºö

    def add_to(element, target=None):
        if target is None:
            target = []
        target.append(element)
        return target

Áé∞Âú®ÊØèÂΩì‰Ω†Âú®Ë∞ÉÁî®Ëøô‰∏™ÂáΩÊï∞‰∏ç‰º†ÂÖ•targetÂèÇÊï∞ÁöÑÊó∂ÂÄôÔºå‰∏Ä‰∏™Êñ∞ÁöÑÂàóË°®‰ºöË¢´ÂàõÂª∫„ÄÇ‰∏æ‰∏™‰æãÂ≠êÔºö

    add_to(42) # Output: [42] 
    add_to(42) # Output: [42] 
    add_to(42) # Output: [42]


## ==‚ö° Map Filter Reduce
[PythonËøõÈò∂ - Intermediate Python](https://eastlakeside.gitbook.io/interpy-zh/map_n_filter)

MapÔºåFilter Âíå Reduce ‰∏â‰∏™ÂáΩÊï∞ËÉΩ‰∏∫ÂáΩÊï∞ÂºèÁºñÁ®ãÊèê‰æõ‰æøÂà©„ÄÇÊàë‰ª¨‰ºöÈÄöËøáÂÆû‰æã‰∏Ä‰∏™‰∏Ä‰∏™ËÆ®ËÆ∫Âπ∂ÁêÜËß£ÂÆÉ‰ª¨„ÄÇ

Map‰ºöÂ∞Ü‰∏Ä‰∏™ÂáΩÊï∞Êò†Â∞ÑÂà∞‰∏Ä‰∏™ËæìÂÖ•ÂàóË°®ÁöÑÊâÄÊúâÂÖÉÁ¥†‰∏ä„ÄÇËøôÊòØÂÆÉÁöÑËßÑËåÉÔºö

    map(function_to_apply, list_of_inputs)

Â§ßÂ§öÊï∞Êó∂ÂÄôÔºåÊàë‰ª¨Ë¶ÅÊääÂàóË°®‰∏≠ÊâÄÊúâÂÖÉÁ¥†‰∏Ä‰∏™‰∏™Âú∞‰º†ÈÄíÁªô‰∏Ä‰∏™ÂáΩÊï∞ÔºåÂπ∂Êî∂ÈõÜËæìÂá∫„ÄÇ‰ΩøÁî® Map ÁªìÂêà lambdas Ë°®ËææÂºèÂ∞±ÁÆÄÊ¥ÅÂæóÂ§ö‰∫ÜÔºåÂØπÊØîÂ¶Ç‰∏ãÔºö

    items = [1, 2, 3, 4, 5]
    squared = []
    for i in items:
        squared.append(i**2)

    # Map style
    items = [1, 2, 3, 4, 5]
    squared = list(map(lambda x: x**2, items))

Â§ßÂ§öÊï∞Êó∂ÂÄôÔºåÊàë‰ª¨‰ΩøÁî®ÂåøÂêçÂáΩÊï∞ lambdas Êù•ÈÖçÂêà map, ÊâÄ‰ª•ÊàëÂú®‰∏äÈù¢‰πüÊòØËøô‰πàÂÅöÁöÑ„ÄÇ ‰∏ç‰ªÖÁî®‰∫éÂàóË°®ÁöÑËæìÂÖ•ÔºåÊàë‰ª¨ÁîöËá≥ÂèØ‰ª•Â∞ÜÊª°ÊòØÂáΩÊï∞ÁöÑÂàóË°®‰Ωú‰∏∫ËæìÂÖ•ÔºÅ

    def multiply(x):
            return (x*x)
    def add(x):
            return (x+x)

    funcs = [multiply, add]
    for i in range(5):
        value = map(lambda x: x(i), funcs)
        print(list(value))
        # list ËΩ¨Êç¢ÊòØ‰∏∫‰∫ÜÂÖºÂÆπÊÄßÔºåÂõ†‰∏∫ Python 3 ‰∏≠ map ËøîÂõûËø≠‰ª£Âô®

mapÂÜÖÂª∫ÂáΩÊï∞ÁöÑpythonÂÆûÁé∞Ôºö

    def map(func,seq):  
        mapped_seq = []  
        for eachItem in seq:  
            mapped_seq.append(func(eachItem))  
        return mapped_seq  

È°æÂêçÊÄù‰πâÔºåfilter ËøáÊª§ÂàóË°®‰∏≠ÁöÑÂÖÉÁ¥†ÔºåÂπ∂‰∏îËøîÂõû‰∏Ä‰∏™Áî±ÊâÄÊúâÁ¨¶ÂêàË¶ÅÊ±ÇÁöÑÂÖÉÁ¥†ÊâÄÊûÑÊàêÁöÑÂàóË°®ÔºåÁ¨¶ÂêàË¶ÅÊ±ÇÂç≥ÂáΩÊï∞Êò†Â∞ÑÂà∞ËØ•ÂÖÉÁ¥†Êó∂ËøîÂõûÂÄº‰∏∫ True. ËøôÈáåÊòØ‰∏Ä‰∏™ÁÆÄÁü≠ÁöÑ‰æãÂ≠êÔºö

    number_list = range(-5, 5)
    less_than_zero = filter(lambda x: x < 0, number_list)
    print(list(less_than_zero)) # [-5, -4, -3, -2, -1]
    # list ËΩ¨Êç¢ÊòØ‰∏∫‰∫ÜÂÖºÂÆπÊÄßÔºåÂõ†‰∏∫ Python 3 ‰∏≠ filter ËøîÂõûËø≠‰ª£Âô®


Ëøô‰∏™ filter Á±ª‰ºº‰∫é‰∏Ä‰∏™ for Âæ™ÁéØÔºå‰ΩÜÂÆÉÊòØ‰∏Ä‰∏™ÂÜÖÁΩÆÂáΩÊï∞ÔºåÂπ∂‰∏îÊõ¥Âø´„ÄÇÂ§ßÈÉ®ÂàÜÊÉÖÂÜµ‰∏ãÊé®ÂØºÂºèÁöÑÂèØËØªÊÄßÊõ¥Â•Ω„ÄÇ

filter ÂÜÖÂª∫ÂáΩÊï∞ÁöÑÂÆûÁé∞Ôºö

    def filter(bool_func,seq):  
        filtered_seq = []  
        for eachItem in seq:  
            if bool_func(eachItem):  
                filtered_seq.append(eachItem)  
        return filtered_seq  

reduce(func,seq[,init]) ‰∏∫‰∫åÂÖÉÂáΩÊï∞ÔºåÂ∞Ü func ‰ΩúÁî®‰∫é seq Â∫èÂàóÁöÑÂÖÉÁ¥†ÔºåÊØèÊ¨°Êê∫Â∏¶ÂÖàÂâçÁöÑÁªìÊûú‰ª•Âèä‰∏ã‰∏Ä‰∏™Â∫èÂàóÁöÑÂÖÉÁ¥†ÔºåÊúÄÂêéËøîÂõûÂÄºÂáèÂ∞ëÂ∫èÂàó‰∏∫‰∏Ä‰∏™Âçï‰∏ÄÁöÑËøîÂõûÂÄºÔºöÂ¶ÇÊûúÂàùÂßãÂÄº init ÁªôÂÆöÔºåÁ¨¨‰∏Ä‰∏™ÊØîËæÉ‰ºöÊòØinitÂíåÁ¨¨‰∏Ä‰∏™Â∫èÂàóÂÖÉÁ¥†ËÄå‰∏çÊòØÂ∫èÂàóÁöÑÂ§¥‰∏§‰∏™ÂÖÉÁ¥†„ÄÇ

ÂΩìÈúÄË¶ÅÂØπ‰∏Ä‰∏™ÂàóË°®ËøõË°å‰∏Ä‰∫õËÆ°ÁÆóÂπ∂ËøîÂõûÁªìÊûúÊó∂ÔºåReduce ÊòØ‰∏™ÈùûÂ∏∏ÊúâÁî®ÁöÑÂáΩÊï∞„ÄÇÂ¶ÇÈúÄË¶ÅËÆ°ÁÆó‰∏Ä‰∏™Êï¥Êï∞ÂàóË°®ÁöÑ‰πòÁßØÊó∂Ôºö

    from functools import reduce
    product = reduce( (lambda x, y: x * y), [1, 2, 3, 4] )
    print(product) # 24

reduce ÁöÑÂÆûÁé∞Ôºö

    def reduce(bin_func,seq,initial=None):  
        lseq = list(seq)  
        if initial is None:  
            res = lseq.pop(0)  
        else:  
            res = initial  
        for eachItem in lseq:  
            res = bin_func(res,eachItem)  
        return res  


## ==‚ö° file process tips
- https://github.com/piglei/one-python-craftsman/blob/master/zh_CN/11-three-tips-on-writing-file-related-codes.md

‰ΩøÁî® with ËØ≠Âè•Âíå open ÂáΩÊï∞ÈÖçÂêàËØªÂÜôÊñá‰ª∂ÊµÅÔºåÂÆÉ‰ºöËá™Âä®Âú®Á¶ªÂºÄ‰ΩúÁî®ÂüüÊó∂Ë∞ÉÁî® close ÂÖ≥Èó≠Êñá‰ª∂ÔºåÂπ∂‰∏î‰øùÂ≠òÂÖ≥Èó≠„ÄÇÂ§ö‰∏™Êñá‰ª∂‰ΩøÁî®ÈÄóÂè∑ÂàÜÈöî„ÄÇ

open ÂáΩÊï∞ËøîÂõû‰∏Ä‰∏™ BufferedReader ÂØπË±°ÔºåÂ¶ÇÊûúÁõ¥Êé•‰ΩøÁî® for ËØ≠Âè•Â§ÑÁêÜÊØè‰∏ÄË°åÔºåËøô‰ºöË¶ÅÊ±Ç‰∏ÄÊ¨°ËøáËØªÂèñÊâÄÊúâÂÜÖÂÆπ„ÄÇÂØπ‰∫éÊìç‰ΩúÂ§ßÊñá‰ª∂ËøôÁßçÊñπÊ≥ïÊúâ‰∏™Áº∫ÁÇπÂ∞±ÊòØÂÜÖÂ≠òÂç†Áî®Â§ßÔºåÊâÄ‰ª•ÈúÄË¶Å‰ΩøÁî®Â∫ïÂ±Ç read ÂáΩÊï∞ÔºåËøõË°åÊâπÈáèËØªÂèñÔºå‰ΩÜÊØèÊ¨°ËØªÂèñÂèà‰∏çËÉΩÂ§™Â∞èÔºåËøô‰πü‰∏çÂà©‰∫éÁ£ÅÁõòÁöÑÊñá‰ª∂ËØªÂèñ„ÄÇ

```py
from memory_profiler import profile
import time
import pathlib

pys = pathlib.Path(".").glob("*.py")
for py in pys:
    print(py)
    # py.rename(py.with_suffix('.py.bak'))

file = "C:/Videos/002YZDbhgx07Q4VXV6oo010412076tcU0E030.mp4"

@profile
def file_v1():
    with open(file, "rb") as cin:
        for line in cin:
            pass
            # print( 9 in line and "9")
@profile
def file_v2():
    with open(file, "rb") as cin:
        bufsize = 1024 * 1024
        while 1:
            chunk = cin.read(bufsize)
            if len(chunk)!=bufsize: break
            pass

@profile
def file_chunks(file, bufsize = 1024 * 1024):
    with open(file, "rb") as cin:
        while 1:
            chunk = cin.read(bufsize)
            if not chunk: 
                break;
            yield chunk

@profile
def file_v3():
    line = 0
    for chunk in file_chunks(file, 1):
        line += 1
        # print(f"line {line}: {len(chunk)}", end="\t")
        pass

start = time.time()
file_v3()
end = time.time()
print(f"Duration {end - start}")
```


## ==‚ö° PyV8 Ê®°Âùó

Pyv8 ÊòØ V8 ËÑöÊú¨ÂºïÊìéÁöÑ Python ÁªëÂÆöÔºåÂÆâË£ÖÂåÖÈìæÊé•Ôºö

1. PyV8-1.0-preview-r443.win32-py2.7.exe http://pan.baidu.com/s/1hsJOSQg
3. PyV8 Binaries https://github.com/emmetio/pyv8-binaries
2. Â§öÁ≥ªÁªüÁéØÂ¢ÉÂÆâË£ÖÂåÖ http://pan.baidu.com/s/1kVjQTk7

PyV8 ÊòØ V8 ÂºïÊìéÁöÑ Python ËØ≠Ë®ÄÂ∞ÅË£ÖÔºåËøôÊòØ Python Âíå JavaScript ÂØπË±°‰πãÈó¥ÁöÑÊ°•ÔºåÊîØÊåÅÂú® Python ËÑöÊú¨‰∏≠Ë∞ÉÁî® V8 ÂºïÊìéÔºåÊâßË°å JavaScript„ÄÇ

    >>> import PyV8
    >>> ctxt = PyV8.JSContext()          # create a context with an implicit global object
    >>> ctxt.enter()                     # enter the context (also support with statement)
    >>> ctxt.eval("1+2")                 # evalute the javascript expression
    3                                    # return a native python int
    >>> class Global(PyV8.JSClass):      # define a compatible javascript class
    ...   def hello(self):               # define a method
    ...     print "Hello World"    
    ...
    >>> ctxt2 = PyV8.JSContext(Global()) # create another context with the global object
    >>> ctxt2.enter()                    
    >>> ctxt2.eval("hello()")            # call the global object from javascript
    Hello World                          # the output from python script

‰æãÂ≠êÔºöJavaScript Â≠óÂÖ∏ËΩ¨ JSON

    from pyv8 import PyV8

    def get_ctx():
        if not hasattr(get_ctx, 'ctx'):
            ctx = PyV8.JSContext()
            ctx.enter()
            get_ctx.ctx = ctx
        return get_ctx.ctx

    def js2json(data):
        """ convert from javascript data
            to json data
        """
        ctx = get_ctx()
        fret = ctx.eval("""
                function func() {
                  var data = """ + data + """;
                  var json_data = JSON.stringify(data);
                  return json_data;
                }
                """)
        
        jsond = ctx.locals.func()
        return jsond

    jsond = js2json("""
        who: 'john',
        age: 28,
    """)
    import json
    js = json.loads(jsond)


ÂÆâË£Ö PyV8 ‰πãÂêéËøêË°åÊèêÁ§∫ÈîôËØØ‰ø°ÊÅØÂ¶Ç‰∏ãÔºö

    AttributeError: module 'PyV8' has no attribute 'JSContext



## ==‚ö° f-string & r-string
- The Python Language Reference ¬ª 2. Lexical analysis

f-string Ê†ºÂºèÂåñÂ≠óÁ¨¶‰∏≤ f"{format}"„ÄÇ

r-string ÂéüÂÄºÂ≠óÁ¨¶‰∏≤Ë°®Ëææ r"as-is"Ôºå‰∏ç‰ºöÊâßË°åËΩ¨‰πâÔºåÂ¶Ç r"\n\n" ÂæóÂà∞ÁöÑÂ∞±ÊòØÂèåÂºïÂè∑ÈáåÈù¢ÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇ„ÄÇ


```py
# Python 3.6+ f-string syntax: f"{format}"

# Python version check
def checkVersion(v='3.6'):
    import sys
    info = sys.version_info
    version = "%d.%d.%d" % (info.major, info.minor, info.micro)
    ex = "Python version %s is below %s." % (version,v)
    if(version > v): 
        print(f"Python version {version} > {v} is checked.")
        print(sys.version_info)
    else:
        raise Exception(ex)
        print(sys.version_info)
    return True
checkVersion("3.6")

# Python string formatting
name = 'Peter'; age = 23

# Peter is 23 years old
print('%s is %d years old' % (name, age))     # old normal printf
print('{} is {} years old'.format(name, age)) # normal format
print('{0} is {1} years old'.format(name, age)) # normal format
print(f'{name} is {age} years old')           # f-string format

# Python f-string expressions
# Peter is 24 next year.
print(f'{name} is {age + 1} next year.')

# Python f-string dictionaries
# John Doe is a gardener
user = {'name': 'John Doe', 'occupation': 'gardener'}
print(f"{user['name']} is a {user['occupation']}")

# Python 3.8+ introduce f-string debug
# math.cos(age) = -0.5328330203333975
# math.sin(age) = -0.8462204041751706
checkVersion("3.8")
import math
print(f'{math.cos(age) = }')
print(f'{math.sin(age) = }')

# Python multi-line f-string
# They are placed between round brackets
msg = (
    f'Name: {name}\n'
    f'Age: {age}\n'
)
print(msg)

# Python f-string calling function
print(f'version check again: {checkVersion("3.6")}')

# Python f-string accepts objects as well 
# Can use either __str__ or __repr__ magic functions.
class User:
    def __init__(self, name, occupation):
        self.name = name
        self.occupation = occupation

    def __repr__(self):
        return f"{self.name} is a {self.occupation}"

u = User('John Doe', 'gardener')
print(f'{u}')


# Python f-string escaping characters: {} ' \
print(f'Python uses {{}} to evaludate variables in f-strings')
print(f'This was a \'great\' film')
print(f'This was a \\great\\ film')


# Python f-string format datetime
import datetime
now = datetime.datetime.now()
print(f'{now:%Y-%m-%d %H:%M}') # 2021-08-20 15:13


# Python f-string format floats {v:width.precision}
# Floating point values have the f suffix.
# We can also specify the precision: the number of decimal places. 
print(f'{age:.2f}') # 23.00
print(f'{age:.5f}') # 23.00000


# Python f-string format integer {v:width&format}
# Filled with spaces or other characters if the value is shorter than the specified width.
# hexadecimal   octal decimal     scientific   character
#        0x41   0o101      65    4.225000e+03         A
#        0x42   0o102      66    4.356000e+03         B
print(f"%12s%8s%8s%15s%12s" % 
    ("hexadecimal","octal","decimal","scientific","character"))
for x in range(65, 72):
    print(f'{x:#12x}{x:#8o}{x:8}{x*x:16e}{x:10c}')

# Python f-string justify string
# The > can follows the colon to justify the strings to the right.
print(f'{"x":>10}')
print(f'{"apple":>10}')
```


2.4.3. Formatted string literals

New in version 3.6.

A formatted string literal or f-string is a string literal that is prefixed with 'f' or 'F'. These strings may contain replacement fields, which are expressions delimited by curly braces {}. While other string literals always have a constant value, formatted strings are really expressions evaluated at run time.

Escape sequences are decoded like in ordinary string literals (except when a literal is also marked as a raw string). After decoding, the grammar for the contents of the string is:

    f_string          ::=  (literal_char | "{{" | "}}" | replacement_field)*
    replacement_field ::=  "{" f_expression ["="] ["!" conversion] [":" format_spec] "}"
    f_expression      ::=  (conditional_expression | "*" or_expr)
                             ("," conditional_expression | "," "*" or_expr)* [","]
                           | yield_expression
    conversion        ::=  "s" | "r" | "a"
    format_spec       ::=  (literal_char | NULL | replacement_field)*
    literal_char      ::=  <any code point except "{", "}" or NULL>

Some examples of formatted string literals:

>>> name = "Fred"
>>> f"He said his name is {name!r}."
"He said his name is 'Fred'."
>>> f"He said his name is {repr(name)}."  # repr() is equivalent to !r
"He said his name is 'Fred'."
>>> width = 10
>>> precision = 4
>>> value = decimal.Decimal("12.34567")
>>> f"result: {value:{width}.{precision}}"  # nested fields
'result:      12.35'
>>> today = datetime(year=2017, month=1, day=27)
>>> f"{today:%B %d, %Y}"  # using date format specifier
'January 27, 2017'
>>> f"{today=:%B %d, %Y}" # using date format specifier and debugging
'today=January 27, 2017'
>>> number = 1024
>>> f"{number:#0x}"  # using integer format specifier
'0x400'
>>> foo = "bar"
>>> f"{ foo = }" # preserves whitespace
" foo = 'bar'"
>>> line = "The mill's closed"
>>> f"{line = }"
'line = "The mill\'s closed"'
>>> f"{line = :20}"
"line = The mill's closed   "
>>> f"{line = !r:20}"
'line = "The mill\'s closed" '


A consequence of sharing the same syntax as regular string literals is that characters in the replacement fields must not conflict with the quoting used in the outer formatted string literal:


    f"abc {a["x"]} def"    # error: outer string literal ended prematurely
    f"abc {a['x']} def"    # workaround: use different quoting


Backslashes are not allowed in format expressions and will raise an error:

    f"newline: {ord('\n')}"  # raises SyntaxError

To include a value in which a backslash escape is required, create a temporary variable.


>>> newline = ord('\n')
>>> f"newline: {newline}"
'newline: 10'


Formatted string literals cannot be used as docstrings, even if they do not include expressions.

>>> def foo():
...     f"Not a docstring"
...
>>> foo.__doc__ is None
True



## ==‚ö° Docstring & DocTest

Âü∫‰∫éÊ≥®Ëß£ÊñáÊ°£ÁöÑÊµãËØïÔºåPython 2.1 ÂºïÂÖ•ÔºåÊØîÂçïÂÖÉÊµãËØïÊõ¥Êñπ‰æøÁöÑÂçïÂÖÉÊµãËØïÔºÅ

Docstring ÊñáÊ°£Êó¢ÂåÖÂê´‰∫ÜÂ∏ÆÂä©ÊñáÊ°£ÔºåÂêåÊó∂ÂèàÂèØ‰ª•‰ΩúÁî®ÁºñÂÜôÂçïÂÖÉÊµãËØï‰ª£Á†ÅÔºå‰ª•‰∏ã‰ª£Á†ÅÊúâÈîôËØØÔºåÈÄöËøáÊµãËØïÂ∞±ÂèØ‰ª•ÂèëÁé∞Ôºö

```py
def average(values):
    """Computes the arithmetic mean of a list of numbers.

    >>> print(average([20, 30, 70]))
    40.0
    """

    return sum(values) // len(values)

def power(x, y=2):
    """Return x to the power of y, y defaults
    to 2 if not provided
        
    >>> power(2)
    4
    >>> power(4)
    16
    >>> power(2, 3)  
    8
    """
    
    return x*y

if __name__ == '__main__':
    # help(power) # Help on docstring
    import doctest
    ret = doctest.testmod()   # automatically validate the embedded tests
    print(f'''
    Test Results:
          failed = {ret.failed}
       attempted = {ret.attempted}
    {"All Pass!" if ret.failed == 0 else "DocTest Failure!"}
    {ret}
    ''')
```

## ==‚ö° Functions
- The Python Tutorial ¬ª 4. More Control Flow Tools - 4.6. Defining Functions
- The Python Language Reference ¬ª 8. Compound statements

8.6. Function definitions
A function definition defines a user-defined function object (see section The standard type hierarchy):

    funcdef                   ::=  [decorators] "def" funcname "(" [parameter_list] ")"
                                   ["->" expression] ":" suite
    decorators                ::=  decorator+
    decorator                 ::=  "@" assignment_expression NEWLINE
    parameter_list            ::=  defparameter ("," defparameter)* "," "/" ["," [parameter_list_no_posonly]]
                                     | parameter_list_no_posonly
    parameter_list_no_posonly ::=  defparameter ("," defparameter)* ["," [parameter_list_starargs]]
                                   | parameter_list_starargs
    parameter_list_starargs   ::=  "*" [parameter] ("," defparameter)* ["," ["**" parameter [","]]]
                                   | "**" parameter [","]
    parameter                 ::=  identifier [":" expression]
    defparameter              ::=  parameter ["=" expression]
    funcname                  ::=  identifier

ÂáΩÊï∞ÂÆö‰πâ‰∏é‰ΩøÁî®Á§∫ËåÉÔºö

```py 
def arrow(a,b) -> int:
    return a+b

print(arrow(1,2))
```


We can create a function that writes the Fibonacci series to an arbitrary boundary:

>>> def fib(n):    # write Fibonacci series up to n
...     """Print a Fibonacci series up to n."""
...     a, b = 0, 1
...     while a < n:
...         print(a, end=' ')
...         a, b = b, a+b
...     print()
...
>>> #` Now call the function we just defined:
... fib(2000)
0 1 1 2 3 5 8 13 21 34 55 89 144 233 377 610 987 1597


The keyword *def* introduces a function definition. It must be followed by the function name and the parenthesized list of formal parameters. The statements that form the body of the function start at the next line, and must be indented.

The first statement of the function body can optionally be a string literal; this string literal is the function‚Äôs documentation string, or docstring. (More about docstrings can be found in the section *Documentation Strings*.) There are tools which use docstrings to automatically produce online or printed documentation, or to let the user interactively browse through code; it‚Äôs good practice to include docstrings in code that you write, so make a habit of it.

The execution of a function introduces a new symbol table used for the local variables of the function. More precisely, all variable assignments in a function store the value in the local symbol table; whereas variable references first look in the local symbol table, then in the local symbol tables of enclosing functions, then in the global symbol table, and finally in the table of built-in names. Thus, global variables and variables of enclosing functions cannot be directly assigned a value within a function (unless, for global variables, named in a *global* statement, or, for variables of enclosing functions, named in a *nonlocal* statement), although they may be referenced.

The actual parameters (arguments) to a function call are introduced in the local symbol table of the called function when it is called; thus, arguments are passed using call by value (where the value is always an object reference, not the value of the object). [1] When a function calls another function, or calls itself recursively, a new local symbol table is created for that call.

A function definition associates the function name with the function object in the current symbol table. The interpreter recognizes the object pointed to by that name as a user-defined function. Other names can also point to that same function object and can also be used to access the function:


>>> fib
<function fib at 10042ed0>
>>> f = fib
>>> f(100)
0 1 1 2 3 5 8 13 21 34 55 89


Coming from other languages, you might object that fib is not a function but a procedure since it doesn‚Äôt return a value. In fact, even functions without a return statement do return a value, albeit a rather boring one. This value is called *None* (it‚Äôs a built-in name). Writing the value *None* is normally suppressed by the interpreter if it would be the only value written. You can see it if you really want to using print():


>>> fib(0)
>>> print(fib(0))
None


It is simple to write a function that returns a list of the numbers of the Fibonacci series, instead of printing it:


>>> def fib2(n):  # return Fibonacci series up to n
...     """Return a list containing the Fibonacci series up to n."""
...     result = []
...     a, b = 0, 1
...     while a < n:
...         result.append(a)    # see below
...         a, b = b, a+b
...     return result
...
>>> f100 = fib2(100)    # call it
>>> f100                # write the result
[0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89]


This example, as usual, demonstrates some new Python features:
‚Ä¢ The *return* statement returns with a value from a function. return without an expression argument returns *None*. Falling off the end of a function also returns *None*.
‚Ä¢ The statement *result.append(a)* calls a method of the list object *result*. A method is a function that ‚Äòbelongs‚Äô to an object and is named *obj.methodname*, where *obj* is some object (this may be an expression), and methodname is the name of a method that is defined by the object‚Äôs type. Different types define different methods. Methods of different types may have the same name without causing ambiguity. (It is possible to define your own object types and methods, using classes, see Classes) The method *append()* shown in the example is defined for list objects; it adds a new element at the end of the list. In this example it is equivalent to *result = result + [a]*, but more efficient.


4.7.1. Default Argument Values

It is also possible to define functions with a variable number of arguments. There are three forms, which can be combined.

The most useful form is to specify a default value for one or more arguments. This creates a function that can be called with fewer arguments than it is defined to allow. For example:

```py
def ask_ok(prompt, retries=4, reminder='Please try again!'):
    while True:
        ok = input(prompt)
        if ok in ('y', 'ye', 'yes'):
            return True
        if ok in ('n', 'no', 'nop', 'nope'):
            return False
        retries = retries - 1
        if retries < 0:
            raise ValueError('invalid user response')
        print(reminder)
```

This function can be called in several ways:

‚Ä¢ giving only the mandatory argument: ask_ok('Do you really want to quit?')
‚Ä¢ giving one of the optional arguments: ask_ok('OK to overwrite the file?', 2)
‚Ä¢ or even giving all arguments: ask_ok('OK to overwrite the file?', 2, 'Come on, only yes or no!')

This example also introduces the in keyword. This tests whether or not a sequence contains a certain value.

The default values are evaluated at the point of function definition in the defining scope, so that


```py
i = 5

def f(arg=i):
    print(arg)

i = 6
f()
```

will print 5.

Important warning: The default value is evaluated only once. This makes a difference when the default is a mutable object such as a list, dictionary, or instances of most classes. For example, the following function accumulates the arguments passed to it on subsequent calls:


```py
def f(a, L=[]):
    L.append(a)
    return L

print(f(1))
print(f(2))
print(f(3))
```

This will print


    [1]
    [1, 2]
    [1, 2, 3]

If you don‚Äôt want the default to be shared between subsequent calls, you can write the function like this instead:

```py
def f(a, L=None):
    if L is None:
        L = []
    L.append(a)
    return L
```

## ==‚ö° Lambda - Anonymous Functions

Small anonymous functions can be created with the lambda keyword. This function returns the sum of its two arguments: `lambda a, b: a+b`. Lambda functions can be used wherever function objects are required. 

    >>> def make_incrementor(n):
    ...     return lambda x: x + n
    ...
    >>> f(0)
    42
    >>> f(1)
    43

ÂΩìÊàë‰ª¨Âú®‰º†ÂÖ•ÂáΩÊï∞Êó∂ÔºåÊúâ‰∫õÊó∂ÂÄôÔºå‰∏çÈúÄË¶ÅÊòæÂºèÂú∞ÂÆö‰πâÂáΩÊï∞ÔºåÁõ¥Êé•‰º†ÂÖ•ÂåøÂêçÂáΩÊï∞Êõ¥Êñπ‰æø
ÂÖ≥ÈîÆÂ≠ó lambda Ë°®Á§∫ÂåøÂêçÂáΩÊï∞ÔºåÂÜíÂè∑ÂâçÈù¢ÁöÑxË°®Á§∫ÂáΩÊï∞ÂèÇÊï∞

    >>> list(map(lambda x: x * x, [1, 2, 3, 4, 5, 6, 7, 8, 9]))
    [1, 4, 9, 16, 25, 36, 49, 64, 81]

Ê≥®ÔºöÂåøÂêçÂáΩÊï∞Êúâ‰∏™ÈôêÂà∂ÔºåÂ∞±ÊòØÂè™ËÉΩÊúâ‰∏Ä‰∏™Ë°®ËææÂºèÔºåÊ≤°Êúâ `return`ÔºåËøîÂõûÂÄºÂ∞±ÊòØËØ•Ë°®ËææÂºèÁöÑÁªìÊûú

‰ºòÁÇπÔºöÂáΩÊï∞Ê≤°ÊúâÂêçÂ≠óÔºå‰∏çÂøÖÊãÖÂøÉÂáΩÊï∞ÂêçÂÜ≤Á™Å„ÄÇ

Ê≠§Â§ñÔºåÂåøÂêçÂáΩÊï∞‰πüÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÂØπË±°Ôºå‰πüÂèØ‰ª•ÊääÂåøÂêçÂáΩÊï∞ËµãÂÄºÁªô‰∏Ä‰∏™ÂèòÈáèÔºåÂÜçÂà©Áî®ÂèòÈáèÊù•Ë∞ÉÁî®ËØ•ÂáΩÊï∞

    >>> f = lambda x : x * x
    >>> f
    <function <lambda> at 0x000001B11F2327B8>
    >>> f(10)
    100

‰πüÂèØ‰ª•ÊääÂåøÂêçÂáΩÊï∞‰Ωú‰∏∫ËøîÂõûÂÄºËøîÂõû

    def build(x, y):
        return lambda: x * x + y * y

ÊºîÁ§∫Èó≠ÂåÖÂàõÂª∫Ôºålambda ‰∏çËÉΩÂíå match ËøôÊ†∑ÁöÑÂ§çÂêàËØ≠Âè•Êê≠ÈÖç‰ΩøÁî®ÔºåÂäüËÉΩÂº±‰∫ÜÔºö

```py
from time import sleep

for i in range(1,9):
    # make closure by lambada
    s = lambda x: print(f"single: x={x}")
    t = (lambda x: lambda: (sleep(0.1), print(f"twice: x={x}")) )(i)
    t(), s(i)
```


## ==‚ö° Class & Function Decorator ‰øÆÈ•∞ÂáΩÊï∞
- The Python Language Reference ¬ª 8.6. Function definitions - 8.7. Class definitions
- Functional Programming HOWTO https://docs.python.org/3/howto/functional.html


ËΩØ‰ª∂ÂºÄÂèëÈ¢ÜÂüü‰∏≠ÊúÄÁªèÂÖ∏ÁöÑÂè£Â§¥Á¶ÖÂ∞±ÊòØ DRY - ‚Äúdon‚Äôt repeat yourself‚Äù„ÄÇ

‰πüÂ∞±ÊòØËØ¥Ôºå‰ªª‰ΩïÊó∂ÂÄôÂΩì‰Ω†ÁöÑÁ®ãÂ∫è‰∏≠Â≠òÂú®È´òÂ∫¶ÈáçÂ§ç,ÊàñËÄÖÊòØÈÄöËøáÂâ™ÂàáÂ§çÂà∂ÁöÑ‰ª£Á†ÅÊó∂ÔºåÈÉΩÂ∫îËØ•ÊÉ≥ÊÉ≥ÊòØÂê¶ÊúâÊõ¥Â•ΩÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇ

Âú® Python ÂΩì‰∏≠ÔºåÈÄöÂ∏∏ÈÉΩÂèØ‰ª•ÈÄöËøáÂÖÉÁºñÁ®ãÊù•Ëß£ÂÜ≥ËøôÁ±ªÈóÆÈ¢ò„ÄÇ

ÁÆÄËÄåË®Ä‰πãÔºåÂÖÉÁºñÁ®ãÂ∞±ÊòØÂÖ≥‰∫éÂàõÂª∫Êìç‰ΩúÊ∫ê‰ª£Á†ÅÁöÑÂáΩÊï∞ÂíåÁ±ª (ÊØîÂ¶Ç‰øÆÊîπ„ÄÅÁîüÊàêÊàñÂåÖË£ÖÂéüÊù•ÁöÑ‰ª£Á†Å)Ôºå‰∏ªË¶ÅÊäÄÊúØÊòØ‰ΩøÁî®Ë£ÖÈ•∞Âô®„ÄÅÁ±ªË£ÖÈ•∞Âô®ÂíåÂÖÉÁ±ª„ÄÇ

ÂÖ∂Êú¨Ë¥®Â∞±ÊòØÈ´òÈò∂ÂáΩÊï∞ Higher Order FunctionÔºö‰∏Ä‰∏™ÂáΩÊï∞Êé•Êî∂ËæìÂÖ•Âπ∂Â∞ÜÂÖ∂ÂéüÊ†∑ËæìÂá∫ÔºåÂπ∂‰∏î‰øùÊåÅÂÖ∂ÈÄªËæëÂÖ≥Á≥ª„ÄÇ

Âú®ÁªÑ‰ª∂ÂåñÁºñÁ®ã‰∏≠ÔºåÈ´òÈò∂ÂáΩÊï∞Ê¶ÇÂøµÂèàÊºîÂèò‰∏∫È´òÈò∂ÁªÑ‰ª∂ÔºöHOC - Higher Order Components„ÄÇ

ÂèÇËÄÉÂáΩÊï∞ÂºèÁºñÁ®ãÔºåÂáΩÊï∞Á¨¨‰∏ÄÂÖ¨Ê∞ë first class functions ‰∏≠ÁöÑÂÆö‰πâÔºå‰Ω†ÂèØ‰ª•ÊääÂáΩÊï∞ÂΩìÊàêÂèòÈáèÊù•‰ΩøÁî®„ÄÇ

ÈÄöËøá @Decorator Ê≥®Ëß£ËØ≠Ê≥ïÁ≥ñ Syntactic Sugar ÂºïÂÖ•Âπ∂ÊúÄÁªàË∞ÉÁî®‰∏Ä‰∏™È´òÈò∂ÂáΩÊï∞„ÄÇ‰ΩøÁî®‰øÆÈ•∞ÂáΩÊï∞Êó∂ÔºåÂ∞±ÊòØÂä†‰∏ÄÂ±ÇÈ´òÈò∂ÂáΩÊï∞Â∞ÅË£ÖÂÆÉ„ÄÇÂõ†‰∏∫È´òÈò∂‰øÆÈ•∞ÂáΩÊï∞ÂèØ‰ª•‰ªªÊÑèÊ∑ªÂä†‰ΩøÁî®ËÄå‰∏ç‰ºöÁ†¥ÂùèÁ®ãÂ∫èÁªìÊûÑÔºåÊâÄÊúâÂèØ‰ª•‰ªªÊÑèÂ§öÊ¨°‰ΩøÁî®„ÄÇ

Á≥ªÁªüÂÜÖÁΩÆÁöÑ‰øÆÈ•∞Âô®Ôºö

‚û° `@classmethod` Transform a method into a class method.
‚û° `@staticmethod` Transform a method into a static method.
‚úÖ `class property(fget=None, fset=None, fdel=None, doc=None)` Return a property attributeÔºå`@property` decorator

ÂáΩÊï∞„ÄÅÈùôÊÄÅÊñπÊ≥ï„ÄÅÁ±ªÊàêÂëòÊñπÊ≥ïÂú®Êú¨Ë¥®‰∏äÈÉΩÊòØÂèØË¢´Ë∞ÉÁî®ÁöÑ‰ª£Á†ÅÂùóÔºå‰ΩÜÊòØËøô‰∏âËÄÖÁöÑË∞ÉÁî®ÊñπÂºèÊúâÊâÄÂ∑ÆÂà´Ôºå‰∏ªË¶ÅÂå∫Âà´Âú®‰∫éÔºö

- ÊòØÂê¶‰º†ÈÄíÂÆû‰æãÂèÇÊï∞‰Ωú‰∏∫Á¨¨‰∏Ä‰∏™ÂèÇÊï∞Ôºõ
- ÊòØÂê¶‰º†ÈÄíÁ±ªÂûãÂØπË±°‰Ωú‰∏∫Á¨¨‰∏Ä‰∏™ÂèÇÊï∞Ôºõ

| Transformation | Called from an object | Called from a class |
|----------------|-----------------------|---------------------|
| function       | `f(obj, *args)`       | f(*args)            |
| staticmethod   | `f(*args)`            | f(*args)            |
| classmethod    | `f(type(obj), *args)` | f(cls, *args)       |


For example, the following code

    @f1(arg)
    @f2
    def func(): pass

is roughly equivalent to

    def func(): pass
    func = f1(arg)(f2(func))

Classes can also be decorated: just like when decorating functions,

    @f1(arg)
    @f2
    class Foo: pass


is roughly equivalent to

    class Foo: pass
    Foo = f1(arg)(f2(Foo))


Á±ª‰øÆÈ•∞Âô®‰∏éÂáΩÊï∞‰øÆÈ•∞Âô®ÂêåÊ†∑ÔºåÂè™‰∏çËøáÂ∑ÆÂà´Âú®‰∫éÔºöÈ´òÈò∂ÂáΩÊï∞Êé•Êî∂ÁöÑÂèÇÊï∞ÊòØÁ±ªÂûãÂØπË±°„ÄÇÂπ∂‰∏îÔºåË¶ÅËß£Èô§‰øÆÈ•∞Âô®‰πüÂæàÊñπ‰æøÔºåÂè™ÈúÄË¶ÅÊ≥®Ëß£ÊéâÔºåÊàñÁõ¥Êé•Âà†Èô§ÂèòÂèØ‰ª•‰∫ÜÔºåÊ≤°ÊúâÂ§çÊùÇÁöÑ‰æùËµñÂÖ≥Á≥ª„ÄÇ

ÂáΩÊï∞„ÄÅÁ±ªÂûã‰øÆÈ•∞Âô®ÂÆû‰æãÊºîÁ§∫Ôºö

```py
def hoc(h):
    print(f"hoc(): {type(h)}")
    return h

@hoc
class FD(object):
    """docstring for FD"""
    def __init__(self):
        super(FD, self).__init__()
        print("FD __init__")

@hoc
def fun():
    print("fun")

fun()
FD()

# Output:
# hoc(): <class 'type'>
# hoc(): <class 'function'>
# fun
# FD __init__
```

È´òÈò∂ÂáΩÊï∞‰∏ç‰∏ÄÂÆöË¶Å‰ΩøÁî® @hoc ËøôÁßçÂΩ¢ÂºèÔºå‰πüÂèØ‰ª•ÂÆö‰πâ‰∏Ä‰∏™ËøîÂõû hoc ÁöÑÂáΩÊï∞ÔºåÂπ∂‰ΩøÁî® @hoc() ËøôÁßçÊñπÊ≥ïË∞ÉÁî®ÔºåÂêåÊó∂ÂèØ‰ª•‰º†ÂÖ•ÂèÇÊï∞„ÄÇ

```py
def rhoc(msg):
    print(f"rhoc: {msg}")
    return hoc

def hoc(h):
    print(f"hoc(): {type(h)}")
    return h

@rhoc("CLASS")
class FD(object):
    """docstring for FD"""
    def __init__(self):
        super(FD, self).__init__()
        print("FD __init__")

@rhoc("FUNCTION")
def fun():
    print("fun")
```

‰øÆÈ•∞Á±ªÊñπÊ≥ïÊàêÂëò‰πü‰∏ÄÊ†∑ÔºåPython CookBook ‰∏äÊºîÁ§∫‰∫ÜÂ¶Ç‰ΩïÂ∞ÜË£ÖÈ•∞Âô®ÂÆö‰πâ‰∏∫Á±ªÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÊàñËÄÖÂ∞ÜË£ÖÈ•∞Âô®ÂÆö‰πâ‰∏∫Á±ªÂûã„ÄÇ

Âú®Á±ª‰∏≠ÂÆö‰πâË£ÖÈ•∞Âô®ÂàùÁúã‰∏äÂéªÂ•ΩÂÉèÂæàÂ•áÊÄ™Ôºå‰ΩÜÊòØÂú®Ê†áÂáÜÂ∫ì‰∏≠ÊúâÂæàÂ§öËøôÊ†∑ÁöÑ‰æãÂ≠ê„ÄÇÁâπÂà´
ÁöÑÔºå@property Ë£ÖÈ•∞Âô®ÂÆûÈôÖ‰∏äÊòØ‰∏Ä‰∏™Á±ªÔºåÂÆÉÈáåÈù¢ÂÆö‰πâ‰∫Ü‰∏â‰∏™ÊñπÊ≥ï getter(), setter(),
deleter() , ÊØè‰∏Ä‰∏™ÊñπÊ≥ïÈÉΩÊòØ‰∏Ä‰∏™Ë£ÖÈ•∞Âô®„ÄÇ

ÂáΩÊï∞ÂºèÁºñÁ®ãÊ®°Âùó functools Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÂåÖË£ÖÂáΩÊï∞ÔºåÂÆÉ‰ºöËøîÂõû‰∏Ä‰∏™È´òÈò∂ÂáΩÊï∞Ôºö

```py
from functools import wraps
class A:
    # Decorator as an instance method
    def decorator1(self, func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            print('Decorator 1')
            return func(*args, **kwargs)
        return wrapper

    # Decorator as a class method
    @classmethod
    def decorator2(cls, func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            print('Decorator 2')
            return func(*args, **kwargs)
        return wrapper

# As an instance method
a = A()
@a.decorator1
def spam():
    pass

# As a class method
@A.decorator2
def grok():
    pass

spam()
grok()
```

## ==‚ö° Decorator Class ‰øÆÈ•∞Âô®Á±ªÂûã
- ÊèèËø∞Âô®‰ΩøÁî®ÊåáÂçó https://docs.python.org/zh-cn/3/howto/descriptor.html
- Descriptor HowTo Guide https://docs.python.org/3/howto/descriptor.html

ÂèÇËÄÉÂÆòÊñπÊèèËø∞Âô®ÊåáÂçóÊñáÊ°£ÔºåÊàñ Python CookBook ÊºîÁ§∫Â¶Ç‰ΩïÂÆö‰πâË£ÖÈ•∞Âô®Á±ªÂûã„ÄÇ

Â∞ÜË£ÖÈ•∞Âô®ÂÆö‰πâÊàêÁ±ªÈÄöÂ∏∏ÊòØÂæàÁÆÄÂçïÁöÑÔºå‰∏∫‰∫ÜÂ∞ÜË£ÖÈ•∞Âô®ÂÆö‰πâÊàê‰∏Ä‰∏™ÂÆû‰æãÔºåÈúÄË¶ÅÂÆûÁé∞ __call__ __get__ ‰∏§‰∏™È≠îÊúØÊñπÊ≥ï„ÄÇ

‰∏Ä‰∏™ÊèèËø∞Âô®Á±ªÂûãÂ∞±ÊòØ‰∏Ä‰∏™ÂÆûÁé∞‰∫Ü‰∏â‰∏™Ê†∏ÂøÉÁöÑÂ±ûÊÄßËÆøÈóÆÊìç‰ΩúÁöÑÁ±ªÂûãÔºåÂàÜÂà´
‰∏∫ __get__() „ÄÅ __set__() Âíå __delete__() Ëøô‰∏â‰∏™ÁâπÊÆäÁöÑÊñπÊ≥ï„ÄÇ

```py
# Descriptor protocol
descr.__get__(self, obj, type=None) -> value
descr.__set__(self, obj, value) -> None
descr.__delete__(self, obj) -> None
```

‰∏Ä‰∏™ÂØπË±°ÂÖ∑ÊúâÂÖ∂‰∏≠‰ªª‰∏Ä‰∏™ÊñπÊ≥ïÂ∞±‰ºöÊàê‰∏∫ÊèèËø∞Âô®Ôºå‰ªéËÄåÂú®Ë¢´ÂΩì‰ΩúÂØπË±°Â±ûÊÄßÊó∂ÈáçÂÜôÈªòËÆ§ÁöÑÊü•ÊâæË°å‰∏∫„ÄÇ

‰æãÂ¶ÇÔºå‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÂÆö‰πâ‰∫Ü‰∏Ä‰∏™Á±ªÔºåÂÆÉÂú®ÂÖ∂‰ªñÂáΩÊï∞‰∏äÊîæÁΩÆ‰∏Ä‰∏™ÁÆÄÂçïÁöÑËÆ∞ÂΩïÂ±ÇÔºåÂèØ‰ª•Â∞ÜÂÆÉÂΩìÂÅö‰∏Ä‰∏™ÊôÆÈÄöÁöÑË£ÖÈ•∞Âô®Êù•‰ΩøÁî®ÔºåÂú®Á±ªÈáåÈù¢ÊàñÂ§ñÈù¢ÈÉΩÂèØ‰ª•„ÄÇ

```py
import types
from functools import wraps

class Profiled: # define a decorator class
    def __init__(self, taget): 
        # print(f"init -> taget: {taget}")
        wraps(taget)(self)  # make a __wrapped__ for target
        self.ncalls = 0

    def __call__(self, *args, **kwargs): 
        self.ncalls += 1 
        # args = (self,) + args if len(args)==1 else args
        # print(f"call -> args:{args} kw: {kwargs}")
        return self.__wrapped__(*args, **kwargs)

    def __get__(self, instance, cls): 
        # print(f"get -> instance: {instance} cls: {cls}")
        if instance is None: 
            return self 
        else: 
            return types.MethodType(self, instance)

@Profiled # Profiled.__init__(self, <function add>)
def add(x, y):
    return x + y

@Profiled # Profiled.__init__(self, <class Spam>)
class Spam:
    @Profiled # Profiled.__init__(self, <function Spam.bar>)
    def bar(self, x):
        print(self, x)

add(1,2)   # Profiled.__call__(self, 1, 2)
s = Spam() # Profiled.__call__(self)
s.bar(3)   # Profiled.__get__(self, instance, cls)(3)
```

‰ΩÜÊòØËøôÈáåËøòÊòØÊúâ‰∏Ä‰∫õÁªÜËäÇÈúÄË¶ÅËß£Èáä‰∏ãÔºåÁâπÂà´ÊòØÂΩì‰Ω†ÊÉ≥Â∞ÜÂÆÉ‰ΩúÁî®Âú®ÂÆû‰æãÊñπÊ≥ï‰∏äÁöÑÊó∂ÂÄô„ÄÇ

È¶ñÂÖàÔºå‰ΩøÁî® `functools.wraps()` ÂáΩÊï∞ÁöÑ‰ΩúÁî®Ë∑ü‰πãÂâçËøòÊòØ‰∏ÄÊ†∑ÔºåÂ∞ÜË¢´ÂåÖË£ÖÂáΩÊï∞ÁöÑÂÖÉ‰ø°ÊÅØÂ§çÂà∂Âà∞ÂèØË∞ÉÁî®ÂÆû‰æã‰∏≠Âéª„ÄÇ

ÂÖ∂Ê¨°ÔºåÈÄöÂ∏∏ÂæàÂÆπÊòì‰ºöÂøΩËßÜ‰∏äÈù¢ÁöÑ get ÊñπÊ≥ï„ÄÇÂ¶ÇÊûú‰Ω†ÂøΩÁï•ÂÆÉÔºåË∞ÉÁî®Ë¢´Ë£ÖÈ•∞ÂÆû‰æãÊñπÊ≥ïÊó∂Âá∫Áé∞ÂæàÂ•áÊÄ™ÁöÑÈóÆÈ¢ò„ÄÇÂéüÊù•Ë∞ÉÁî® __get__ ÊñπÊ≥ïËé∑ÂèñÂÆû‰æãÔºå‰ºöÂèòÊàêË∞ÉÁî® __call__ ÊñπÊ≥ïÔºå‰∏¢Â§± types.MethodType ÁöÑÂåÖË£ÖÔºåË∞ÉÁî®ÁöÑÂ∞±‰∏çÊòØÁ±ªÊàêÂëòÊñπÊ≥ï„ÄÇ

ËôΩÁÑ∂ÂèØ‰ª•Âú® __call__ ÊñπÊ≥ï‰∏≠Â∞ÜÂÖ∂ self ‰º†ÂÖ•Ôºå‰ΩÜÊòØËøô‰∏™ self ÊòØ Profiled ÂÆû‰æãÔºåËÄå‰∏çÊòØË¢´‰øÆÈ•∞ÁöÑÁ±ªÂûãÂÆû‰æã„ÄÇËøô‰πüÊòØ __get__ ÊñπÊ≥ï‰∏é __call__ ÊñπÊ≥ïÁöÑÂ∑ÆÂà´‰πã‰∏Ä„ÄÇ

ÂΩìÊñπÊ≥ïÂáΩÊï∞Ë¢´Ë∞ÉÁî®ÔºåËß£ÊûêÂô®‰ºöÂú®‰∏Ä‰∏™Á±ª‰∏≠Êü•ÊâæÔºåËøôÊó∂ __get__ ÊñπÊ≥ï‰æùÊçÆÊèèËø∞Âô®ÂçèËÆÆË¢´Ë∞ÉÁî®„ÄÇÂú®ËøôÈáåÔºåget ÁöÑÁõÆÁöÑÊòØÂàõÂª∫‰∏Ä‰∏™ÁªëÂÆöÊñπÊ≥ïÂØπË±°ÔºåÊúÄÁªà‰ºöÂêëËøô‰∏™ÊñπÊ≥ï‰º†ÈÄí self ÂèÇÊï∞„ÄÇ‰∏∫‰∫ÜÁ°Æ‰øùÁªëÂÆöÊñπÊ≥ïÂØπË±°ËÉΩË¢´Ê≠£Á°ÆÁöÑÂàõÂª∫Ôºå‰ΩøÁî® type.MethodType() ÊâãÂä®ÂàõÂª∫‰∏Ä‰∏™ÁªëÂÆöÁ±ªÂûãÁöÑÊñπÊ≥ïÊàêÂëò„ÄÇ



## ==‚ö° Function Annotations Á±ªÂûãÊ≥®Ëß£

Python ÊòØÂä®ÊÄÅËØ≠Ë®ÄÔºåÂèòÈáèÈöèÊó∂ÂèØ‰ª•Ë¢´ËµãÂÄºÔºå‰∏îËÉΩËµãÂÄº‰∏∫‰∏çÂêåÁöÑÁ±ªÂûãÔºåÂèòÈáèÁ±ªÂûãÊòØÂú®ËøêË°åÂô®ÂÜ≥ÂÆöÁöÑÔºõ

Âä®ÊÄÅËØ≠Ë®ÄÂæàÁÅµÊ¥ªÔºå‰ΩÜÊòØËøôÁßçÁâπÊÄß‰πüÊòØÂºäÁ´ØÔºõ

- ÈöæÂèëÁé∞ÊΩúÂú®ÈóÆÈ¢òÔºöÁî±‰∫éÊ≤°ÊúâÈùôÊÄÅÁ±ªÂûãÊ£ÄÊü•Èò∂ÊÆµÔºåÁõ¥Âà∞ËøêË°åÊúüÈó¥ÈóÆÈ¢òÊâçÂèØËÉΩÊòæÁé∞Âá∫Êù•ÔºåÊàñËÄÖÁ∫ø‰∏äËøêË°åÊó∂ÊâçËÉΩÊö¥Èú≤Âá∫ÈóÆÈ¢òÔºõ
- ÈöæÁ°ÆÂÆöÂèÇÊï∞Á±ªÂûãÔºöÂáΩÊï∞ÁöÑ‰ΩøÁî®ËÄÖÁúãÂà∞ÂáΩÊï∞ÁöÑÊó∂ÂÄôÔºåÂπ∂‰∏çÁü•ÈÅì‰Ω†ÁöÑÂáΩÊï∞ÁöÑËÆæËÆ°ÔºåÂπ∂‰∏çÁü•ÈÅìÂ∫îËØ•‰º†ÂÖ•‰ªÄ‰πàÁ±ªÂûãÁöÑÊï∞ÊçÆÔºõ

Â¶Ç‰ΩïËß£ÂÜ≥ËøôÁßçÂä®ÊÄÅËØ≠Ë®ÄÂÆö‰πâÁöÑÂºäÁ´ØÂë¢Ôºü

Â¢ûÂä†ÊñáÊ°£ Documentation StringÔºåËøôÂè™ÊòØ‰∏Ä‰∏™ÊÉØ‰æãÔºå‰∏çÊòØÂº∫Âà∂Ê†áÂáÜÔºå‰∏çËÉΩË¶ÅÊ±ÇÁ®ãÂ∫èÂëò‰∏ÄÂÆö‰∏∫ÂáΩÊï∞Êèê‰æõËØ¥ÊòéÊñáÊ°£„ÄÇÂáΩÊï∞ÂÆö‰πâÊõ¥Êñ∞‰∫ÜÔºåÊñáÊ°£Êú™ÂøÖÂêåÊ≠•Êõ¥Êñ∞Ôºõ

Python 3.X Êñ∞Â¢ûÂä†ÁâπÊÄßÔºàFeatureÔºâÔºåÂè´‰ΩúÂáΩÊï∞Ê≥®Èáä Function AnnotationsÔºåËøòÊúâ‰ΩøÁî®‰∏âËÅîÂºïÂè∑ÂåÖÊã¨ÁöÑ docstrings Â§öË°åÊñáÊú¨„ÄÇ

- ÂØπÂáΩÊï∞ÁöÑÂèÇÊï∞ËøõË°åÁ±ªÂûãÊ≥®Ëß£Ôºõ
- ÂØπÂáΩÊï∞ÁöÑËøîÂõûÂÄºËøõË°åÁ±ªÂûãÊ≥®Ëß£Ôºõ
- Âè™ÂØπÂáΩÊï∞ÂèÇÊï∞ÂÅö‰∏Ä‰∏™ËæÖÂä©ÁöÑËØ¥ÊòéÔºåÂπ∂‰∏çÂØπÂáΩÊï∞ÂèÇÊï∞ËøõË°åÁ±ªÂûãÊ£ÄÊü•Ôºõ
- Êèê‰æõÁªôÁ¨¨‰∏âÊñπÂ∑•ÂÖ∑ÔºåÂÅö‰ª£Á†ÅÂàÜÊûêÔºåÂèëÁé∞ÈöêËóèÁöÑ bugÔºõ

```py
def add(x: int, y: int) -> int:
    '''
    :param x: int
    :param y: int
    :return: int
    '''
    return x + y

print(help(add))
print(add('hello', 'world'))
print(add.__annotations__)
# {'x': <class 'int'>, 'y': <class 'int'>, 'return': <class 'int'>}
```

ÂáΩÊï∞Ê≥®Ëß£ÁöÑ‰ø°ÊÅØÔºå‰øùÂ≠òÂú® __annotations__ Â≠óÂÖ∏Â±ûÊÄß‰∏≠ÔºåÂåÖÊã¨ËøîÂõûÂÄºÁ±ªÂûãÁöÑÂ£∞Êòé„ÄÇÂÅáËÆæË¶ÅÂÅö‰ΩçÁΩÆÂèÇÊï∞ÁöÑÂà§Êñ≠ÔºåÊó†Ê≥ïÂíåÂ≠óÂÖ∏‰∏≠ÁöÑÂ£∞ÊòéÂØπÂ∫î„ÄÇ


‰ΩøÁî® inspect Ê®°ÂùóÊèê‰æõÁöÑÁî®‰∫éËé∑ÂèñÂØπË±°‰ø°ÊÅØÁöÑÂáΩÊï∞ÔºåÂèØ‰ª•Ê£ÄÊü•ÂáΩÊï∞ÂíåÁ±ª„ÄÅÁ±ªÂûã‰ø°ÊÅØ„ÄÇ

ÈÄöËøá `signature(callable)` ÊñπÊ≥ïËé∑ÂèñÂáΩÊï∞Á≠æÂêçÔºåÂÆÉÂåÖÊã¨‰∫Ü‰∏Ä‰∏™ÂáΩÊï∞ÁöÑ‰ø°ÊÅØÔºåÂåÖÊã¨ÂáΩÊï∞ÂêçÔºåÂèÇÊï∞Á±ªÂûãÔºåÂÆÉÊâÄÂú®ÁöÑÁ±ªÂíåÂêçÁß∞Á©∫Èó¥ÂèäÂÖ∂‰ªñ‰ø°ÊÅØ„ÄÇ

```py
import inspect

def add(x: int, y: int, *args, **kwargs) -> int:
    return x + y

sig = inspect.signature(add)

print(f'''
      signature  = {sig}
    return type  = {sig.return_annotation} # <class 'type'>
         params  = {sig.parameters} # OrderedDict

     parameters    <class 'inspect.Parameter'>:
              x  = {type(sig.parameters['y'])}
              y  = {type(sig.parameters['y'])}
           args  = {type(sig.parameters['args'])}
         kwargs  = {type(sig.parameters['kwargs'])}

    annotations    <class 'type'>
   x annotation  = {type(sig.parameters['x'].annotation)}
   y annotation  = {type(sig.parameters['y'].annotation)}
args annotation  = {type(sig.parameters['args'].annotation)}
kwargs annotation= {type(sig.parameters['kwargs'].annotation)}

isfunction(add)     = {inspect.isfunction(add)!s:8}     # Âà§Êñ≠ÊòØÂê¶ÊòØÂáΩÊï∞Ôºõ
ismethod(add)       = {inspect.ismethod(add)!s:8}       # Âà§Êñ≠ÊòØÂê¶ÊòØÁ±ªÁöÑÊñπÊ≥ï
isgenerator(add)    = {inspect.isgenerator(add)!s:8}    #  Âà§Êñ≠ÊòØÂê¶ÊòØÁîüÊàêÂô®ÂØπË±°Ôºõ
isgeneratorfunction(add) = {inspect.isgeneratorfunction(add)!s:8}    # Âà§Êñ≠ÊòØÂê¶ÊòØÁîüÊàêÂô®ÂáΩÊï∞Ôºõ
isclass(add)        = {inspect.isclass(add)!s:8}        #  Âà§Êñ≠ÊòØÂê¶ÊòØÁ±ªÔºõ
ismodule(inspect)   = {inspect.ismodule(inspect)!s:8}   # Âà§Êñ≠ÊòØÂê¶ÊòØÊ®°Âùó
isbuiltin(print)    = {inspect.isbuiltin(print)!s:8}    #  Âà§Êñ≠ÊòØÂê¶ÊòØÂÜÖÂª∫ÂØπË±°
    ''')
```

ÂÖ∂ÂÆÉÊõ¥Â§öÁöÑ is Á±ªÂûãÂà§Êñ≠ÂáΩÊï∞ÂèÇËÄÉÊ®°ÂùóÂ∏ÆÂä©ÊñáÊ°£„ÄÇ

Âè™ËØªÂÖÉÁªÑÂØπË±° parameter ÂåÖÂê´‰∫ÜÂèÇÊï∞‰ø°ÊÅØÔºö

- ‚Ü™ name    ÂèÇÊï∞ÁöÑÂêçÂ≠óÔºõ
- ‚Ü™ annotation  ÂèÇÊï∞ÁöÑÊ≥®Ëß£ÔºåÂèØËÉΩÊ≤°ÊúâÂÆö‰πâÔºõ
- ‚Ü™ default     ÂèÇÊï∞ÁöÑÁº∫ÁúÅÂÄºÔºåÂèØËÉΩÊ≤°ÊúâÂÆö‰πâÔºõ
- ‚Ü™ empty   Áî®Êù•Ê†áËÆ∞ default Â±ûÊÄßÊàñËÄÖÊ≥®Èáä annotation Â±ûÊÄßÁöÑÁ©∫ÂÄºÔºõ
- ‚Ü™ kind    Â∞±ÊòØÂΩ¢ÂèÇÁöÑÁ±ªÂûã
    - *POSITIONAL_ONLY* ÊåáÁ§∫ÂèÇÊï∞ÊòØ‰∏Ä‰∏™‰ΩçÁΩÆÂèÇÊï∞
    - *POSITIONAL_OR_KEYWORD* ÊåáÁ§∫ÂèÇÊï∞ÂèØ‰ª•‰Ωú‰∏∫ÂÖ≥ÈîÆÂ≠óÊàñËÄÖ‰ΩçÁΩÆÂèÇÊï∞‰∏§ÁßçÊñπÂºèÊèê‰æõÔºõ
    - *VAR_POSITIONAL* ÂèØÂèò‰ΩçÁΩÆÂèÇÊï∞ÔºåÂØπÂ∫î `*args`Ôºõ 
    - *KEYWORD_ONLY* ÂÖ≥ÈîÆÂ≠óÂèÇÊï∞ÔºåÂØπÂ∫î `*args` ‰πãÂêéÂá∫Áé∞ÁöÑÈùûÂèØÂèòÂÖ≥ÈîÆÂ≠óÂèÇÊï∞Ôºõ
    - *VAR_KEYWORD* ÂèØÂèòÂÖ≥ÈîÆÂ≠óÂèÇÊï∞ÔºåÂØπÂ∫î `**kwargs`Ôºõ


## ==‚ö° `*args` & `**kwargs` ÂèØÂèòÈïøÂèÇÊï∞
- [The Python Tutorial](tutorial\index.rst)
- [The Python Tutorial - Keyword Arguments](tutorial\controlflow.rst)
- [The Python Language Reference](reference\index.rst)
- [The Python Language Reference 6.3. Primaries](reference\expressions.rst#Calls)
- [The Python Language Reference 8.6. Function definitions](reference\compound_stmts.rst#Function_definitions)

Changed in version 3.5: 

Function calls accept any number of * and ** unpackings, positional arguments may follow iterable unpackings ( * ), and keyword arguments may follow dictionary unpackings ( ** ). Originally proposed by PEP 448.

```py
a= (1,2,3,4)
b, *c = a # b = 1  c = [2, 3, 4]
print(b,c)
```
ÊâÄË∞ì positional argument ÂÆö‰ΩçÂèÇÊï∞ÔºåÊòØÊåáÁî®Áõ∏ÂØπ‰ΩçÁΩÆÊåá‰ª£ÂèÇÊï∞„ÄÇ

Python ÈááÁî®ÂèØÂëΩÂêçÂèÇÊï∞ÁöÑÂáΩÊï∞Ë∞ÉÁî®ÊñπÂºèÔºåÂç≥Ë∞ÉÁî®ÂáΩÊï∞Êó∂ÔºåÂèØ‰ª•‰ΩøÁî®ÂèÇÊï∞ÂêçÊù•ÊåáÂÆöË¶Å‰º†ÈÄíÁöÑÊï∞ÊçÆ„ÄÇÂÖ≥ÈîÆÂ≠óÂèÇÊï∞ Keyword arguments ËßÅÂêçÁü•ÊÑè‰ΩøÁî®ÂÖ≥ÈîÆÂ≠óÊåá‰ª£ÂèÇÊï∞„ÄÇ‰ΩçÁΩÆÂèÇÊï∞ÊàñËÄÖÊåâÈ°∫Â∫è‰º†ÈÄíÂèÇÊï∞ÔºåÊàñËÄÖ‰ΩøÁî®ÂêçÂ≠óÔºåËá™ÁÑ∂‰ΩøÁî®ÂêçÂ≠óÊó∂ÔºåÂØπÈ°∫Â∫èÊ≤°ÊúâË¶ÅÊ±Ç„ÄÇ

ÂèØÂèòÈïøÂèÇÊï∞‰º†ÈÄíÁöÑ‰∏§ÁßçÊñπÂºè„ÄÅ‰∏§ÁßçÊï∞ÊçÆÁ±ªÂûãÔºö

- `*args` ÂàóË°®‰º†ÈÄíÔºåÁî®Âú®ÂáΩÊï∞ÂèÇÊï∞ÂàóË°®‰ª•Êé•Êî∂‰ªªÊÑèÊï∞ÈáèÁöÑÈùûÂëΩÂêçÂèÇÊï∞ÔºåÁî®Âú®Ë∞ÉÁî®ÂáΩÊï∞Êó∂Â∞Ü *tuple* Êâ©Â±ïÂºÄÊù•Ôºõ
- `*kwargs` Â≠óÂÖ∏‰º†ÈÄíÔºåÁî®Âú®ÂáΩÊï∞ÂèÇÊï∞ÂàóË°®‰ª•Êé•Êî∂‰ªªÊÑèÊï∞ÈáèÁöÑÂëΩÂêçÂèÇÊï∞ÔºåÁî®Âú®Ë∞ÉÁî®ÂáΩÊï∞Êó∂Â∞Ü *dict* Êâ©Â±ïÂºÄÊù•Ôºõ

ÂèØÂèòÈïøÂèÇÊï∞ÂáΩÊï∞ÊñπÊ≥ï‰∏≠Ôºå`*args` Áî®Êù•Â∞Ü‰º†ÂÖ•ÂèÇÊï∞ÊâìÂåÖÊàê tuple ÁªôÂáΩÊï∞‰ΩìË∞ÉÁî®Ôºå`**kwargs` ÊâìÂåÖÂÖ≥ÈîÆÂ≠óÂèÇÊï∞Êàê dict ÁªôÂáΩÊï∞‰ΩìË∞ÉÁî®ÔºåËøôÊòØ Python ÁâπÊúâÁöÑËØ≠Ê≥ïÁªìÊûÑ„ÄÇ

ÂÆö‰πâÂáΩÊï∞Êó∂ÔºåÂèÇÊï∞ÂàóË°®ÂøÖÈúÄÊåâÔºöÈùûÂëΩÂêçÂèÇÊï∞„ÄÅ`*args`„ÄÅÂëΩÂêçÂèÇÊï∞Âíå„ÄÅ`**kwargs` ËøôÊ†∑ÁöÑ‰ΩçÁΩÆÂøÖÈ°ª‰øùÊåÅ‰ª•‰∏ãËøôÁßçÈ°∫Â∫èÔºå‰∏çËÉΩÊâì‰π±ÔºåÂèØ‰ª•ÁúÅÁï•‰∏ç‰º†Ôºå‰ΩÜÂèÇÂΩ¢Âºè‰∏çËÉΩ‰π±Êîæ„ÄÇargs Êàñ kwargs Ëøô‰∏™ÂêçÂ≠ó‰∏çÈáçË¶ÅÔºåÈáçÁÇπÊòØÊòüÂè∑ÁöÑÊï∞Èáè„ÄÇ

```py
def variant(arg1, arg2, *args, kwarg1 = "ABC", kwarg2 = "XYZ", **kwargs):
    print(arg1, arg2, kwarg1, kwarg2) # Append Prepend xyz abc
    print(args)   # print 1 argument: <class 'tuple'>
    print(kwargs) # print 1 argument: <class 'dict'>
    print(*args)   # print 4 arguments: "Override", "more", "and", "more over"
    print(*kwargs) # print 5 keys: k1 k2 k3 morekwargs andmore
    print_kwargs(**kwargs)

def print_kwargs(**dict):
    for key in dict.keys():
        print(f"{key} = {dict[key]}")

a = "Append"
b = "Prepend"
c = "Override"
keyValues = {"k1":"Key one", "k2":"Key two", "k3":"Key three"}
variant(
    a, b, c,   # Ok: positional argument at very first
    kwarg2="abc", kwarg1="xyz", 
    # a, b, c, # Error: positional argument follows keyword argument
    *["more", "and", "more over"], # OK: iterable argument unpacking at first,
    **keyValues,                   # Ok: then keyword argument unpacking
    morekwargs="key", andmore="at last")
```

Ê≠§Â§ñÔºåPython ÂºïÂÖ•‰∏§‰∏™ÁâπÊÆäÂèÇÊï∞ÔºåÁî®Êù•Ê†áËÆ∞ `*args` Âíå `**kwargs` ‰ΩçÁΩÆÂàÜÈöîÔºö

```sh
def f(pos1, pos2, /, pos_or_kwd, *, kwd1, kwd2):
      -----------    ----------     ----------
        |             |                  |
        |        Positional or keyword   |
        |                                - Keyword only
         -- Positional only
```

‰ΩøÁî®Ëøô‰∏§‰∏™ÁâπÊÆäÂèÇÊï∞Êù•ÊéßÂà∂ÂáΩÊï∞ÂèÇÊï∞Â¶Ç‰ΩïËÆæÁΩÆÔºåÈªòËÆ§ÊòØ positional-or-keywordÔºåKeyword parameters ‰πüÂè´ÂÅöÂëΩÂêçÂèÇÊï∞„ÄÇ


## ==‚ö° CamelHump vs. Underscores Naming

È©ºÂ≥∞ÂëΩÂêçÂíå‰∏ãÁ∫øÂëΩÂêçÊòØ‰∏§Áßç‰ª£Á†ÅÁºñÂÜô‰π†ÊÉØÔºåÁõÆÁöÑÊòØ‰∏∫‰∫ÜÊèêÈ´ò‰ª£Á†ÅÂèØËØªÊÄßÔºåÈôç‰ΩéÂá∫ÈîôÁéáÔºåÊ≤°ÊúâÂì™‰∏™Â•Ω‰∏éÂùèÁöÑÂå∫Âà´„ÄÇ

```py
class CamelHumPPpPostfix():
    def underScoreName(self):
        name = self.__class__.__name__
        underScores = name[0].lower()
        lastUpper = False
        for c in name[1:]:
            if c.isupper() and not lastUpper:
                underScores += '_'
            underScores += c.lower()
            lastUpper = c.isupper()
        if underScores.endswith("_postfix"):
            underScores = underScores[1:-8]
        return underScores

varCamel = CamelHumPPpPostfix()
print(varCamel.underScoreName())
```



## ==‚ö° Comprehension Êé®ÂØºÂºè
- [The Python Tutorial](tutorial\index.rst)
- [The Python Language Reference](reference\index.rst)
- [Comprehensions](reference\expressions.rst)
- Python-3.10.2\Doc\library\ast.rst Comprehensions
- Python-3.10.2\Doc\tutorial\datastructures.rst List_Comprehensions
- Python-3.10.2\Doc\whatsnew\2.0.rst List_Comprehensions
- Python-3.10.2\Doc\whatsnew\3.6.rst PEP530


Êé®ÂØºÂºèÂèàÁß∞Ëß£ÊûêÂºèÊòØ PythonÁöÑ‰∏ÄÁßçÁã¨ÊúâÁâπÊÄßÔºåÊé®ÂØºÂºèÂèØ‰ª•Êñπ‰æøÂú∞‰ªé‰∏Ä‰∏™Êï∞ÊçÆÂ∫èÂàóÊûÑÂª∫Âè¶‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÂ∫èÂàóÁöÑÁªìÊûÑ‰Ωì„ÄÇ ÂÖ±Êúâ‰∏âÁßçÊé®ÂØºÔºåÂú® Python 2/3 ‰∏≠ÈÉΩÊúâÊîØÊåÅÔºö

- ÂàóË°®(list)Êé®ÂØºÂºè
- Â≠óÂÖ∏(dict)Êé®ÂØºÂºè
- ÈõÜÂêà(set)Êé®ÂØºÂºè

‰∏ÄÊó¶‰Ω†Áü•ÈÅì‰∫Ü‰ΩøÁî®ÂàóË°®Êé®ÂØºÂºèÁöÑËØÄÁ™çÔºå‰Ω†Â∞±ËÉΩËΩªÊòì‰ΩøÁî®‰ªªÊÑè‰∏ÄÁßçÊé®ÂØºÂºè‰∫Ü„ÄÇ

ÂàóË°®Êé®ÂØºÂºèÁöÑÁªìÊûÑÊòØÂú®‰∏Ä‰∏™‰∏≠Êã¨Âè∑ÈáåÂåÖÂê´‰∏Ä‰∏™Ë°®ËææÂºèÔºåÁÑ∂ÂêéÊòØ‰∏Ä‰∏™ for ËØ≠Âè•ÔºåÁÑ∂ÂêéÊòØ‰ªªÊÑè‰∏™ for/if ËØ≠Âè•„ÄÇË°®ËææÂºè out_exp ÂèØ‰ª•ÊòØ‰ªªÊÑèÁöÑÔºåÊÑèÊÄùÊòØ‰Ω†ÂèØ‰ª•Âú®ÂàóË°®‰∏≠ÊîæÂÖ•‰ªªÊÑèÁ±ªÂûãÁöÑÂØπË±°ÔºåËøîÂõûÁªìÊûúÂ∞ÜÊòØ‰∏Ä‰∏™Êñ∞ÁöÑÂàóË°®„ÄÇ

    variable = [out_exp for out_exp in input_list if out_exp == 2]

    multiples = [i for i in range(30) if i % 3 is 0]
    # [0, 3, 6, 9, 12, 15, 18, 21, 24, 27]

ËøôÂ∞ÜÂØπÂø´ÈÄüÁîüÊàêÂàóË°®ÈùûÂ∏∏ÊúâÁî®ÔºåÊØî filter ÂáΩÊï∞ËøòÂ•ΩÁî®„ÄÇÂàóË°®Êé®ÂØºÂºèÂú®Êúâ‰∫õÊÉÖÂÜµ‰∏ãË∂ÖËµûÔºåÁâπÂà´ÊòØÂΩì‰Ω†ÈúÄË¶Å‰ΩøÁî®forÂæ™ÁéØÊù•ÁîüÊàê‰∏Ä‰∏™Êñ∞ÂàóË°®„ÄÇ‰ª•‰∏ã‰æãÂ≠êÂ∞±ÊòØ‰∏Ä‰∏™ÂØπÊØîÔºö

    squared = []
    for x in range(10):
        squared.append(x**2)

    # Comprehension Style
    squared = [x**2 for x in range(10)]


Â≠óÂÖ∏Êé®ÂØºÂíåÂàóË°®Êé®ÂØºÁöÑ‰ΩøÁî®ÊñπÊ≥ïÊòØÁ±ª‰ººÁöÑÔºö

    mcase = {'a': 10, 'b': 34, 'A': 7, 'Z': 3}

    mcase_frequency = {
        k.lower(): mcase.get(k.lower(), 0) + mcase.get(k.upper(), 0)
        for k in mcase.keys()
    }

    # mcase_frequency == {'a': 17, 'z': 3, 'b': 34}

Âú®‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰∏≠Êàë‰ª¨ÊääÂêå‰∏Ä‰∏™Â≠óÊØç‰ΩÜ‰∏çÂêåÂ§ßÂ∞èÂÜôÁöÑÂÄºÂêàÂπ∂Ëµ∑Êù•‰∫Ü„ÄÇ‰Ω†ËøòÂèØ‰ª•Âø´ÈÄüÂØπÊç¢‰∏Ä‰∏™Â≠óÂÖ∏ÁöÑÈîÆÂíåÂÄºÔºö

    {v: k for k, v in some_dict.items()}


ÈõÜÂêàÊé®ÂØºÂºèË∑üÂàóË°®Êé®ÂØºÂºè‰πüÊòØÁ±ª‰ººÁöÑÔºåÂîØ‰∏ÄÁöÑÂå∫Âà´Âú®‰∫éÂÆÉ‰ΩøÁî®Â§ßÊã¨Âè∑{}Ôºö

    squared = {x**2 for x in [1, 1, 2]}
    print(squared)
    # Output: {1, 4}

Ê∑∑ÂêàÂÜôÊ≥ïÔºö

```py
view_ids = sublime_api.window_views(window_id, True)
views = [{ "view": View(x), "file": View(x).file_name()} for x in view_ids]

RANKS = '2 3 4 5 6 7 8 9 10 J Q K A'.split()
SUITS = '‚ô£ ‚ô¢ ‚ô° ‚ô†'.split()

cards = [(r, s) for s in SUITS for r in RANKS]
print(cards)
```


## ==‚ö° Dependence Inject & IoC

Âú® Python Èáå‰∏ÄÂàá‰∫ãÁâ©ÁöÜ‰∏∫ÂØπË±°ÔºåËÄåÊâÄÊúâÁöÑÁ±ªÈÉΩÊòØÂØπË±°ÔºåÈªòËÆ§ÊòØÁî± *type* ÂàõÂª∫ÔºåÂàõÂª∫Á±ªÁöÑÊâßË°åÊµÅÁ®ãÔºö

- Á±ª‰æãÂåñÊó∂‰ºöË∞ÉÁî® *type* Á±ªÁöÑ `__call__` ÊñπÊ≥ïËé∑ÂèñÁ±ªÂÆûÂàó„ÄÇ
- Âú® call ÊñπÊ≥ïÈáåË∞ÉÁî® `__new__` ÊñπÊ≥ïË¥üË¥£ÂàõÂª∫ÂØπË±°„ÄÇ
- ÊâßË°åÁ±ªÂÆû‰æãÁöÑ `__init__` ÊñπÊ≥ïËøõË°åÂàùÂßãÂåñ„ÄÇ

‰∫ÜËß£ÂÖ∂‰∏≠ÁöÑÂéüÁêÜÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•Âú® __call__ ÈáåÈù¢Â§ßÂÅöÊñáÁ´†Âï¶„ÄÇ ÂèØÂèòÈïøÂèÇÊï∞ÂáΩÊï∞ÊñπÊ≥ï‰∏≠Ôºå`*args` Áî®Êù•Â∞ÜÂèÇÊï∞ÊâìÂåÖÊàê tuple ÁªôÂáΩÊï∞‰ΩìË∞ÉÁî®Ôºå`**kwargs` ÊâìÂåÖÂÖ≥ÈîÆÂ≠óÂèÇÊï∞Êàê dict ÁªôÂáΩÊï∞‰ΩìË∞ÉÁî®ÔºåËøôÊòØ Python ÁâπÊúâÁöÑËØ≠Ê≥ïÁªìÊûÑ„ÄÇÂèÇÊï∞ arg„ÄÅ`*args`„ÄÅ`**kwargs` ‰ΩçÁΩÆÂøÖÈ°ª‰øùÊåÅËøôÁßçÈ°∫Â∫èÔºå‰∏çËÉΩÊää arg ËøôÁßçÂ∏∏ËßÑÂèÇÊï∞ÊîæÂà∞ÂêéËæπ„ÄÇ

```py
class MyType(type):

    def __call__(cls, *args, **kwargs):
        obj = cls.__new__(cls, *args, **kwargs)
        obj.__init__(*args, **kwargs)
        return obj

class Foo(metaclass=MyType):

    def __init__(self, arg):
        self.name = 'alex ' + arg

f = Foo("xyz")
print(f.name)
```

Â∞ÜÁ±ªÂÆûÂàóÂΩìÂáΩÊï∞‰ΩøÁî®Êó∂‰πü‰ºöÊâßË°å __call__ Ëøô‰∏™È≠îÊúØÊñπÊ≥ïÔºåÂÆûÁé∞Ëøô‰∏™ÊñπÊ≥ïÂç≥Ë°®Á§∫ÂØπË±°‰∏∫ callable„ÄÇÂú®‰∏ÄËà¨ÁöÑÁ±ªÂÆû‰æã‰∏≠ÔºåÂ¶Ç obj() ËøôÁßçÂáΩÊï∞ÂºèË°®Ëææ‰∏≠‰ºöËá™Âä®Ë∞ÉÁî®Ôºå‰ΩÜÊòØÂΩìÂÆÉÂÆö‰πâÂú® metaclass Â±ûÊÄßÊåáÂÆöÁöÑÁ±ªÔºåÂ∞±‰∏ç‰ºöË¢´Ëá™Âä®ÔºåÈô§Èùû metaclass Á±ªÁªßÊâø‰∫Ü *type* Á±ªÂûãÔºåÂõ†‰∏∫ÈúÄË¶ÅÈÄöËøáÂÆÉÊù•Ëá™ÂÆö metaclass„ÄÇ

```py
class MyClass:
    def __init__(self):
        print("I was called!")
    def __call__(self):
        print("Uhm, was I called?")

obj = MyClass() #==> __init__()
obj()           #==> __call__()
```

‰æùËµñÊ≥®ÂÖ• DI ÊòØÊéßÂà∂ÂèçËΩ¨ IoC ÁöÑ‰∏ÄÁßçÂÆûÁé∞ÔºåÊú¨Ë¥®Â∞±ÊòØÈÄöËøáÁªÑÂêàÂÆûÁé∞Ëß£ËÄ¶ÔºåÂáèÂ∞ë‰æùËµñÊÄßÔºåÂéüÊù•‰ª•Êüê‰∏™ÂÖ∑‰ΩìÁöÑÂÄºÊàñÂØπË±°‰º†ÂÖ•Âà∞ÂÜÖÈÉ®ÊîπÊàê‰ª•ÂèÇÊï∞ÁöÑÂΩ¢Âºè‰º†ÂÖ•„ÄÇ

```py
class IOC(type):
 
    __relation = {}
 
    @staticmethod
    def register(cls, value):
        IOC.__relation[cls] = value

    @staticmethod
    def exist(cls):
        return True if cls in IOC.__relation else False

    @staticmethod
    def get(cls):
        return IOC.__relation[cls]

    # def __call__(cls, bases, classdict): #==> for IOC() or IOC(type)
    def __call__(cls, *args, **kwargs):
        print("call: ", cls, args, kwargs)
        obj = cls.__new__(cls, *args, **kwargs)
        arg_list = list(args)
        if IOC.exist(cls):
            value = IOC.get(cls)
            arg_list.append(value)
        obj.__init__(*arg_list,**kwargs)
        return obj

class Eagle(metaclass=IOC):

    def __init__(self, fly):
        fly()


class Ostrich(metaclass=IOC):

    def __init__(self, run):
        run()

IOC.register(Eagle, lambda act="fly": print(act))
IOC.register(Ostrich, lambda act="run": print(act))

Eagle()
Ostrich()
```

‰∏Ä‰∏™ metaclass ÁªßÊâø‰∏é‰∏çÁªßÊâø type Á±ªÔºåÂÖ∂ __init__ ÊñπÊ≥ïÊé•Êî∂ÁöÑÂèÇÊï∞Âá∫‰∏çÂêåÔºö

```py
# def __init__(cls, clsname, bases, classdict): #==> for IOC(type)
# def __init__(self, clsname, bases, classdict): #==> for IOC()
def __init__(self, *args, **kwds):
    self.__init__ = self.__init_ori__
    self.__init_ori__ = None
    self.__init__(IOC.get(self.__class__))

def __new__(metacls, cls, bases, classdict, **kwds):
    classdict['__init_ori__'] = classdict['__init__']
    classdict['__init__'] = metacls.__init__
    c = type(cls, bases, classdict)
    return c
```



## ==‚ö° Style Guide for Python Code - PEP 0008 ÁºñÁ†ÅËßÑËåÉÊåáÂçó
- Python Enhancement Proposals (PEPs) https://www.python.org/dev/peps/
- Style Guide for Python Code PEP 0008 https://www.python.org/dev/peps/pep-0008

üëâ Áº©Ëøõ

4 ‰∏™Á©∫Ê†ºÁöÑÁº©ËøõÔºàÁºñËæëÂô®ÈÉΩÂèØ‰ª•ÂÆåÊàêÊ≠§ÂäüËÉΩÔºâÔºå‰∏ç‰ΩøÁî® TapÔºåÊõ¥‰∏çËÉΩÊ∑∑Âêà‰ΩøÁî® Tap ÂíåÁ©∫Ê†º„ÄÇ
ÊØèË°åÊúÄÂ§ßÈïøÂ∫¶ 79ÔºåÊç¢Ë°åÂèØ‰ª•‰ΩøÁî®ÂèçÊñúÊù†ÔºåÊúÄÂ•Ω‰ΩøÁî®ÂúÜÊã¨Âè∑„ÄÇÊç¢Ë°åÁÇπË¶ÅÂú®Êìç‰ΩúÁ¨¶ÁöÑÂêéËæπÊï≤ÂõûËΩ¶„ÄÇ
Á±ªÂíå top-level ÂáΩÊï∞ÂÆö‰πâ‰πãÈó¥Á©∫‰∏§Ë°åÔºõÁ±ª‰∏≠ÁöÑÊñπÊ≥ïÂÆö‰πâ‰πãÈó¥Á©∫‰∏ÄË°åÔºõÂáΩÊï∞ÂÜÖÈÄªËæëÊó†ÂÖ≥ÊÆµËêΩ‰πãÈó¥Á©∫‰∏ÄË°åÔºõÂÖ∂‰ªñÂú∞ÊñπÂ∞ΩÈáè‰∏çË¶ÅÂÜçÁ©∫Ë°å„ÄÇ

üëâ ÊñáÊ°£ÁºñÊéí

Ê®°ÂùóÂÜÖÂÆπÁöÑÈ°∫Â∫èÔºöÊ®°ÂùóËØ¥ÊòéÂíå docstring‚Äîimport‚Äîglobals&constants‚ÄîÂÖ∂‰ªñÂÆö‰πâ„ÄÇÂÖ∂‰∏≠importÈÉ®ÂàÜÔºåÂèàÊåâÊ†áÂáÜ„ÄÅ‰∏âÊñπÂíåËá™Â∑±ÁºñÂÜôÈ°∫Â∫è‰æùÊ¨°ÊéíÊîæÔºå‰πãÈó¥Á©∫‰∏ÄË°å
‰∏çË¶ÅÂú®‰∏ÄÂè• import ‰∏≠Â§ö‰∏™Â∫ìÔºåÊØîÂ¶Ç import os, sys ‰∏çÊé®Ëçê
Â¶ÇÊûúÈááÁî® from XX import XX ÂºïÁî®Â∫ìÔºåÂèØ‰ª•ÁúÅÁï•‚Äòmodule.‚ÄôÔºåÈÉΩÊòØÂèØËÉΩÂá∫Áé∞ÂëΩÂêçÂÜ≤Á™ÅÔºåËøôÊó∂Â∞±Ë¶ÅÈááÁî® import XX

üëâ Á©∫Ê†ºÁöÑ‰ΩøÁî®

ÂêÑÁßçÂè≥Êã¨Âè∑Ââç‰∏çË¶ÅÂä†Á©∫Ê†º„ÄÇ
ÈÄóÂè∑„ÄÅÂÜíÂè∑„ÄÅÂàÜÂè∑Ââç‰∏çË¶ÅÂä†Á©∫Ê†º„ÄÇ
ÂáΩÊï∞ÁöÑÂ∑¶Êã¨Âè∑Ââç‰∏çË¶ÅÂä†Á©∫Ê†º„ÄÇÂ¶ÇFunc(1)
Â∫èÂàóÁöÑÂ∑¶Êã¨Âè∑Ââç‰∏çË¶ÅÂä†Á©∫Ê†º„ÄÇÂ¶Çlist[2]
Êìç‰ΩúÁ¨¶Â∑¶Âè≥ÂêÑÂä†‰∏Ä‰∏™Á©∫Ê†ºÔºå‰∏çË¶Å‰∏∫‰∫ÜÂØπÈΩêÂ¢ûÂä†Á©∫Ê†º
ÂáΩÊï∞ÈªòËÆ§ÂèÇÊï∞‰ΩøÁî®ÁöÑËµãÂÄºÁ¨¶Â∑¶Âè≥ÁúÅÁï•Á©∫Ê†º
‰∏çË¶ÅÂ∞ÜÂ§öÂè•ËØ≠Âè•ÂÜôÂú®Âêå‰∏ÄË°åÔºåÂ∞ΩÁÆ°‰ΩøÁî®‚ÄòÔºõ‚ÄôÂÖÅËÆ∏
if/for/whileËØ≠Âè•‰∏≠ÔºåÂç≥‰ΩøÊâßË°åËØ≠Âè•Âè™Êúâ‰∏ÄÂè•Ôºå‰πüÂøÖÈ°ªÂè¶Ëµ∑‰∏ÄË°å

üëâ Comment Ê≥®Èáä

ÊÄª‰ΩìÂéüÂàôÔºåÈîôËØØÁöÑÊ≥®Èáä‰∏çÂ¶ÇÊ≤°ÊúâÊ≥®Èáä„ÄÇÊâÄ‰ª•ÂΩì‰∏ÄÊÆµ‰ª£Á†ÅÂèëÁîüÂèòÂåñÊó∂ÔºåÁ¨¨‰∏Ä‰ª∂‰∫ãÂ∞±ÊòØË¶Å‰øÆÊîπÊ≥®ÈáäÔºÅÊ≥®ÈáäÂøÖÈ°ª‰ΩøÁî®Ëã±ÊñáÔºåÊúÄÂ•ΩÊòØÂÆåÊï¥ÁöÑÂè•Â≠êÔºåÈ¶ñÂ≠óÊØçÂ§ßÂÜôÔºåÂè•ÂêéË¶ÅÊúâÁªìÊùüÁ¨¶ÔºåÁªìÊùüÁ¨¶ÂêéË∑ü‰∏§‰∏™Á©∫Ê†ºÔºåÂºÄÂßã‰∏ã‰∏ÄÂè•„ÄÇÂ¶ÇÊûúÊòØÁü≠ËØ≠ÔºåÂèØ‰ª•ÁúÅÁï•ÁªìÊùüÁ¨¶„ÄÇ

ÂùóÊ≥®ÈáäÔºåÂú®‰∏ÄÊÆµ‰ª£Á†ÅÂâçÂ¢ûÂä†ÁöÑÊ≥®Èáä„ÄÇÂú®‚Äò#‚ÄôÂêéÂä†‰∏ÄÁ©∫Ê†º„ÄÇÊÆµËêΩ‰πãÈó¥‰ª•Âè™Êúâ‚Äò#‚ÄôÁöÑË°åÈó¥Èöî„ÄÇÊØîÂ¶ÇÔºö

    # Description : Module config.
    # 
    # Input : None
    #
    # Output : None

Ë°åÊ≥®ÈáäÔºåÂú®‰∏ÄÂè•‰ª£Á†ÅÂêéÂä†Ê≥®ÈáäÔºåÊØîÂ¶ÇÔºö

    x = x + 1 # Increment x

ÊñáÊ°£ÊèèËø∞„ÄÅÂùóÊ≥®Ëß£Ôºå‰ΩøÁî®‰∏âËøûÂºïÂè∑

‰∏∫ÊâÄÊúâÁöÑÂÖ±ÊúâÊ®°Âùó„ÄÅÂáΩÊï∞„ÄÅÁ±ª„ÄÅÊñπÊ≥ïÂÜô docstringsÔºõÈùûÂÖ±ÊúâÁöÑÊ≤°ÊúâÂøÖË¶ÅÔºå‰ΩÜÊòØÂèØ‰ª•ÂÜôÊ≥®ÈáäÔºàÂú®defÁöÑ‰∏ã‰∏ÄË°åÔºâ„ÄÇ
ÂçïË°åÊ≥®ÈáäËØ∑ÂèÇËÄÉÂ¶Ç‰∏ãÊñπÂºè

    def kos_root():
        """Return the pathname of the KOS root directory."""
        global _kos_root
        if _kos_root: return _kos_root
        ...


üëâ ÂëΩÂêçËßÑÂàô

**ÊÄª‰ΩìÂéüÂàôÔºåÊñ∞Áºñ‰ª£Á†ÅÂøÖÈ°ªÊåâ‰∏ãÈù¢ÂëΩÂêçÈ£éÊ†ºËøõË°åÔºåÁé∞ÊúâÂ∫ìÁöÑÁºñÁ†ÅÂ∞ΩÈáè‰øùÊåÅÈ£éÊ†º„ÄÇÁªù‰∏çË¶ÅÂçïÁã¨‰ΩøÁî®‰æãÂ¶ÇÂ§ßÂÜôÁöÑ I ÂíåÂ§ßÂÜôÁöÑ O**

Ê®°ÂùóÂëΩÂêçÂ∞ΩÈáèÁü≠Â∞èÔºå‰ΩøÁî®ÂÖ®ÈÉ®Â∞èÂÜôÁöÑÊñπÂºèÔºåÂèØ‰ª•‰ΩøÁî®‰∏ãÂàíÁ∫ø„ÄÇ
ÂåÖÂëΩÂêçÂ∞ΩÈáèÁü≠Â∞èÔºå‰ΩøÁî®ÂÖ®ÈÉ®Â∞èÂÜôÁöÑÊñπÂºèÔºå‰∏çÂèØ‰ª•‰ΩøÁî®‰∏ãÂàíÁ∫ø„ÄÇ
Á±ªÁöÑÂëΩÂêç‰ΩøÁî®CapWordsÁöÑÊñπÂºèÔºåÊ®°ÂùóÂÜÖÈÉ®‰ΩøÁî®ÁöÑÁ±ªÈááÁî®_CapWordsÁöÑÊñπÂºè„ÄÇ
ÂºÇÂ∏∏ÂëΩÂêç‰ΩøÁî®CapWords+ErrorÂêéÁºÄÁöÑÊñπÂºè„ÄÇ
ÂÖ®Â±ÄÂèòÈáèÂ∞ΩÈáèÂè™Âú®Ê®°ÂùóÂÜÖÊúâÊïàÔºåÁ±ª‰ººCËØ≠Ë®Ä‰∏≠ÁöÑstatic„ÄÇÂÆûÁé∞ÊñπÊ≥ïÊúâ‰∏§ÁßçÔºå‰∏ÄÊòØallÊú∫Âà∂;‰∫åÊòØÂâçÁºÄ‰∏Ä‰∏™‰∏ãÂàíÁ∫ø„ÄÇ
ÂáΩÊï∞ÂëΩÂêç‰ΩøÁî®ÂÖ®ÈÉ®Â∞èÂÜôÁöÑÊñπÂºèÔºåÂèØ‰ª•‰ΩøÁî®‰∏ãÂàíÁ∫ø„ÄÇ
Â∏∏ÈáèÂëΩÂêç‰ΩøÁî®ÂÖ®ÈÉ®Â§ßÂÜôÁöÑÊñπÂºèÔºåÂèØ‰ª•‰ΩøÁî®‰∏ãÂàíÁ∫ø„ÄÇ
Á±ªÁöÑÂ±ûÊÄßÔºàÊñπÊ≥ïÂíåÂèòÈáèÔºâÂëΩÂêç‰ΩøÁî®ÂÖ®ÈÉ®Â∞èÂÜôÁöÑÊñπÂºèÔºåÂèØ‰ª•‰ΩøÁî®‰∏ãÂàíÁ∫ø„ÄÇ
Á±ªÁöÑÂ±ûÊÄßÊúâ3Áßç‰ΩúÁî®Âüüpublic„ÄÅnon-publicÂíåsubclass APIÔºåÂèØ‰ª•ÁêÜËß£ÊàêC++‰∏≠ÁöÑpublic„ÄÅprivate„ÄÅprotectedÔºånon-publicÂ±ûÊÄßÂâçÔºåÂâçÁºÄ‰∏ÄÊù°‰∏ãÂàíÁ∫ø„ÄÇ
Á±ªÁöÑÂ±ûÊÄßËã•‰∏éÂÖ≥ÈîÆÂ≠óÂêçÂ≠óÂÜ≤Á™ÅÔºåÂêéÁºÄ‰∏Ä‰∏ãÂàíÁ∫øÔºåÂ∞ΩÈáè‰∏çË¶Å‰ΩøÁî®Áº©Áï•Á≠âÂÖ∂‰ªñÊñπÂºè„ÄÇ
‰∏∫ÈÅøÂÖç‰∏éÂ≠êÁ±ªÂ±ûÊÄßÂëΩÂêçÂÜ≤Á™ÅÔºåÂú®Á±ªÁöÑ‰∏Ä‰∫õÂ±ûÊÄßÂâçÔºåÂâçÁºÄ‰∏§Êù°‰∏ãÂàíÁ∫ø„ÄÇÊØîÂ¶ÇÔºöÁ±ªFoo‰∏≠Â£∞Êòé__a,ËÆøÈóÆÊó∂ÔºåÂè™ËÉΩÈÄöËøá`Foo._Foo__a`ÔºåÈÅøÂÖçÊ≠ß‰πâ„ÄÇÂ¶ÇÊûúÂ≠êÁ±ª‰πüÂè´FooÔºåÈÇ£Â∞±Êó†ËÉΩ‰∏∫Âäõ‰∫Ü„ÄÇ
Á±ªÁöÑÊñπÊ≥ïÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÂøÖÈ°ªÊòØselfÔºåËÄåÈùôÊÄÅÊñπÊ≥ïÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÂøÖÈ°ªÊòØcls„ÄÇ

üëâ ÁºñÁ®ãÂª∫ËÆÆ

ÁºñÁ†Å‰∏≠ËÄÉËôëÂà∞ÂÖ∂‰ªñpythonÂÆûÁé∞ÁöÑÊïàÁéáÁ≠âÈóÆÈ¢òÔºåÊØîÂ¶ÇËøêÁÆóÁ¨¶‚Äò+‚ÄôÂú®CPythonÔºàPythonÔºâ‰∏≠ÊïàÁéáÂæàÈ´òÔºåÈÉΩÊòØJython‰∏≠Âç¥ÈùûÂ∏∏‰ΩéÔºåÊâÄ‰ª•Â∫îËØ•ÈááÁî®.join()ÁöÑÊñπÂºè„ÄÇ
Â∞ΩÂèØËÉΩ‰ΩøÁî® isÔºåis not Âèñ‰ª£ ==ÔºåÊØîÂ¶Ç if x is not None Ë¶Å‰ºò‰∫é if x
‰ΩøÁî®Âü∫‰∫éÁ±ªÁöÑÂºÇÂ∏∏ÔºåÊØè‰∏™Ê®°ÂùóÊàñÂåÖÈÉΩÊúâËá™Â∑±ÁöÑÂºÇÂ∏∏Á±ªÔºåÊ≠§ÂºÇÂ∏∏Á±ªÁªßÊâøËá™Exception„ÄÇ
Â∏∏‰∏≠‰∏çË¶Å‰ΩøÁî®Ë£∏Èú≤ÁöÑ exceptÔºåexcept ÂêéË∑üÂÖ∑‰ΩìÁöÑ exceptions ‰æãÂ¶Ç

    try:
        ...
    except Exception as ex:
        print ex

ÂºÇÂ∏∏‰∏≠tryÁöÑ‰ª£Á†ÅÂ∞ΩÂèØËÉΩÂ∞ë„ÄÇ

‰ΩøÁî®startswith() and endswith()‰ª£ÊõøÂàáÁâáËøõË°åÂ∫èÂàóÂâçÁºÄÊàñÂêéÁºÄÁöÑÊ£ÄÊü•„ÄÇ

    foo = 'abc000xyz'

    if foo.startswith('abc') and foo.endswith('xyz'):
        print 'yes'
    else:
        print 'no'

    #ËÄåÂ¶Ç‰∏ãÁöÑÊñπÂºè‰∏çÊèêÂÄ°
    if foo[:3]=='abc' and foo[-3:]=='xyz':
        print 'yes'
    else:
        print 'no'

‰ΩøÁî®isinstance()ÊØîËæÉÂØπË±°ÁöÑÁ±ªÂûã„ÄÇÊØîÂ¶Ç:

    foo = 'abc000xyz'

    # ÊèêÂÄ°
    print isinstance(foo,int) # false

    # ‰∏çÊèêÂÄ°
    print type(foo) == type('1') #true

Âà§Êñ≠Â∫èÂàóÁ©∫Êàñ‰∏çÁ©∫ÔºåÊúâÂ¶Ç‰∏ãËßÑÂàôÔºö

    foo = 'abc000xyz'

    if foo:
        print "not empty"
    else:
        print "empty"

    #‰∏çÊèêÂÄ°‰ΩøÁî®Â¶Ç‰∏ã
    if len(foo):
        print "not empty"
    else:
        print "empty"

‰∫åËøõÂà∂Êï∞ÊçÆÂà§Êñ≠‰ΩøÁî® if boolvalue ÁöÑÊñπÂºè„ÄÇ




# =üö© Classes & OOP
- Python 3.10.2 Documentation ¬ª The Python Language Reference ¬ª 3. Data model 
- Python 3.10.2 Documentation ¬ª The Python Tutorial ¬ª 9. Classes 
- PEP 636 ‚Äì Structural Pattern Matching: Tutorial https://www.python.org/dev/peps/pep-0636
- [PythonÂÖ•Èó®‰πãÁ±ª(class)](https://www.cnblogs.com/chengd/articles/7287528.html)

Python OOP Á¨¨‰∏ÄÂç∞Ë±°ÔºöÁ±ªÂûãÂ±ûÊÄß‰∏éÂÆû‰æãÂ±ûÊÄßÔºö

```py
class Point:
    x:int = 1 # Class variables
    y:int = 1

    def __init__(self, x,y):
        self.X = x # Instance variables
        self.Y = y

    def __str__(self):
        return f"<Point xy=({self.x}, {self.y}) XY=({self.X}, {self.Y})>"

p1 = Point(1,2)
p2 = Point(3,4)

print(p1, p2)
Point.x = 2
Point.y = 3
print(p1, p2)
# Output
# <Point xy=(1, 1) XY=(1, 2)> <Point xy=(1, 1) XY=(3, 4)>
# <Point xy=(2, 3) XY=(1, 2)> <Point xy=(2, 3) XY=(3, 4)>


def where_is(p):
    match p:
        case Point(x=0, y=y):
            print(f"Position at y={y}")
        case Point(x=x, y=0):
            print(f"Position at x={x}")
        case Point(x=x, y=y):
            print(f"Position at x={x} y={y}")
        case _:
            print(f"Unknow position {_}")

where_is(Point(0,1))
where_is(Point(1,0))
where_is(Point(1,2))
where_is((1,2))
# Output
# Position at x=2 y=3
# Position at x=2 y=3
# Position at x=2 y=3
# Unknow position None
```

Á§∫ËåÉ‰ª£Á†ÅÁöÑÁ¨¨‰∫åÈÉ®ÂàÜÊòØÊ®°ÂºèÂåπÈÖçËØ≠Âè• matchÔºåÂú® Erlang ËØ≠Ë®Ä‰∏≠ÔºåËøôÊòØÈùûÂ∏∏Âü∫Êú¨ÁöÑÁºñÁ®ãÊÄùÊÉ≥ÔºåÈÄöËøá‰∏§ËÄÖÁöÑÊ®°ÂºèÁõ∏‰ººÂ∫¶ÂåπÈÖçÂèòÈáèÔºåËÄå‰∏çÊòØÁõ¥Êé•ËøõË°åÂèòÈáèËµãÂÄº„ÄÇ


**Á±ª(Class)** Áî®Êù•ÊèèËø∞ÂÖ∑ÊúâÁõ∏ÂêåÁöÑÂ±ûÊÄßÂíåÊñπÊ≥ïÁöÑÂØπË±°ÁöÑÈõÜÂêà„ÄÇÂÆÉÂÆö‰πâ‰∫ÜËØ•ÈõÜÂêà‰∏≠ÊØè‰∏™ÂØπË±°ÊâÄÂÖ±ÊúâÁöÑÂ±ûÊÄßÂíåÊñπÊ≥ï„ÄÇÂØπË±°ÊòØÁ±ªÁöÑÂÆû‰æã„ÄÇ
**Á±ªÂèòÈáè** Á±ªÂèòÈáèÂú®Êï¥‰∏™ÂÆû‰æãÂåñÁöÑÂØπË±°‰∏≠ÊòØÂÖ¨Áî®ÁöÑ„ÄÇÁ±ªÂèòÈáèÂÆö‰πâÂú®Á±ª‰∏≠‰∏îÂú®ÂáΩÊï∞‰Ωì‰πãÂ§ñ„ÄÇÁ±ªÂèòÈáèÈÄöÂ∏∏‰∏ç‰Ωú‰∏∫ÂÆû‰æãÂèòÈáè‰ΩøÁî®„ÄÇ
**Êï∞ÊçÆÊàêÂëò** Á±ªÂèòÈáèÊàñËÄÖÂÆû‰æãÂèòÈáèÁî®‰∫éÂ§ÑÁêÜÁ±ªÂèäÂÖ∂ÂÆû‰æãÂØπË±°ÁöÑÁõ∏ÂÖ≥ÁöÑÊï∞ÊçÆ„ÄÇ
**ÊñπÊ≥ïÈáçÂÜô** Â¶ÇÊûú‰ªéÁà∂Á±ªÁªßÊâøÁöÑÊñπÊ≥ï‰∏çËÉΩÊª°Ë∂≥Â≠êÁ±ªÁöÑÈúÄÊ±ÇÔºåÂèØ‰ª•ÂØπÂÖ∂ËøõË°åÊîπÂÜôÔºåËøô‰∏™ËøáÁ®ãÂè´ÊñπÊ≥ïÁöÑË¶ÜÁõñÔºàoverrideÔºâÔºå‰πüÁß∞‰∏∫ÊñπÊ≥ïÁöÑÈáçÂÜô„ÄÇ
**ÂÆû‰æãÂèòÈáè** ÂÆö‰πâÂú®ÊñπÊ≥ï‰∏≠ÁöÑÂèòÈáèÔºåÂè™‰ΩúÁî®‰∫éÂΩìÂâçÂÆû‰æãÁöÑÁ±ª„ÄÇ
**ÁªßÊâø** Âç≥‰∏Ä‰∏™Ê¥æÁîüÁ±ªÔºàderived classÔºâÁªßÊâøÂü∫Á±ªÔºàbase classÔºâÁöÑÂ≠óÊÆµÂíåÊñπÊ≥ï„ÄÇ‰æãÂ¶ÇÔºåËÆæËÆ°‰∏Ä‰∏™DogÁ±ªÂûãÁöÑÂØπË±°Ê¥æÁîüËá™AnimalÁ±ªÔºåDog‰πüÂ∞±ÊòØ‰∏Ä‰∏™Animal„ÄÇ
**ÂÆû‰æãÂåñ** ÂàõÂª∫‰∏Ä‰∏™Á±ªÁöÑÂÆû‰æãÔºåÁ±ªÁöÑÂÖ∑‰ΩìÂØπË±°„ÄÇ
**ÊñπÊ≥ï** Á±ª‰∏≠ÂÆö‰πâÁöÑÂáΩÊï∞„ÄÇ
**ÂØπË±°** ÈÄöËøáÁ±ªÂÆö‰πâÁöÑÊï∞ÊçÆÁªìÊûÑÂÆû‰æã„ÄÇÂØπË±°ÂåÖÊã¨‰∏§‰∏™Êï∞ÊçÆÊàêÂëòÔºàÁ±ªÂèòÈáèÂíåÂÆû‰æãÂèòÈáèÔºâÂíåÊñπÊ≥ï„ÄÇ

Python ÁâπÊÆäÁöÑÁ±ªÂ±ûÊÄß

__dict__ : Á±ªÁöÑÂ±ûÊÄßÔºàÂåÖÂê´‰∏Ä‰∏™Â≠óÂÖ∏ÔºåÁî±Á±ªÁöÑÊï∞ÊçÆÂ±ûÊÄßÁªÑÊàêÔºâ
__doc__ : Á±ªÁöÑÊñáÊ°£Â≠óÁ¨¶‰∏≤
__name__: Á±ªÂêç
__module__: Á±ªÂÆö‰πâÊâÄÂú®ÁöÑÊ®°ÂùóÔºàÁ±ªÁöÑÂÖ®ÂêçÊòØ`__main__.className`ÔºåÂ¶ÇÊûúÁ±ª‰Ωç‰∫é‰∏Ä‰∏™ÂØºÂÖ•Ê®°Âùómymod‰∏≠ÔºåÈÇ£‰πà`className.__module__` Á≠â‰∫é mymodÔºâ
__bases__ : Á±ªÁöÑÊâÄÊúâÁà∂Á±ªÊûÑÊàêÂÖÉÁ¥†ÔºàÂåÖÂê´‰∫Ü‰∏Ä‰∏™Áî±ÊâÄÊúâÁà∂Á±ªÁªÑÊàêÁöÑÂÖÉÁªÑÔºâ

Special attributes:

__doc__ The function's documentation string, or None if unavailable; not inherited by subclasses Writable 
__name__ The function's name Writable 
__qualname__ The function's qualified name New in version 3.3. Writable
__module__ The name of the module the function was defined in, or None if unavailable. Writable 
__defaults__ A tuple containing default argument values for those arguments that have defaults, or None if no arguments have a default value Writable 
__code__ The code object representing the compiled function body. Writable 
__globals__ A reference to the dictionary that holds the function's global variables for the global namespace of the module in which the function was defined. Read-only 
__dict__ The namespace supporting arbitrary function attributes. Writable 
__closure__ None or a tuple of cells that contain bindings for the function's free variables. See below for information on the cell_contents attribute. Read-only 
__annotations__ A dict containing annotations of parameters. The keys of the dict are the parameter names, and 'return' for the return annotation, if provided. Writable 
__kwdefaults__ A dict containing defaults for keyword-only parameters. Writable 


ÂíåÂÖ∂ÂÆÉÁºñÁ®ãËØ≠Ë®ÄÁõ∏ÊØîÔºåPython Âú®Â∞ΩÂèØËÉΩ‰∏çÂ¢ûÂä†Êñ∞ÁöÑËØ≠Ê≥ïÂíåËØ≠‰πâÁöÑÊÉÖÂÜµ‰∏ãÂä†ÂÖ•‰∫ÜÁ±ªÊú∫Âà∂„ÄÇÁ±ªÂ∞±ÊòØ‰∏Ä‰∏™Ê®°ÊùøÔºåÊ®°ÊùøÈáåÂèØ‰ª•ÂåÖÂê´Â§ö‰∏™ÂáΩÊï∞ÔºåÂáΩÊï∞ÈáåÂÆûÁé∞‰∏Ä‰∫õÂäüËÉΩ„ÄÇÂØπË±°ÂàôÊòØÊ†πÊçÆÊ®°ÊùøÂàõÂª∫ÁöÑÂÆû‰æãÔºåÈÄöËøáÂÆû‰æãÂØπË±°ÂèØ‰ª•ÊâßË°åÁ±ª‰∏≠ÁöÑÂáΩÊï∞„ÄÇ

Èù¢ÂêëÂØπË±°ÁöÑ‰∏âÂ§ßÁâπÊÄßÊòØÊåáÔºöÂ∞ÅË£Ö„ÄÅÁªßÊâøÂíåÂ§öÊÄÅÔºåÁ±ªËøôÁßçÊï∞ÊçÆÁ±ªÂûã‰πüÁß∞‰∏∫ÊäΩË±°Êï∞ÊçÆÁ±ªÂûã ADT Abstract Data Type„ÄÇ

‰∏Ä„ÄÅÂ∞ÅË£Ö

Â∞ÅË£ÖÔºåÈ°æÂêçÊÄù‰πâÂ∞±ÊòØÂ∞ÜÂÜÖÂÆπÂ∞ÅË£ÖÂà∞Êüê‰∏™Âú∞ÊñπÔºå‰ª•ÂêéÂÜçÂéªË∞ÉÁî®Ë¢´Â∞ÅË£ÖÂú®ÊüêÂ§ÑÁöÑÂÜÖÂÆπ„ÄÇ

‰∫å„ÄÅÁªßÊâø

ÁªßÊâøÔºåÈù¢ÂêëÂØπË±°‰∏≠ÁöÑÁªßÊâøÂíåÁé∞ÂÆûÁîüÊ¥ª‰∏≠ÁöÑÁªßÊâøÁõ∏ÂêåÔºåÂç≥ÔºöÂ≠êÂèØ‰ª•ÁªßÊâøÁà∂ÁöÑÂÜÖÂÆπ„ÄÇ

‰æãÂ¶ÇÂä®Áâ©Ôºö

„ÄÄ„ÄÄÁå´ÂèØ‰ª•ÔºöÂñµÂñµÂè´„ÄÅÂêÉ„ÄÅÂñù„ÄÅÊãâ„ÄÅÊíí
„ÄÄ„ÄÄÁãóÂèØ‰ª•ÔºöÊ±™Ê±™Âè´„ÄÅÂêÉ„ÄÅÂñù„ÄÅÊãâ„ÄÅÊíí

Áå´ÁãóÊã•ÊúâÂä®Áâ©ÁöÑÂÖ±ÂêåÁâπÊÄß„ÄÇ

‰∏â„ÄÅÂ§öÊÄÅ 

 Pyhon‰∏çÊîØÊåÅJavaÂíåC#Ëøô‰∏ÄÁ±ªÂº∫Á±ªÂûãËØ≠Ë®Ä‰∏≠Â§öÊÄÅÁöÑÂÜôÊ≥ïÔºå‰ΩÜÊòØÂéüÁîüÂ§öÊÄÅÔºåÂÖ∂PythonÂ¥áÂ∞ö‚ÄúÈ∏≠Â≠êÁ±ªÂûã‚Äù„ÄÇ



## ==‚ö° Dynamically Creating Classes with type

```py
# Dynamically Creating Classes with type
# ‚úÖ class type(object)
# ‚úÖ class type(name, bases, dict, **kwds)

import sys
class Foobar:
    def __init__(self, what):
        print({"foobar":what})
    pass

def str_to_class(str):
    return getattr(sys.modules[__name__], str)

T1 = str_to_class("Foobar")
T2 = type(Foobar)
print (T1, T2)
print (T1("What?"),T2("n"))
# <class '__main__.Foobar'> <class 'type'>
# {'foobar': 'What?'}
# <__main__.Foobar object at 0x6fffffef19a0> <class 'str'>
# print(getattr(T2, "Foobar"))

num = 1; s = "something";
print(Foobar)
print(type(num), type(s), type(Foobar)) 
print(type(type(num)), type(type(s)), type(type(Foobar))) 
# <class '__main__.Foobar'>
# <class 'int'>  <class 'str'>  <class 'type'>
# <class 'type'> <class 'type'> <class 'type'>

foo = type("Foo", (), {})
print(foo, foo())
# <class '__main__.Foo'> <__main__.Foo object at 0x6fffffef1e80>

def Rob_init(self, name):
    self.name = name

Robot = type("Robot", 
          (), # bases in a tuple then attributes in a dict
          {"counter":0, 
           "__init__": Rob_init,
           "sayHello": lambda self: "Hi, I am " + self.name})

print(Robot("Rob").sayHello()) # Hi, I am Rob
```


## ==‚ö° Class Property

Á±ªÂ±ûÊÄß Property Âç≥ÂåÖÂê´ËØªÂÜôÂô®ÁöÑÂ±ûÊÄßÔºågetter setter Áî®‰∫éÊéßÂà∂Â±ûÊÄßÊï∞ÊçÆÁöÑÂ≠òÂèñÔºö

```py
class PP(object):
    """docstring for PP"""
    def __init__(self, x):
        super(PP, self).__init__()
        self._x = x

    def x(self):
        return self._x
        pass
        
    def setx(self, value:int):
        self._x = value
        pass

    def delx(self):
        print(f"delx {self._x}")
        del self._x
        pass

    x = property(x, setx, delx, "I'm the 'x' property")

pp = PP(100)
print(pp.x)
del pp.x    # delx 100
print(pp.x) # AttributeError: x
```

Âú®Â≠êÁ±ª‰∏≠Êâ©Â±ï‰∏Ä‰∏™ property ÂèØËÉΩ‰ºöÂºïËµ∑ÂæàÂ§ö‰∏çÊòìÂØüËßâÁöÑÈóÆÈ¢òÔºåÂõ†‰∏∫‰∏Ä‰∏™ property
ÂÖ∂ÂÆûÊòØ getter„ÄÅsetter Âíå deleter ÊñπÊ≥ïÁöÑÈõÜÂêàÔºåËÄå‰∏çÊòØÂçï‰∏™ÊñπÊ≥ï„ÄÇÁâπÊÆäÊòØÂú®ÊñπÊ≥ï‰∏≠‰ΩøÁî® super() super(SubPerson, SubPerson) Êù•Ë∞ÉÁî®Áà∂Á±ªÁöÑÂÆûÁé∞Êó∂ÔºåÂèÇËÄÉ Python Cookbook„ÄÇ

Property ‰Ωú‰∏∫ÂáΩÊï∞‰øÆÈ•∞Âô®ÊñπÂºè‰ΩøÁî®ÔºåÊ≥®ÊÑèÔºö

- Âè™ÂÆö‰πâ getter Ë°®Á§∫‰∏Ä‰∏™Âè™ËØªÂ±ûÊÄß„ÄÇ
- @property @x.setter @x.deleter ‰øÆÈ•∞ÁöÑÊñπÊ≥ïÂêçÁß∞Ë¶Å‰∏ÄËá¥Ôºå‰∏ç‰∏ÄËá¥Â∞±‰∏çÊòØÂêå‰∏Ä‰∏™Â±ûÊÄß„ÄÇ

```py
class PP(object):
    """docstring for PP"""
    def __init__(self, x):
        super(PP, self).__init__()
        self._x = x

    @property # Turns x method into a getter
    def x(self):
        """I'm the 'x' property"""
        return self._x
        pass

    @x.setter # Turns x method into a setter
    def x(self, value:int):
        self._x = value
        pass

    @x.deleter # turns x method into a deleter
    def x(self):
        print(f"delx {self._x}")
        del self._x
        pass


pp = PP(100)
pp.x = 99
del pp.x    # delx 100
# if @x.setter decorates setx:
# AttributeError: can't set attribute
print(pp.x)
# if @x.deleter decorates delx:
# AttributeError: can't delete attribute
print(pp.x) 
# @property: AttributeError: 'PP' object has no attribute '_x'
```


## ==‚ö° Magic Methods/Attributes
- The Python Language Reference ¬ª 3. Data model - 3.1. Objects, values and types

ÂèÇËÄÉ Python ÂÆòÊñπÂèÇËÄÉÊâãÂÜå 3. Data model -> 3.3 Special method names

- Basic customization: Python-3.10.2\Doc\reference\datamodel.rst
- Programming FAQ: Python-3.10.2\Doc\faq\programming.rst

3.3.1. Basic customization
3.3.2. Customizing attribute access
3.3.2.1. Customizing module attribute access
3.3.2.2. Implementing Descriptors
3.3.2.3. Invoking Descriptors
3.3.2.4. __slots__
3.3.2.4.1. Notes on using __slots__
3.3.3. Customizing class creation
3.3.3.1. Metaclasses
3.3.3.2. Resolving MRO - Method Resolution Order ÁÆóÊ≥ï entries
3.3.3.3. Determining the appropriate metaclass
3.3.3.4. Preparing the class namespace
3.3.3.5. Executing the class body
3.3.3.6. Creating the class object
3.3.3.7. Uses for metaclasses
3.3.4. Customizing instance and subclass checks
3.3.5. Emulating generic types
3.3.5.1. The purpose of __class_getitem__
3.3.5.2. __class_getitem__ versus __getitem__
3.3.6. Emulating callable objects
3.3.7. Emulating container types
3.3.8. Emulating numeric types
3.3.9. With Statement Context Managers
3.3.10. Customizing positional arguments in class pattern matching
3.3.11. Special method lookup

.. method:: object.__new__(cls[, ...])

   .. index:: pair: subclassing; immutable types

   Called to create a new instance of class *cls*.  :meth:`__new__` is a static
   method (special-cased so you need not declare it as such) that takes the class
   of which an instance was requested as its first argument.  The remaining
   arguments are those passed to the object constructor expression (the call to the
   class).  The return value of :meth:`__new__` should be the new object instance
   (usually an instance of *cls*).

   Typical implementations create a new instance of the class by invoking the
   superclass's :meth:`__new__` method using ``super().__new__(cls[, ...])``
   with appropriate arguments and then modifying the newly-created instance
   as necessary before returning it.

   If :meth:`__new__` is invoked during object construction and it returns an
   instance of *cls*, then the new instance‚Äôs :meth:`__init__` method
   will be invoked like ``__init__(self[, ...])``, where *self* is the new instance
   and the remaining arguments are the same as were passed to the object constructor.

   If :meth:`__new__` does not return an instance of *cls*, then the new instance's
   :meth:`__init__` method will not be invoked.

   :meth:`__new__` is intended mainly to allow subclasses of immutable types (like
   int, str, or tuple) to customize instance creation.  It is also commonly
   overridden in custom metaclasses in order to customize class creation.


.. method:: object.__init__(self[, ...])

   .. index:: pair: class; constructor

   Called after the instance has been created (by :meth:`__new__`), but before
   it is returned to the caller.  The arguments are those passed to the
   class constructor expression.  If a base class has an :meth:`__init__`
   method, the derived class's :meth:`__init__` method, if any, must explicitly
   call it to ensure proper initialization of the base class part of the
   instance; for example: ``super().__init__([args...])``.

   Because :meth:`__new__` and :meth:`__init__` work together in constructing
   objects (:meth:`__new__` to create it, and :meth:`__init__` to customize it),
   no non-``None`` value may be returned by :meth:`__init__`; doing so will
   cause a :exc:`TypeError` to be raised at runtime.



Âú® Python ‰∏≠ÔºåÊâÄÊúâ‰ª• `__` Âèå‰∏ãÂàíÁ∫øÂåÖËµ∑Êù•ÁöÑÊñπÊ≥ïÔºåÈÉΩÁªüÁß∞‰∏∫ Magic Method „ÄéÈ≠îÊúØÊñπÊ≥ï„Äè„ÄÇ‰æãÂ¶ÇÁ±ªÁöÑÂàùÂßãÂåñÊñπÊ≥ï `__init__`ÔºåÈÄöËøáÊ≠§ÊñπÊ≥ïÊàë‰ª¨ÂèØ‰ª•ÂÆö‰πâ‰∏Ä‰∏™ÂØπË±°ÁöÑÂàùÂßãÂåñÊìç‰Ωú„ÄÇËøòÊúâ‰∏Ä‰∏™Êõ¥‰ºòÂÖàÊâßË°åÁöÑÂÆûÂàóÂåñÊñπÊ≥ï `__new__` ‰ºöÂú®Á±ªÂÆû‰æãÂåñÊó∂ÊâßË°åÔºå‰∏§‰∏™ÁªìÂêàÁõ∏ÂΩì C++ ÁöÑÊûÑÈÄ†ÂáΩÊï∞„ÄÇÂú®ÂØπË±°ÁîüÂëΩÂë®ÊúüË∞ÉÁî®ÁªìÊùüÊó∂Ôºå`__del__` ÊñπÊ≥ï‰ºöË¢´Ë∞ÉÁî®ÔºåÂèØ‰ª•ÁêÜËß£‰∏∫ÊûÑÊûêÂáΩÊï∞„ÄÇ

‰∏ãÈù¢ÈÄöËøá‰ª£Á†ÅÁöÑÁúã‰∏ÄÁúãËøô‰∏â‰∏™ÊñπÊ≥ï:

    from os.path import join 

    class FileObject: 
        '''file demo'''
        def __init__(self, filepath='~', filename='sample.txt'): 
            self.file = open(join(filepath, filename), 'r+') 
        def __del__(self): 
            self.file.close() 
            del self.file

Python ÂèØ‰ª•ÈÄöËøáÈ≠îÊúØÊñπÊ≥ïÊù•ÂÆåÊàêÂ∞ÅË£ÖÔºåÊéßÂà∂Â±ûÊÄßËÆøÈóÆÔºåÂÆûÁé∞ÁßÅÊúâÊàêÂëò:

    __getattr__(self, name)
    __setattr__(self, name, value)
    __delattr__(self, name)
    __getattribute__(self, name)

`__getattr__`ÂÆö‰πâÂΩìÁî®Êà∑ËØïÂõæËé∑Âèñ‰∏Ä‰∏™‰∏çÂ≠òÂú®ÁöÑÂ±ûÊÄßÊó∂ÁöÑË°å‰∏∫ÔºåËøôÈÄÇÁî®‰∫éÂØπÊôÆÈÄöÊãºÂÜôÈîôËØØÁöÑËé∑ÂèñÂíåÈáçÂÆöÂêëÔºåÂØπËé∑Âèñ‰∏Ä‰∫õ‰∏çÂª∫ËÆÆÁöÑÂ±ûÊÄßÊó∂ÂÄôÁªôÂá∫Ë≠¶ÂëäÊàñËÄÖÂ§ÑÁêÜ‰∏Ä‰∏™ AttributeError „ÄÇÂè™ÊúâÂΩìË∞ÉÁî®‰∏çÂ≠òÂú®ÁöÑÂ±ûÊÄßÁöÑÊó∂ÂÄô‰ºöË¢´ËøîÂõû„ÄÇ

`__setattr__` ÊòØ‰∏Ä‰∏™Â∞ÅË£ÖÂ±ûÊÄßÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇÊó†ËÆ∫Â±ûÊÄßÊòØÂê¶Â≠òÂú®ÔºåÂÆÉÈÉΩÂÖÅËÆ∏‰Ω†ÂÆö‰πâÂØπÂØπÂ±ûÊÄßÁöÑËµãÂÄºË°å‰∏∫Ôºå‰ª•‰∏∫Ëøô‰Ω†ÂèØ‰ª•ÂØπÂ±ûÊÄßÁöÑÂÄºËøõË°å‰∏™ÊÄßÂÆöÂà∂„ÄÇÂÆûÁé∞Êó∂Ë¶ÅÈÅøÂÖçÊó†ÈôêÈÄíÂΩíÁöÑÈîôËØØ„ÄÇ

`__delattr__` ÊòØÂà†Èô§‰∏Ä‰∏™Â±ûÊÄßÔºåÂÆûÁé∞Êó∂‰πüË¶ÅÈò≤Ê≠¢Êó†ÈôêÈÄíÂΩíÁé∞Ë±°ÂèëÁîü„ÄÇ

`__getattribute__`ÂÆö‰πâ‰∫Ü‰Ω†ÁöÑÂ±ûÊÄßË¢´ËÆøÈóÆÊó∂ÁöÑË°å‰∏∫ÔºåÁõ∏ÊØîËæÉÔºå`__getattr__`Âè™ÊúâËØ•Â±ûÊÄß‰∏çÂ≠òÂú®Êó∂Êâç‰ºöËµ∑‰ΩúÁî®„ÄÇÂõ†Ê≠§ÔºåÂú®ÊîØÊåÅ`__getattribute__`ÁöÑ Python ÁâàÊú¨Ë∞ÉÁî®`__getattr__`ÂâçÂøÖÂÆö‰ºöË∞ÉÁî®`__getattribute__`„ÄÇ`__getattribute__`ÂêåÊ†∑Ë¶ÅÈÅøÂÖçÊó†ÈôêÈÄíÂΩíÁöÑÈîôËØØ„ÄÇÈúÄË¶ÅÊèêÈÜíÁöÑÊòØÔºåÊúÄÂ•Ω‰∏çË¶ÅÂ∞ùËØïÂéªÂÆûÁé∞ÂÆÉÔºåÂõ†‰∏∫ÂæàÂ∞ëËßÅÂà∞ËøôÁßçÂÅöÊ≥ïÔºåËÄå‰∏îÂæàÂÆπÊòìÂá∫bug„ÄÇ

    #  ÈîôËØØÁî®Ê≥ï 
    def __setattr__(self, name, value): 
        self.name = value 
        # ÊØèÂΩìÂ±ûÊÄßË¢´ËµãÂÄºÁöÑÊó∂ÂÄô(Â¶Çself.name = value)Ôºå ``__setattr__()`` ‰ºöË¢´Ë∞ÉÁî®ÔºåËøôÊ†∑Â∞±ÈÄ†Êàê‰∫ÜÈÄíÂΩíË∞ÉÁî®„ÄÇ 
        # ËøôÊÑèÂë≥Ëøô‰ºöË∞ÉÁî® ``self.__setattr__('name', value)`` ÔºåÊØèÊ¨°ÊñπÊ≥ï‰ºöË∞ÉÁî®Ëá™Â∑±„ÄÇËøôÊ†∑‰ºöÈÄ†ÊàêÁ®ãÂ∫èÂ¥©Ê∫É„ÄÇ 

    #  Ê≠£Á°ÆÁî®Ê≥ï 
    def __setattr__(self, name, value): 
        self.__dict__[name] = value  # ÁªôÁ±ª‰∏≠ÁöÑÂ±ûÊÄßÂêçÂàÜÈÖçÂÄº 

Python ÁöÑÈ≠îÊúØÊñπÊ≥ïÂæàÂº∫Â§ßÔºå‰ΩÜÊòØÁî®Êó∂Âç¥ÈúÄË¶ÅÊÖé‰πãÂèàÊÖéÔºå‰∫ÜËß£Ê≠£Á°ÆÁöÑ‰ΩøÁî®ÊñπÊ≥ïÈùûÂ∏∏ÈáçË¶Å„ÄÇ


ÂàõÂª∫Ëá™ÂÆö‰πâÂÆπÂô®

ÊúâÂæàÂ§öÊñπÊ≥ïÂèØ‰ª•ËÆ©‰Ω†ÁöÑ Python Á±ªË°å‰∏∫ÂÉèÂÜÖÁΩÆÂÆπÂô®Á±ªÂûãÂ¶Ç list„ÄÅdict„ÄÅtuple„ÄÅstring Á≠âÁ≠â„ÄÇPython ÁöÑÂÆπÂô®Á±ªÂûãÂàÜ‰∏∫ÂèØÂèòÁ±ªÂûãÂ¶Ç list„ÄÅdict Âíå‰∏çÂèØÂèòÁ±ªÂûãÂ¶Ç string„ÄÅtuple„ÄÇÂå∫Âà´Âú®‰∫éÔºå‰∏çÂèØÂèòÂÆπÂô®‰∏ÄÊó¶ËµãÂÄºÂêéÔºå‰∏çÂèØÂØπÂÖ∂‰∏≠ÁöÑÊüê‰∏™ÂÖÉÁ¥†ËøõË°å‰øÆÊîπ„ÄÇ

ÂÆûÁé∞‰∏çÂèØÂèòÂÆπÂô®ÁöÑÂè™Áî®Âà∞ `__len__` Âíå `__getitem__`„ÄÇÂèØÂèòÂÆπÂô®ÂàôËøòÈ¢ùÂ§ñÈúÄË¶Å `__setitem__` Âíå `__delitem__`„ÄÇÂèØËø≠‰ª£ÂØπË±°ÈúÄË¶ÅÂÆö‰πâ `__iter__`ÔºåÂÆÉÈúÄË¶ÅËøîÂõû‰∏Ä‰∏™Ëø≠‰ª£Âô®„ÄÇËø≠‰ª£Âô®ÂøÖÈ°ªÈÅµÂæ™Ëø≠‰ª£Âô®ÂçèËÆÆÔºåÈúÄË¶ÅÊúâ `__iter__` ËøîÂõûÂÆÉÊú¨Ë∫´ Âíå next() ÊñπÊ≥ï„ÄÇ

    __len__(self): ËøîÂõûÂèØÂèòÂíå‰∏çÂèØÂèòÂÆπÂô®ÁöÑÈïøÂ∫¶„ÄÇ
    __getitem__(self, key): ÂÆö‰πâÂΩìÊüê‰∏ÄÈ°πË¢´ËÆøÈóÆÊó∂Ôºå‰ΩøÁî®self[key]ÊâÄ‰∫ßÁîüÁöÑË°å‰∏∫„ÄÇÈîÆ‰∏çÂ≠òÂú®ÊàñÁ±ªÂûãÈîôËØØÂ∞Ü‰∫ßÁîüKeyError/TypeError„ÄÇ
    __setitem__(self, key, value): ÂΩì‰Ω†ÊâßË°å self[key] = value Êó∂Ë∞ÉÁî®ËØ•ÊñπÊ≥ï„ÄÇ
    __delitem__(self, key): Âà†Èô§Êó∂Â¶Ç del self[key] ÊâßË°å„ÄÇÊó†ÊïàÁöÑÈîÆÂØºËá¥ÊäõÂá∫ÂºÇÂ∏∏„ÄÇ
    __iter__(self): ËøîÂõû‰∏Ä‰∏™ÂÆπÂô®Ëø≠‰ª£Âô®ÔºåÂ¶ÇÂÜÖÁΩÆÁöÑiter()ÊñπÊ≥ïË¢´Ë∞ÉÁî®Êó∂Ôºå‰ΩøÁî® for-in Âæ™ÁéØÊó∂„ÄÇ
    __reversed__(self): ÂÆûÁé∞ÂΩìreversed()Ë¢´Ë∞ÉÁî®Êó∂ÁöÑË°å‰∏∫„ÄÇÂ∫îËØ•ËøîÂõûÂ∫èÂàóÂèçËΩ¨ÂêéÁöÑÁâàÊú¨„ÄÇ
    __contains__(self, item): Ë∞ÉÁî® in/not in Êù•ÊµãËØïÊàêÂëòÊòØÂê¶Â≠òÂú®ÁöÑÊó∂ÂÄôÊâÄ‰∫ßÁîüÁöÑË°å‰∏∫„ÄÇ
    __missing__(self, key): Â≠óÂÖ∏Á±ªÂûã‰ºöÊúâËØ•ÊñπÊ≥ïÔºåÂÆÉÂÆö‰πâ‰∫ÜkeyÂ¶ÇÊûúÂú®ÂÆπÂô®‰∏≠Êâæ‰∏çÂà∞Êó∂Ëß¶ÂèëÁöÑË°å‰∏∫„ÄÇ

ÂèçÂ∞ÑÁõ∏ÂÖ≥È≠îÊúØÊñπÊ≥ï:

    __instancecheck__(self, instance): „ÄÄ„ÄÄÊ£ÄÊü•‰∏Ä‰∏™ÂÆû‰æãÊòØ‰∏çÊòØ‰Ω†ÂÆö‰πâÁöÑÁ±ªÁöÑÂÆû‰æã
    __subclasscheck__(self, subclass): „ÄÄ„ÄÄÊ£ÄÊü•‰∏Ä‰∏™Á±ªÊòØ‰∏çÊòØ‰Ω†ÂÆö‰πâÁöÑÁ±ªÁöÑÂ≠êÁ±ª


Êúâ‰∏Ä‰∏™È≠îÊúØÊñπÊ≥ïÂèØ‰ª•ËÆ©Á±ªÁöÑÂÆû‰æãÁöÑË°å‰∏∫Ë°®Áé∞ÁöÑÂÉèÂáΩÊï∞‰∏ÄÊ†∑Ôºå‰Ω†ÂèØ‰ª•Ë∞ÉÁî®ÂÆÉ‰ª¨ÔºåÂ∞Ü‰∏Ä‰∏™ÂáΩÊï∞ÂΩìÂÅö‰∏Ä‰∏™ÂèÇÊï∞‰º†Âà∞Âè¶Â§ñ‰∏Ä‰∏™ÂáΩÊï∞‰∏≠Á≠âÁ≠â„ÄÇ

    __call__(self, [args...]):

ÂÖÅËÆ∏‰∏Ä‰∏™Á±ªÁöÑÂÆû‰æãÂÉèÂáΩÊï∞‰∏ÄÊ†∑Ë¢´Ë∞ÉÁî®ÔºåÊÑèÂë≥ÁùÄ `x()` ‰∏é `x.__call__()` ÊòØÁõ∏ÂêåÁöÑ„ÄÇÊ≥®ÊÑèÂÖ∂ÂèÇÊï∞ÂèØÂèòÔºå‰Ω†ÂèØ‰ª•ÂÆö‰πâ‰∏∫ÂÖ∂‰ªñÊÉ≥Ë¶ÅÁöÑÂáΩÊï∞ÂΩ¢ÂºèÔºåÊó†ËÆ∫ÊúâÂ§öÂ∞ë‰∏™ÂèÇÊï∞„ÄÇÂú®ÈÇ£‰∫õÁ±ªÁöÑÂÆû‰æãÁªèÂ∏∏ÊîπÂèòÁä∂ÊÄÅÁöÑÊó∂ÂÄô‰ºöÈùûÂ∏∏ÊúâÊïà„ÄÇË∞ÉÁî®Ëøô‰∏™ÂÆû‰æãÊòØ‰∏ÄÁßçÊîπÂèòËøô‰∏™ÂØπË±°Áä∂ÊÄÅÁöÑÁõ¥Êé•Âíå‰ºòÈõÖÁöÑÂÅöÊ≥ï:

    class Entity:

        def __init__(self, size, x, y):
            self.x, self.y = x, y
            self.size = size

        def __call__(self, x, y):
            """
            Á±ªÂÆûÂàóÂΩìÂáΩÊï∞‰ΩøÁî®Êó∂ÊâßË°å
            """
            self.x, self.y = x, y
            return self


    e = Entity(1, 2, 3)
    e(3, 4)


‰∏ä‰∏ãÊñáÁÆ°ÁêÜ

with Â£∞ÊòéÊòØ‰ªé Python 2.5 ÂºÄÂßãÂºïËøõÁöÑÂÖ≥ÈîÆËØçÔºåÈÄöÂ∏∏ÂíåÊñá‰ª∂Âè•ÊüÑ‰∏ÄËµ∑‰ΩøÁî®‰ª•‰øùËØÅÊñá‰ª∂Ê≠£Á°ÆËá™Âä®ÂÖ≥Èó≠ÔºåËÄå‰∏çÂøÖÂÖ≥ÂøÉÁïôÊÑèÂÖ∂ÂÖ≥Èó≠ËøáÁ®ã:

    with open('foo.txt') as bar: 
        # do something with bar

Âú® with Â£∞ÊòéÂèØ‰ª•ÁªìÂêàÂà∞Á±ªÂØπË±°ÁöÑÂºÄÂßãÊìç‰ΩúÂíåÈÄÄÂá∫Êìç‰ΩúÔºåËøòËÉΩÂØπÂºÇÂ∏∏ËøõË°åÂ§ÑÁêÜÔºåÂè™ÈúÄË¶ÅÂÆûÁé∞ `__enter__` Âíå `__exit__` ‰∏§‰∏™È≠îÊúØÊñπÊ≥ï„ÄÇ

    __enter__(self):  ÂΩì‰ΩøÁî® with ËØ≠Âè•ÁöÑÊó∂ÂÄôÔºå‰ºöËØùÁÆ°ÁêÜÂô®Âú®ÂùóË¢´ÂàùÂßãÂàõÂª∫Êó∂Ë∞ÉÁî®„ÄÇÂÖ∂ËøîÂõûÂÄº‰∏é with ËØ≠Âè•ÁöÑÁõÆÊ†áÊàñËÄÖ as ÂêéÁöÑÂêçÂ≠óÁªëÂÆö„ÄÇ
    __exit__(self, exception_type, exception_value, traceback): with Á†ÅÂùóË¢´ÊâßË°åÊàñËÄÖÁªàÊ≠¢ÂêéÔºåÁî±‰ºöËØùÁÆ°ÁêÜÂô®Ë∞ÉÁî®„ÄÇ

ÈÄÄÂá∫ÊñπÊ≥ïÂèØ‰ª•Ë¢´Áî®Êù•Â§ÑÁêÜÂºÇÂ∏∏„ÄÅÊâßË°åÊ∏ÖÁêÜÂ∑•‰ΩúÊàñÂÅö‰∏Ä‰∫õ‰ª£Á†ÅÂùóÊâßË°åÂÆåÊØï‰πãÂêéÁöÑÊó•Â∏∏Â∑•‰Ωú„ÄÇÂ¶ÇÊûú‰ª£Á†ÅÂùóÊâßË°åÊàêÂäüÔºåexception_typeÔºåexception_valueÔºåÂíå traceback Â∞Ü‰ºö‰∏∫ None„ÄÇÂê¶ÂàôÔºå‰Ω†ÂèØ‰ª•ÈÄâÊã©Â§ÑÁêÜËøô‰∏™ÂºÇÂ∏∏ÊàñËÄÖÊòØÁõ¥Êé•‰∫§ÁªôÁî®Êà∑Â§ÑÁêÜ„ÄÇÂ¶ÇÊûú‰Ω†ÊÉ≥Â§ÑÁêÜËøô‰∏™ÂºÇÂ∏∏ÁöÑËØùÔºåËØ∑Á°Æ‰øù `__exit__` Âú®ÊâÄÊúâËØ≠Âè•ÁªìÊùü‰πãÂêéËøîÂõû True„ÄÇÂ¶ÇÊûú‰Ω†ÊÉ≥ËÆ©ÂºÇÂ∏∏Ë¢´‰ºöËØùÁÆ°ÁêÜÂô®Â§ÑÁêÜÁöÑËØùÔºåÈÇ£‰πàÂ∞±ËÆ©ÂÖ∂‰∫ßÁîüËØ•ÂºÇÂ∏∏„ÄÇ


ÊèèËø∞Á¨¶ Descriptor

ÊâÄË∞ìÊèèËø∞Á¨¶Â∞±ÊòØÈÄöËøáÂÖ∑ÊúâÊèèËø∞Á¨¶ÁâπÂæÅÁöÑÁ±ªÂûãÂ∞ÅË£ÖÁ±ªÊï∞ÊçÆÊàêÂëòÔºåËøôÊ†∑Ëé∑Âèñ„ÄÅËÆæÁΩÆ‰ª•ÂèäÂà†Èô§ÁöÑÊï∞ÊçÆÊàêÂëòÊó∂ÁöÑÊìç‰ΩúÂ∞±‰ºöÁî±ÊèèËø∞Á¨¶ÁöÑÈ≠îÊúØÊñπÊ≥ï‰ª£ÁêÜ„ÄÇÂºïÂÖ•ÊèèËø∞Á¨¶Â∞ÅË£ÖÊï∞ÊçÆÊàêÂëòÁöÑÈÇ£‰∏™Á±ªÂ∞±ÊòØ ownerÔºåinstance Â∞±Êó∂ÈÇ£‰∏™Á±ªÁöÑÂÆûÂàó„ÄÇ‰∏Ä‰∏™ÊèèËø∞Á¨¶Á±ªÂûãÈúÄË¶ÅÁî®Âà∞‰ª•‰∏ã‰∏â‰∏™È≠îÊúØÂáΩÊï∞ÂÆûÁé∞Ôºö

    __get__(self, instance, owner): ÊèèËø∞Á¨¶ÁöÑÂÄºË¢´ÂèñÂæóÁöÑÊó∂ÂÄôÁöÑË°å‰∏∫Ôºåinstance ÊòØÊã•ÊúâËØ•ÊèèËø∞Á¨¶ÂØπË±°ÁöÑ‰∏Ä‰∏™ÂÆû‰æã„ÄÇownerÊòØÊã•ÊúâËÄÖÊú¨Ë∫´„ÄÇ
    __set__(self, instance, value): ÊèèËø∞Á¨¶ÁöÑÂÄºË¢´ÊîπÂèòÁöÑÊó∂ÂÄôÁöÑË°å‰∏∫Ôºåinstance ÊòØÊã•ÊúâËØ•ÊèèËø∞Á¨¶Á±ªÁöÑ‰∏Ä‰∏™ÂÆû‰æã„ÄÇvalueÊòØË¶ÅËÆæÁΩÆÁöÑÂÄº„ÄÇ
    __delete__(self, instance): ÊèèËø∞Á¨¶ÁöÑÂÄºË¢´Âà†Èô§ÁöÑÊó∂ÂÄôÁöÑË°å‰∏∫Ôºåinstance ÊòØÊã•ÊúâËØ•ÊèèËø∞Á¨¶ÂØπË±°ÁöÑ‰∏Ä‰∏™ÂÆû‰æã„ÄÇ

Â¶ÇÊûúÂè™ÂÆö‰πâ‰∫Ü `__get__` ÊñπÊ≥ïÔºåËÄåÊ≤°ÊúâÂÆö‰πâ `__set__`, `__delete__` ÊñπÊ≥ïÔºåÂàôËÆ§‰∏∫ÊòØÈùûÊï∞ÊçÆÊèèËø∞Á¨¶Ôºõ Âèç‰πãÔºåÂÆûÁé∞`__get__`„ÄÅ `__set__` ÂàôÊàê‰∏∫Êï∞ÊçÆÊèèËø∞Á¨¶„ÄÇ

Python Ëé∑ÂèñÊàêÂëòÊó∂Êåâ‰ª•‰∏ãÈ°∫Â∫èËøõË°åÊü•ÊâæÔºö

- `__getattribute__`Ôºå Êó†Êù°‰ª∂Ë∞ÉÁî®Ôºõ
- Êï∞ÊçÆÊèèËø∞Á¨¶ÔºåÁî± `__getattribute__` Ëß¶ÂèëË∞ÉÁî®ÔºåËã•‰∫∫‰∏∫ÁöÑÈáçËΩΩ‰∫ÜËØ•ÊñπÊ≥ïÔºåÂèØËÉΩ‰ºöÊó†Ê≥ïË∞ÉÁî®ÊèèËø∞Á¨¶Ôºõ
- ÂÆû‰æãÂØπË±°ÁöÑÂ≠óÂÖ∏ÔºåËã•‰∏éÊèèËø∞Á¨¶ÂØπË±°ÂêåÂêçÔºå‰ºöË¢´Ë¶ÜÁõñÂì¶Ôºõ
- Á±ªÁöÑÂ≠óÂÖ∏Ôºõ
- ÈùûÊï∞ÊçÆÊèèËø∞Á¨¶ `__get__`Ôºõ
- Áà∂Á±ªÁöÑÂ≠óÂÖ∏Ôºõ
- `__getattr__` ÊñπÊ≥ïÔºõ

‰ª•‰∏ãÊòØ‰∏Ä‰∏™Á®çÂæÆÊúâÁÇπÁî®ÁöÑÂÆûÂàóÔºåÂèØ‰ª•Â∞ÜÊï∞ÂÄºÂú®Ê†áÂáÜÂçï‰ΩçÁ±≥„ÄÅËã±Âà∂Ëã±Â∞∫‰πãÈó¥ËΩ¨Êç¢Ôºö


```py
class Meter(object):
    """
    descriptor for meter
    """
    def __init__(self, value=0.0):
        self.value = float(value)

    def __get__(self, instance, owner):
        return str(self.value) + " Meter"

    def __set__(self, instance, value):
        self.value = float(value)


class Foot(object):
    """
    descriptor for foot
    """
    def __get__(self, instance, owner):
        return str(float(instance.meter.split(" ")[0]) * 3.2808) + " ft"

    def __set__(self, instance, value):
        instance.meter = float(value) / 3.2808


class Distance(object):
    """
    use descriptors in this demo
    """
    meter = Meter(10)
    foot = Foot()


d = Distance()
d.meter = 1  # Meter.__set__(...)
d.foot = 1   # Foot.__set__(...)
print("Meter.__get__(): %s" % d.meter)
print(" Foot.__get__(): %s" % d.foot)
```


Â§çÂà∂

ÊúâÊó∂ÂÄôÔºåÂ∞§ÂÖ∂ÊòØÂΩì‰Ω†Âú®Â§ÑÁêÜÂèØÂèòÂØπË±°Êó∂Ôºå‰Ω†ÂèØËÉΩÊÉ≥Ë¶ÅÂ§çÂà∂‰∏Ä‰∏™ÂØπË±°ÔºåÁÑ∂ÂêéÂØπÂÖ∂ÂÅöÂá∫‰∏Ä‰∫õÊîπÂèòËÄå‰∏çÂ∏åÊúõÂΩ±ÂìçÂéüÊù•ÁöÑÂØπË±°„ÄÇËøôÂ∞±ÊòØPythonÁöÑcopyÊâÄÂèëÊå•‰ΩúÁî®ÁöÑÂú∞Êñπ„ÄÇ

    __copy__(self)

ÂÆö‰πâ‰∫ÜÂΩìÂØπ‰Ω†ÁöÑÁ±ªÁöÑÂÆû‰æãË∞ÉÁî®copy.copy()Êó∂ÊâÄ‰∫ßÁîüÁöÑË°å‰∏∫„ÄÇcopy.copy()ËøîÂõû‰∫Ü‰Ω†ÁöÑÂØπË±°ÁöÑ‰∏Ä‰∏™ÊµÖÊã∑Ë¥ù‚Äî‚ÄîËøôÊÑèÂë≥ÁùÄÔºåÂΩìÂÆû‰æãÊú¨Ë∫´ÊòØ‰∏Ä‰∏™Êñ∞ÂÆû‰æãÊó∂ÔºåÂÆÉÁöÑÊâÄÊúâÊï∞ÊçÆÈÉΩË¢´ÂºïÁî®‰∫Ü‚Äî‚Äî‰æãÂ¶ÇÔºåÂΩì‰∏Ä‰∏™ÂØπË±°Êú¨Ë∫´Ë¢´Â§çÂà∂‰∫ÜÔºåÂÆÉÁöÑÊï∞ÊçÆ‰ªçÁÑ∂ÊòØË¢´ÂºïÁî®ÁöÑÔºàÂõ†Ê≠§ÔºåÂØπ‰∫éÊµÖÊã∑Ë¥ù‰∏≠Êï∞ÊçÆÁöÑÊõ¥Êîπ‰ªçÁÑ∂ÂèØËÉΩÂØºËá¥Êï∞ÊçÆÂú®ÂéüÂßãÂØπË±°ÁöÑ‰∏≠ÁöÑÊîπÂèòÔºâ„ÄÇ

    __deepcopy__(self, memodict={})

ÂÆö‰πâ‰∫ÜÂΩìÂØπ‰Ω†ÁöÑÁ±ªÁöÑÂÆû‰æãË∞ÉÁî®copy.deepcopy()Êó∂ÊâÄ‰∫ßÁîüÁöÑË°å‰∏∫„ÄÇcopy.deepcopy()ËøîÂõû‰∫Ü‰Ω†ÁöÑÂØπË±°ÁöÑ‰∏Ä‰∏™Ê∑±Êã∑Ë¥ù‚Äî‚ÄîÂØπË±°ÂíåÂÖ∂Êï∞ÊçÆÈÉΩË¢´Êã∑Ë¥ù‰∫Ü„ÄÇmemodictÊòØÂØπ‰πãÂâçË¢´Êã∑Ë¥ùÁöÑÂØπË±°ÁöÑ‰∏Ä‰∏™ÁºìÂ≠ò‚Äî‚ÄîËøô‰ºòÂåñ‰∫ÜÊã∑Ë¥ùËøáÁ®ãÂπ∂‰∏îÈòªÊ≠¢‰∫ÜÂØπÈÄíÂΩíÊï∞ÊçÆÁªìÊûÑÊã∑Ë¥ùÊó∂ÁöÑÊó†ÈôêÈÄíÂΩí„ÄÇÂΩì‰Ω†ÊÉ≥Ë¶ÅËøõË°åÂØπ‰∏Ä‰∏™ÂçïÁã¨ÁöÑÂ±ûÊÄßËøõË°åÊ∑±Êã∑Ë¥ùÊó∂ÔºåË∞ÉÁî®copy.deepcopy()ÔºåÂπ∂‰ª•memodict‰∏∫Á¨¨‰∏Ä‰∏™ÂèÇÊï∞„ÄÇ


Áî®‰∫éÊØîËæÉÁöÑÈ≠îÊúØÊñπÊ≥ï

    __cmp__(self, other)    ÊòØÊØîËæÉÊñπÊ≥ïÈáåÈù¢ÊúÄÂü∫Êú¨ÁöÑÁöÑÈ≠îÊ≥ïÊñπÊ≥ï
    __eq__(self, other) ÂÆö‰πâÁõ∏Á≠âÁ¨¶Âè∑ÁöÑË°å‰∏∫Ôºå==
    __ge__(self,other)  ÂÆö‰πâÂ§ß‰∫éÁ≠â‰∫éÁ¨¶Âè∑ÁöÑË°å‰∏∫Ôºå>=
    __gt__(self,other)  ÂÆö‰πâÂ§ß‰∫éÁ¨¶Âè∑ÁöÑË°å‰∏∫Ôºå>
    __le__(self,other)  ÂÆö‰πâÂ∞è‰∫éÁ≠â‰∫éÁ¨¶Âè∑ÁöÑË°å‰∏∫Ôºå<=
    __lt__(self,other)  ÂÆö‰πâÂ∞è‰∫éÁ¨¶Âè∑ÁöÑË°å‰∏∫Ôºå<
    __ne__(self,other)  ÂÆö‰πâ‰∏çÁ≠âÁ¨¶Âè∑ÁöÑË°å‰∏∫ÔºåÔºÅ=
 

ÂçïÁõÆËøêÁÆóÁ¨¶ÂíåÂáΩÊï∞

    __abs__(self)   ÂÆûÁé∞‰∏Ä‰∏™ÂÜÖÂª∫ÁöÑabs()ÂáΩÊï∞ÁöÑË°å‰∏∫
    __ceil__(self)  ÂÆûÁé∞math.ceil()ÁöÑÂáΩÊï∞Ë°å‰∏∫
    __floor__(self) ÂÆûÁé∞math.floor()ÁöÑÂáΩÊï∞Ë°å‰∏∫
    __invert__(self)    ÂÆûÁé∞‰∏Ä‰∏™ÂèñÂèçÊìç‰ΩúÁ¨¶ÔºàÔΩûÊìç‰ΩúÁ¨¶ÔºâÁöÑË°å‰∏∫
    __neg__(self)   ÂÆûÁé∞‰∏Ä‰∏™ÂèñË¥üÊï∞ÁöÑÊìç‰Ωú
    __pos__(self)   ÂÆûÁé∞‰∏Ä‰∏™ÂèñÊ≠£Êï∞ÁöÑÊìç‰Ωú
    __round__(self, n)  ÂÆûÁé∞‰∏Ä‰∏™ÂÜÖÂª∫ÁöÑroundÔºàÔºâÂáΩÊï∞ÁöÑË°å‰∏∫
    __trunc__(self) ÂÆûÁé∞math.trunc()ÁöÑÂáΩÊï∞Ë°å‰∏∫
 

ÂèåÁõÆËøêÁÆóÁ¨¶ÊàñÂáΩÊï∞

    __add__(self, other)    ÂÆûÁé∞‰∏Ä‰∏™Âä†Ê≥ï
    __and__(self, other)    ÂÆûÁé∞‰∏Ä‰∏™Êåâ‰ΩçËøõË°å‰∏éÊìç‰ΩúÔºà&ÔºâÁöÑË°å‰∏∫
    __div__(self, other)    ÂÆûÁé∞‰∏Ä‰∏™‚Äú/‚ÄùÈô§Ê≥ïÊìç‰ΩúÁ¨¶
    __divmod__(self, other) ÂÆûÁé∞‰∏Ä‰∏™ÂÜÖÂª∫ÂáΩÊï∞divmodÔºàÔºâ
    __floordiv__(self, other)   ÂÆûÁé∞‰∏Ä‰∏™Êï¥Èô§Êìç‰ΩúÁ¨¶Ôºà//Ôºâ
    __lshift__(self, other) ÂÆûÁé∞‰∏Ä‰∏™‰ΩçÂ∑¶ÁßªÊìç‰ΩúÔºà<<ÔºâÁöÑÂäüËÉΩ
    __mod__(self, other)    ÂÆûÁé∞‰∏Ä‰∏™‚Äú%‚ÄùÊìç‰ΩúÁ¨¶‰ª£Ë°®ÁöÑÂèñÊ®°Êìç‰Ωú
    __mul__(self, other)    ÂÆûÁé∞‰∏Ä‰∏™‰πòÊ≥ï
    __or__(self, other) ÂÆûÁé∞‰∏Ä‰∏™Êåâ‰ΩçËøõË°åÊàñÊìç‰ΩúÁöÑË°å‰∏∫
    __pow__ ÂÆûÁé∞‰∏Ä‰∏™ÊåáÊï∞Êìç‰Ωú(‚Äú**‚ÄùÊìç‰ΩúÁ¨¶ÔºâÁöÑË°å‰∏∫
    __rshift__(self, other) ÂÆûÁé∞‰∏Ä‰∏™‰ΩçÂè≥ÁßªÊìç‰ΩúÔºà>>ÔºâÁöÑÂäüËÉΩ
    __sub__(self, other)    ÂÆûÁé∞‰∏Ä‰∏™ÂáèÊ≥ï
    __truediv__(self, other)ÂÆûÁé∞ÁúüÂÆûÈô§Ê≥ï
    __xor__(self, other)    ÂÆûÁé∞ÂºÇÊàñËøêÁÆó
 

Â¢ûÈáèËøêÁÆó

    __iadd__(self, other)   Âä†Ê≥ïËµãÂÄº
    __iand__(self, other)   ‰∏éËµãÂÄºÔºåÁõ∏ÂΩì‰∫é &= ËøêÁÆóÁ¨¶
    __idiv__(self, other)   Èô§Ê≥ïËµãÂÄºÔºåÁõ∏ÂΩì‰∫é /= ËøêÁÆóÁ¨¶
    __ifloordiv__(self, other)  Êï¥Èô§ËµãÂÄºÔºåÂú∞ÊùøÈô§ÔºåÁõ∏ÂΩì‰∫é //= ËøêÁÆóÁ¨¶
    __ilshift__(self, other)    Â∑¶ÁßªËµãÂÄºÔºåÁõ∏ÂΩì‰∫é <<= ËøêÁÆóÁ¨¶
    __imod_(self, other)    Ê®°ËµãÂÄºÔºåÁõ∏ÂΩì‰∫é %= ËøêÁÆóÁ¨¶
    __imul__(self, other)   ‰πòÊ≥ïËµãÂÄº
    __ior__(self, other)    ÊàñËµãÂÄº
    __ipow__                ‰πòÊñπËµãÂÄºÔºåÁõ∏ÂΩì‰∫é **= ËøêÁÆóÁ¨¶
    __irshift__(self, other)    Â∑¶ÁßªËµãÂÄºÔºåÁõ∏ÂΩì‰∫é >>= ËøêÁÆóÁ¨¶
    __isub__(self, other)   ÂáèÊ≥ïËµãÂÄº
    __itruediv__(self, other)   ÁúüÈô§ËµãÂÄº
    __ixor__(self, other)   ÂºÇÊàñËøêÁÆóÁ¨¶ÔºåÁõ∏ÂΩì‰∫é ^= ËøêÁÆóÁ¨¶
 

Á±ªÂûãËΩ¨Êç¢

    __coerce__(self, other) ÊâßË°åÊ∑∑ÂêàÁ±ªÂûãÁöÑËøêÁÆó
    __complex__(self)   ËΩ¨Êç¢Êàê Â§çÊï∞Âûã
    __float__(self) ËΩ¨Êç¢ÊàêÊµÆÁÇπÂûã
    __hex__(self)   ËΩ¨Êç¢ÊàêÂçÅÂÖ≠ËøõÂà∂
    __index__(self) Â¶ÇÊûú‰Ω†ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ÂèØËÉΩË¢´Áî®Êù•ÂÅöÂàáÁâáÊìç‰ΩúÁöÑÊï∞ÂÄºÂûãÔºå‰Ω†Â∞±Â∫îËØ•ÂÆö‰πâ__index__
    __int__(self)   ËΩ¨Êç¢ÊàêÊï¥Âûã
    __long__(self)  ËΩ¨Êç¢ÊàêÈïøÊï¥Âûã
    __oct__(self)   ËΩ¨Êç¢ÊàêÂÖ´ËøõÂà∂
    __str__(self)   ËΩ¨Êç¢Â≠óÁ¨¶‰∏≤
    __trunc__(self) ÂΩì math.trunc(self) ‰ΩøÁî®Êó∂Ë¢´Ë∞ÉÁî®__trunc__ËøîÂõûËá™Ë∫´Á±ªÂûãÁöÑÊï¥ÂûãÊà™Âèñ


### ===üóù `__slots__` ÊèíÊßΩ

‚û° `__slots__` ÈÄöËøáÂ±ûÊÄßÊßΩÊßΩÈôêÂà∂ÂΩ¢ÂºèÂÆö‰πâÂπ∂Â≠òÂÇ®Á±ªÊï∞ÊçÆÊàêÂëò„ÄÅÂ±ûÊÄßÔºåÈÅøÂÖçÈöèÊÑèÂä®ÊÄÅÂàõÂª∫Â±ûÊÄßÔºåÁ¶ÅÊ≠¢‰ΩøÁî® `__dict__` Â≠òÂÇ®Âä®ÊÄÅÂÜÖÂÆπÔºåÂú®‰∏Ä‰∫õÂú∫ÊôØ‰∏ãËÉΩÂ§üËäÇÁ∫¶ÊûÅÂ§ßÁöÑÂÜÖÂ≠òÁ©∫Èó¥„ÄÇ‰πüÁ¶ÅÊ≠¢‰ΩøÁî®Âº±ÂºïÁî® `__weakref__`ÔºåÈô§ÈùûÂ∞ÜÂÖ∂Ê∑ªÂä†Âà∞ÊèíÊßΩ„ÄÇ

Python ÊòØÂä®ÊÄÅËØ≠Ë®ÄÔºåÂØπ‰∫éÊôÆÈÄöÁöÑÁ±ªÔºåÂèØ‰ª•‰∏∫Á±ªÂÆû‰æãËµãÂÄº‰ªª‰ΩïÂ±ûÊÄßÊàñ‰ΩøÁî® types.MethodType Âä®ÊÄÅÁ±ªÂûãÂ∫ìÊñπÊ≥ïÁªëÂÆöÁ≠âÔºåÂÆÉ‰ª¨‰ºöÂ≠òÂÇ®Âú® `__dict__` Â≠óÂÖ∏‰∏≠„ÄÇ

```py
# Python f-string accepts objects as well 
# Can use either __str__ or __repr__ magic functions.
class User:
    def __init__(self, name, occupation):
        self.name = name
        self.occupation = occupation

    # def __repr__(self):
    #     return f"{self.name} is a {self.occupation}"

# Dynamic bindding
from types import MethodType
def fmt(self):
    return "FMT"

u = User('John Doe', 'gardener')
u.__str__ = MethodType(fmt, "")
print(u.__str__());
# Âä®ÊÄÅÁªëÂÆöÈ≠îÊúØÂáΩÊï∞ÔºåÂéüÊúâËá™Âä®Ë∞ÉÁî®ÁöÑÁâπÊÄß‰∏çÊîØÊåÅ
```

‰ΩøÁî®Âä®ÊÄÅÁâπÊÄßÂ∏¶Êù•‰∏§‰∏™ÈóÆÈ¢òÔºö

- Êï∞ÊçÆÈÄöËøáÂ≠óÂÖ∏(Hash)Â≠òÂÇ®ÊâÄÂç†Áî®ÁöÑÁ©∫Èó¥ËæÉÂ§ßÔºõ
- Â¶Ç‰ΩïÁ¶ÅÊ≠¢ÈöèÊÑèÁîüÊàêÁ±ªÂ±ûÊÄßÔºõ

ÁªßÊâøÊñπÂºèÊúâ‰∏§ÁßçË°®Áé∞Ôºö

- Â≠êÁ±ªÊú™Â£∞Êòé `__slots__`Ôºå‰∏ç‰ΩøÁî®ÊèíÊßΩÔºåÂ≠êÁ±ªÂÆû‰æãÂèØ‰ª•ÈöèÊÑèËµãÂÄºÂ±ûÊÄß„ÄÇ
- Â≠êÁ±ªÂ£∞ÊòéÂíåÁà∂Á±ª‰∏ÄÊ†∑‰ΩøÁî®‰∫Ü `__slots__`ÔºåÂç≥Ê≠§Êó∂Â≠êÁ±ªÁöÑÂèØ‰ª•ÂÆö‰πâÁöÑÂ±ûÊÄßÂåÖÊã¨Áà∂Á±ªÁöÑ `__slots__` ÂÆö‰πâ„ÄÇ

```py
class MyDict():
    name = "Default"
    pass

md = MyDict()   # new instance
md.any = "ANY"  # new attribute, dynamically create
print(md.__dict__) # {'any': 'ANY'}


class MySlots():
    __slots__ = ["name", "size"]
    def __init__(self, *args):
        # self.name = "Default"
        pass

# ms = MySlots         # Type Ref
# print(type(ms))      # <class 'type'>
# print(type(ms.name)) # <class 'member_descriptor'>
# ms.name = "Default"  # set default value for MySlots Type
# print(type(ms.name)) # <class 'str'>
# print(ms.name == MySlots.name) # True: <class 'str'> equal to <class 'str'>

ms = MySlots()      # ctor. __init__(self)
print(type(ms))     # <class '__main__.MySlots'> -- instance of MySlots
print(ms.__slots__) # ['name', 'size']
# ms.any = "ANY?"   # AttributeError: 'MySlots' object has no attribute 'any'
# ms.any            # MySlots has no attribute 'any'
# ms.__dict__       # AttributeError: 'MySlots' object has no attribute '__dict__'

# print(type(ms.name))  # AttributeError: name
ms.name = "Default"     # OK, set attribute defined by slots
print(type(ms.name))    # <class 'str'>
```



## ==‚ö° class & abstract

Python ÈáåÊó†Êé•Âè£Á±ªÂûãÔºåÂÆö‰πâÊé•Âè£Âè™ÊòØ‰∏Ä‰∏™‰∫∫‰∏∫ËßÑÂÆöÔºåÂú®ÁºñÁ®ãËøáÁ®ãËá™ÊàëÁ∫¶Êùü

    class Animal(object):
        def __init__(self, name):
            self.name = name

        def walk(self):
            pass

        @staticmethod
        def animal_walk(obj):
            obj.walk()

    
    class Cat(Animal):
        def walk(self):
            print("mow!")

    
    class Dog(Animal):
        def walk(self):
            print("wang, wang")

    c = Cat('Abe')
    d = Dog('Wang')

    Animal.animal_walk(c) #Â§öÊÄÅÔºö‰∏Ä‰∏™Êé•Âè£Â§öÁßçÂÆûÁé∞
    Animal.animal_walk(d)

ÊäΩË±°Á±ªÔºåÂèØ‰ª•ËØ¥ÊòØÁ±ªÂíåÊé•Âè£ÁöÑÊ∑∑Âêà‰ΩìÔºåÊó¢ÂèØ‰ª•ÂÆö‰πâÂ∏∏ËßÑÊñπÊ≥ïÔºå‰πüÂèØ‰ª•Á∫¶ÊùüÂ≠êÁ±ªÁöÑÊñπÊ≥ïÔºàÊäΩË±°ÊñπÊ≥ïÔºâ

    import abc

    #ÊäΩË±°Á±ª
    class Foo(metaclass=abc.ABCMeta):

        def f1(self):
            print('f1')

            #ÊäΩË±°ÊñπÊ≥ï
        @abc.abstractmethod
        def f2(self):
            '''
            ÊâìÂç∞f2
            '''

    class Bar(Foo):

        def f2(self):
            print('f2')

    b = Bar()
    b.f1()
    b.f2()


## ==‚ö° MRO & Multiple Inheritance
- The Python 2.3 Method Resolution Order By Michele Simionato https://www.python.org/download/releases/2.3/mro/

Â§öÊâøÁªßÊñπÊ≥ïÊü•ÊâæÈóÆÈ¢òÔºöÂ¶ÇÊûúÁªßÊâøÂ§ö‰∏™Áà∂Á±ª‰∏≠ÔºåÈÉΩÂÆö‰∫ÜÁõ∏ÂêåÁöÑÂáΩÊï∞ÔºåÈÇ£‰πàÈÄâÁî®Âì™‰∏Ä‰∏™ÔºüËøôÂ∞±ÊòØ MRO - Method Resolution Order ÁÆóÊ≥ïË¶ÅÂÅöÁöÑ‰∫ã„ÄÇ

- Python Âíå C++ ‰∏ÄÊ†∑Ôºå‰ΩøÁî®Â§öÁªßÊâøÔºåÂèØ‰ª•ÁªßÊâøÂ§ö‰∏™Áà∂Á±ªÔºåJava Âíå C# ÂçïÁªßÊâøÔºå‰∏çÂ≠òÂú®ËøôÁßçÈóÆÈ¢òÔºõ
- Python Á±ªÂØπË±°Â¶ÇÊûúÁªßÊâø‰∫ÜÂ§ö‰∏™Á±ªÔºåÈÇ£‰πàÂÖ∂ÂØªÊâæÊñπÊ≥ïÁöÑÊñπÂºèÊúâ‰∏§ÁßçÔºåÂàÜÂà´ÊòØÔºöDepth-first Ê∑±Â∫¶‰ºòÂÖà„ÄêÁªèÂÖ∏Á±ª„ÄëÂíåÂπøÂ∫¶‰ºòÂÖà„ÄêÊñ∞ÂºèÁ±ª„ÄëÔºõ

Â§öÁªßÊâøÂøÖÁÑ∂‰ºöÈÅáÂà∞Ê£±ÂΩ¢Ê≥ïÂàôÂÖ≥Á≥ªÂ§ÑÁêÜ Multiple Inheritance: The Diamond RuleÔºå‰ª•‰∏ãÁ§∫ÊÑèÂõæÊëòËá™ PEP 253 -- Subtyping Built-in Types by Guido van RossumÔºåÂç≥ Python ÂàõÂßã‰∫∫:


          class A:
            ^ ^  def save(self): ...
           /   \
          /     \
         /       \
        /         \
    class B     class C:
        ^         ^  def save(self): ...
         \       /
          \     /
           \   /
            \ /
          class D

Python‰πãÁà∂ÔºåËç∑ÂÖ∞‰∫∫Guido van Rossum„ÄÇ‰ªñ‰∫é 1982 Âπ¥‰ªéÈòøÂßÜÊñØÁâπ‰∏πÂ§ßÂ≠¶ÂèñÂæó‰∫ÜÊï∞Â≠¶ÂíåËÆ°ÁÆóÊú∫Á°ïÂ£´Â≠¶‰Ωç„ÄÇ

20 ‰∏ñÁ∫™ 80 Âπ¥‰ª£‰∏≠ÊúüÔºåGuido van Rossum Âú® CWI(Êï∞Â≠¶ÂíåÁêÜËÆ∫ËÆ°ÁÆóÊú∫ÁßëÂ≠¶È¢ÜÂüüÁöÑÁ†îÁ©∂‰∏≠ÂøÉÔºå‰Ωç‰∫éÈòøÂßÜÊñØÁâπ‰∏π)‰∏∫ ABC ËØ≠Ë®ÄË¥°ÁåÆ‰ª£Á†ÅÔºåËøôÊòØ‰∏Ä‰∏™‰∏∫ÁºñÁ®ãÂàùÂ≠¶ËÄÖÊâìÈÄ†ÁöÑÁ†îÁ©∂È°πÁõÆ„ÄÇABC ËØ≠Ë®ÄÁªô‰∫Ü Guido ÂæàÂ§ßÂΩ±ÂìçÔºåPython ‰ªé ABC ËØ≠Ë®Ä‰∏≠ÁªßÊâø‰∫ÜÂæàÂ§ö‰∏úË•øÔºöÊØîÂ¶ÇÂ≠óÁ¨¶‰∏≤„ÄÅÂàóË°®ÂíåÂ≠óËäÇÊï∞ÂàóÈÉΩÊîØÊåÅÁ¥¢Âºï„ÄÅÂàáÁâáÊéíÂ∫èÂíåÊãºÊé•Êìç‰Ωú„ÄÇ

MRO ÊòØ‰∏ÄÁßçÂú®Â§öÈáçÁªßÊâø‰∏≠Áî®‰∫éÁ°ÆÂÆöÊñπÊ≥ïÊêúÁ¥¢È°∫Â∫èÁöÑÁÆóÊ≥ïÔºåÂèàÁß∞ C3 Ë∂ÖÁ±ªÁ∫øÊÄßÂåñ(superclass linearization)„ÄÇPython ‰ºöËÆ°ÁÆóÂá∫ÊØè‰∏Ä‰∏™Á±ªÁöÑ MRO ÂàóË°®„ÄÇ‰∏Ä‰∏™Á±ªÁöÑ MRO ÂàóË°®ÊòØ‰∏Ä‰∏™ÂåÖÂê´‰∫ÜÂÖ∂ÁªßÊâøÈìæ‰∏äÊâÄÊúâÂü∫Á±ªÁöÑÁ∫øÊÄßÈ°∫Â∫èÂàóÔºåÂπ∂‰∏îÂàóË°®‰∏≠ÁöÑÊØè‰∏ÄÈ°πÂùá‰øùÊåÅÂîØ‰∏Ä„ÄÇÂΩìÈúÄË¶ÅÂú®ÁªßÊâøÈìæ‰∏≠ÂØªÊâæÊüê‰∏™Â±ûÊÄßÊó∂ÔºåPython ‰ºöÂú® MRO ÂàóË°®‰∏≠‰ªéÂ∑¶Âà∞Âè≥ÂºÄÂßãÊü•ÊâæÂêÑ‰∏™Âü∫Á±ªÔºåÁõ¥Âà∞ÊâæÂà∞Á¨¨‰∏Ä‰∏™ÂåπÈÖçËøô‰∏™Â±ûÊÄßÁöÑÁ±ª‰∏∫Ê≠¢„ÄÇ

MRO ÁÆóÊ≥ïÁöÑÂéüÁêÜÔºöÊãìÊâëÊéíÂ∫èÁÆóÊ≥ï

ÂØπ‰∏Ä‰∏™ÊúâÂêëÊó†ÁéØÂõæ G ËøõË°åÊãìÊâëÊéíÂ∫èÔºåÊòØÂ∞Ü G ‰∏≠ÊâÄÊúâÈ°∂ÁÇπÊéíÊàê‰∏Ä‰∏™Á∫øÊÄßÂ∫èÂàóÔºå‰ΩøÂæóÂõæ‰∏≠‰ªªÊÑè‰∏ÄÂØπÈ°∂ÁÇπ u Âíå vÔºåËã•Ëæπ (u,v)‚ààE(G)ÔºåÂàô u Âú®Á∫øÊÄßÂ∫èÂàó‰∏≠Âá∫Áé∞Âú® v ‰πãÂâç„ÄÇ

ÊãìÊâëÊéíÂ∫èÁöÑÂÆûÁé∞Ê≠•È™§ÔºåÂæ™ÁéØÊâßË°å‰ª•‰∏ã‰∏§Ê≠•ÔºåÁõ¥Âà∞‰∏çÂ≠òÂú®ÂÖ•Â∫¶‰∏∫0ÁöÑÈ°∂ÁÇπ‰∏∫Ê≠¢

- ÈÄâÊã©‰∏Ä‰∏™ÂÖ•Â∫¶‰∏∫0ÁöÑÈ°∂ÁÇπÂπ∂ËæìÂá∫‰πãÔºõ
- ‰ªéÁΩë‰∏≠Âà†Èô§Ê≠§È°∂ÁÇπÂèäÊâÄÊúâÂá∫Ëæπ„ÄÇ

Êàë‰ª¨‰∏çÂøÖÊ∑±Á©∂Ëøô‰∏™ÁÆóÊ≥ïÁöÑÊï∞Â≠¶ÂéüÁêÜÔºåÂÆÉÂÆûÈôÖ‰∏äÂ∞±ÊòØÂêàÂπ∂ÊâÄÊúâÁà∂Á±ªÁöÑ MRO ÂàóË°®Âπ∂ÈÅµÂæ™Â¶Ç‰∏ã‰∏âÊù°ÂáÜÂàôÔºö

- ÂÖàÂ≠êÁ±ªÂêéÁà∂Á±ªËøõË°åÊ£ÄÊü•
- Ê†πÊçÆÁà∂Á±ªÂú®ÂàóË°®‰∏≠ÁöÑÂ∑¶Âè≥È°∫Â∫èËøõË°åÊ£ÄÊü•
- Â¶ÇÊûúÂØπ‰∏ã‰∏Ä‰∏™Á±ªÂ≠òÂú®‰∏§‰∏™ÂêàÊ≥ïÁöÑÈÄâÊã©ÔºåÈÄâÊã©Á¨¨‰∏Ä‰∏™Áà∂Á±ª

ÂÖ∂ÂÆûÊàë‰ª¨Âè™ÈúÄË¶ÅÁü•ÈÅì MRO ÂàóË°®‰∏≠Á±ªÁöÑÈ°∫Â∫è‰ª£Ë°®ÁùÄÁ±ªÂ±ÇÊ¨°ÁªìÊûÑÈó¥ÁöÑÂÖ≥Á≥ªÂç≥ÂèØ„ÄÇ

Example:

```py
class X(object): pass
class Y(object): pass
class Z(object): pass
class A(X, Y): pass
class B(Y, Z): pass
class C(A, B): pass
class D(C, B): pass
print(D.__mro__)

# Cannot create a consistent MRO for bases B, C
# class D(B, C): pass
        +========+
        | object |
        +========+
             |
      +------+-------+
      |      |       |
    +===+  +===+   +===+
    | X |  | Y |   | Z |
    +===+  +===+   +===+
      |      |       |
      |  ----+-----  |
      |  |        |  |
      |  |        |  |
    +=====+      +=====+
    |  A  |      |  B  |
    +=====+      +=====+
       |            |   
    +==================+
    |         C        |
    +==================+
```

ÁªìÊûúÊòæÁ§∫È°∫Â∫èÔºåÁ¨¶ÂêàÊñ∞ÂºèÁ±ªÁöÑÂπøÂ∫¶‰ºòÂÖà MRO ÁÆóÊ≥ïÔºö 

    D => C => A => X | object
      => B => Y => Z
      => object



ÂΩìÂâçÁ±ªÊàñËÄÖÁà∂Á±ªÁªßÊâø‰∫Ü object Á±ªÔºåÈÇ£‰πàËØ•Á±ª‰æøÊòØ„ÄêÊñ∞ÂºèÁ±ª„ÄëÔºåÂê¶Âàô‰æøÊòØ„ÄêÁªèÂÖ∏Á±ª„ÄëÔºåÂç≥Êñ∞ÂºèÁ±ª‰ΩøÁî®ÂπøÂ∫¶‰ºòÂÖàÊêúÁ¥¢ÁÆóÊ≥ïÔºåÂèÇËÄÉ Python 2.2 Êõ¥Êñ∞ÊñáÊ°£„ÄÇ

```py
class Animal:
    age = 0

    def eat(self):
        print( "%s animal eat" %self.name)

    def skill(self):
        print( '%s animal skill' %self.name )


class Cat(Animal):

    def __init__(self, name):
        self.name = name
        self.breed = 'Áå´'

    def eat(self):
        print( 'cat eat')

class WhiteCat(Cat, Animal):
    
    def __init__(self, name):
        self.name = name
        self.breed = 'Áãó'
        
    def eat(self):
        print( 'white cat eat')

class BlackCat(object): # „ÄêÊñ∞ÂºèÁ±ª„Äë
    pass
        

cat = WhiteCat('Â∞èËä±')
cat.eat();
cat.skill();
```

Á±ªÁöÑÁßÅÊúâÊñπÊ≥ïÊàñÊàêÂëò‰ΩøÁî®‰∏§‰∏™‰∏ãÂàíÁ∫øÂºÄÂ§¥ÔºåÂç≥ÂèØÂ£∞Êòé‰∏∫ÁßÅÔºå‰∏çËÉΩÂú®Á±ªÁöÑÂ§ñÈÉ®Ë∞ÉÁî®„ÄÇPython Ê≤°ÊúâËÆøÈóÆÈôêÂÆöÁ¨¶ÔºåPython Á±ªÁöÑ static ÈùôÊÄÅÊàêÂëòËøôÊ†∑ÁöÑÁâπÊÄßË¢´Áß∞‰∏∫Á±ªÁöÑÂ±ûÊÄßÔºåÂíåÂØπË±°ÁöÑÂ±ûÊÄßÁõ∏Âå∫Âà´„ÄÇPython ÊòØÂä®ÊÄÅËØ≠Ë®ÄÔºåÂíå C++ ËøôÊ†∑ÁöÑÈùôÊÄÅËØ≠Ë®Ä‰∏çÂêåÔºåÂÖ∂Á±ªÂÆû‰æãÊòØÂèØ‰ª•Âä®ÊÄÅÊ∑ªÂä†Â±ûÊÄßÁöÑÔºåÂç≥ÂÆû‰æãÁöÑÂ±ûÊÄßÂíåÁ±ªÁöÑÂ±ûÊÄß‰∏ç‰∏ÄÂÆö‰∏ÄÊ†∑„ÄÇ‰∏é JavaScript ËÑöÊú¨ËØ≠Ë®ÄÁ±ª‰ººÔºå‰ª•‰∏ã‰æãÁ®ãÂ±ïÁ§∫‰∫ÜÁ±ªÊàêÂëò StaticDemo.arg ÁöÑÁî®Ê≥ïÔºå‰πüÂ∞±ÊòØËØ¥ arg ÊòØÂê¶ÊòØÁ±ªÊàêÂëòËøòË¶ÅÁúãÊòØÈÄöËøá‰ªÄ‰πàÈÄîÂæÑÂéªËÆøÈóÆÔºö

    class StaticDemo:
        """docstring for StaticDemo"""
        arg=0
        def __init__(self, arg):
            self.arg = arg

    obj = StaticDemo(2)
    print(obj.arg) # 2
    print(StaticDemo.arg) # 0




## ==‚ö° Properties Access

ÊñπÊ≥ïÂèÇËÄÉÔºö

- *dir([obj])*  ËøîÂõû obj ÂØπË±°‰∏≠Â§ßÂ§öÊï∞ÁâπÊÆäÁöÑÂ±ûÊÄßÂêçÁß∞ÂàóË°®ÔºåÁúÅÁï• obj Êó∂ÈªòËÆ§ÂÄºÊòØÂΩìÂâçÁöÑÊ®°ÂùóÂØπË±°„ÄÇ
- *hasattr(obj, 'attr')* Ëøô‰∏™ÊñπÊ≥ïÁî®‰∫éÊ£ÄÊü• obj.attr Â±ûÊÄßÊòØÂê¶Â≠òÂú®ÔºåËøîÂõû‰∏Ä‰∏™Â∏ÉÂ∞îÂÄº„ÄÇ
- *getattr(obj, 'attr')* Ëøô‰∏™ÊñπÊ≥ïËøîÂõû obj.attr Â±ûÊÄßÁöÑÂÄºÔºå‰æãÂ¶Ç attr ‰∏∫ 'bar'ÔºåÂàôËøîÂõû obj.bar„ÄÇ
- *setattr(obj, 'attr', val)* Ëøô‰∏™ÊñπÊ≥ïËÆæÁΩÆ obj.attr Â±ûÊÄßÂÄº‰∏∫ val„ÄÇ

ÂÅáÂ¶ÇÊúâ‰ª•‰∏ãÁ±ªÔºö

```py
class Person(object):
  def __init__(self, name, age):
    self.name = name
    self.age = age
   
  def __str__(self):
    print("__str__...")
    return 'name=%s, age=%i' % (self.name, self.age)
```

Â±ûÊÄßËÆøÈóÆÊúâÂ§öÁßçÊñπÊ≥ïÔºåÈô§‰∫ÜÂü∫Êú¨ÁöÑ . ÊàêÂëòËøêÁÆóÁ¨¶ËÆøÈóÆÊñπÂºèÔºåËøòÂèØ‰ª•‰ΩøÁî®È≠îÊúØÊñπÊ≥ï *__dict__* Êàñ‰ΩøÁî®ÂÖ®Â±ÄÊñπÊ≥ï *getattr* ÊñπÊ≥ïÁ≠â„ÄÇ

ÂèÇËÄÉ‰ª£Á†ÅÔºö

```py
import operator

man = Person("Alpha", 1)

op = operator.attrgetter('name')
print(op(man))
print(man.name)
print(man.__dict__['name'])
print(getattr(man, 'name'))

p_list = [Person('Beta', 18), Person('Gamma', 17), Person('Delta', 20), Person('Sigma', 25)]
r = sorted(p_list, key=operator.attrgetter('age'))
for i in r:
  print(i)
```

ÂÖ∂‰∏≠ operator.attrgetter Â∞ÅË£Ö getattr ÊñπÊ≥ï„ÄÇÂèØ‰ª•Áî®‰∫éÂØπË±°ÁöÑÊéíÂ∫èÔºåÊØîÂ¶ÇÈúÄË¶ÅÊ†πÊçÆÂπ¥ÈæÑ age Êù•ÊéíÂ∫è Person ÂØπË±°Ôºö

ËæìÂá∫ÁªìÊûúÔºåÂÖ∂‰∏≠ËÆøÈóÆ name Â±ûÊÄß‰∏ç‰ºöËß¶ÂèëÈ≠îÊúØÊñπÊ≥ï *__str__*ÔºåÂõ†‰∏∫ÂÆÉÊú¨Ë∫´ÊòØÂ≠óÁ¨¶‰∏≤Á±ªÂûã‰∏çÈúÄË¶ÅËΩ¨Êç¢Ôºö

    Alpha
    Alpha
    Alpha
    Alpha
    name=Gamma, age=17
    name=Beta, age=18
    name=Delta, age=20
    name=Sigma, age=25

## ==‚ö° Class Methods
- The Python Standard Library ¬ª Built-in Functions

Python Á±ªÂûãÂÆö‰πâ‰∏≠ÔºåÊúâÂÆû‰æãÊñπÊ≥ï„ÄÅÁ±ªÊñπÊ≥ï„ÄÅÈùôÊÄÅÊñπÊ≥ï„ÄÅÁßÅÊúâÊñπÊ≥ïÔºàÂä†‰∏ãÂàíÁ∫øÂºÄÂ§¥ÔºâÁ≠âÊ¶ÇÂøµ„ÄÇ

‰∏ÄËà¨ÁöÑÁ±ªÂÆû‰æãÊñπÊ≥ï‰∏é Class Methods ÊòØ‰∏§Áßç‰∏çÂêåÁöÑÊñπÊ≥ïÊ¶ÇÂøµ„ÄÇ@classmethod Ë£ÖÈ•∞ÁöÑÊñπÊ≥ïÊúâÁÇπÂÉèÈùôÊÄÅÊñπÊ≥ïÔºå‰∏çÂêåÁöÑÊòØÂÆÉ‰º†ÂÖ•ÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞‰∏∫ÂΩìÂâçÁ±ªÂΩ¢„ÄÇ

‰æãÂ¶ÇÔºå‰∏Ä‰∏™ Sublime Text Êèí‰ª∂ÁöÑÂÆûÁé∞‰∏≠Ôºö

```py
import sublime
import sublime_plugin


class ViewLatexCommand(sublime_plugin.TextCommand):
    def run(self, edit):
        self.view.insert(edit, 0, "#Hello, World!\n")

        print(self.view.file_name())
        self.info()

        for region in self.view.sel():
            dir(region)
            # self.view.replace(edit, region, "%i %s" %(i, region.`)

    @classmethod 
    def inf(cls):
        print("cls.inf() %s"%cls.inf);
        print("cls.info() %s"%cls.info);

    def info(self):
        print(self.inf());
```

ÊâßË°åÊèí‰ª∂ÂëΩ‰ª§Êó∂ËæìÂá∫Ôºö

    cls.inf() <bound method ViewLatexCommand.inf of <class 'User.ViewLatex.ViewLatexCommand'>>
    cls.info() <function ViewLatexCommand.info at 0x0000014128BCECA0>

ÂèØ‰ª•ÁúãÂà∞ÔºåÂÆû‰æãÊñπÊ≥ïÂú®ÂÜÖÂ≠ò‰∏≠‰øùÂ≠òÂÆû‰æãÁöÑ‰ΩçÁΩÆÔºåÁ±ªÂûãÊñπÊ≥ïÂú®Âú®ÂÜÖÂ≠ò‰∏≠‰øùÂ≠òÁ±ªÂΩ¢ÁöÑ‰ΩçÁΩÆÔºåÁªëÂÆöÂà∞Á±ªÂûã‰∏äËÄå‰∏çÊòØÂÖ∑‰ΩìÁöÑÂÆû‰æã‰∏ä„ÄÇ

    info is <class 'function'>
    inf  is <class 'method'>

@classmethod Transform a method into a class method.

A class method receives the class itself as its first argument. This way we are able to call the method inside a class without first creating an instance from the class. We just use the decorator @classmethod before the declaration of the method contained in the class and then we can directly access the method. Below are the main features of classmethids.

- A classmethod is bound to a class and does not depend on the instantiation of a class to be used.
- A classmethod can modify a class which in turn propagates to all instances of the class.

A class method receives the class as implicit first argument, just like an instance method receives the instance. To declare a class method, use this idiom:

```py
class C:
    @classmethod
    def f(cls, arg1, arg2, ...): ...
```

The @classmethod form is a function decorator ‚Äì see Function definitions for details.

A class method can be called either on the class (such as C.f()) or on an instance (such as C().f()). The instance is ignored except for its class. If a class method is called for a derived class, the derived class object is passed as the implied first argument.

Class methods are different than C++ or Java static methods. If you want those, see staticmethod() in this section. For more information on class methods, see The standard type hierarchy.

Changed in version 3.9: Class methods can now wrap other descriptors such as property().


## ==‚ö° Static Methods
- The Python Standard Library ¬ª Built-in Functions
- The Python Language Reference - 3.2. The standard type hierarchy

@staticmethod Transform a method into a static method.

A static method does not receive an implicit first argument. To declare a static method, use this idiom:


```py
class C:
    @staticmethod
    def f(arg1, arg2, ...): ...
```


The @staticmethod form is a function decorator ‚Äì see Function definitions for details.

A static method can be called either on the class (such as C.f()) or on an instance (such as C().f()).

Static methods in Python are similar to those found in Java or C++. Also see classmethod() for a variant that is useful for creating alternate class constructors.

Like all decorators, it is also possible to call staticmethod as a regular function and do something with its result. This is needed in some cases where you need a reference to a function from a class body and you want to avoid the automatic transformation to instance method. For these cases, use this idiom:


```py
class C:
    builtin_open = staticmethod(open)
```



# =üö© Class Data Model

## ==‚ö° Class & Type

‰∏ÄÂàáÂ∞ΩÂØπË±° - Objects are Python‚Äôs abstraction for dataÔºÅ ËøôÊòØ Python Âü∫Êú¨ÁöÑÊï∞ÊçÆÊäΩË±°ÊñπÊ≥ïÔºåÂèÇËÄÉ Python ÂÆòÊñπÂèÇËÄÉÊâãÂÜåÁ¨¨‰∏âÈÉ®ÂàÜ 3. Data model„ÄÇÊâÄÊúâÂØπË±°Áî±‰∏âÈÉ®ÂàÜÊûÑÊàêÔºåÂîØ‰∏ÄÊ†áËØÜ `identity` ÈÉ®ÂàÜÔºåÁ±ªÂûã `type` ÈÉ®ÂàÜÂíåÂÄº `value` ÈÉ®ÂàÜ„ÄÇÊ†áËØÜ identity ÂèØ‰ª•ÁÆÄÂåñÁêÜËß£‰∏∫ÂØπË±°Âú®ÂÜÖÂ≠ò‰∏≠ÁöÑÂîØ‰∏ÄÂú∞ÂùÄÔºåÁ±ªÂûãÂàôÁ°ÆÂÆö‰∫ÜÂØπË±°ÊîØÊåÅ‰ªÄ‰πàÂäüËÉΩÔºåÂØπ‰∫é‰∏Ä‰∏™ÂØπË±°ËÄåË®ÄËøô‰∏§ÈÉ®ÂàÜÊòØ‰∏çÂèØÂèòÁöÑÔºåÂØπË±°ÁöÑÂÄºÁî±Á±ªÂûãÂÜ≥ÂÆöÊòØ‰∏çÊòØÂèØÂèòÁöÑ Mutable Êàñ Immutable„ÄÇ

Python Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÂÜÖÁΩÆÁ±ª type ÂíåÂÜÖÁΩÆÂáΩÊï∞ type()ÔºåÂÆÉ‰ª¨Âè™ÊòØÂêåÂêçËÄåÂ∑≤„ÄÇobject ÊòØÊâÄÊúâÁ±ªÁªßÊâøÁöÑÂü∫Á±ªÔºå‰∏é object Á±ª‰∏ÄÊ†∑Ôºåtype Á±ª‰πüÊòØ class Á±ªÂØπË±°Ôºåtype() Â∞±ÊòØÁî®Êù•Ëé∑ÂèñÂØπË±°Á±ªÂûãÁöÑÂÜÖÁΩÆÂáΩÊï∞„ÄÇ

class ÊòØ Python ÁöÑ‰∏Ä‰∏™ÂÖ≥ÈîÆÂ≠óÔºåÂÆÉÊÑèÂë≥‰∏ÄÂàáÂ∞ΩÂØπË±°ËøôÂè•ËØù‰∏≠ÁöÑÂØπË±°ÔºåÂ±û‰∫éÈù¢ÂêëÂØπË±°ÁºñÁ®ã OOP - Object-Oriented Programming ÁöÑÊ¶ÇÂøµÔºåÊ≤°ÊúâÂØπË±°‰∏é‰πãÂÖ≥ËÅî„ÄÇÂ¶ÇÊûúÈùûË¶ÅÁî±‰∏™ËØ¥ËØùÔºåÈÇ£Â∞±ÊòØÂØπË±°ÁöÑ `__class__` Ëøô‰∏™Â±ûÊÄßÔºå‰πüÊòØ type() ÂáΩÊï∞ËøîÂõûÁöÑÈÇ£‰∏™ÂØπË±°„ÄÇ

    print(str)    # <class 'str'>
    print(type)   # <class 'type'>
    print(object) # <class 'object'>

‰ª•‰∏ã‰ª£Á†ÅÂèØ‰ª•ÊØîËæÉ type Âíå class ‰∏§ÁßçÂØπË±°ÁöÑÂ±ûÊÄßÂ∑ÆÂà´ÔºåËøô‰∫õÂ∑ÆÂà´ÊòØÁî±ÂØπË±°ÁöÑÁ±ªÂûãÂÜ≥ÂÆöÁöÑÔºåÂç≥ÂØπË±°ÁöÑ type ÈÉ®ÂàÜÔºå‰πüÂ∞±ÊòØ‰∏äÈù¢‰ª£Á†ÅÊ≥®Ëß£‰∏≠ÂçïÂºïÂè∑ÊòæÁ§∫ÁöÑÁ±ªÂûã‰ø°ÊÅØÔºö

    print(dir(object))
    # [
    #  '__class__', '__delattr__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__',
    #  '__getattribute__', '__gt__', '__hash__', '__init__', '__init_subclass__',
    #  '__le__', '__lt__', '__ne__', '__new__', '__reduce__', '__reduce_ex__',
    #  '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__'
    # ]

    print(dir(object.__class__))
    # [
    #  '__abstractmethods__', '__base__', '__bases__', '__basicsize__', '__call__',
    #  '__class__', '__delattr__', '__dict__', '__dictoffset__', '__dir__', '__doc__',
    #  '__eq__', '__flags__', '__format__', '__ge__', '__getattribute__', '__gt__',
    #  '__hash__', '__init__', '__init_subclass__', '__instancecheck__', '__itemsize__',
    #  '__le__', '__lt__', '__module__', '__mro__', '__name__', '__ne__', '__new__',
    #  '__prepare__', '__qualname__', '__reduce__', '__reduce_ex__', '__repr__',
    #  '__setattr__', '__sizeof__', '__str__', '__subclasscheck__', '__subclasses__',
    #  '__subclasshook__', '__text_signature__', '__weakrefoffset__', 'mro'
    # ]

Python ‰∏ÄÂàáÂ∞ΩÂØπË±°ÂèØ‰ª•ÈÄöËøá‰ª•‰∏ã‰ª£Á†Å‰ΩìÁé∞ÔºåÊó†ËÆ∫ÊòØ 123Ôºå"abc"ÔºåËøòÊòØÂÜÖÁΩÆÁ±ªÂûã strÔºåobject ÈÉΩÊòØÂØπË±°ÔºåÈÄöËøá type() ÂáΩÊï∞ÂèØ‰ª•ÂèñÂæóÂØπË±°ÁöÑ type Á±ªÂûãÈÉ®ÂàÜÔºö

    print(type(123))                 # <class 'int'>
    print(type("abc"))               # <class 'str'>

    print(type(str))                 # <class 'type'>
    print(type(object))              # <class 'type'>

    print(type("string", (), {}))    # <class '__main__.string'>

Ê≥®ÊÑè‰∏äÈù¢ÊúÄÂêé‰∏ÄË°åÂπ∂‰∏çÊòØÂú®Ë∞ÉÁî® type() ÂáΩÊï∞ÔºåÂÆûÈôÖ‰∏äÊòØÂÆûÂàóÂåñ type Á±ªÂûãÔºåÂç≥ÊûÑÂª∫Ëá™ÂÆö‰πâÁ±ªÂûãÔºåËøôÁúãËµ∑Êù•Áõ∏ÂΩìËø∑ÊÉë„ÄÇÈÄöËøá type ÂÆûÂàóÂåñÁ±ªÂûãÁöÑËØ≠Ê≥ïÂ¶Ç‰∏ãÔºö

    type(name, bases, namespace)

Âç≥Ë¶ÅÂàõÂª∫‰∏Ä‰∏™ÂØπË±°Ôºåtype() ÂáΩÊï∞‰æùÊ¨°‰º†ÂÖ• 3 ‰∏™ÂèÇÊï∞Ôºö

- class ÁöÑÂêçÁß∞Ôºõ
- bases ‰º†ÂÖ•ÁªßÊâøÁöÑÁà∂Á±ªÈõÜÂêà tupleÔºõ
- namespace ‰º†ÂÖ•Á±ªÊàêÂëòÂèäÂ±ûÊÄßÁªÑÊàêÁöÑÂ≠óÂÖ∏ dict„ÄÇ

‰∏ãÈù¢Ëøô‰∏™Êó†Áî®Á§∫‰æãÂ±ïÁ§∫Â¶Ç‰Ωï‰ΩøÁî® type Á±ªÂûãÂÆûÂàóÂåñËá™ÂÆö‰πâÁ±ªÂûãÔºö

    def init(self, val):
        self.val = val


    @classmethod
    def test(cls):
        print("class method of %s" % cls)


    @staticmethod
    def Test():
        print("static method ...")


    def hello(self):
        print(self.val + " this is abc")


    inheritance = (object,)
    members = {
        "__init__": init,
        "__str__": lambda self: self.val,
        "hello": hello,
        "test": test,
        "Test": Test,
    }
    # define <class '__main__.string'>
    abc = type("string", inheritance, members)

    abc.test() # class method of <class '__main__.string'>
    abc.Test() # static method ...

    hi = abc("Hi!")

    hi.test()
    hi.Test()
    hi.hello() # Hi! this is abc
    print(hi)  # Output Hi! via __str__ magic function


## ==‚ö° dataclasses
- https://github.com/piglei/one-python-craftsman/blob/master/zh_CN/10-a-good-player-know-the-rules.md
- Data Classes in Python 3.7+ by Geir Arne Hjelle https://realpython.com/python-data-classes/

Data Classes ÊòØ‰∏ÄÁßçÊï∞ÊçÆÁ±ªÔºåÊØîËµ∑‰∏ÄËà¨ÁöÑÁ±ªÂûãÔºåÂÆö‰πâÊï∞ÊçÆÁ±ªËøôÁßçÈúÄÊ±ÇÂÆûÂú®Â§™Â∏∏ËßÅ‰∫ÜÔºåÊâÄ‰ª•Âú® Python 3.7 Ê†áÂáÜÂ∫ì‰∏≠Êñ∞Â¢û‰∫Ü dataclasses Ê®°ÂùóÔºåÁÆÄÂåñÁ±ªÊçÆÁ±ªÁöÑ‰ΩøÁî®„ÄÇ

ÈÄöËøá @dataclass Ë£ÖÈ•∞Âô®ÔºåÂèØ‰ª•Ëá™Âä®Êèê‰æõÊï∞ÊçÆÁ±ªÁöÑÂ∏∏Áî®ÊñπÊ≥ïÂÆûÁé∞ÔºåÂ¶Ç `__repr__`, `__eq__`, `__hash__`Á≠âÔºåËøò‰ºöÊ†πÊçÆÊï∞ÊçÆÊàêÂëòÊèê‰æõÊûÑÈÄ†Âô® __init__ÔºåÂÆÉ‰ºöÂ∞ùËØïË∞ÉÁî® __post_init__ ËøõË°åÊûÑÈÄ†ÂêéÊúüÂ∑•‰Ωú„ÄÇ

    dataclass(*, init=True, repr=True, eq=True, order=False, unsafe_hash=False, frozen=False, match_args=True, kw_only=False, slots=False)

ÈªòËÆ§ÂèÇËÄÉÂê´‰πâÔºö

   - `init`ÔºöÈªòËÆ§ÁîüÊàê __init__ ÊñπÊ≥ï„ÄÇ
   - `repr`ÔºöÈªòËÆ§ÁîüÊàê __repr__ ÊñπÊ≥ï„ÄÇ
   - `eq`  Ôºö ÈªòËÆ§ÁîüÊàê __eq__ ÊñπÊ≥ïÔºå‰º†ÂÖ• False ‰ΩøÁî® object.__eq__„ÄÇ
   - `order`ÔºöÈªòËÆ§‰∏çÁîüÊàê __gt__ __ge__ __lt__ __le__ ÊñπÊ≥ï„ÄÇ
   - `unsafe_hash` : ÈªòËÆ§Ê†πÊçÆ `eq` and `frozen` Êù•ÂÆûÁé∞ `__hash__` ÊñπÊ≥ï„ÄÇ
       - `eq` and `frozen` ÈÉΩ‰∏∫ True Â∞±Êèê‰æõ `__hash__` ÊñπÊ≥ïÂÆûÁé∞Ôºõ
       - `eq` is true and `frozen` is false Âàô `__hash__` ËÆæÁΩÆ‰∏∫ `None`ÔºåË°®Á§∫‰∏çÂèØËøõË°åÂìàÂ∏åÔºåÂõ†‰∏∫ÊòØ mutableÔºõ
       - `eq` is false Âàô‰∏çÁÆ° `__hash__`ÔºåÂèØËÉΩÊòØÁªßÊâøÁà∂Á±ªÁöÑÂÆûÁé∞ÔºåÂ¶ÇÊûúÊòØ `object`Ôºõ
   - `frozen` : ÈªòËÆ§ÂêÑÊàêÂëòÊòØÂèØËµãÂÄºÁöÑÔºå‰∏çÊ®°Êãü read-only frozen instances„ÄÇ
   - `match_args` : ÈªòËÆ§‰ªéÊûÑÈÄ†ÂèÇÊï∞ÂàóË°®‰∏≠ÁîüÊàê `__match_args__` tupleÔºåÈô§ÈùûÊòæÂºèÂÆö‰πâ‰∫Ü„ÄÇ
   - `kw_only` : ÈªòËÆ§‰∏çÂ∞Ü `__init__` ÂèÇÊï∞Ê†áËÆ∞‰∏∫ keyword-only„ÄÇ
   - `slots` : ÈªòËÆ§‰∏çÁîüÊàê `__slots__` ‰πü‰∏çÂàõÂª∫Êñ∞Á±ªÂÆû‰æãÔºåËÄåÊòØËøîÂõûÂéüÂßãÁöÑÂÆû‰æã„ÄÇ

`__hash__` ÊñπÊ≥ïÁöÑÂ≠òÂú®ÊöóÁ§∫‰∫Ü‰∏Ä‰∏™ immutable ÂØπË±°„ÄÇ

`__slots__` ÊòØ Python 3.10 Ê∑ªÂä†ÁöÑÊñ∞ÂäüËÉΩÔºåÂèØ‰ª•ÈôêÂà∂‰∏ç‰ΩøÁî®Âä®ÊÄÅÂ±ûÊÄßÔºåÁ¶ÅÊ≠¢ __dict__ ÁöÑ‰ΩøÁî®„ÄÇ

Â≠óÊÆµËá™ÂÆö‰πâÔºö

    field(*, default=MISSING, default_factory=MISSING, init=True, repr=True, hash=None, compare=True, metadata=None, kw_only=MISSING)

ÂèÇÊï∞ÂàóË°®‰ΩøÁî® `MISSING` ËÄå‰∏çÊòØ `None` ÊòØÂõ†‰∏∫ÂêéËÄÖÂèØËÉΩÊòØÊï∞ÊçÆÁ±ªÂ≠óÊÆµÁöÑÂÄºÔºå‰ΩÜÊòØÊ≤°ÊúâÁî®Êà∑‰ª£Á†ÅÁõ¥Êé•‰ΩøÁî® MISSING„ÄÇ

ÂèÇÊï∞Âê´‰πâÂ¶Ç‰∏ãÔºö

   - `default`: Â≠óÊÆµÈªòËÆ§ÂÄºÔºå`default_factory` Âè™ËÉΩ‰∫åÈÄâ‰∏ÄÔºõ
   - `default_factory`: ÈªòËÆ§ÂÄºÂ∑•ÂéÇÔºåÂè™ËÉΩÊòØ 0 ÂèÇÊï∞ÁöÑÊñπÊ≥ïÔºõ
   - `init`: ÈªòËÆ§‰Ωú‰∏∫ `__init__` ÊûÑÈÄ†Âô®ÁöÑÂèÇÊï∞Ôºõ
   - `repr`: ÈªòËÆ§‰Ωú‰∏∫ `__repr__` Ê†ºÂºèÂåñÊó∂Ë°®Áé∞ÁöÑÂÜÖÂÆπÔºõ
   - `hash`: ÂèØ‰ª•‰ΩøÁî® bool or `None`ÔºåÈªòËÆ§Êåâ `compare` ÊåáÁ§∫ÔºåËÄå‰∏ç‰Ωú‰∏∫ `__hash__` ÊñπÊ≥ïÁîüÊàêÊëòË¶ÅÊó∂ÁöÑËæìÂÖ•Ôºõ
   - `compare`: ÈªòËÆ§Áî®‰∫éÊØîËæÉÊìç‰ΩúÔºå`__eq__`, `__gt__` Á≠âÁ≠âÔºõ
   - `metadata`: ÂèØ‰ª•‰ΩøÁî® mapping or NoneÔºåÈªòËÆ§Ë°®Á§∫Á©∫Â≠óÂÖ∏ÂØπË±°„ÄÇ
   - `kw_only`: ÈªòËÆ§‰∏çÂ∞ÜÊ≠§Â≠óÊÆµËÆæÁΩÆ‰∏∫`__init__` ÊñπÊ≥ïÁöÑ keyword-only ÂèÇÊï∞Ôºõ


Example::

```py
from dataclasses import dataclass

@dataclass
class Point:
    x: float
    y: float
    z: float = 0.0
    # def __init__(self, x: float, y: float, z: float = 0.0):
    # ...

p = Point(1.5, 2.5)
print(p)   # produces "Point(x=1.5, y=2.5, z=0.0)"
```

.. seealso::

    :pep:`557` -- Data Classes
       PEP written and implemented by Eric V. Smith


21üÉè ÁÇπÊ∏∏ÊàèÁî±Áé©ÂÆ∂ÂíåÂ∫ÑÂÆ∂ÔºàÂç≥ËµåÂú∫ÁöÑÂèëÁâåÂëòÔºâÂØπÁé©ÔºåÁúãË∞ÅÁöÑÁâåÈù¢ÁÇπÊï∞Êõ¥Èù†Ëøë 21 ÁÇπ„ÄÇ‰ΩÜÂ¶ÇÊûúË∂ÖËøá‰∫Ü 21 ÁÇπÔºåÂàôÁß∞‰∏∫‚ÄúÁàÜÊéâ‚ÄùÔºåÁÆóËæì„ÄÇÂÖ∂‰∏≠Ëä±ÁâåÔºàJÔºåQÔºåKÔºâÈÉΩÁÆó10ÁÇπÔºåA ÂèØ‰ª•ÁÆó 1 ÁÇπÔºå‰πüÂèØ‰ª•ÁÆó 11 ÁÇπÔºåÁé©ÂÆ∂‰πãÈó¥‰∏çÂÅöÊØîËæÉ„ÄÇ

Ê∏∏ÊàèÂºÄÂßãÊó∂ÔºåÊâÄÊúâÁé©ÂÆ∂ÂíåÂ∫ÑÂÆ∂ÂêÑÊãø‰∏§Âº†ÁâåÔºå‰∏ÄËà¨Êù•ËØ¥ÔºåÊòØÁé©ÂÆ∂‰∏§Âº†ÁâåÁâåÈù¢Êúù‰∏äÔºåÂ∫ÑÂÆ∂‰∏ÄÂº†ÁâåÈù¢Êúù‰∏äÔºå‰∏ÄÂº†ÁâåÈù¢Êúù‰∏ã„ÄÇ

‰∏§Âº†ÁâåÁöÑÁÇπÊï∞ÔºåËÇØÂÆö‰ªã‰∫é 2 Âà∞ 21 ÁÇπ‰πãÈó¥„ÄÇ21 ÁÇπÂè™ÂèØËÉΩÊòØ‰∏ÄÂº† 10ÔºàÂåÖÊã¨ JÔºåQÔºåKÔºâÂíå‰∏ÄÂº† AÔºåËøôÂè´‚ÄúÂ§©ÊàêÔºàBlackJackÔºå‰ª•‰∏ãÁÆÄÁß∞BJÔºâ‚ÄùÔºåÈô§ÈùûÂ∫ÑÂÆ∂‰πüÊãøÂà∞‰∫ÜBJÔºå‰∏çÁÑ∂Ëµ¢‰∏ÄÂÄçÂçäÁöÑËµåÊ≥®„ÄÇ

Ë¶ÅÁâåÔºàHitÔºâÔºåÂÅúÁâåÔºàStandÔºâÔºåÂä†ÂÄçÔºàDouble downÔºâÔºåÊäïÈôçÔºàSurrenderÔºâ„ÄÇ

‰ª•‰∏ã‰ª£Á†ÅÊµãËØïÂú®‰∏çÂêåÁöÑÊ¶ÇÂøµ‰∏ãË¶ÅÁâåÂá∫Áé∞Êö¥ÁÇπÁöÑÊ¶ÇÁéáÔºåÊ≥®ÊÑè index Â≠óÊÆµÊ∑ªÂä†Âà∞Á¨¨‰∏ÄÔºåÂÆÉÁî®‰∫éËøõË°åÂ§ßÂ∞èÊØîËæÉÊéíÂ∫èÊó∂Á°ÆÂÆö‰∏çÂêåÁöÑÁâåÈù¢ÊâÄ‰ª£Á†ÅÁöÑÂ∫èÂè∑„ÄÇ

```py
from dataclasses import dataclass, field
from random import sample

@dataclass(order=True)
class Card:
    index:int = field(init=False, repr=False)
    rank: int
    suit: str

    def __post_init__(self):
        self.index = RANKS.index(self.rank)

    def __repr__(self):
        return self.__str__()

    def __str__(self):
        return f" {self.rank}{self.suit}"

class Player:
    _holds: list[Card] = None
    def __init__(self):
        self._holds = []

    def inquire(self):
        if self.probability()>60:
            return True
        return False

    def deliver(self, card):
        self._holds.append(card)

    def probability(self):
        dif = 21 - self.sum()
        if 'A' in self._holds: dif -= 10
        if dif<2: return 0
        return dif / 0.1

    def sum(self):
        s = 0
        ace = False
        for c in self._holds:
            if c.rank =='A': 
                ace = True
            elif RANKS.index(c.rank)<8:
                s += RANKS.index(c.rank) + 2
            else:
                s += 10
        if ace and s<11: 
            s += 11
        elif ace:
            s += 1
        return s

RANKS = '2 3 4 5 6 7 8 9 10 J Q K A'.split()
SUITS = '‚ô† ‚ô• ‚ô¶ ‚ô£'.split()
cards = [Card(r, s) for s in SUITS for r in RANKS]

bomb = 0
for t in range(0,1000):
    player = Player()
    shuffle = sample(cards, k=len(cards))
    for card in shuffle:
        if player.inquire():
            # print(f"acquire a new card: {card}")
            player.deliver(card)
        else:
            break
    bomb += 1 if player.sum()>21 else 0
    print(player.sum(), "üí•" if player.sum()>21 else "", end="")
print("\n", f"üí• {bomb}")
```


## ==‚ö° Metaclass & type
- Metaclasses in Python 3000 https://www.python.org/dev/peps/pep-3115
- https://stackoverflow.com/questions/100003/what-are-metaclasses-in-python
- https://stackoverflow.com/questions/tagged/python

Python ‰∏≠‰∏ÄÂàáÈÉΩÊòØÂØπË±°ÔºåÂåÖÂê´ class ‰πüÊòØÂØπË±°ÔºåÂú® CPython ÂÆûÁé∞‰∏äÔºåÈÉΩÂü∫‰∫é *PyObject*ÔºåËÄåÁ±ªÂûãÂ§ö‰∫Ü‰∏Ä‰∏™ *PyTypeObject*ÔºåÂÆÉÂåÖÂê´‰∫ÜÂèØ‰ª•ÂàõÂª∫ÂÆû‰æãÁöÑÊñπÊ≥ï„ÄÇ

ÊâÄ‰ª• metaclass ÂÖÉÁ±ªÔºå‰πüÂ∞±ÊòØÂèØ‰ª•ÂàõÂª∫ class ÂØπË±°ÁöÑÁ±ª„ÄÇ‰∏ÄËà¨‰∏äÔºåÁ±ªÁöÑÂÆû‰æãÂåñÂ∞±ÊòØÂú®ÂÜÖÂ≠ò‰∏≠ÂàõÂª∫‰∏Ä‰∏™ÂØπË±°ÂÆû‰æãÔºåËÄå metaclass ÂàõÂª∫ÁöÑÂÆû‰æãÊòØ classÔºåÊâÄ‰ª•ÂÆÉÊòæÂæóÈùûÂ∏∏ÁâπÊÆä„ÄÇ

‰ΩÜËøô‰∏™ÂäüËÉΩÊòØ Python Â§©ÁîüÂÖ∑ÊúâÁöÑÔºåÂÖ®Â±ÄÂáΩÊï∞ *type()* Êú¨Ë∫´‰πüÊòØÁ±ªÔºåÂÆÉÂ∞±ÊòØÁî®Êù•ÂàõÂª∫Á±ªÁöÑÁ±ªÔºåÂÆÉËøîÂõûÁöÑÂÄºÊòØ class Á±ªÂûã„ÄÇÂÖ®Â±ÄÂáΩÊï∞/Á±ª type ÂíåÂÖ∂ÂÆÉÁ±ªÂØπË±°ÁöÑ __class__ Â±ûÊÄßÂÖ∑ÊúâÂêåÊ†∑ÁöÑ *type* Á±ªÂûãÔºåÂ∞±ÊòØÂÖÉÁ±ª„ÄÇ

ÂÅáËÆæÊúâ‰ª•‰∏ãËøôÊ†∑‰∏Ä‰∏™ MetaClassÔºåÂÆÉÂèØ‰ª•ÂàõÂª∫Á±ªÔºåÂπ∂Áî®ÂÆÉÂàõÂª∫ÁöÑÁ±ªÊù•ÂÆû‰æãÂåñÂá∫ÂÖ∑‰ΩìÁöÑÂØπË±°ÂÆû‰æãÔºåÂ∞±ÂèØ‰ª•Áî® type ÂáΩÊï∞Êù•ÂÆûÁé∞ MetaClassÔºö

```py
# What you want:
MyClass = MetaClass()
my_object = MyClass()

# What you need:
MyClass = type('MyClass', (), {})
my_object = MyClass()

# MyClass.__class__ # <class 'MyClass'>
# MyClass           # <class 'type'>
# type              # <class 'type'>
```

Python 2 Âà∞ Python 3 ‰ΩøÁî®‰∏çÂêåÊñπÊ≥ïÊù•‰ΩøÁî®ÂÖÉÁ±ªÔºåsometing ÊòØÂèØ‰ª•Ë∞ÉÁî®ÂØπË±°ÔºåËÉΩËøîÂõûÁ±ªÂûãÂç≥ÂèØÔºö

```py
# Metaclasses in Python 2
class Foo(object):
    __metaclass__ = something
    pass

# Metaclasses in Python 3
class Foo(object, metaclass=something):
    pass
```

Python 2 ‰ΩøÁî® __metaclass__ Êù•ÂÆûÁé∞Ëá™ÂÆö‰πâÁ±ªÔºåÊåâ‰ª•‰∏ãËßÑÂàôÈ°∫Â∫èËøõË°åÔºö

‚óè If dict['__metaclass__'] exists, it is used.
‚óè ‰ΩøÁî®Âü∫Á±ªÁöÑ metaclass Â¶ÇÊûúÊúâÔºåÊàñËÄÖÂü∫Á±ªÁöÑ __class__ ÊåáÂÆöÁöÑÁ±ªÂûãÔºõ
‚óè ‰ΩøÁî®ÂÖ®Â±ÄÂèòÈáè __metaclass__ ÂÆö‰πâÁöÑÂÖÉÁ±ªÂûãÔºõ
‚óè Âê¶Âàô‰ΩøÁî®ÊóßÂºèÁ±ª old-style Âç≥ÁªèÂÖ∏Á±ªÂÖÉÁ±ªÂûã types.ClassType„ÄÇ


‰∏Ä‰∏™Á±ªÂÆö‰πâÂåÖÂê´Á±ªÂûãÂêçÁß∞ class nameÔºåclass dictionary Âíå‰∏Ä‰∏™Âü∫Á±ªÂàóË°® base classesÔºåËÄå metaclass ÁöÑËÅåË¥£Â∞±ÊòØÂú®Ëøô‰∏â‰∏™ÂèÇÊï∞ÁöÑÂü∫Á°Ä‰∏äÊûÑÂª∫Á±ªÂûãÔºåËøô‰∏™ËøáÁ®ãÂú®Â§ßÂ§öÊï∞ OOP ËØ≠Ë®Ä‰∏≠ÊòØÂÜÖÁΩÆÁöÑÈªòËÆ§ÁöÑÂÆûÁé∞„ÄÇ

Metaclass Â∞±ÊòØ The class of a classÔºåÂèÇËÄÉ‰ª£Á†ÅÊñáÊ°£ Python-3.10.2\Doc\glossary.rst Âèä datamodel.rst

‚û° Class definitions create a class name, a class dictionary, and a list of base classes.
‚û° The metaclass is responsible for taking those three arguments and creating the class.
‚û° Most object oriented programming languages provide a default implementation.
‚û° What makes Python special is that it is possible to create custom metaclasses.
‚û° They have been used for logging attribute access, adding thread-safety, tracking object creation, implementing singletons, and many other tasks.

Á§∫ËåÉÔºö‰ΩøÁî®ÂáΩÊï∞ÊñπÂºèÂÆö‰πâ metaclass Â∞ÜÁ±ªÂ±ûÊÄßÊõ¥Âêç‰∏∫Â§ßÂÜôÔºö

```py
# the metaclass will automatically get passed the same argument
# that you usually pass to `type`
def upper_attr(future_class_name, future_class_parents, future_class_attrs):
    """
      Return a class object, with the list of its attribute turned
      into uppercase.
    """
    # pick up any attribute that doesn't start with '__' and uppercase it
    uppercase_attrs = {
        attr if attr.startswith("__") else attr.upper(): v
        for attr, v in future_class_attrs.items()
    }

    # let `type` do the class creation
    print(future_class_name, future_class_parents, uppercase_attrs)
    return type(future_class_name, future_class_parents, uppercase_attrs)

__metaclass__ = upper_attr # this will affect all classes in the module

# for Python 2.x
# global __metaclass__ won't work with "object" though
# but we can define __metaclass__ here instead to affect only this class
# and this will work with "object" children
class Foo(): 
    bar = 'bip'

# for Python 3.x
class Foo(metaclass=upper_attr):
    bar = "rip"

print(hasattr(Foo, 'bar'))
print(hasattr(Foo, 'BAR'))
print(Foo.BAR)
```

ÈáçÊñ∞‰ΩøÁî®Á±ªÂûãÊñπÂºèÂÆûÁé∞Ôºö

```py
from collections import OrderedDict

class UpperAttrMetaclass(type):

    # @classmethod
    # def __prepare__(metacls, cls, bases, **kwds):
    def __prepare__(cls, bases, **kwds):
        global OrderedDict
        attrs = OrderedDict()
        attrs['__UPPERED__'] = True
        return attrs

    def __init__(self, args):
        print("__init__:", args)

    def __new__(metacls, cls, bases, classdict, **kwds):
        uppercase_attrs = {
            attr if attr.startswith("__") else attr.upper(): v
            for attr, v in classdict.items()
        }
        return type(cls, bases, uppercase_attrs)

class Foo(metaclass=UpperAttrMetaclass):
    bar = "rip"

print(hasattr(Foo, 'bar'))
print(hasattr(Foo, 'BAR'))
print(Foo.BAR)
```

Ëá™ÂÆö‰πâÁ±ªÂûãÊ∂âÂèäÁöÑÈ≠îÊúØÊñπÊ≥ïÔºö

- `__prepare__` Âíå `__new__` È≠îÊúØÊñπÊ≥ïÂÖàÂêéË¢´Ë∞ÉÁî®Ôºå‰∏îÂú®Á±ªÂûãÂàõÂª∫ÂâçÔºåÂèØ‰ª•‰øÆÊîπÁ±ªÂûãÊàêÂëòÂ±ûÊÄßÂ≠óÂÖ∏Ôºõ
- `__new__` ÊñπÊ≥ïË¢´Ë∞ÉÁî®ÔºåËøõË°åÁ±ªÂûãÂÆû‰æãÂåñÔºåËøîÂõûÂè¶‰∏Ä‰∏™Á±ªÂûãÂÆûÂàóÔºåËøôÊòØÂ∑•ÂéÇÂáΩÊï∞ factory function ÁöÑÂÖ∏ÂûãÂÅöÊ≥ïÔºõ
- `__init__` Á±ªÂûãÂàùÂßãÂåñÊñπÊ≥ïË¢´Ë∞ÉÁî®ÔºåÊ≥®ÊÑèÊ≠§Êó∂Á¨¨‰∏Ä‰∏™ÂèÇÊï∞Â∑≤ÁªèÂèòÊàê self ËÄå‰∏çÂÉèÂâç‰∏§‰∏™ÊñπÊ≥ïÊé•Êî∂ÁöÑÊòØÁ±ªÂûã„ÄÇ


Python ‰∏≠‰∏ÄÂàáÁöÜÂºïÁî®ÔºåËøô‰ΩøÂæó‰ªñ‰∏ç‰ºöÂÉè C++ ‰∏ÄÊ†∑‰ΩøÁî®ËôöÂü∫Á±ªÂ§ÑÁêÜÂü∫Á±ªÂØπË±°ÈáçÂ§çÁöÑÈóÆÈ¢òÔºå‰ΩÜÊòØÂ¶ÇÊûúÁà∂Á±ªÂ≠òÂú®ÂêåÂêçÂáΩÊï∞ÁöÑÊó∂ÂÄôËøòÊòØ‰ºö‰∫ßÁîü‰∫å‰πâÊÄßÔºåPython ‰∏≠Â§ÑÁêÜËøôÁßçÈóÆÈ¢òÁöÑÊñπÊ≥ïÂ∞±ÊòØ MRO ÊñπÊ≥ïËß£ÊûêÈ°∫Â∫è C3 ÁÆóÊ≥ï„ÄÇÊóßÂºèÁ±ª MRO ÁöÑÊü•ÊâæÂè™ÈúÄË¶ÅËÆ∞‰Ωè‰∏Ä‰∏™ÂéüÂàôÔºöÂú®ÁªèÂÖ∏Á±ª‰∏≠ÈááÁöÑÊòØÊ∑±Â∫¶‰ºòÂÖàÈÅçÂéÜÊñπÊ°à„ÄÇÂç≥Ê≤ø‰∏ÄÊù°ÁªßÊâøË∑ØÂæÑÊêúÁ¥¢Âà∞Ê∫êÂ§¥ÔºåÊâæ‰∏çÂà∞ÊñπÊ≥ïÂÆö‰πâÂÜçÂõûÊù•ÁªßÁª≠Êâæ‰∏ã‰∏ÄÊù°ÁªßÊâøË∑ØÂæÑ„ÄÇ

Êñ∞ÂºèÁ±ªÁöÑ MRO ÊòØÈááÁî®ÂπøÂ∫¶‰ºòÂÖàÁöÑ C3 ÁÆóÊ≥ïÊù•ÂÆåÊàêÁöÑÔºåC3 ÊääÊàë‰ª¨Â§ö‰∏™Á±ªÊñπÊ≥ïÂÖ±ÂêåÁªßÊâøÁïôÂà∞ÊúÄÂêéÂéªÊâæ„ÄÇÂΩìÂâçÁ±ªÊàñËÄÖÁà∂Á±ªÁªßÊâø‰∫Ü object Âü∫Á±ªÔºåÈÇ£‰πàËØ•Á±ª‰æøÊòØ„ÄêÊñ∞ÂºèÁ±ª„ÄëÔºåÂê¶Âàô‰æøÊòØ„ÄêÁªèÂÖ∏Á±ª„Äë„ÄÇ 


Â≠êÁ±ªÁöÑ metaclass Á±ªÂøÖÈ°ªÁªßÊâøËá™Âü∫Á±ªÁöÑ metaclass Á±ªÔºåÂê¶ÂàôÔºö

    TypeError: metaclass conflict: the metaclass of a derived class must be a (non-strict) subclass of the metaclasses of all its bases



## ==‚ö° Metaclass & ORM
[‰ΩøÁî®ÂÖÉÁ±ª - ÂªñÈõ™Â≥∞ÁöÑÂÆòÊñπÁΩëÁ´ô](https://www.liaoxuefeng.com/wiki/1016959663602400/1017592449371072)

ÈÄöËøá metaclass ÂÆûÁé∞Âç≥ÂØπË±°-ÂÖ≥Á≥ªË°®Êò†Â∞Ñ ORM - Object Relational Mapping ÊòØ‰∏Ä‰∏™ÂÖ∏ÂûãÁöÑÂÆûÂàó„ÄÇORM ÁõÆÁöÑÂ∞±ÊòØÊääÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ìÁöÑ‰∏ÄË°åÊò†Â∞Ñ‰∏∫‰∏Ä‰∏™ÂØπË±°Ôºå‰πüÂ∞±ÊòØ‰∏Ä‰∏™Á±ªÂØπÂ∫î‰∏Ä‰∏™Ë°®ÔºåËøôÊ†∑ÂÜô‰ª£Á†ÅÊõ¥ÁÆÄÂçïÔºå‰∏çÁî®Áõ¥Êé•Êìç‰Ωú SQL ËØ≠Âè•„ÄÇ

Ë¶ÅÁºñÂÜô‰∏Ä‰∏™ ORM Ê°ÜÊû∂ÔºåÊâÄÊúâÁöÑÁ±ªÈÉΩÂè™ËÉΩÂä®ÊÄÅÂÆö‰πâÔºåÂõ†‰∏∫Âè™Êúâ‰ΩøÁî®ËÄÖÊâçËÉΩÂØπÊï∞ÊçÆË°®ÁöÑÁªìÊûÑ‰∏ãÂÆö‰πâÔºåÂç≥ÂøÖÈ°ªÁî±‰ΩøÁî®ËÄÖÂÆö‰πâ ORM ÁöÑÊ®°ÂûãÁ±ª„ÄÇËÄå ORM Ê°ÜÊû∂Âè™Ë¥üË¥£Â∞ÜÊ®°ÂûãÁ±ªÁöÑÊï∞ÊçÆÊûÑÈÄ†ÊàêÁõ∏Â∫îÁöÑ SQL ‰ª•Êõ¥Êñ∞Âà∞Êï∞ÊçÆÂ∫ì‰∏≠„ÄÇ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåORM ‰ºöÂÆö‰πâÂü∫Á°ÄÊ®°ÂûãÁ±ª ModelÔºåÂÆÉÊèê‰æõÂü∫Á°ÄÁöÑ save/select/add/delete Á≠âÈ≠îÊúØÊñπÊ≥ï‰æõ‰ΩøÁî®ËÄÖÁªßÊâø‰ΩøÁî®Ôºå‰ª•ÂÆåÊàêÁõ∏Â∫îÁöÑÊï∞ÊçÆÂ∫ìÊìç‰Ωú„ÄÇ

ÂÅáËÆæÁî®Êà∑ÊúüÊúõÊåâ‰ª•‰∏ãÁöÑÊñπÂºè‰ΩøÁî®Ëøô‰∏™ ORM Ê°ÜÊû∂Ôºö

```py
class User(Model):
    id = FieldInt('id')
    name = FieldVarchar('username')
    password = FieldVarchar('password')

u = User(id=12345, name='Demo', password='demopass')
u.save()
```

ÈÇ£‰πàÂÆûÁé∞Ëøô‰∏™ ORM ÂèØ‰ª•ÂàÜÊàêÂá†Ê≠•Ôºö

- ÂÖàÂÆö‰πâÂÖÉÁ±ªÔºåÂèäÂü∫Á°ÄÊ®°ÂûãÁ±ª ModelÔºåËøôÊ†∑Áî®Êà∑Âú®ÁªßÊâø Model Êó∂Â∞±Ëá™Âä®ÁªßÊâøÁöÑ metaclass ÁöÑÂäüËÉΩ„ÄÇ
- ÂÆö‰πâÂ≠óÊÆµÂä©ÊâãÁ±ªÔºåÂ¶Ç FieldInt/FieldVarcharÔºåÂú®ÂÖÉÁ±ª‰∏≠ËøõË°åÂä©ÊâãÁ±ªÊ£ÄÊµãÔºå‰ª•Á°ÆÂÆöÈÇ£‰∫õÂ±ûÊÄßÂèØ‰ª•ÂÜôÂÖ•Êï∞ÊçÆÂ∫ì„ÄÇ
- Ë°•ÂÖÖ metaclass ÁöÑÂäüËÉΩÔºåÂ¶Ç add/save/update/delete Á≠â„ÄÇ

```py
class ModelMeta(type):

    def __new__(cls, name, bases, attrs):
        if name == "Model":
            return type.__new__(cls, name, bases, attrs)
        print("User model found: %s" % (name))
        mappings = dict()
        for k, v in attrs.items():
            if isinstance(v, FieldUtil):
                print("Mapping field: %s -> %s" % (k, v))
                mappings[k] = v

        for k in mappings.keys():
            del attrs[k]

        attrs['__table__'] = name
        attrs['__mappings__'] = mappings
        return type.__new__(cls, name, bases, attrs)


class Model(dict, metaclass=ModelMeta):

    def __init__(self, **kw):
        super(Model, self).__init__(kw)

    # def __getitem__(self, key):  # for a = Model['key'] or getattr(...)
    #     return getattr(self, key, None)

    def __getattr__(self, key):  # for a = Model.key
        try:
            return self[key]
        except KeyError:
            print(AttributeError(r"Undefined attribute for Model.%s" % key))

    def __setattr__(self, key, value):
        self[key] = value

    def save(self):
        fields = []
        params = []
        for k, v in self.__mappings__.items():
            fields.append('`%s`' % (v.name))
            params.append(getattr(self, k, None))
        args = ','.join(["?" for i in range(len(params))])
        sql = 'insert into %s (%s) value(%s)' % (self.__table__, ",".join(fields), args)
        print("SQL: %s" % sql)
        print("PARAMS: %s" % params)

class FieldUtil(object):

    def __init__(self, name, type):
        self.name = name
        self.type = "undefined"

    def __str__(self):
        return '<%s "%s">' % (self.__class__.__name__, self.name)


class FieldInt(FieldUtil):

    def __init__(self, name):
        super(FieldInt, self).__init__(name, 'int(10)')


class FieldVarchar(FieldUtil):

    def __init__(self, name):
        super(FieldVarchar, self).__init__(name, 'varchar(64)')
```

ÁªìÂêàÂâçÈù¢ÁöÑÁî®Êà∑‰ª£Á†ÅÔºåÂèØ‰ª•ÂæóÂà∞ËæìÂá∫Ê≠£Á°ÆÁöÑ SQL ÂíåÂèÇÊï∞ÂàóË°®ÔºåÂêéÁª≠Âè™Ë¶ÅÈÄöËøáÊï∞ÊçÆÂ∫ìËøûÊé•ÊâßË°åÂêéÂ∞±ÂèØ‰ª•ÂÆåÊàêÊï∞ÊçÆ‰øùÂ≠òÔºö

    User model found: User
    Mapping field: id -> <FieldInt "id">
    Mapping field: name -> <FieldVarchar "username">
    Mapping field: password -> <FieldVarchar "password">
    SQL: insert into User (`id`,`username`,`password`) value(?,?,?)
    PARAMS: [1, 'Demo', 'demopass']

Ëøô‰∏™ÂæÆÁº©Áâà ORM ‰∏≠ÁöÑ Model ÁªßÊâø‰∫Ü dictÔºåÈÄöËøáÁ¥¢ÂºïËÆøÈóÆÂ±ûÊÄßÊó∂‰ºöËß¶Âèë `__getitem__` Êàñ `__setitem__`ÔºåÈÄöËøáÊàêÂëòËøêÁÆóÁ¨¶Âç≥ Model.id ËøôÊ†∑ËÆøÈóÆÊó∂‰ºöËß¶Âèë `__getattr__` Êàñ `__setattr__`„ÄÇ‰∏∫‰∫ÜÈÅøÂÖçÂæ™ÁéØÊ≠ªÈîÅÔºåmodel.id = 1 Ëøô‰∏™ËµãÂÄºÊìç‰ΩúÂ∞Ü‰ºöÈÄöËøá `__setattr__` ËÆæÁΩÆÂà∞Áà∂Á±ªÂç≥Â≠óÂÖ∏Á±ªÂûã‰∏ä„ÄÇÂêåÊ†∑ÔºåËØªÂèñÊï∞ÊçÆÊó∂Ôºå‰πüÁªèËøá‰∫ÜËøôÊ†∑ÁöÑËΩ¨Êç¢„ÄÇ



## ==‚ö° Metaclass & Mixin

Mixin Ê∑∑ÂÖ•Êó∂ÁªÑÂêàÂåñÁºñÁ®ãÁöÑÊñπÊ≥ïÔºå‰∏çÂêåËøáÁªßÊâøÂ∞±ÂèØ‰ª•ÁÅµÊ¥ªÂú∞Â∞ÜÂÖ∂ÂÆÉÂäüËÉΩÊï¥ÂêàÂà∞‰∏ÄËµ∑ÔºåÂ¶Ç‰ª•‰∏ãÂ∞Ü Ostrich ÁöÑËÉΩÂäõÈÄöËøá MetaMixin Êï¥ÂêàÂà∞‰∫Ü Bird Á±ªÂûã‰∏≠ÔºåÂÖ∂‰πãÁ±ª‰πüÂÖ∑ÊúâÂêåÁ≠âÁöÑËÉΩÂäõÔºö

```py
import inspect
import types

class Ostrich(object):

    # passby inspect.ismethod or else use inspect.isfunction
    # @classmethod
    def run(self):
        print('Ostrich running ...')


class MetaMixin(type):
    def __init__(cls, name, bases, dic):
        super(MetaMixin, cls).__init__(name, bases, dic)
        mixins = (Ostrich, )

        for mix in mixins:
            if not mix:
                continue

            for method, fun in inspect.getmembers(mix, inspect.ismethod):
                # assert not hasattr(cls, name), "name exist: %s" % name
                # setattr(cls, method, fun.im_func)
                setattr(cls, name, fun.__func__) # Python 3


class Bird(object, metaclass=MetaMixin):

    def fly(self):
        print('Bird flying ...')


class Eagle(Bird):
    def fly(self):
        print('Eagle flying')

if True or __name__ == '__main__':
    b = Eagle()
    b.fly()
    # Bird().run()
```

What's New in Python 3.0a2?

- Unbound methods are gone for good. ClassObject.method returns an
  ordinary function object, instance.method still returns a bound
  method object.  The API of bound methods is cleaned up, too. The
  im_class attribute is removed and im_func + im_self are renamed to
  __func__ and __self__. The factory PyMethod_New takes only func and
  instance as argument.



# =üö© Asyncio & Generator

## ==‚ö° Iterator & Generator

Python ‰∏≠‰ªªÊÑèÁöÑÂØπË±°ÔºåÂè™Ë¶ÅÂÆÉÂÆö‰πâ‰∫ÜÂèØ‰ª•ËøîÂõû‰∏Ä‰∏™Ëø≠‰ª£Âô®ÁöÑ`__iter__()`ÊñπÊ≥ïÔºåÊàñËÄÖÂÆö‰πâ‰∫ÜÂèØ‰ª•ÊîØÊåÅ‰∏ãÊ†áÁ¥¢ÂºïÁöÑ`__getitem__()`ÊñπÊ≥ïÔºåÈÇ£‰πàÂÆÉÂ∞±ÊòØ‰∏Ä‰∏™ÂèØËø≠‰ª£ÂØπË±°„ÄÇÁÆÄÂçïËØ¥ÔºåÂèØËø≠‰ª£ÂØπË±°Â∞±ÊòØËÉΩÊèê‰æõËø≠‰ª£Âô®ÁöÑÂØπË±°„ÄÇ

Python 2 ‰∏≠‰ªªÊÑèÂØπË±°ÔºåÂè™Ë¶ÅÂÆö‰πâ‰∫Ü `next()` ÂÆÉÂ∞±ÊòØ‰∏Ä‰∏™Ëø≠‰ª£Âô®„ÄÇPython 3 ÊòØ`__next__()`ÊñπÊ≥ï„ÄÇ

Ëø≠‰ª£ iteration Ë°å‰∏∫ÂèØ‰ª•ÁÆÄÂçïÁêÜËß£ÂÆÉÂ∞±ÊòØ‰ªéÊüê‰∏™Âú∞ÊñπÔºåÊØîÂ¶Ç‰ªé‰∏Ä‰∏™ÂàóË°®ÂèñÂá∫‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑËøáÁ®ã„ÄÇÂΩìÊàë‰ª¨‰ΩøÁî®‰∏Ä‰∏™Âæ™ÁéØÊù•ÈÅçÂéÜÊüê‰∏™‰∏úË•øÊó∂ÔºåËøô‰∏™ËøáÁ®ãÊú¨Ë∫´Â∞±Âè´Ëø≠‰ª£„ÄÇ

ÁîüÊàêÂô® Generator ‰πüÊòØ‰∏ÄÁßçËø≠‰ª£Âô®Ôºå‰ΩÜÊòØ‰Ω†Âè™ËÉΩÂØπÂÖ∂Ëø≠‰ª£‰∏ÄÊ¨°„ÄÇËøôÊòØÂõ†‰∏∫ÂÆÉ‰ª¨Âπ∂Ê≤°ÊúâÊääÊâÄÊúâÁöÑÂÄºÂ≠òÂú®ÂÜÖÂ≠ò‰∏≠ÔºåËÄåÊòØÂú®ËøêË°åÊó∂ÁîüÊàêÂÄº„ÄÇ‰Ω†ÈÄöËøáÈÅçÂéÜÊù•‰ΩøÁî®ÂÆÉ‰ª¨ÔºåË¶Å‰πàÁî®‰∏Ä‰∏™ for Âæ™ÁéØÔºåË¶Å‰πàÂ∞ÜÂÆÉ‰ª¨‰º†ÈÄíÁªô‰ªªÊÑèÂèØ‰ª•ËøõË°åËø≠‰ª£ÁöÑÂáΩÊï∞ÂíåÁªìÊûÑ„ÄÇÂ§ßÂ§öÊï∞Êó∂ÂÄôÁîüÊàêÂô®ÊòØ‰ª•ÂáΩÊï∞Êù•ÂÆûÁé∞ÁöÑ„ÄÇÁÑ∂ËÄåÔºåÂÆÉ‰ª¨Âπ∂‰∏çËøîÂõû‰∏Ä‰∏™ÂÄºÔºåËÄåÊòØ yield ‰∫ßÁîü‰∏Ä‰∏™ÂÄº„ÄÇ

ÁîüÊàêÂô®ÂáΩÊï∞ÁöÑÁÆÄÂçï‰æãÂ≠êÔºö

    def generator_function():
        for i in range(10):
            yield i
    
    for item in generator_function():
        print(item)

ÁîüÊàêÂô®ÊúÄ‰Ω≥Â∫îÁî®Âú∫ÊôØÊòØÔºöÈÅøÂÖçÊ∂àËÄóÂ§ßÈáèÂÜÖÂ≠òÔºå‰∏çË¶ÅÂêå‰∏ÄÊó∂Èó¥Â∞ÜÊâÄÊúâËÆ°ÁÆóÂá∫Êù•ÁöÑÂ§ßÈáèÁªìÊûúÈõÜÂàÜÈÖçÂà∞ÂÜÖÂ≠òÂΩì‰∏≠ÔºåÁâπÂà´ÊòØÁªìÊûúÈõÜÈáåËøòÂåÖÂê´Âæ™ÁéØ„ÄÇ

ËÆ∏Â§ö Python 2 ÈáåÁöÑÊ†áÂáÜÂ∫ìÂáΩÊï∞ÈÉΩ‰ºöËøîÂõûÂàóË°®ÔºåËÄå Python 3 Â∫îÁî®‰∫ÜÊõ¥Â§öÁöÑÁîüÊàêÂô®ÔºåÂõ†‰∏∫ÁîüÊàêÂô®Âç†Áî®Êõ¥Â∞ëÁöÑËµÑÊ∫ê„ÄÇ

‰∏ãÈù¢ÊòØ‰∏Ä‰∏™ËÆ°ÁÆó Fibonacci ÊñêÊ≥¢ÈÇ£Â•ëÊï∞ÂàóÁöÑÁîüÊàêÂô®Ôºö

    # generator version
    def fibon(n):
        a = b = 1
        for i in range(n):
            yield a
            a, b = b, a + b

    for x in fibon(1000000):
        print(x)

Áî®ËøôÁßçÊñπÂºèÔºåÊàë‰ª¨ÂèØ‰ª•‰∏çÁî®ÊãÖÂøÉÂÆÉ‰ºö‰ΩøÁî®Â§ßÈáèËµÑÊ∫ê„ÄÇÁÑ∂ËÄåÔºå‰πãÂâçÂ¶ÇÊûúÊàë‰ª¨ËøôÊ†∑Êù•ÂÆûÁé∞ÁöÑËØùÔºö

    def fibon(n):
        a = b = 1
        result = []
        for i in range(n):
            result.append(a)
            a, b = b, a + b
        return result

Ëøô‰πüËÆ∏‰ºöÂú®ËÆ°ÁÆóÂæàÂ§ßÁöÑËæìÂÖ•ÂèÇÊï∞Êó∂ÔºåÁî®Â∞ΩÊâÄÊúâÁöÑËµÑÊ∫ê„ÄÇÊàë‰ª¨Â∑≤ÁªèËÆ®ËÆ∫ËøáÁîüÊàêÂô®‰ΩøÁî®‰∏ÄÊ¨°Ëø≠‰ª£Ôºå‰ΩÜÊàë‰ª¨Âπ∂Ê≤°ÊúâÊµãËØïËøá„ÄÇÂú®ÊµãËØïÂâç‰Ω†ÈúÄË¶ÅÂÜçÁü•ÈÅì‰∏Ä‰∏™ Python ÂÜÖÁΩÆÂáΩÊï∞ next()ÔºåÂÆÉÂÖÅËÆ∏Êàë‰ª¨Ëé∑Âèñ‰∏Ä‰∏™Â∫èÂàóÁöÑ‰∏ã‰∏Ä‰∏™ÂÖÉÁ¥†„ÄÇÈÇ£Êàë‰ª¨Êù•È™åËØÅ‰∏ãÊàë‰ª¨ÁöÑÁêÜËß£Ôºö

    def generator_function():
        for i in range(3):
            yield i
    
    gen = generator_function()
    print(next(gen))
    print(next(gen))
    print(next(gen))
    print(next(gen)) # StopIteration

Êàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ÔºåÂú® yield ÊéâÊâÄÊúâÁöÑÂÄºÂêéÔºånext() Ëß¶Âèë‰∫Ü‰∏Ä‰∏™ StopIteration ÁöÑÂºÇÂ∏∏„ÄÇÂü∫Êú¨‰∏äËøô‰∏™ÂºÇÂ∏∏ÂëäËØâÊàë‰ª¨ÔºåÊâÄÊúâÁöÑÂÄºÈÉΩÂ∑≤ÁªèËø≠‰ª£ÂÆå‰∫Ü„ÄÇfor Âæ™ÁéØ‰ºöËá™Âä®ÊçïÊçâÂà∞Ëøô‰∏™ÂºÇÂ∏∏Âπ∂ÂÅúÊ≠¢Ë∞ÉÁî® next() Âõ†Ê≠§‰∏ç‰ºö‰∫ßÁîü StopIteration„ÄÇPython ‰∏≠‰∏Ä‰∫õÂÜÖÁΩÆÊï∞ÊçÆÁ±ªÂûã‰πüÊîØÊåÅËø≠‰ª£Ôºö

    my_string = "Yasoob"
    my_iter = iter(my_string)
    next(my_iter)
    # Output: 'Y'

Â≠óÁ¨¶‰∏≤ÂÆÉÊòØ‰∏Ä‰∏™ÂèØËø≠‰ª£ÂØπË±°ÔºåËÄå‰∏çÊòØ‰∏Ä‰∏™Ëø≠‰ª£Âô®„ÄÇËøôÊÑèÂë≥ÁùÄÂÆÉÊîØÊåÅËø≠‰ª£Ôºå‰ΩÜÊàë‰ª¨‰∏çËÉΩÁõ¥Êé•ÂØπÂÖ∂ËøõË°åËø≠‰ª£Êìç‰Ωú„ÄÇÂèØ‰ª•‰ΩøÁî®ÂÜÖÁΩÆÂáΩÊï∞ iter Â∞ÜÂèØËø≠‰ª£ÂØπË±°ÂåÖË£ÖÊàê‰∏Ä‰∏™Ëø≠‰ª£Âô®„ÄÇ‰∏çËÉΩÁõ¥Êé•ÊääÂèØËø≠‰ª£ÂØπË±°ÂΩìËø≠‰ª£Âô®‰ΩøÁî®ÔºåÂèØ‰ª•‰ΩøÁî® for Êù•Ëø≠‰ª£ÂèØËø≠‰ª£ÂØπË±°Ôºö

    s = "ABC"
    # next(s) TypeError: str object is not an iterator
    for i in s:
        print(i) 


## ==‚ö° Generator expressions ÁîüÊàêÂô®Ë°®ËææÂºè

ÁîüÊàêÂô®Ë°®ËææÂºè Generator expressions ÊòØÂàóË°®Êé®ÂØºÂºèÂíåÁîüÊàêÂô®ÁöÑÈ´òÊÄßËÉΩÔºåÈ´òÂÜÖÂ≠ò‰ΩøÁî®ÊïàÁéáÁöÑÊé®Âπø„ÄÇ

‰æãÂ¶ÇÔºöÂØπ 1 ~ 9 ÊâÄÊúâÊï∞Â≠óËøõË°åÂπ≥ÊñπÊ±ÇÂíåÔºåÂ∏∏ËßÑËøáÁ®ãÊòØÈ¶ñÂÖàÂú®ÂÜÖÂ≠ò‰∏≠ÂàõÂª∫Âπ≥ÊñπÊï∞ÂàóÂÄºÂàóË°®ÔºåÁÑ∂ÂêéÈÅçÂéÜÂàóË°®ÔºåÊ±ÇÂíåÂêéÈáäÊîæÂÜÖÂ≠ò„ÄÇ

ÂØπ‰∫éÂ§ßÈáèÁöÑËøêÁÆóÈúÄË¶Å‰∏ãÔºå‰º†ÁªüËøôÁßçÊ±ÇÂíåÊñπÂºèÁöÑÂ§ßÂàóË°®‰ºöÂç†Áî®ÊØîËæÉÂ§öÁöÑÂÜÖÂ≠òÁ©∫Èó¥Ôºö

>>> sum([x * x for x in range(1, 10)])
>>> sum( x * x for x in range(1, 10) )

ÈÄöËøáÁîüÊàêÂô®Ë°®ËææÂºèÂ∞±ÂèØ‰ª•ËäÇÁúÅÂÜÖÂ≠ò‰ΩøÁî®ÔºåÊØîËæÉ‰∏§ËÄÖÁöÑÂÜÖÂ≠òÂç†Áî®Ôºö

>>> L = [x * x for x in range(1, 10)]
>>> L
[1,4,9,16,25,36,49,64,81]
>>> G = (x * x for x in range(1, 10))
>>> G
<generator object <genexgr> at 0x7f43bee46a98>
>>> next(G)
1
>>> next(G)
4
>>> next(G)
9
>>> next(G)
16
>>> any(G)
True
>>> max(G)
64
>>> min(G)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: min() arg is an empty sequence
>>> all(G)
True
>>> any(G)
False

ÁîüÊàêÂô®ÂàõÂª∫ËØ≠Ê≥ïÁ±ª‰ººÂàóË°®Êé®ÂØºÂºèÔºåÂàóË°®Êé®ÂØºÂºèÊòØ [ ] ËÄåÁîüÊàêÂô®ÊòØ ( )

ÁªºÂêàÊµãËØïÔºö‰ª•‰∏ãËæìÂá∫ ['xyz']ÔºåÁî±‰∫éÁîüÊàêÂô®ÊÉ∞ÊÄßÊ±ÇÂÄºÔºå‰ºöÂú®‰ΩøÁî®Êó∂ÊâßË°åÊ±ÇÂÄºÔºåËÄå if Êù°‰ª∂Âç¥Âú®ÂÆö‰πâÁîüÊàêÂô®ÁªëÂÆö‰∫ÜÁ¨¨‰∏Ä‰∏™ item ÂàóË°®„ÄÇ

```py
from dis import dis

def test():
    item = ["abc", "xyz"]
    test = (n for n in item if n in item)
    item = ['xyz', '123']
    print([n for n in test])

test()
# dis(test)
```


## ==‚ö° Coroutine & Generator
- [A Curious Course on Coroutines and Concurrency](http://www.dabeaz.com/coroutines/Coroutines.pdf)
- [ÂªñÈõ™Â≥∞ÁöÑPythonÊïôÁ®ã - ÂçèÁ®ã](https://www.liaoxuefeng.com/wiki/1016959663602400/1017968846697824)
- [ÁéãÂû† - Â¶Ç‰ΩïÊéåÊè°ÊâÄÊúâÁöÑÁ®ãÂ∫èËØ≠Ë®Ä](http://www.yinwang.org/blog-cn/2017/07/06/master-pl)
- https://stackoverflow.com/questions/49005651/how-does-asyncio-actually-work/51116910#51116910

Coroutine ÂçèÁ®ãÂèàÁß∞ÂæÆÁ∫øÁ®ãÔºåÂçèÁ®ãÁöÑÂú®ÊâßË°åÂáΩÊï∞ A Êó∂ÔºåÂèØ‰ª•ÈöèÊó∂‰∏≠Êñ≠ÂéªÊâßË°åÂáΩÊï∞ BÔºåÁÑ∂Âêé‰∏≠Êñ≠ÁªßÁª≠ÊâßË°åÂáΩÊï∞ AÔºåÂèØ‰ª•Ëá™Áî±ÂàáÊç¢„ÄÇ‰ΩÜËøô‰∏ÄËøáÁ®ãÂπ∂‰∏çÊòØÂáΩÊï∞Ë∞ÉÁî®ÔºåÊ≤°ÊúâË∞ÉÁî®ËØ≠Âè•ÔºåËøô‰∏ÄÊï¥‰∏™ËøáÁ®ãÁúã‰ººÂÉèÂ§öÁ∫øÁ®ãÔºåÁÑ∂ËÄåÂçèÁ®ãÂè™Êúâ‰∏Ä‰∏™Á∫øÁ®ãÊâßË°å„ÄÇÂçèÁ®ãÁî±‰∫éÁî±Á®ãÂ∫è‰∏ªÂä®ÊéßÂà∂ÂàáÊç¢ÔºåÊ≤°ÊúâÁ∫øÁ®ãÂàáÊç¢ÁöÑÂºÄÈîÄÔºåÊâÄ‰ª•ÊâßË°åÊïàÁéáÊûÅÈ´ò„ÄÇÂØπ‰∫é IO ÂØÜÈõÜÂûã‰ªªÂä°ÈùûÂ∏∏ÈÄÇÁî®ÔºåÂ¶ÇÊûúÊòØ CPU ÂØÜÈõÜÂûãÔºåÊé®ËçêÂ§öËøõÁ®ã+ÂçèÁ®ãÁöÑÊñπÂºè„ÄÇ

ÂçèÁ®ãÁöÑÊú¨Ë¥®ÊòØ‰∏™ÂçïÁ∫øÁ®ãÂ§ö‰ªªÂä°ÔºåÂÆÉ‰∏çËÉΩÂêåÊó∂Âà©Áî®Â§ö‰∏™ CPUÔºåÂõ†‰∏∫Á∫øÁ®ãÊó†Ê≥ïÂàÜÂâ≤Âà∞‰∏çÂêåÁöÑ CPU ÊàñÂ§öÂÜÖÊ†∏‰∏äËøêË°åÔºåÂçèÁ®ãÈúÄË¶ÅÂíåËøõÁ®ãÈÖçÂêàÊâçËÉΩËøêË°åÂú®Â§ö CPU ‰∏äËøêË°å„ÄÇÂçèÁ®ã‰ºöÂØπÂÖ∂ÊâÄÂú®ËøõË°åÈòªÂ°û Blocking Êìç‰ΩúÔºåÂ¶Ç IO Êó∂‰ºöÈòªÂ°ûÊéâÊï¥‰∏™Á®ãÂ∫è„ÄÇÂ¶ÇÊûúÊòØÂ§öÁ∫øÁ®ãÊàñÂ§öËøõÁ®ãÔºåIO ÈòªÂ°ûÂè™ÂØπÂΩìÂâçÊâßË°åÁöÑÁ∫øÁ®ãËµ∑‰ΩúÁî®„ÄÇ

Coroutine ‰ºòÁÇπÔºö

- Êó†ÈúÄÁ∫øÁ®ã‰∏ä‰∏ãÊñáÂàáÊç¢ÁöÑÂºÄÈîÄ
- Êó†ÈúÄÂéüÂ≠êÊìç‰ΩúÈîÅÂÆöÂèäÂêåÊ≠•ÁöÑÂºÄÈîÄ
- Êñπ‰æøÂàáÊç¢ÊéßÂà∂ÊµÅÔºåÁÆÄÂåñÁºñÁ®ãÊ®°Âûã
- È´òÂπ∂Âèë+È´òÊâ©Â±ïÊÄß+‰ΩéÊàêÊú¨Ôºö‰∏Ä‰∏™CPUÊîØÊåÅ‰∏ä‰∏áÁöÑÂçèÁ®ãÈÉΩ‰∏çÊòØÈóÆÈ¢òÔºåÂæàÈÄÇÂêàÁî®‰∫éÈ´òÂπ∂ÂèëÂ§ÑÁêÜ„ÄÇ

ÊâÄË∞ìÂéüÂ≠êÊìç‰ΩúÊòØÊåá‰∏ç‰ºöË¢´Á∫øÁ®ãË∞ÉÂ∫¶Êú∫Âà∂ÊâìÊñ≠ÁöÑÊìç‰ΩúÔºåÂç≥ËÆ°ÁÆóÊú∫Á≥ªÁªü‰∏≠ÊúÄÂ∞èÂçï‰ΩçÁöÑÊìç‰ΩúË°å‰∏∫ÔºåËøôÁßçÊìç‰Ωú‰∏ÄÊó¶ÂºÄÂßãÔºåÂ∞±‰∏ÄÁõ¥ËøêË°åÂà∞ÁªìÊùüÔºå‰∏≠Èó¥‰∏ç‰ºöÊúâ‰ªª‰Ωï context switch Á∫øÁ®ãÂàáÊç¢Ê∂àËÄó„ÄÇÂéüÂ≠êÊìç‰ΩúÂèØ‰ª•ÊòØ‰∏Ä‰∏™Ê≠•È™§Ôºå‰πüÂèØ‰ª•ÊòØÂ§ö‰∏™Êìç‰ΩúÊ≠•È™§Ôºå‰ΩÜÊòØÂÖ∂È°∫Â∫èÊòØ‰∏çÂèØ‰ª•Ë¢´Êâì‰π±ÔºåÊàñËÄÖÂàáÂâ≤ÊéâÂè™ÊâßË°åÈÉ®ÂàÜÔºåËßÜ‰ΩúÊï¥‰ΩìÊòØÂéüÂ≠êÊÄßÁöÑÊ†∏ÂøÉ„ÄÇ


Áî±‰∫é GIL ÁöÑÂ≠òÂú®ÔºåÂØºËá¥ Python Â§öÁ∫øÁ®ãÊÄßËÉΩÁîöËá≥ÊØîÂçïÁ∫øÁ®ãÊõ¥Á≥ü„ÄÇ

GIL - Global Interpreter Lock ÂÖ®Â±ÄËß£ÈáäÂô®ÈîÅÊòØËÆ°ÁÆóÊú∫Á®ãÂ∫èËÆæËÆ°ËØ≠Ë®ÄËß£ÈáäÂô®Áî®‰∫éÂêåÊ≠•Á∫øÁ®ãÁöÑ‰∏ÄÁßçÊú∫Âà∂ÔºåÂÆÉ‰ΩøÂæó‰ªª‰ΩïÊó∂Âàª‰ªÖÊúâ‰∏Ä‰∏™Á∫øÁ®ãÂú®ÊâßË°å„ÄÇÂç≥‰æøÂú®Â§öÊ†∏ÂøÉÂ§ÑÁêÜÂô®‰∏äÔºå‰ΩøÁî® GIL ÁöÑËß£ÈáäÂô®‰πüÂè™ÂÖÅËÆ∏Âêå‰∏ÄÊó∂Èó¥ÊâßË°å‰∏Ä‰∏™Á∫øÁ®ã„ÄÇ

coroutine ÂèØ‰ª•Â§Ñ‰∫é 4 ÁßçÁä∂ÊÄÅÔºåÈÄöËøá inspect.getgeneratorstate() ÂáΩÊï∞Êù•Á°ÆÂÆöÁä∂ÊÄÅÔºö

1.GEN_CREATED  Á≠âÂæÖÂºÄÂßã
2.GEN_RUNNING  Ë¢´Ëß£ÈáäÂô®ÊâßË°å
3.GEN_SUSPENED  Âú®yieldË°®ËææÂºèÂ§ÑÊåÇËµ∑
4.GEN_CLOSED  ÊâßË°åÁªìÊùü

Python 3.4 ‰πãÂâçÔºåÂÆòÊñπÊ≤°ÊúâÂØπÂçèÁ®ãÁöÑÊîØÊåÅÔºåÂ≠òÂú®‰∏Ä‰∫õ‰∏âÊñπÂ∫ìÁöÑÂÆûÁé∞ÔºåÊØîÂ¶Ç geventÔºågreenlet Âíå Tornado„ÄÇ‰πãÂêéÂ∞±ÂÜÖÁΩÆ‰∫Ü asyncio Ê†áÂáÜÂ∫ìÔºåÂÆòÊñπÁúüÊ≠£ÂÆûÁé∞‰∫ÜÂçèÁ®ãËøô‰∏ÄÁâπÊÄß„ÄÇËÄå Python ÂØπÂçèÁ®ãÁöÑÊîØÊåÅÔºåÊòØÈÄöËøá Generator ÂÆûÁé∞ÁöÑÔºåÂçèÁ®ãÊòØÈÅµÂæ™Êüê‰∫õËßÑÂàôÁöÑÁîüÊàêÂô®„ÄÇ


ÂÖàÊù•Áúã‰∏Ä‰∏™Ê≤°ÊúâÁî®ÁöÑ DemoÔºå Â•ΩÂØπÂºÇÊ≠•‰øÆÈ•∞ÂÖ≥ÈîÆÂ≠ó async Ê∂âÂèäÁöÑÂêÑÁßçÂØπË±°Êúâ‰∏™Ê¶ÇÂøµÔºö

    # def a generator
    def grep(pattern):
        print("grep for %s" % pattern)
        while True:
            line = (yield)
            # coroutine code below...
            if pattern in line:
                print(line)

    gene = grep("miss")
    print(type(grep))       # <class 'function'>
    print(type(gene))       # <class 'generator'>


    async def get_coro():
        print('get_coro ...')

    coro = get_coro()
    print(type(get_coro))   # <class 'function'>
    print(type(coro))       # <class 'coroutine'>

    try:
        coro.send(None)     # execute coroutine's function body
    except StopIteration as e:
        print("StopIteration: %s" % e.value)  # None


ÂèØ‰ª•ÁúãÂà∞ get_coro() ÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÂØπË±°ÔºåËøôÊòØÊ≤°ÈóÆÈ¢òÔºå‰ΩÜÊòØÂÆÉÊ≤°ÊúâÂÆö‰πâËøîÂõûÂÄºÔºåÂç¥ÂèØ‰ª•ÈÄöËøáË∞ÉÁî®ÂæóÂà∞‰∏Ä‰∏™ coroutine ÂçèÁ®ãÂØπË±°ÔºÅÂÖ≥ÈîÆÂ∞±Âú®‰∫é async ÂÖ≥ÈîÆÂ≠óÔºåÂÆÉ‰øÆÈ•∞ÁöÑÂáΩÊï∞‰∏éÊôÆÈÄöÂáΩÊï∞ÁöÑÂ∑ÆÂà´Âú®‰∫éÔºåË∞ÉÁî®ÂçèÁ®ãÂáΩÊï∞ get_coro() ÁöÑÊó∂ÂÄôÔºåÂπ∂‰∏çÊòØÊâßË°åÂáΩÊï∞‰Ωì‰∏≠ÁöÑËØ≠Âè•ÔºåËÄåÊòØÁîüÊàê‰∏Ä‰∏™ÂçèÁ®ãÂØπË±° coroutineÔºÅËøô‰∏™Ê¶ÇÂøµÂæàÈáçË¶ÅÔºåË∑üÁîüÊàêÂô®ÂáΩÊï∞ÊâßË°åÊó∂ËøîÂõûÁîüÊàêÂô®ÁöÑÂØπË±° generator Á±ª‰ººÔºåÂçèÁ®ãÂØπË±°‰πüÊúâ send() ÊñπÊ≥ï„ÄÇ

ÂΩìÂçèÁ®ãÁöÑ send(None) Êó∂ÔºåÊâç‰ºöÊâßË°åÂçèÁ®ãÂáΩÊï∞‰∏≠ÁöÑËØ≠Âè•Ôºå‰πüÂ∞±ÊòØÂÖ≥ÈîÆÂ≠ó async ÊàñËÄÖ yield ÁöÑÂá∫Áé∞ÊîπÂèò‰∫ÜÂáΩÊï∞ÂéüÊù•Ê≠£ÁªèÁöÑÊÑè‰πâÂÆö‰πâÔºåËøô‰∫õÂÖ≥ÈîÆÂ≠óÁöÑÂºïÁî®Â∞ÜÂéüÊú¨ÁöÑÂáΩÊï∞ÂÆö‰πâÂèòÊàê‰∫Ü‰∏ÄÁßçÂØπË±°ÁöÑÂ∞ÅË£ÖÔºåÂπ∂ÊääÂáΩÊï∞‰ΩìÂ∞ÅË£ÖÂà∞ÁâπÂÆöÂØπË±°ÂÜÖÈÉ®„ÄÇÂ∞±ÂçèÁ®ãÂáΩÊï∞ËÄåË®ÄÔºåÂ∞ÅË£ÖÁöÑÁªìÊûúÂ∞±ÊòØÂçèÁ®ãÂØπË±°ÔºåÈÄöËøáË∞ÉÁî®ÂçèÁ®ãÂØπË±°ÊñπÊ≥ï send() ÂêØÂä®ÊâßË°åÂçèÁ®ãÂ∞ÅË£ÖÁöÑÂáΩÊï∞‰Ωì‰ª£Á†ÅÔºåËøôÈáåÂè™ÊòØÊâìÂç∞‰∫Ü‰∏ÄÊù°Â≠óÁ¨¶‰∏≤‰ø°ÊÅØ„ÄÇ

ÂçèÁ®ãÂØπË±°‰πüÊòØ‰∏Ä‰∏™ Awaitable ÂèØÁ≠âÂæÖÂØπË±°ÔºåÂÆÉÂèØ‰ª•Âíå await Ë°®ËææÂºè‰ΩøÁî®ÔºåÂèØÁ≠âÂæÖÂØπË±°‰∏ÄËà¨ÂÆûÁé∞‰∫Ü `__await__()` È≠îÊúØÊñπÊ≥ïÔºåÂçèÁ®ãÁöÑÊâßË°åÊµÅÁ®ãÂèØ‰ª•ÈÄöËøáË∞ÉÁî®Ëøô‰∏™È≠îÊúØÊñπÊ≥ïÔºåÈÄíÂΩíÁªìÊûúÊù•ÂÆûÁé∞ÊéßÂà∂ÔºåÂΩìÂçèÁ®ãÂáΩÊï∞ÊâßË°åÂÆåÊØïÊó∂ÈÄíÂΩíÂô®Â∞±‰ºöÊäõÂá∫ StopIteration ÂºÇÂ∏∏ÔºåËøô‰∏™ÂºÇÂ∏∏ÂØπË±°ÁöÑ value Â±ûÊÄß‰∏≠‰øùÂ≠òÁùÄÂçèÁ®ãÁöÑËøîÂõûÂÄºÔºåÂõ†‰∏∫ÂçèÁ®ãÁöÑÂáΩÊï∞‰ΩìÊ≤°Êúâ return ËØ≠Âè•ÔºåÂÖ∂ÂÆûÈªòËÆ§ËøîÂõû None„ÄÇ
 
    coroutine.send(value)
    coroutine.throw(type[, value[, traceback]])
    coroutine.close()

Ê≥®ÊÑèÔºöÈÄöËøáÁîüÊàêÂô®Ë£ÖÈ•∞Âô® `@types.coroutine` Âíå `@asyncio.coroutine` Â∞ÅË£ÖÂæóÂà∞ÁöÑÁîüÊàêÂô®ÈÄíÂΩíÂô® generator iterator ËôΩÁÑ∂ÊòØ Awaitable ÂØπË±°Ôºå‰ΩÜÊòØÂπ∂Ê≤°ÊúâÂÆûÁé∞ `__await__()` ÊñπÊ≥ï„ÄÇ

ÂÖ≥ÈîÆÂ≠ó await Ë°®ËææÂºèÔºåÈÄöÂ∏∏ÂíåÂçèÁ®ãÂáΩÊï∞‰∏ÄËµ∑Âá∫Áé∞Ôºåawait ÂêéÈù¢ÂøÖÈ°ªÊòØ‰∏Ä‰∏™ Awaitable ÂØπË±°ÔºåÂ¶ÇÂçèÁ®ã Coroutine ËøòÊúâÂêéÈù¢Ë¶ÅÊé•Ëß¶Âà∞ÁöÑ Generator„ÄÅFuture„ÄÅTask Á≠â„ÄÇawait ÂÖ≥ÈîÆÂ≠óÁöÑËØ≠‰πâÊòØÂΩìÂâçÊâßË°åÊµÅÁ®ãËøõÂÖ•Á≠âÂæÖÁä∂ÊÄÅÔºåÂç≥ÊåÇËµ∑ suspendedÔºåËøõÂÖ•Âà∞ await Ë°®ËææÂºè‰∏≠ÁöÑ Awaitable ÂØπË±°ÂÜÖÂºÄÂßãÊâßË°å„ÄÇÊâßË°åÂÆåÊØïÂêéÔºåÊâßË°åÊµÅÁ®ãÊâçÂèàÂõûÂà∞ÊåÇËµ∑ÁöÑÂú∞ÊñπÁªßÁª≠ÊâßË°åÔºåÁõ¥Âà∞ÊúÄÂêéÊâßË°åÂÆåÊØïÊäõÂá∫ StopIteration ÂºÇÂ∏∏„ÄÇ


ÂºÇÊ≠•ÈÄíÂΩíÂô® Asynchronous Iterators ÈúÄË¶ÅÂÆûÁé∞ `__aiter__`„ÄÅ `__anext__` È≠îÊúØÊñπÊ≥ïÔºö

    object.__aiter__(self) ËøîÂõû‰∏Ä‰∏™ÂºÇÊ≠•ÈÄíÂΩíÂô®ÂØπË±°
    object.__anext__(self) Âú® next ÈÄíÂΩíÊó∂ËøîÂõû awaitable ÂØπÂÉè


ÂºÇÊ≠•‰∏ä‰∏ãÊñáÁÆ°ÁêÜÂô® Asynchronous Context Managers ÂèØ‰ª•ÈÄöËøá `__aenter__` Âíå `__aexit__` ÊñπÊ≥ïÂ∞ÜÊéßÂà∂ÊµÅÁ®ãÊåÇËµ∑Ôºå‰∏é async with ‰∏ÄËµ∑‰ΩøÁî®„ÄÇËØ≠‰πâ‰∏äÁ±ª‰ºº `__enter__()` „ÄÅ `__exit__()`Ôºå‰ΩÜÂÆÉ‰ª¨ËøîÂõû awaitable ÂØπË±°„ÄÇ

    object.__aenter__(self)
    object.__aexit__(self, exc_type, exc_value, traceback) 



Áé∞Âú®Â∞Ü yield Âíå await ÁªìÂêà‰∏ÄËµ∑ÁúãÁúãÔºö

    import asyncio, types


    # @types.coroutine
    @asyncio.coroutine
    def printer():
        print('printer enter')
        res = yield
        print('printer got %s' % res)
        print('printer exit')
        return 'from printer'

    async def get_coro():
        print('get_coro enter')
        res = await printer()
        print("res = %s" % res)
        print('get_coro exit')
        return 'from get_coro'

    coro = get_coro()

    try:
        coro.send(None)
        print("blocking in yield ...")
        coro.send("ABC")
        coro.send("XYZ")
    except StopIteration as e:
        print("StopIteration: %s" % e.value)  # None

ËøôÈáåË∞ÉÁî®‰∫Ü‰∏âÊ¨° send() ÊñπÊ≥ïÔºåÁ¨¨‰∏ÄÊ¨°ÂºèÂêØÂä®ÊâßË°åÂçèÁ®ãÂáΩÊï∞ get_coro ÂÜÖÈÉ®ÁöÑ‰ª£Á†ÅÔºåÁÑ∂ÂêéËøõÂÖ• pointer() ÂáΩÊï∞‰ΩìÈÅáÂà∞ yield ÈòªÂ°û‰∫Ü„ÄÇÁ¨¨‰∫åÊ¨° send() ÂèëÈÄÅ‰∫ÜÂ≠óÁ¨¶‰∏≤ËøáÊù•Ôºåyield ‰ªé pipeline ËØªÂèñÂà∞Êï∞ÊçÆËøîÂõûÁªô resÔºåÁÑ∂ÂêéÊâìÂç∞Â§ÑÁêÜÂêéÂÜçËøîÂõûÂà∞ÊåÇËµ∑ÁöÑÂçèÁ®ãÂáΩÊï∞‰∏≠ÁªßÁª≠ÊâßË°å„ÄÇÁ¨¨‰∏âÊ¨° send() Â∞±Ê≤°ÊúâÊù•ÂæóÂèäÊâßË°åÂ∞±Ë¢´Êù•Ëá™ get_coro() ÂçèÁ®ãÁöÑ StopIteration ÂºÇÂ∏∏ÁªàÊ≠¢‰∫ÜÔºåÂõ†‰∏∫ÂçèÁ®ãÂ∑≤ÁªèÂÆåÂÖ®ÊâßË°åÂÆåÊØï„ÄÇËøôÈáåÂºïÁî®‰∫ÜË£ÖÈ•∞Âô® @asyncio.coroutine Âè™ÊòØ‰∏∫‰∫ÜÂ∞ÜÂáΩÊï∞ printer ÂåÖË£ÖÊàê Awaitable ÂØπË±°ÔºåÊñπ‰æø‰∏é await Ë°®ËææÂºè‰∏ÄËµ∑‰ΩøÁî®„ÄÇ

    get_coro enter
    printer enter
    blocking in yield ...
    printer got ABC
    printer exit
    res = from printer
    get_coro exit
    StopIteration: from get_coro

ÂÖ≥‰∫é yield ‰∏ÄËà¨Âíå generator ÈÖçÂêà‰ΩøÁî®ÔºåÂèÇËÄÉÂêéÈù¢ÁöÑÂ∞èËäÇ„ÄÇ



## ==‚ö° @asyncio.Coroutine ÂçèÁ®ãË£ÖÈ•∞Âô®

Python 3.4 ÂºÄÂßãÊñ∞Â¢û asyncio Áõ∏ÂÖ≥ÁöÑAPIÔºåËØ≠Ê≥ï‰ΩøÁî® @asyncio.coroutine Âíå yield from ÂÆûÁé∞ÂçèÁ®ã„ÄÇ

- PEP 342 ËøòÂä†ÂÖ•‰∫Ü throw Âíå closeÔºåÂÖÅËÆ∏ caller ÊäõÂá∫ÂºÇÂ∏∏ÔºåËØ•ÂºÇÂ∏∏Âú® generator ÈáåÈù¢Â§ÑÁêÜÔºå‰πüÂèØ‰ª•ÁªìÊùü generator„ÄÇ
- PEP 380 ËÆ© coroutine ÊîØÊåÅ return Âíå yield from„ÄÇ 
- PEP 492 Python 3.5 ‰∏≠ÂºïÂÖ• async/await ËØ≠Ê≥ïÁ≥ñÔºåÁõ¥Êé•‰ΩøÁî® async def Êù•ÂÆö‰πâÂçèÁ®ãÂáΩÊï∞Ôºåawait ÊõøÊç¢ yield fromÔºåÁÆÄÂåñ‰∫Ü coroutine ‰ª£Á†Å„ÄÇ

Âú® @asyncio.coroutine ÁöÑÊ∫êÁ†Å‰∏≠ Lib/asyncio/corouine.py Â∞±ÊòØÂú®ÂÅöÂ∞ÅË£ÖÔºåÈÄöËøá isgeneratorfunction(func) Âà§Êñ≠Ë¢´Â∞ÅË£ÖÁöÑÂáΩÊï∞ÊòØÂê¶ÊòØ generatorÔºåÂ¶ÇÊûú‰∏çÊòØÂ∞±‰ΩøÁî® yield from Â∞ÅË£Ö„ÄÇÂÜç‰ΩøÁî® types.coroutine() Â∞Ü generator ËΩ¨Êç¢‰∏∫ÂçèÁ®ãÂáΩÊï∞ÔºåÂπ∂ËÆæÁΩÆ `_is_coroutine` Â±ûÊÄßÔºåiscoroutinefunction() ÊñπÊ≥ïÂ∞±ÊòØËøîÂõûËøô‰∏™Â±ûÊÄß„ÄÇË∞ÉÁî®ÂçèÁ®ãÂáΩÊï∞ËøîÂõûÁöÑÂØπË±°Áß∞‰∏∫ÂçèÁ®ãÂØπË±°Ôºåiscoroutine() ÂáΩÊï∞ÂèØ‰ª•Âà§Êñ≠„ÄÇ

```py
def coroutine(func):
    if inspect.iscoroutinefunction(func):
        # In Python 3.5 that's all we need to do for coroutines
        # defined with "async def".
        return func

    if inspect.isgeneratorfunction(func):
        coro = func
    else:
        @functools.wraps(func)
        def coro(*args, **kw):
            res = func(*args, **kw)
            if (base_futures.isfuture(res) or inspect.isgenerator(res) or
                    isinstance(res, CoroWrapper)):
                res = yield from res
            else:
                # If 'res' is an awaitable, run it.
                try:
                    await_meth = res.__await__
                except AttributeError:
                    pass
                else:
                    if isinstance(res, collections.abc.Awaitable):
                        res = yield from await_meth()
            return res

    coro = types.coroutine(coro)
    wrapper = coro
    wrapper._is_coroutine = _is_coroutine  # For iscoroutinefunction().
    return wrapper
```


## ==‚ö° yield & generator

Âü∫‰∫éÁîüÊàêÂô®ÁöÑÂçèÁ®ãÔºå‰πüÂ∞±ÊòØÈùûÂéüÁîüÂçèÁ®ãÔºåÈúÄË¶Å‰∫ÜËß£‰∏Ä‰∏ã yield Âíå yield from„ÄÇÁîüÊàêÂô® Generator ‰∏ÄËà¨ÊòØÊåáÁîüÊàêÂô®ÂáΩÊï∞ÔºåÂç≥Âá∫Áé∞ yield ÂÖ≥ÈîÆÂ≠óÁöÑÂáΩÊï∞ÔºåÂÆÉÂíåÂçèÁ®ãÂáΩÊï∞ÂÆö‰πâÁ±ª‰ººÔºåÊâßË°åÁîüÊàêÂô®ÂáΩÊï∞Âπ∂‰∏çÊòØÁ´ãÂç≥ÊâßË°åÂáΩÊï∞‰ΩìÔºåËÄåÊòØÂæóÂà∞‰∏Ä‰∏™ÁîüÊàêÂô®Ëø≠‰ª£Âô® Generator IteratorÔºå‰∏∫‰∫ÜÁÆÄÂåñË°®ËææÔºåÂú®‰∏ç‰∫ßÁîüÊÑè‰πâÊ∑∑Ê∑ÜÁöÑÊÉÖÂÜµ‰∏ãÔºåÁõ¥Êé•ÊääËøô‰∏™Ëø≠‰ª£Âô®Áß∞‰∏∫ÁîüÊàêÂô® Generator„ÄÇ

    generator.__next__()
    generator.send(value)
    generator.throw(type[, value[, traceback]])
    generator.close()

‰ª•‰∏ãÂÆûÂàó‰∏≠ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ÁîüÊàêÂô®ÂáΩÊï∞ÔºåÂ¶Ç‰∏äÈù¢ÊâÄËØ¥ÂÆÉ‰∏é‰∏ÄËà¨ÂáΩÊï∞‰∏çÂêåÔºågrep() ÂÜÖÈÉ®ÂåÖÂê´ yield Ë°®ËææÂºèÊâÄ‰ª•‰∏çÊòØ‰∏Ä‰∏™ÂáΩÊï∞Ôºå‰πüÂπ∂‰∏ç‰ºöÂÉèÂáΩÊï∞ÈÇ£Ê†∑ grep("python") Ë∞ÉÁî®Êó∂Á´ãÂç≥ÊâßË°åÂáΩÊï∞‰ΩìÁöÑ‰ª£Á†ÅÔºåËÄåÊòØËøîÂõû‰∏Ä‰∏™ GeneratorÔºåÂè™ÊúâË∞ÉÁî® next() ÊñπÊ≥ïÂØπÂÖ∂ÂàùÂßãÂåñÂ§ç‰ΩçÊó∂Êâç‰ºöÊâßË°åÂáΩÊï∞‰Ωì„ÄÇnext() ‰∏ªË¶ÅÁî®Êù•ÊÅ¢Â§ç generator ÁöÑÊâßË°åÔºåÁõ∏ÂΩì‰∫é send(None)„ÄÇ

- Generator ÊòØÊï∞ÊçÆÁöÑ‰∫ßÁîüËÄÖÔºåÂÆÉÈÄöËøá send() ÊñπÊ≥ïÊé®ÈÄÅÊï∞ÊçÆ push data into pipeline;
- Coroutine ÊòØÊï∞ÊçÆÁöÑÊ∂àË¥πËÄÖÔºåÂÆÉÊãâÂèñÊï∞ÊçÆ pull data ÈÄöËøá iteration

Âæ™ÁéØ‰∏≠ÁöÑ line = (yield) Áõ∏ÂΩì‰∫éÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ coroutineÔºåÂêåÊó∂ÈúÄË¶ÅÊ∂àË¥π‰∏ÄÊù°Êï∞ÊçÆÔºåÂêéÈù¢ÁöÑ‰ª£Á†ÅÂ∞±ÊòØÂçèÁ®ã„ÄÇÂú® yield Ë°®ËææÂºèÊ≤°ÊúâÁ≠âÂà∞Êï∞ÊçÆÂà∞Êù•ÁöÑÊó∂ÂÄôÔºåÂÆÉÂ∞±ÂÆàÂú®ËøôÈáåÔºåÁõ∏ÂΩì‰∫éË¢´ÈòªÂ°û„ÄÇÂÖàÈÄöËøá next() Êù•ÂàùÂßãÂåñ grep Ëøô‰∏™ generatorÔºåÁÑ∂ÂêéÈÄöËøá send() ÊñπÊ≥ïÂ∞ÜÊï∞ÊçÆÂèëÈÄÅÂà∞ÁÆ°Á∫ø pipeline Áªô yield Ë°®ËææÂºèÔºåËøôÊ†∑ yield Â∞±ÂèØ‰ª•Ëé∑ÂèñÂà∞Êï∞ÊçÆËøîÂõûÁªô lineÔºåÂêåÊó∂Áõ∏ÂΩì‰∫éËá™Âä®ËøêË°å next() Â§ç‰ΩçÔºåÊúÄÁªàË∞ÉÁî® close() ÂÖ≥Èó≠Ëøô‰∏™ÂçèÁ®ã„ÄÇ

```py
# def a generator
def grep(pattern):
    print("grep for %s" % pattern)
    while True:
        line = (yield)
        # coroutine code below...
        if pattern in line:
            print(line)

if __name__ == '__main__':
    g = grep("python")
    print("Demo for coroutine & generator...")
    # g.next() for python 2
    # g.__next__()
    next(g)
    g.send("A series string")
    g.send("python generators rock!")
    g.send("More messages")
    g.close()
```
    

‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰∏≠Ôºå‰ª£Á†Å‰∏≠Êñ≠ÂíåÂàáÊç¢ÊâßË°åÔºå‰ΩìÁé∞Âá∫‰∫ÜÂçèÁ®ãÁöÑÈÉ®ÂàÜÁâπÁÇπ„ÄÇ‰º†ÁªüÁöÑÁîü‰∫ßËÄÖ-Ê∂àË¥πËÄÖÊ®°ÂûãÊòØ‰∏Ä‰∏™Á∫øÁ®ãÂÜôÊ∂àÊÅØÔºå‰∏Ä‰∏™Á∫øÁ®ãÂèñÊ∂àÊÅØÔºåÈÄöËøáÈîÅÊú∫Âà∂ÊéßÂà∂ÈòüÂàóÂíåÁ≠âÂæÖÔºå‰ΩÜ‰∏Ä‰∏çÂ∞èÂøÉÂ∞±ÂèØËÉΩÊ≠ªÈîÅ„ÄÇÁé∞Âú®ÊîπÁî®ÂçèÁ®ãÔºåÁîü‰∫ßËÄÖÁîü‰∫ßÊ∂àÊÅØÂêéÔºåÁõ¥Êé•ÈÄöËøá yield Ë∑≥ËΩ¨Âà∞Ê∂àË¥πËÄÖÂºÄÂßãÊâßË°åÔºåÂæÖÊ∂àË¥πËÄÖÊâßË°åÂÆåÊØïÂêéÔºåÂàáÊç¢ÂõûÁîü‰∫ßËÄÖÁªßÁª≠Áîü‰∫ßÔºåÊïàÁéáÊûÅÈ´ò„ÄÇ

```py
def consumer():
    print("[CONSUMER] start")
    ret = 'start'
    while True:
        n = yield ret
        if not n:
            print("n is empty")
            continue
        print("[CONSUMER] consuming %s" % n)
        ret = "200 ok"


def producer(c):
    # init generator
    start_value = c.send(None)
    print(start_value)
    n = 0
    while n < 3:
        n += 1
        print("[PRODUCER] producing %d" % n)
        r = c.send(n)
        print('[PRODUCER] Consumer return: %s' % r)
    # close generator
    c.close()


c = consumer()
producer(c)
```

- È¶ñÂÖàË∞ÉÁî® c.send(None) ÂêØÂä®ÁîüÊàêÂô®Ôºõ
- ÁÑ∂ÂêéÔºå‰∏ÄÊó¶Áîü‰∫ß‰∫Ü‰∏úË•øÔºåÈÄöËøác.send(n)ÂàáÊç¢Âà∞consumerÊâßË°åÔºõ
- consumer ÈÄöËøá yield ÊãøÂà∞Ê∂àÊÅØÔºåÂ§ÑÁêÜÔºåÂèàÈÄöËøá yield ÊääÁªìÊûú‰º†ÂõûÔºõ
- producer ÊãøÂà∞ consumer Â§ÑÁêÜÁöÑÁªìÊûúÔºåÁªßÁª≠Áîü‰∫ß‰∏ã‰∏ÄÊù°Ê∂àÊÅØÔºõ
- producer ÂÜ≥ÂÆö‰∏çÁîü‰∫ß‰∫ÜÔºåÈÄöËøá c.close() ÂÖ≥Èó≠ consumerÔºåÊï¥‰∏™ËøáÁ®ãÁªìÊùü„ÄÇ

Êï¥‰∏™ÊµÅÁ®ãÊó†ÈîÅÔºåÁî±‰∏Ä‰∏™Á∫øÁ®ãÊâßË°åÔºåproduceÂíåconsumerÂçè‰ΩúÂÆåÊàê‰ªªÂä°ÔºåÊâÄ‰ª•Áß∞‰∏∫ÂçèÁ®ãÔºåËÄåÈùûÁ∫øÁ®ãÁöÑÊä¢Âç†ÂºèÂ§ö‰ªªÂä°„ÄÇ

Generator ÁîüÊàêÂô®‰∏ªË¶ÅËÆ®ËÆ∫ yield Âíå yield from Ëøô‰∏§‰∏™Ë°®ËææÂºèÔºåËøô‰∏§‰∏™Ë°®ËææÂºèÂíåÂçèÁ®ãÁöÑÂÆûÁé∞ÊÅØÊÅØÁõ∏ÂÖ≥„ÄÇGenerator ÁöÑ‰ΩúÁî®ÊòØÂèØ‰ª•‰Ωú‰∏∫ data pipeline ‰ΩøÁî®Ôºå‰æãÂ¶ÇÂèØ‰ª•‰ΩøÁî® coroutine Êù•ÂÅö filterÔºåÊàñËÄÖÂ§öË∑ØÂπøÊí≠ broadcast„ÄÇ

‰ª•‰∏ã‰Ωú‰∏∫ filter ËøêË°åÔºåfollow Â∞Ü file ‰∏≠ÁöÑÊØè‰∏ÄË°åËØªÂèñÔºåsend Âà∞ grep ‰∏≠ÁöÑ coroutine ‰ª•Êü•ÊâæÂåπÈÖçÁöÑ lineÔºåÂÜç send Âà∞ printer ÁöÑ coroutine ‰∏≠ÊâìÂç∞ËæìÂá∫ÔºåÂÆåÊàêÊï¥‰∏™ filter ÁöÑÊµÅÁ®ã„ÄÇ

```py
import time
import asyncio
import io


def follow(thefile, target):
    # Go to the end of the file, SEEK_SET or 0, SEEK_CUR or 1, SEEK_END or 2
    # thefile.seek(0, io.SEEK_END)
    next(target)
    while True:
        line = thefile.readline()
        if not line:
            time.sleep(0.1)
            continue
        target.send(line)


# @coroutine for python 2
@asyncio.coroutine
def grep(pattern, target):
    next(target)
    while True:
        line = (yield)
        if pattern in line:
            target.send(line)


# @coroutine for python 2
@asyncio.coroutine
def printer():
    while True:
        line = (yield)
        print(line)


f = open(__file__)
follow(f, grep('python', printer()))
```

ÂØπ‰∏äÈù¢ÁöÑÂÆûÂàóÂÜç‰øÆÊîπ‰∏Ä‰∏ãÔºåÊ∑ªÂä†‰∏ÄÂ±Ç boardcast ÂÅöÊï∞ÊçÆÂàÜÂèëÔºåÊ≥®ÊÑèÔºågenerator ‰∏çËÉΩËøûÁª≠ÊâßË°å next()Ôºö

```py
import time
import asyncio
import io


def follow(thefile, target):
    # Go to SEEK_SET or 0, SEEK_CUR or 1, SEEK_END or 2
    thefile.seek(0, io.SEEK_SET)
    next(target)
    while True:
        line = thefile.readline()
        if not line:
            time.sleep(0.1)
            continue
        target.send(line)


# @coroutine for python 2
@asyncio.coroutine
def grep(pattern, target):
    while True:
        line = (yield)
        if pattern in line:
            target.send(line)


# @coroutine for python 2
@asyncio.coroutine
def printer():
    while True:
        line = (yield)
        print(line)


# @coroutine for python 2
@asyncio.coroutine
def broadcast(targets):
    for target in targets:
        target.send(None)
    while True:
        line = (yield)
        for target in targets:
            target.send(line)

try:
    f = open(__file__)
    p = printer()
    next(p)
    follow(f, broadcast([
        grep('python', p),
        grep('boardcast', p),
    ]))
except KeyboardInterrupt:
    print(__file__ + " exit...")
```


## ==‚ö° yield from

Python 2.5 ‰∏≠ÂºïÂÖ• yield Ë°®ËææÂºèÔºåÂèÇËßÅ PEP342„ÄÇÂÆö‰πâÊñπÊ≥ï‰∏≠ÂåÖÂê´ yield Ë°®ËææÂºèÂêéÔºåPython ‰ºöÂ∞ÜÂÖ∂ËßÜ‰Ωú generator ÂØπË±°ÔºåËÄå‰∏çÂÜçÊòØÊôÆÈÄöÁöÑÂáΩÊï∞ÊñπÊ≥ï„ÄÇPython 3.3 ÁâàÊú¨Êñ∞Â¢û yield from ËØ≠Ê≥ïÔºåÊñ∞ËØ≠Ê≥ïÁî®‰∫éÂ∞Ü‰∏Ä‰∏™ÁîüÊàêÂô®ÈÉ®ÂàÜÊìç‰ΩúÂßîÊâòÁªôÂè¶‰∏Ä‰∏™ÁîüÊàêÂô®„ÄÇÊ≠§Â§ñÔºåÂÖÅËÆ∏Â≠êÁîüÊàêÂô®ÔºåÂç≥ yield from ÂêéÁöÑÂèÇÊï∞ËøîÂõû‰∏Ä‰∏™ÂÄºÔºåËØ•ÂÄºÂèØ‰æõÂßîÊ¥æÁîüÊàêÂô®ÔºåÂç≥ÂåÖÂê´ yield from ÁöÑÁîüÊàêÂô®‰ΩøÁî®„ÄÇÂπ∂‰∏îÂú®ÂßîÊ¥æÁîüÊàêÂô®‰∏≠ÔºåÂèØÂØπÂ≠êÁîüÊàêÂô®ËøõË°å‰ºòÂåñ„ÄÇÂºïÂÖ• yield from ÁöÑÁõÆÁöÑÂ∞±ÊòØ‰∏∫‰∫ÜÂ±èËîΩÈÇ£‰∏™Â§öÂá∫Êù•‰∏ÄÂ±ÇÁöÑËÆ©‰∫∫Èöæ‰ª•ÁêÜËß£ÁöÑforÂæ™ÁéØÔºåÂêåÊó∂ÂèàËÉΩÂÆûÁé∞ÂÜÖÂ§ñËøûÈÄö yield from ÁöÑÂÆûÁé∞Êú∫Âà∂ÂèØÂèÇËÄÉ„ÄäÊµÅÁïÖÁöÑPython„ÄãÁ¨¨16Á´†

    # Â≠êÁîüÊàêÂô®
    def test(n):
        i = 0
        while i < n:
            yield i
            i += 1


    # ÂßîÊ¥æÁîüÊàêÂô®
    def test_yield_from(n):
        # yield from test(n)
        for item in test(n):
            yield item
            print("got item " + str(item))


    for i in test_yield_from(3):
        print(i)


ËæìÂá∫

    0
    got item 0
    1
    got item 1
    2
    got item 2

yield from Âá†Â§ßÁâπÂæÅ:

- Â≠êÁîüÊàêÂô®‰∫ßÂá∫ÁöÑÂÄºÈÉΩÁõ¥Êé•‰º†ÁªôÂßîÊ¥æÁîüÊàêÂô®ÁöÑË∞ÉÁî®Êñπ„ÄÇ
- ‰ΩøÁî® send() ÊñπÊ≥ïÂèëÁªôÂßîÊ¥æÁîüÊàêÂô®ÁöÑÂÄºÈÉΩÁõ¥Êé•‰º†ÁªôÂ≠êÁîüÊàêÂô®„ÄÇÂ¶ÇÊûúÂèëÈÄÅÁöÑÂÄºÊòØ NoneÔºåÈÇ£‰πà‰ºöË∞ÉÁî®Â≠êÁîüÊàêÂô®ÁöÑ next() ÊñπÊ≥ï„ÄÇÂ¶ÇÊûúÂèëÈÄÅÁöÑÂÄº‰∏çÊòØ NoneÔºåÈÇ£‰πà‰ºöË∞ÉÁî®Â≠êÁîüÊàêÂô®ÁöÑ send() ÊñπÊ≥ï„ÄÇÂ¶ÇÊûúË∞ÉÁî®ÁöÑÊñπÊ≥ïÊäõÂá∫ StopIteration ÂºÇÂ∏∏ÔºåÈÇ£‰πàÂßîÊ¥æÁîüÊàêÂô®ÊÅ¢Â§çËøêË°å„ÄÇ‰ªª‰ΩïÂÖ∂‰ªñÂºÇÂ∏∏ÈÉΩ‰ºöÂêë‰∏äÂÜíÊ≥°Ôºå‰º†ÁªôÂßîÊ¥æÁîüÊàêÂô®„ÄÇ
- ÁîüÊàêÂô®ÈÄÄÂá∫Êó∂ÔºåÁîüÊàêÂô®ÔºàÊàñÂ≠êÁîüÊàêÂô®Ôºâ‰∏≠ÁöÑ return expr Ë°®ËææÂºè‰ºöËß¶ÂèëStopIteration(expr) ÂºÇÂ∏∏ÊäõÂá∫„ÄÇ
- yield from Ë°®ËææÂºèÁöÑÂÄºÊòØÂ≠êÁîüÊàêÂô®ÁªàÊ≠¢Êó∂‰º†Áªô StopIteration ÂºÇÂ∏∏ÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞„ÄÇ
- ‰º†ÂÖ•ÂßîÊ¥æÁîüÊàêÂô®ÁöÑÂºÇÂ∏∏ÔºåÈô§‰∫Ü GeneratorExit ‰πãÂ§ñÈÉΩ‰º†ÁªôÂ≠êÁîüÊàêÂô®ÁöÑ throw() ÊñπÊ≥ï„ÄÇÂ¶ÇÊûúË∞ÉÁî® throw() ÊñπÊ≥ïÊó∂ÊäõÂá∫ StopIteration ÂºÇÂ∏∏ÔºåÂßîÊ¥æÁîüÊàêÂô®ÊÅ¢Â§çËøêË°å„ÄÇStopIteration ‰πãÂ§ñÁöÑÂºÇÂ∏∏‰ºöÂêë‰∏äÂÜíÊ≥°Ôºå‰º†ÁªôÂßîÊ¥æÁîüÊàêÂô®„ÄÇ
- Â¶ÇÊûúÊää GeneratorExit ÂºÇÂ∏∏‰º†ÂÖ•ÂßîÊ¥æÁîüÊàêÂô®ÔºåÊàñËÄÖÂú®ÂßîÊ¥æÁîüÊàêÂô®‰∏äË∞ÉÁî® close() ÊñπÊ≥ïÔºåÈÇ£‰πàÂú®Â≠êÁîüÊàêÂô®‰∏äË∞ÉÁî® close() ÊñπÊ≥ïÔºåÂ¶ÇÊûúÂÆÉÊúâÁöÑËØù„ÄÇÂ¶ÇÊûúË∞ÉÁî® close() ÊñπÊ≥ïÂØºËá¥ÂºÇÂ∏∏ÊäõÂá∫ÔºåÈÇ£‰πàÂºÇÂ∏∏‰ºöÂêë‰∏äÂÜíÊ≥°Ôºå‰º†ÁªôÂßîÊ¥æÁîüÊàêÂô®ÔºõÂê¶ÂàôÔºåÂßîÊ¥æÁîüÊàêÂô®ÊäõÂá∫GeneratorExit ÂºÇÂ∏∏„ÄÇ



## ==‚ö° EventLoop & Tasks
[‰ªÄ‰πàÊòØ Event LoopÔºü](http://www.ruanyifeng.com/blog/2013/10/event_loop.html)
[„ÄäUnderstanding The Node.js Event Loop„Äã]()

asyncio ÁöÑÁºñÁ®ãÊ®°ÂûãÂ∞±ÊòØ‰∏Ä‰∏™Ê∂àÊÅØÂæ™ÁéØ EventLoopÔºåÂ§ßÊ¶ÇÊµÅÁ®ãÊòØ‰ªé asyncio Ê®°Âùó‰∏≠Ëé∑Âèñ‰∏Ä‰∏™ EventLoop ÂºïÁî®ÔºåÁÑ∂ÂêéÂ∞ÜÈúÄË¶ÅÂºÇÊ≠•ÊâßË°åÁöÑÂçèÁ®ãÂåÖË£ÖÊàê Future„ÄÅTask ÂÜçÊâîÂà∞ EventLoop ‰∏≠ÊâßË°å„ÄÇ‰ª•‰∏ãÊòØ‰∏Ä‰∏™Âü∫Êú¨ÊâßË°åÊµÅÁ®ãÔºåasyncio.sleep() Âú®ËøôÈáåÁî®Êù•Ê®°ÊãüËÄóÊó∂ÁöÑÊìç‰ΩúÔºå‰ΩÜÂÆÉÁöÑ‰ΩúÁî®‰∏ªË¶ÅÊòØÂ∞ÜÂΩìÂâçÂçèÁ®ãÁöÑÊµÅÁ®ãÊéßÂà∂ÊùÉÂΩíËøòÁªô   EventLoopÔºå‰ª•‰ΩøÂæóÂÖ∂ÂÆÉÂ§Ñ‰∫éÁ≠âÂæÖ‰∏≠ÁöÑÂçèÁ®ãÊúâÊú∫‰ºöËøêË°åÔºö

    import asyncio


    async def cor():
        print('enter cor ...')
        await asyncio.sleep(2)
        print('exit cor ...')
        
        return 'cor'

    loop = asyncio.get_event_loop()
    task = loop.create_task(cor())
    rst = loop.run_until_complete(task)
    print(rst)

get_event_loop() ÂæóÂà∞‰∏Ä‰∏™‰∫ã‰ª∂Âæ™ÁéØÂØπË±°ÔºåÂØπ‰∫éÂêå‰∏Ä‰∏™Á∫øÁ®ã‰∏≠Âè™Â≠òÂú®ÂîØ‰∏ÄÁöÑ‰∏Ä‰∏™ÂÆû‰æãÔºåÂè™Ë¶ÅÂú®Âêå‰∏Ä‰∏™Á∫øÁ®ã‰∏≠Ë∞ÉÁî®Ê≠§ÊñπÊ≥ïÔºåÂæóÂà∞ÁöÑÈÉΩÊòØÂêå‰∏Ä‰∏™ÂØπË±°ÔºåËøêË°åÁ∫øÁ®ãÊó∂ÂèØ‰ª•ÈÄöËøá set_event_loop() ÊòæÂºèËÆæÁΩÆ„ÄÇcreate_task() ÊääÂçèÁ®ãÂåÖË£ÖÊàê Task ÂØπË±°Ôºå‰∫ã‰ª∂Âæ™ÁéØÊâßË°åÂÖ∂‰∏≠ÁöÑËøêË°åÊñπÊ≥ï run_until_complete() Â∞±‰ºöÂ∞Ü Task ÂØπË±°Ê∑ªÂä†Âà∞‰∫ã‰ª∂Âæ™ÁéØ‰∏≠ÂéªËøêË°å„ÄÇÂú®‰∫ã‰ª∂Âæ™ÁéØÂÜÖÈÉ®ÔºåÊâßË°åÁöÑ‰∏ªË¶ÅÊµÅÁ®ãÊúâ‰ª•‰∏ãÂá†‰∏™Ê≠•È™§Ôºö

    BaseEventLoop.run_forever()
    BaseEventLoop._run_once()
    handle._run()
    handle._context.run(self._callback, *self._args)

Handle Á±ªÊòØÊ†∏ÂøÉÂ∞ÅË£ÖÁ±ªÔºåÂØπ EventLoop ÁöÑ call_soon() Êàñ call_soon_threadsafe() ËøõË°åÂåÖË£ÖÔºåEventLoop Âú® `_run_once()` ÊñπÊ≥ï‰∏≠ËøêË°åÂçèÁ®ãÂ∞±ÊòØÈÄöËøá Handle ÁöÑ `_run()` ÊñπÊ≥ïÊâßË°åÁöÑ„ÄÇHandle ÂØπË±°Êèê‰æõ cancel() ÊñπÊ≥ïÊù•ÂèñÊ∂à‰ªªÂä°ÁöÑÊâßË°åÔºåÂíå cancelled() ÊñπÊ≥ïÊù•Ëé∑ÂèñÁä∂ÊÄÅ„ÄÇ

ÊâßË°å EventLoop ÁöÑÊñπÊ≥ïÊúâÂ§öÁßçÊñπÂºèÔºårun_until_complete() ÊñπÊ≥ïÊâßË°åÊòØÂÖ∂‰∏≠‰∏ÄÁßçÔºåÂèØ‰ª•ÁªôÂÆÉ‰º†ÂÖ•‰∏Ä‰∏™ÂçèÁ®ãÂáΩÊï∞ÔºåÂÖ∂ÂÜÖÈÉ®‰ºöËá™Âä®ÂåÖË£ÖÊàê TaskÔºåÂÜçÈÄöËøá run_forever() ËøêË°åÔºå‰πüÂèØ‰ª•‰ΩøÁî® create_task() ÂÖàÂ∞ÜÂçèÁ®ãÂáΩÊï∞Â∞ÅË£ÖÊàê Task„ÄÇÂ§ö‰∏™ÂçèÁ®ãÂáΩÊï∞ÁöÑÂºÇÊ≠•‰ªªÂä°Âπ∂ÂèëÂèØ‰ª• Áî® asyncio.wait(list) Êàñ asyncio.gather() ËøõË°åÂåÖË£ÖÔºåÊ≥®ÊÑèÂÆÉ‰ª¨ÂèÇÊï∞Ê†ºÂºè„ÄÇËøô‰∏§‰∏™ÊñπÊ≥ïËøîÂõûÂÄº‰πü‰∏ç‰∏ÄÊ†∑Ôºåwait ‰πüÂèØ‰ª•Âú®Á¨¨‰∏Ä‰∏™ future ÂÆåÂÖ®ÊàñËÄÖÂá∫ÈîôÊó∂Â∞±ËøîÂõûÔºåÂèØËÉΩËøîÂõû done ‰∏∫Â∑≤ÂÆåÊàêÁöÑÂçèÁ®ã TaskÔºåËøîÂõû pending ‰∏∫Ë∂ÖÊó∂Êú™ÂÆåÊàêÁöÑÂçèÁ®ã TaskÔºåÈúÄÈÄöËøá future.result Ëé∑ÂèñÂºÇÊ≠•Êìç‰ΩúÁªìÊûú„ÄÇËÄå asyncio.gather() ËøîÂõûÁöÑÊòØÂ∑≤ÂÆåÊàê Task ÁöÑ result„ÄÇ‰∏é wait_for() ‰∏çÂêåÔºåwait() Âú®‰ªªÂä°Ë∂ÖÊó∂Âπ∂‰∏ç‰ºöÂèñÊ∂à cancel future ‰ªªÂä°„ÄÇ

‰ª•‰∏ã‰∏â‰∏™ÊñπÂºèÈÉΩÂèØ‰ª•ËøêË°åÂçèÁ®ãÔºåÊàñ asyncio.run() Áõ¥Êé•ËøêË°åÂçèÁ®ãÔºå‰ΩÜËøô‰∏™ÊñπÊ≥ï‰∏çËÉΩÂú® EventLoop ËøêË°åÁöÑÂçèÁ®ãÂÜÖ‰ΩøÁî®ÔºõÁî® Python 3.7 Êèê‰æõÁöÑ create_task() ‰∏∫ EventLoop Ê∑ªÂä†‰ªªÂä°ÔºåÊàñÂåÖË£Ö‰ªªÂä°Âú®ÈÄöËøáÂÖ∂ÂÆÉÊñπÊ≥ïÂ¶Ç run_until_complete() ËøêË°åÔºåÂèàÊàñËÄÖ‰ΩøÁî® run_coroutine_threadsafe() Âä®ÊÄÅÂ∞ÜÂçèÁ®ãÊ∑ªÂä†Âà∞‰ªªÂä°‰∏≠ËøêË°å„ÄÇÂú® EventLoop ÂàõÂª∫ÂæÖËøêË°åÁöÑÂçèÁ®ãÔºå‰ΩøÁî® EventLoop ÂèØ‰ª•ÂÆûÁé∞Â§öÂçèÁ®ãÔºåÂèØ‰ª•ÂØπÂ§ö‰∏™ Task/Future ËøêË°åÁÆ°ÁêÜÔºõÊàñ‰ΩøÁî® ensure_future() ÂØπÂçèÁ®ãÊñπÊ≥ïËøõË°åÂåÖË£ÖÂΩ¢Êàê Task ÂØπË±°‰ª•Âú® EventLoop ‰∏≠ËøêË°åÔºö

    asyncio.run(coro, *, debug=False)

    loop = asyncio.get_event_loop()
    loop.create_task(coro)
    loop.run_forever()

    task = asyncio.ensure_future(coro)
    loop.run_utnil_complete(task)

ËøòÂèØ‰ª•ÈÄöËøá‰ª•‰∏ãÊñπÊ≥ïÂú®ÊåáÂÆöÁöÑÊó∂Èó¥ÊàñÂª∂Êó∂ËøêË°åÂçèÁ®ã:

    loop.call_soon(callback, *args, context=None)
    loop.call_soon_threadsafe(callback, *args, context=None)

    delay = 3
    when = loop.time() + 3
    loop.call_later(delay, callback, *args, context=None)
    loop.call_at(when, callback, *args, context=None)


‰ª•‰∏ãÊòØ‰∏™ÂÖ≥‰∫é EventLoop ÁöÑÊó†Áî®ÊºîÁ§∫ÔºåÊää asyncio.sleep() ÁúãÊàêÊòØ‰∏Ä‰∏™ËÄóÊó∂ÁöÑ IO Êìç‰ΩúÔºå‰ª£Êõø time.sleep() Â∞±‰∏ç‰ºöÈòªÂ°û‰∫ã‰ª∂Âæ™ÁéØ„ÄÇÊúüÈó¥‰∏ªÁ∫øÁ®ãÂπ∂Êú™Á≠âÂæÖÔºåËÄåÊòØÂéªÊâßË°å EventLoop ‰∏≠ÂÖ∂‰ªñÂçèÁ®ã‰∫ÜÔºåÂõ†Ê≠§ÂèØ‰ª•ÂÆûÁé∞Âπ∂ÂèëÊâßË°åÔºö

    import asyncio
    from random import random

    async def compute(task, x, y):
        cost = random()*10  # random between 0 and 10
        print("Task %s would cost %0.2f seconds to eveluate %s + %s ..." % (task, cost, x, y))
        await asyncio.sleep(cost)
        return x + y


    async def print_sum(task, x, y):
        result = await compute(task, x, y)
        print("Task %s: %s + %s = %s" % (task, x, y, result))


    eventloop = asyncio.get_event_loop()
    print("asyncio tasks start ...")
    eventloop.run_until_complete(print_sum("A", 1, 2))
    eventloop.run_until_complete(asyncio.gather(
        print_sum("G1", 1, 2),
        print_sum("G2", 3, 4),
    ))
    eventloop.run_until_complete(asyncio.wait([
        print_sum("W1", 1, 2),
        print_sum("W2", 3, 4),
    ]))
    print("asyncio tasks is done!")
    eventloop.close()


ÊµãËØïËæìÂá∫Ôºö

    asyncio tasks start ...
    Task A would cost 3.24 seconds to eveluate 1 + 2 ...
    Task A: 1 + 2 = 3
    Task G1 would cost 3.69 seconds to eveluate 1 + 2 ...
    Task G2 would cost 5.53 seconds to eveluate 3 + 4 ...
    Task G1: 1 + 2 = 3
    Task G2: 3 + 4 = 7
    Task W1 would cost 9.42 seconds to eveluate 1 + 2 ...
    Task W2 would cost 2.52 seconds to eveluate 3 + 4 ...
    Task W2: 3 + 4 = 7
    Task W1: 1 + 2 = 3
    asyncio tasks is done!


Ëøô‰∏™ÂÆûÂàóÁöÑÂçèÁ®ãËøêË°åÊµÅÁ®ãÂú®ÂÆòÊñπËµÑÊñôËøôÊ†∑ÊèèËø∞ÁöÑÔºå‰ª•‰∏ãÂõæË°®Â∞±ÊòØ EventLoop ÂÜÖ‰∏Ä‰∏™ÂÆåÊï¥ÂçèÁ®ãËøêË°åËøáÁ®ãÔºö

    EventLoop                     Task                      print_sum                     compute
       |                           |                            |                            |
       |    the loop is running    |    the task is pendding    | the coroutine is running   | the coroutine is suspended
    +-----+                     +-----+                      +-----+  await compute(x, y) +-----+ await asyncio.sleep()
    |     |--------------------->     |---------------------->     |---------------------->     |
    |     |                     |     |                      |     |                      |     |
    |     |                     |     |                      |     |                      |     |
    |     <---------------------|     <---------------------------------------------------|     |
    |     |                     |     |                      |     |                      |     |
    ------------------------------------- 1 seconds later ---------------------------------------
    |     | got a notification  |     |                      |     |                      |     | the coroutine is running
    |     |--------------------->     |--------------------------------------------------->     | return 3 + 4
    |     |                     |     |                      |     |                      |     |
    |     |                     |     |                      |     | print("%s + %s ...)  |     |
    |     <---------------------|     <----------------------|     <----------------------|     |
    |     |                     |     | raise StopIteration  |     | raise StopIteration  |     |
    |     |                     |     |                      |     |                      |     |
    +-----+ the loop is stoped  +-----+ the task is done!    +-----+ the coroutine done!  +-----+


ËøòÊúâ await Future ÁöÑÁî®Ê≥ïÔºåÂèØ‰ª•Â∞Ü Future ÁêÜËß£‰∏∫‰∏Ä‰∏™ÂÆπÂô®ÔºåÁî®‰∫éÊé•ÂèóÂºÇÊ≠•ÁöÑÁªìÊûúÔºåÂºÇÊ≠•Êìç‰ΩúÁªìÊûúÈÄöËøá set_result() ‰øùÂ≠òÂà∞ Feture ÂØπË±°ÂêåÊó∂Êí§ÈîÄ Feture ÁöÑÈòªÂ°ûÔºåËøôÈáå Future ÂèØ‰ª•Âíå Task Á≠â‰ª∑ÁúãÂæÖÔºåTask ÁªßÊâøËá™ FutureÔºåÂÆÉ‰ª¨ÈÉΩÊòØÂèØ‰ª•ÂÅö‰∏∫ EventLoop ‰∏äËøêË°åÁöÑ‰ªªÂä°ÔºåÂèÇËÄÉ‰∏äÈù¢ÁöÑÊµÅÁ®ãÂõæ„ÄÇTask Áî®Êù•ÂåÖË£ÖÂçèÁ®ãÂáΩÊï∞ÔºåÂæóÂà∞ Task ÂØπË±°ÂèØ‰ª•Âú® EventLoop ‰∏≠ËøêË°åÔºåÂèØ‰ª•Âä®ÊÄÅÂæÄ EventLoop Ê∑ªÂä† Task ‰ªªÂä°„ÄÇÂ§ö‰∏™‰ªªÂä°Âπ∂ÂèëÂèØ‰ª•ÈÄöËøá asyncio.gather() Êàñ asyncio.wait() ËøõË°åÊâìÂåÖÊàê„ÄÇTask ÂÖ∂ÂÜÖÈÉ®Â∫îËØ•‰ºöÊúâ‰∏Ä‰∏™ÂºÇÊ≠•ÂõûË∞ÉÈÄöÁü•ÔºåÂºÇÊ≠• IO ÂÆåÊàêÂêéÂ∞±ÈÄöÁü• EventLoop Âî§ÈÜíÂ§Ñ‰∫é suspended ÊÇ¨ÊåÇÁä∂ÊÄÅÁöÑÂçèÁ®ãÂéªËé∑ÂèñÂπ∂Â§ÑÁêÜÁªìÊûúÔºö


    import asyncio
    from random import random

    future = asyncio.Future()


    async def cost_time(future):
        cost = random() * 10  # 0 ~ 10 seconds
        print("wait for %0.2f seconds" % cost)
        try:
            await asyncio.sleep(cost)
            future.set_result('work done!')
        except asyncio.InvalidStateError as e:
            print("Task broken: %s %s" % (type(e), e))



    async def waiting(future):
        # result = await future
        try:
            result = await asyncio.wait_for(future, 3.0)
            print("result is %s" % result)
        except (TimeoutError, Exception) as e:
            print("Task fail [canceled:%s]: %s %s" % (future.cancelled(), type(e), e))


    loop = asyncio.get_event_loop()
    asyncio.ensure_future(cost_time(future))
    loop.run_until_complete(waiting(future))
    # loop.run_until_complete(asyncio.gather(
    #     waiting(future),
    #     cost_time(future),
    # ))
    # loop.run_until_complete(asyncio.wait([
    #     waiting(future),
    #     cost_time(future),
    # ]))
    loop.close()



ËøôÈáåÁöÑ future ÂØπË±°ÂèØ‰ª•Âíå yield from ÊàñËÄÖ await ÁªìÂêà‰ΩøÁî®ÔºåÂÖ∂‰ΩúÁî®Â∞±ÊòØÊöÇÂÅúÂçèÁ®ãÔºåÁõ¥Âà∞ future.set_result() ÊâßË°åËøîÂõû result ÊàñËÄÖÊäõÂá∫ÂºÇÂ∏∏„ÄÇÂú®‰æãÂ≠ê‰∏≠Ôºåawait future ÂøÖÈ°ªË¶ÅÁ≠âÂæÖ future.set_result() Â∞±Ë°®Á§∫ÂºÇÊ≠•Êìç‰ΩúÁªìÊùüÔºåÂèØ‰ª•ÈÄöÁü• EventLoop Âî§ÈÜíÂçèÁ®ãÊù•Â§ÑÁêÜÂêéÁª≠Â∑•‰Ωú„ÄÇÂõ†‰∏∫‰ΩøÁî®‰∫Ü asyncio.wait_for()ÔºåÂºÇÊ≠•Êìç‰ΩúÂ¶ÇÊûúÊ≤°Âú®ÈôêÂÆöÊó∂Èó¥ÂÆåÊàêÂ∞±‰ºöË∂ÖÊó∂ËÄåË¢´ÂèñÊ∂à„ÄÇÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÂ¶ÇÊûú‰ΩøÁî® gather() ÊàñËÄÖ wait() ÂåÖË£π futureÔºåÈÇ£‰πà wait_for() ÁöÑÈÄªËæëÂ∞±‰ºöË¢´ÊîπÂÜô„ÄÇ

ÂØπ‰∫éÂçï‰∏™ Future ÂØπË±°ÔºåÂ¶ÇÊûú asyncio.wait_for(future, timeout=....) Ë∂ÖÊó∂‰∫ÜÔºåÂÆÉ‰ºöÊí§ÈîÄ future Êìç‰ΩúÔºåËøôÂØπ‰∫éÂèÇÊï∞‰∏≠ÁöÑ future ÊòØ‰∏Ä‰∏™ Future ÂØπË±°ÊòØÊ≠£Â∏∏ÁöÑÔºåÂõ†‰∏∫ Future.cancel() ÊòØÂêåÊ≠•ÊñπÊ≥ï„ÄÇ ‰ΩÜÊòØ future ÊòØ Task ÂØπË±°Êó∂ÔºåÁªìÊûúÂ∞±‰∏çÂêå‰∫ÜÔºåtask.cancel() Ë∞ÉÁî®ÂêéÊÄªÊòØËøîÂõû TrueÔºåÂè™ÊòØÂÆÉ‰øùËØÅ‰∏ç‰∫ÜÁ´ãÂàªÁªìÊùüÂºÇÊ≠•Êìç‰ΩúÔºåÂÆÉÂè™ÊòØËΩ¨Ëææ‰Ω†ÁöÑÈúÄÊ±ÇËÄåÂ∑≤„ÄÇÊâÄ‰ª•Ôºå‰ª•‰∏ä‰ª£Á†Å‰∏≠Ê≥®Ëß£ÁöÑ‰ø©ÊñπÂºè‰∏ç‰ºöÂõ†‰∏∫ wait_for() ÁöÑË∂ÖÊó∂ËÄåÂèñÊ∂à task ‰ªªÂä°ÔºåÂÆÉ‰ºöÁªßÁª≠Á≠âÂæÖ const_time ÊâßË°åÁõ¥Âà∞ÂÖ∂ÂÜÖÈÉ®Ë∂ÖÊó∂ÁªìÊùü‰∏∫Ê≠¢„ÄÇ


async with ÂºÇÊ≠•‰∏ä‰∏ãÊñáÁÆ°ÁêÜÂô®

    async with EXPR as VAR:
        BLOCK

ÂÆûÁé∞‰ª£Á†ÅËåÉÊú¨Ôºö

    mgr = (EXPR)
    aexit = type(mgr).__aexit__
    aenter = type(mgr).__aenter__(mgr)

    VAR = await aenter
    try:
        BLOCK
    except:
        if not await aexit(mgr, *sys.exc_info()):
            raise
    else:
        await aexit(mgr, None, None, None)


async for ÂºÇÊ≠•Ëø≠‰ª£Âô®

    async for TARGET in ITER:
        BLOCK
    else:
        BLOCK2

ÂÆûÁé∞‰ª£Á†ÅËåÉÊú¨Ôºö

    iter = (ITER)
    iter = type(iter).__aiter__(iter)
    running = True
    while running:
        try:
            TARGET = await type(iter).__anext__(iter)
        except StopAsyncIteration:
            running = False
        else:
            BLOCK
    else:
        BLOCK2



## ==‚ö° Explorer asyncio under IPC
[Interprocess Communication and Networking](https://docs.python.org/3.5/library/ipc.html)

ÂÆòÊñπÊñáÊ°£Â∞Ü asyncio ÁöÑÊñáÊ°£ÂΩíÁ±ªÂà∞‰∫ÜÂÆòÊñπÊ†áÂáÜÂ∫ìËøõÁ®ãÈó¥ÈÄöËÆØ IPC - Interprocess Communication Ëøô‰∏Ä‰∏™Â§ßÁ±ªÂà´‰∏≠Ôºå[Interprocess Communication and Networking] ÊúâÂÖ≥‰∫é asyncio Ê®°ÂùóÁöÑÂÆåÊï¥ËµÑÊñôÔºåÊèê‰æõÁöÑ API Êé•Âè£Áõ¥Êé•ÂèØ‰ª•Êü•ËØ¢Âà∞ËØ¶ÁªÜ‰ø°ÊÅØÔºåËøòÊúâÁõ∏Â∫îÁöÑÂÆûÂàó‰ª£Á†Å„ÄÇ‰æãÂ¶Ç start_server() ÂáΩÊï∞ÂèØ‰ª•Âª∫Á´ã‰∏Ä‰∏™ÊúçÂä°Âô®Á´ØÁöÑ‰æ¶Âê¨Á®ãÂ∫èÔºåÂíå EventLoop.create_server() Áî®Ê≥ïÁõ∏‰ºº„ÄÇ

ËøòÊúâ asyncio Êèê‰æõ‰∫Ü‰∏Ä open_connection() ÂèØ‰ª•Áî®Êù•ÂÅöÂºÇÊ≠• Web ËØ∑Ê±ÇÔºåÂÆûÈôÖ‰∏äÂÆÉÊòØ create_connection() ÊñπÊ≥ïÁöÑÂåÖË£ÖÂáΩÊï∞ÔºåËøûÊé•ÊñπÊ≥ïÊàêÂäüÂêéËøîÂõû asyncio.StreamReader Âíå asyncio.StreamWriterÔºåÂÆÉ‰ª¨ÂàÜÂà´ÂØπÂ∫î‰∏Ä‰∏™ Web ÊúçÂä°Âô®ÂìçÂ∫îÂíå HTTP ËØ∑Ê±Ç„ÄÇËøôÊòØÁõ∏ÂØπÂ∫ïÂ±ÇÁöÑÊìç‰ΩúÔºåÈúÄË¶Å‰∫ÜËß£Âü∫Êú¨ÁöÑ HTTP ÂçèËÆÆÔºåÁü•ÈÅìÊï∞ÊçÆÂåÖÁöÑÁªìÊûÑ„ÄÇÈ¶ñÂÖàÈúÄË¶ÅÂæÄ HTTT ËØ∑Ê±ÇÂØπË±°Âç≥ StreamWrite ÂÜôÂÖ• HTTP ËØ∑Ê±ÇÊï∞ÊçÆÂåÖ„ÄÇÁÑ∂ÂêéÊâßË°å drain() ÂèëÈÄÅÂà∞ÊúçÂä°Âô®ÔºåËøôÊòØ‰∏Ä‰∏™ÂºÇÊ≠•ÊñπÊ≥ïÔºå‰ºöÈòªÂ°ûÂà∞ÊúçÂä°ËøîÂõû‰∏∫Ê≠¢„ÄÇdrain Â∞±ÊòØÊéíÁ©∫ÁöÑÊÑèÊÄùÔºåÁ±ª‰ººÁöÑËøòÊúâ flush ÁöÑËØ¥Ê≥ï„ÄÇÊúçÂä°Âô®ÊàêÂäüËøîÂõûÂêéÂ∞±ÂèØ‰ª•ÈÄöËøá StreamWriter ËØªÂèñÂÜÖÂÆπ‰∫Ü„ÄÇ


    import asyncio

    @asyncio.coroutine
    def wget(host):
        print('wget %s...' % host)
        connect = asyncio.open_connection(host, 80)
        reader, writer = yield from connect
        header = 'GET / HTTP/1.0\r\nHost: %s\r\n\r\n' % host
        writer.write(header.encode('utf-8'))
        yield from writer.drain()
        while True:
            line = yield from reader.readline()
            if line == b'\r\n':  # gap between http headders and body
                break
            print('%s header > %s' % (host, line.decode('utf-8').rstrip()))
        # Ignore the body, close the socket
        writer.close()

    loop = asyncio.get_event_loop()
    tasks = [wget(host) for host in ['localhost', 'nim-lang.org']]
    loop.run_until_complete(asyncio.wait(tasks))
    loop.close()


## ==‚ö° echo server for asyncio & socket

‰∏Ä‰∏™ÂºÇÊ≠•Âπ∂ÂèëÊúçÂä°Âô®ÈúÄË¶ÅÊúâÂä®ÊÄÅÊ∑ªÂä†ËøûÊé•‰ªªÂä°ÁöÑËÉΩÂäõÔºå‰ª•‰∏ãÊòØ‰∏Ä‰∏™Êó†Áî®ÁöÑÊºîÁ§∫Ôºå‰∏ªËøõÁ®ãÂÆöÊó∂ÂàõÂª∫‰ªªÂä°ÔºåÂπ∂‰ΩøÁî®Âè¶‰∏Ä‰∏™ EventLoop Êù•ÈÅøÂÖç‰∏ªËøõÁ®ãÈÄÄÂá∫„ÄÇÂ≠êÁ∫øÁ®ãÈÄöËøá run_forever() ÊâßË°åÈòªÂ°ûÂà∞Ê∞∏‰πÖÁöÑ EventLoop„ÄÇ‰∏ªËøõÁ®ãÊ≤°ÊúâÂÅöÂºÇÂ∏∏Â§ÑÁêÜÔºåÂêØÂä®‰πãÂêé Ctrl+C ‰ºöËß¶Âèë run_until_complete ÁöÑÊâßË°åÂºÇÂ∏∏ KeyBorardInterruptÔºå‰∏ªËøõÁ®ãÁªìÊùü‰∏çÂÜç‰∫ßÁîüÊñ∞‰ªªÂä°Ôºå‰ΩÜÂ≠êÁ∫øÁ®ãËøòÂú®ËøêË°åÔºå‰ªéËÄåËøõÂÖ•ÂÅáÊ≠ªÁä∂ÊÄÅ„ÄÇÂèØ‰ª•ÈÄöËøá thread.daemon = True Âú®Á∫øÁ®ãÂêØÂä®ÂâçËÆæÁΩÆÂ≠êÁ∫øÁ®ã‰∏∫ÂÆàÊä§Á∫øÁ®ãÔºåËøôÊ†∑ÂΩì‰∏ªÁ∫øÁ®ãÁªìÊùüÁöÑÊó∂ÂÄôÔºåÂ≠êÁ∫øÁ®ã‰πüÈöèÊú∫ÈÄÄÂá∫„ÄÇÂèØ‰ª•ËÆ§‰∏∫ÔºåÂÆàÊä§Á∫øÁ®ãÊòØ‰∏çÂ§™ÈáçË¶ÅÁöÑÁ∫øÁ®ãÔºå‰∏ªÁ∫øÁ®ã‰∏çÁ≠âÂÆÉÁªìÊùü„ÄÇ


    import asyncio
    import random
    from threading import Thread


    async def create_task(event_loop):
        i = 0
        while True:
            # make a task every second and pupp it into event_loop
            print("event_loop task %s" % len(asyncio.all_tasks(event_loop)))
            asyncio.run_coroutine_threadsafe(cost_time(i), event_loop)
            await asyncio.sleep(1)
            i += 1


    async def cost_time(i):
        print("#{} coroutine task".format(i))
        await asyncio.sleep(random.randint(1,10))
        print("#{} coroutine task is done!".format(i))


    def start_loop(loop):
        asyncio.set_event_loop(loop)
        loop.run_forever()


    event_loop = asyncio.new_event_loop()
    thread = Thread(target=start_loop, args=(event_loop,))  # make a thrad for service
    # thread.setDaemon(True)
    thread.start()

    # pid = multiprocessing.current_process().pid
    pid = os.getpid()
    print("thread tid %s" % thread.ident)
    print("current_thread[main] tid %s" % threading.current_thread().ident)
    print("current_process[main] pid %s" % pid)

    # os._exit(0)  # kill all process & thread 
    # sys.exit(0)  # exit current thread

    main_loop = asyncio.new_event_loop()
    main_loop.run_until_complete(create_task(event_loop))  # main process create coroutine object


Python Êèê‰æõ‰∫Ü sys.exit() Áî®‰∫éÈÄÄÂá∫ÂΩìÂâçÁ∫øÁ®ãÔºåÂ∞±‰ª•‰∏ãÂàóÂ≠êÔºåsys.exit() Âπ∂‰∏çËÉΩÂÆåÂÖ®ÈÄÄÂá∫Á®ãÂ∫è„ÄÇÂõ†‰∏∫‰∏ªËøõÁ®ãÁöÑÁ∫øÁ®ãËôΩÁÑ∂ÂèØ‰ª•ÂÖ≥ÊéâÔºå‰ΩÜÊòØÂ≠êÁ∫øÁ®ãÂπ∂Ê≤°ÊúâÂìçÂ∫îÈÄÄÂá∫ÔºåÈô§ÈùûËÆæÁΩÆ‰∫ÜÂÆàÊä§ËøõÁ®ã thead.daemon = True ÊàñËÄÖ‰ΩøÁî® `os._exit()` Âº∫Âà∂ÈÄÄÂá∫Ôºö

EventLoop ‰∏çÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºå‰∏Ä‰∏™ EventLoop Âè™ËÉΩÂú®‰∏Ä‰∏™Á∫øÁ®ãÂÜÖË∞ÉÂ∫¶ÂíåÊâßË°å‰ªªÂä°ÔºåÂπ∂‰∏îÂêå‰∏ÄÊó∂Èó¥Âè™Êúâ‰∏Ä‰∏™‰ªªÂä°Âú®ËøêË°åÔºåÂõ†Ê≠§Âú® A Á∫øÁ®ã‰∏≠ËøêË°åÁöÑ EventLoop Ôºå‰∏çËÉΩ‰ΩøÁî®ÂÆÉÊù•Ë∞ÉÂ∫¶ B Á∫øÁ®ãÁöÑ‰ªªÂä°„ÄÇÂΩìÁ®ãÂ∫èË∞ÉÁî® get_event_loop() Ëé∑Âèñ EventLoop Â∫îÁî®Êó∂Ôºå‰ºö‰ªé‰∏Ä‰∏™Êú¨Âú∞ÁöÑ Thread Local ÂØπË±°Ëé∑ÂèñÂ±û‰∫éÂΩìÂâçÁ∫øÁ®ãÁöÑ EventLoop„ÄÇÂú®‰∏ªÁ∫øÁ®ã‰∏≠ÔºåË∞ÉÁî® get_event_loop() ÊÄªËÉΩËøîÂõûÂ±û‰∫é‰∏ªÁ∫øÁ®ãÁöÑ EventLoop ÂØπË±°„ÄÇ

‰ΩÜÂ¶ÇÊûúÊúâË¶ÅÂ∞ÜÂ§ö‰∏™Âü∫‰∫é asyncio ÁöÑÂçèÁ®ãËøêË°åÂú®‰∏çÂêåÁ∫øÁ®ã‰∏≠ÁöÑÈúÄÊ±ÇÔºåÂèØÂàõÂª∫‰∏Ä‰∏™ EventLoopÔºåÂú®Â≠êÁ∫øÁ®ã‰∏≠‰ΩøÁî® asyncio.set_event_loop() ‰∏∫Â≠êÁ∫øÁ®ãËÆæÁΩÆÂÖ∂‰∫ã‰ª∂Âæ™ÁéØÔºåËøôÊ†∑Ë∞ÉÁî® get_event_loop() ÊâçËÉΩËé∑ÂèñÂà∞ÂÖ≥ËÅîÁöÑ EventLoop ÂØπË±°„ÄÇ

‰∏∫‰∏ìÈó®Ëß£ÂÜ≥ÈíàÂØπÁ∫øÁ®ãÂÆâÂÖ®ÁöÑË∞ÉÁî® asyncio Êèê‰æõ‰∫Ü run_coroutine_threadsafe() ÊñπÊ≥ïÔºåÊúâÂá†‰∏™Ë¶ÅÁÇπÔºö

1. Êèê‰∫§‰∏Ä‰∏™ÂçèÁ®ã‰ªªÂä°Âà∞ÂèÇÊï∞ÊåáÂÆöÁöÑ EventLoop Âæ™ÁéØ‰∏≠ËøêË°åÔºõ
2. ËøîÂõû Futures ‰æõÊü•ËØ¢ÁªìÊûúÔºõ
3. ÂΩì‰∫ã‰ª∂Âæ™ÁéØËøêË°åÊó∂, ÂøÖÈ°ªÂú®Áõ∏ÂêåÁ∫øÁ®ã‰∏ãÊ∑ªÂä†ÂçèÁ®ã‰ªªÂä°Âà∞Ê≠§Âæ™ÁéØ‰∏≠Ôºõ
4. ÂÖ∂ÂÜÖÈÉ®Áî®Âà∞‰∫Ü call_soon_threadsafe„ÄÇ

ÈÇ£‰πà call_soon_threadsafe ‰∏é call_soon Áõ∏ÊØîÔºå‰∏ªË¶ÅÂú®ÂâçËÄÖÂ§ö‰∫Ü‰∏Ä‰∏™`_write_to_self`Ë∞ÉÁî®„ÄÇÈÄöËøáÂéü‰ª£Á†ÅÂèØ‰ª•ÂèëÁé∞ÔºåEventLoop ÂÖ∂ÂÜÖÈÉ®‰ºöÁª¥Êä§ÁùÄ‰∏Ä‰∏™ self-pipeÔºåÂÆÉÁî±‰∏ÄÂØπ socketpair ÁªÑÊàêÔºå`_write_to_self` ÁöÑ‰ΩúÁî®Â∞±ÊòØÊää‰∏Ä‰∏™‰ø°Âè∑ÂÜôÂà∞ `self-pipe` ÁöÑ‰∏ÄÁ´Ø„ÄÇËøôÊ†∑‰∏ÄÊù•ÔºåEventLoop Âú®Ê£ÄÊµãÂà∞ self-pipe ÂèëÁîü‰∫ã‰ª∂ÂêéÔºåÂ∞±‰ºöÂìçÂ∫îÂπ∂Âî§ÈÜí‰∫ã‰ª∂Âæ™ÁéØÊù•Â§ÑÁêÜ‰ªªÂä°„ÄÇ

Â¶ÇÊûú‰ª•‰∏äÈù¢ÁöÑÊñπÂºèÂÜôÂπ∂ÂèëÊúçÂä°Âô®ÂæàÊúâÂèØËÉΩ‰ºöÈÅáÂà∞‰∏Ä‰∏™ÈóÆÈ¢òÔºåÂèØ‰ª•ÊúâÂ§ö‰∏™ÂÆ¢Êà∑Á´ØËøûÊé•ËøõÊù•Ôºå‰ΩÜÊòØÂè™Êúâ‰∏Ä‰∏™ËøõÂÖ•‰∫Ü‰∫§‰∫íÁä∂ÊÄÅËÄå‰∏î‰∏ÄÁõ¥‰øùÊåÅÔºåÂèØ‰ª•ËØïÁùÄËøêË°å‰ª•‰∏ãÁ®ãÂ∫èÔºö

    #!/usr/bin/env python
    #!encoding: utf-8
    # python 3.5+ await, async

    import socket
    import asyncio
    import itertools
    import sys, os

    loop = asyncio.get_event_loop()

    async def reader(client):
        # data = await loop.sock_recv(client, 1024)
        # return data.decode()
        write, flush = sys.stdout.write, sys.stdout.flush
        for char in itertools.cycle('|/-\\'):
            try:
                data = client.recv(1024)
                return data.decode()
            except BlockingIOError:
                write(char)
                flush()
                write('\x08' * len(char))
                # await asyncio.sleep(0.1)  # AVOID BLOCKING CURRENT THREADING!
                continue
            except Exception as e:
                print("reader exception: %s" % e)
                break

    async def writer(client, data):
        await loop.sock_sendall(client, data.encode())
        # client.send(data.encode())


    async def handler(client):
        hello = await reader(client)
        peer = client.getpeername()
        print("client hello <%s:%s>: %s" % (peer[0], peer[1], hello))
        hello = 'Welcome! this is %s' % __file__
        # await loop.sock_sendall(client, str.encode(hello))
        client.send(hello.encode())
        while True:
            msg = await reader(client)
            if msg == None:
                break

            print("echo <%s:%s>: %s" % (peer[0], peer[1], msg))
            if msg == 'exit':
                print('client %s:%d disconnected[%d] ...' % (peer[0], peer[1], len(asyncio.all_tasks())))
                client.close()
                break
            elif msg == 'kill':
                msg = "%s & Server sucide ..." % msg
                await writer(client, msg)
                print(msg)
                client.close()
                os._exit(0)
            else:
                await writer(client, msg)

    async def echo_server():
        target = ('0.0.0.0', 8888)
        srv = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        srv.setblocking(False)
        srv.bind(target)
        srv.listen(5)
        print('listening %s:%s ...' % (target[0], target[1]))

        while True:
            # addr = ('IP', port)
            client, addr = await loop.sock_accept(srv)
            # try:
            #     client, addr = srv.accept()
            # except BlockingIOError:
            #     await asyncio.sleep(0.1)
            #     continue
            peer = client.getpeername()
            print('[%d]client %s:%d connected.' % (len(asyncio.all_tasks()), peer[0], peer[1]))
            loop.create_task(handler(client))

    loop.create_task(echo_server())
    loop.run_forever()


ÂèØ‰ª•‰ΩøÁî®‰ª•‰∏ã‰∏§‰∏™ÂëΩ‰ª§ËøûÊé•Âà∞ÊúçÂä°Âô®ËøõË°åÊµãËØïÔºåcurl Ê®°ÊãüËøõË°å Web ËØ∑Ê±ÇÔºåtelnet ÂèØ‰ª•ËøõË°å‰∫§‰∫íÂºèÁöÑÊìç‰ΩúÔºö

    curl 127.0.0.1:8888
    telnet 127.0.0.1 8888

Âú®Â§ö‰∏™ÂÆ¢Êà∑Á´ØËøûÊé•Êó∂ÔºåÊòæÁ§∫Êó∂ÊàêÂäüÁöÑÔºå‰ΩÜÊòØÊúçÂä°Âô®Á´ØÂπ∂Ê≤°ÊúâËøûÊé•ÊàêÂäüÁöÑ‰ø°ÊÅØÊèêÁ§∫„ÄÇËøôÊòØÂõ†‰∏∫ÂçèÁ®ã‰ºöÂØπÂÖ∂ÊâÄÂú®ËøõË°åÈòªÂ°û Blocking Êìç‰ΩúÔºåÂ¶Ç IO Êó∂‰ºöÈòªÂ°ûÊéâÊï¥‰∏™Á∫øÁ®ãÔºåËÄå Python ÁöÑÂçèÁ®ãÊó∂Âü∫‰∫éÂçïÁ∫øÁ®ãÁöÑÔºåÊâÄ‰ª•ÁΩëÁªúËØ∑Ê±ÇÊàñ time.sleep() ÈÉΩ‰ºöÈòªÂ°ûÊï¥‰∏™Á®ãÂ∫è„ÄÇÂåÖÊã¨‰ª•‰∏äÂÆûÂàóÔºåÂç≥‰ΩøËÆæÁΩÆ‰∫Ü setblocking(False) ÈùûÈòªÂ°ûÊ®°ÂºèÁöÑ socketÔºåÂõ†‰∏∫ reader() ÊñπÊ≥ï‰ΩøÁî®ÁöÑÊòØ‰∏Ä‰∏™Êó†ÈôêÂæ™ÁéØÔºåÂú®ÊéßÂà∂Âè∞‰∏äÊâìÂç∞Âä®ÊÄÅÊèêÁ§∫Â≠óÁ¨¶ÔºåÊºèÊéâ‰∫ÜÂ∞ÜÁ∫øÁ®ãÁöÑÊó∂Èó¥ÁâáÂΩíËøòÂà∞ EventLoopÔºå‰ªéËÄå‰ΩøÂæó‰∏ªÁ∫øÁ®ãÊ†πÊú¨Êó†Ê≥ïÂìçÂ∫îÂÖ∂ÂÆÉÂÆ¢Êà∑Á´ØÁöÑËøûÊé•ËØ∑Ê±Ç„ÄÇËß£ÂÜ≥ÂäûÊ≥ïÂ∞±ÊòØÂú® BlockingIOError ÂºÇÂ∏∏Â§ÑÁêÜ‰∏≠Âä†ÂÖ• asyncio.sleep() Â∞ÜÊµÅÁ®ãÊéßÂà∂ÊùÉÂΩíËøòÁªô EventLoop„ÄÇ

    await asyncio.sleep(0.1)  # AVOID BLOCKING CURRENT THREADING!

Âú®ÈùûÈòªÂ°ûÊ®°Âºè‰∏ãÔºåsocket.accept() ÊâßË°åÊó∂Ê≤°ÊúâÂÆ¢Êà∑Á´ØË¶ÅÊ±ÇËøûÊé•ÔºåÊàñ recv() Ë∞ÉÁî®Êó∂Á≥ªÁªüÁºìÂÜ≤Âå∫Ê≤°Êúâ‰ªª‰ΩïÊï∞ÊçÆÈÉΩ‰ºöËß¶Âèë BlockingIOError ÂºÇÂ∏∏ÔºåËøô‰∏™ÂºÇÂ∏∏Âá∫Áé∞Êó∂Â∞±ÂèØ‰ª•ÊöÇÊó∂ÊåÇËµ∑ÂΩìÂâçÂçèÁ®ãÔºåÂéªÂ§ÑÁêÜÂÖ∂ÂÆÉ‰∫ãÂä°„ÄÇsocket ÈªòËÆ§ÂÄºÊòØÈòªÂ°ûÊ®°ÂºèÔºå‰ºöÈòªÂ°ûÊï¥‰∏™‰∏ªÁ∫øÁ®ãÔºå‰∏çËÉΩÂú®ÂçèÁ®ãÂπ∂ÂèëÂú∫ÊôØ‰∏ã‰ΩøÁî®ÔºåÂåÖÊã¨ time.sleep() ‰πüÊòØ„ÄÇ

    sock.setblocking(True)  blocking mode
    sock.settimeout(None)   blocking mode

    sock.setblocking(False) non-blocking
    sock.settimeout(0.0)    non-blocking

Â∫ïÂ±Ç socket ÂáΩÊï∞ÂèØ‰ª•ÂèÇËÄÉÂÆòÊñπÊñáÊ°£ÁöÑ socket ‚Äî Low-level networking interface ÈÉ®ÂàÜ„ÄÇ‰ΩøÁî®ÂçèÁ®ãÂÆûÁé∞Âπ∂ÂèëÊó∂Ôºåsocket ÂøÖÈ°ª‰ª•ÈùûÈòªÂ°ûÊñπÂºèËøêË°åÔºåÂê¶Âàô‰∏ªÁ∫øÁ®ã‰ºöÂõ†‰∏∫ socket.accept() ÊñπÊ≥ïÁöÑÈòªÂ°ûËÄåÊó†Ê≥ïÊ≠£Â∏∏ÊâßË°åÂÖ∂ÂÆÉÂçèÁ®ã‰ªªÂä°„ÄÇÂ∞Ü socket ËÆæÁΩÆ‰∏∫ÈùûÈòªÂ°ûÁä∂ÊÄÅÊó∂Ôºåsocket.accept() ÊâßË°åÊó∂Â∞±‰ºöÂú®Ê≤°ÊúâÈúÄË¶ÅËøûÊé•ÁöÑÂÆ¢Êà∑Á´ØÊó∂Á´ãÂç≥ËøîÂõû BlockingIOError ÂºÇÂ∏∏„ÄÇÂõ†Ê≠§‰ª£Á†ÅÂ∞±Ë¶ÅÊî∂Âà∞Ëß£ÂÜ≥Ëøô‰∏™ÂºÇÂ∏∏ÔºåÂπ∂Â∞ÜÊµÅÁ®ãÊéßÂà∂Âô®ÂΩíËøòÁªô EventLoopÔºö

    try:
        client, addr = srv.accept()
    except BlockingIOError:
        await asyncio.sleep(0.1)
        continue

‰∏∫‰∫ÜÁÆÄÂåñ‰ª£Á†ÅÔºåasyncio Âú® EventLoop Êèê‰æõ‰∫ÜËøôÈÉ®ÂàÜÁöÑÂ∫ïÂ±ÇÊñπÊ≥ïÁöÑÂåÖË£ÖÁâàÊú¨Ôºå‰∏äÈù¢ÁöÑ‰ª£Á†ÅÂ∞±ÂèØ‰ª•Á≠â‰ª∑‰Ωú‰∏∫ client, addr = await loop.sock_accept(srv)Ôºö

    coroutine AbstractEventLoop.sock_recv(sock, nbytes)
    coroutine AbstractEventLoop.sock_recv_into(sock, buf)
    coroutine AbstractEventLoop.sock_sendall(sock, data)
    coroutine AbstractEventLoop.sock_connect(sock, address)
    coroutine AbstractEventLoop.sock_accept(sock)
    coroutine AbstractEventLoop.sock_sendfile(sock, file, offset=0, count=None, *, fallback=True)

reader() ÊñπÊ≥ï‰πüÂèØ‰ª•‰ΩøÁî® sock_recv() ËÄå‰∏çÁî®ÂéªÁêÜ BlockingIOError ÂºÇÂ∏∏Ôºå‰∏∫‰∫ÜÂú® reader() ËØªÂèñÊï∞ÊçÆÊó∂Âä†ÂÖ•Âä®ÊÄÅÊñáÂ≠óÊïàÊûúÔºåËøòÊòØÂèØ‰ª•‰ΩøÁî®ÂéüÂßãÁöÑÊñπÊ≥ïÂ§öÂÜôÂá†Ë°å‰ª£Á†ÅÔºå‰ΩÜÊòØËøôÊ†∑ÁöÑÂÆöÂà∂Êõ¥ÁÅµÊ¥ªÔºö

    async def reader(client):
        data = await loop.sock_recv(client, 1024)
        return data.decode()

Ê†πÊçÆ TCP ÂçèËÆÆÂª∫Á´ãÂíåÁªìÊùüËøûÊé•ÂÆö‰πâÔºå‰∏âÊ¨°Êè°ÊâãÂª∫Á´ãÔºåÂõõÊ¨°Êå•Êâã Four-Way Wavehand ÁªàÊ≠¢ËøûÊé•„ÄÇsocket ËøûÊé•ÁöÑ A ÊñπÂú®Ë∞ÉÁî® close() ÊñπÊ≥ïÊó∂Âè™ÊòØÂáÜÂ§áÊñ≠ÂºÄËøûÊé•Ôºå‰ºöÁªô B ÊñπÂèëÈÄÅ FIN ‰ø°Âè∑ÔºåB ÊñπÊî∂Âà∞ FIN ‰ø°Âè∑ÂåÖÔºåTCP Â±Ç‰ºöÂõûÂ§ç ACK ‰ø°Âè∑ÔºåÁÑ∂ÂêéËøõÂÖ•ÂçäÂÖ≥Èó≠Áä∂ÊÄÅ Half-CloseÔºåÂç≥ socket Áä∂ÊÄÅÂ∞±Â§Ñ‰∫é CLOSE_WAIT Áä∂ÊÄÅ„ÄÇËøô‰∏ÄÊù•‰∏ÄÂõûÔºåFIN - ACK ÁöÑ‰∫§‰∫íÈÉΩÊòØ TCP Â∫ïÂ±ÇÁöÑ‰ªªÂä°„ÄÇÊ≠§Êó∂ socket ‰∏ªÂä® close() ÁöÑ‰∏ÄÊñπÔºåÂç≥ A Êñπ‰∏çËÉΩÂÜç‰∏ªÂä®ÂèëÈÄÅÊï∞ÊçÆÔºåËÄå B ÊñπËøòÊòØÂèØ‰ª• send()ÔºåÂπ∂‰∏îÂèëÈÄÅÂÆåÊï∞ÊçÆ‰πãÂêé‰πüÂ∫îËØ•Â∞ΩÂø´Ë∞ÉÁî® close() ÂÆåÂÖ®ÂÖ≥Èó≠ËøûÊé•„ÄÇB ÂèëÈÄÅ FIN Áªô A ÊñπÊâçËÉΩÂèò‰∏∫ LAST_ACKÔºåA Êé•Êî∂Âà∞Âà∞ÂêéÂõûÂ∫î ACK ‰ø°Âè∑ÔºåÊâçËøõÂÖ• CLOSED Áä∂ÊÄÅ„ÄÇÂ¶ÇÊûúÂ∫îÁî®Â±Ç‰∏çË∞ÉÁî® close()ÔºåÈÇ£‰πà socket ‰ºö‰∏ÄÁõ¥Â§Ñ‰∫é CLOSE_WAIT„ÄÇ recv() ËøîÂõû None Êó∂ÔºåÂ∞±ÊòØË°®ÊòéÊñ≠ÂºÄ‰∫Ü„ÄÇ‰∏Ä‰∏™Â∏∏ËßÑÁöÑÊé¢ÊµãÊñπÊ≥ïÊòØ‰ΩøÁî®ÂøÉË∑≥Êú∫Âà∂ÔºåÂÆöÊó∂ÁªôÊúçÂä°Âô®ÂèëÈÄÅ heartbeat Êï∞ÊçÆÂåÖÔºåÊ†πÊçÆËé∑ÂæóÁöÑÂõûÂ§çÂÜÖÂÆπÁ°ÆÂÆöËøûÊé•Áä∂ÊÄÅ„ÄÇ

ÈÄöËøá socket.sendall() ÂèëÈÄÅÂÆåÊâÄÊúâÊï∞ÊçÆ‰πü‰ºöÂÖ≥Èó≠ socketÔºå‰ΩÜÊúâÂèØ‰ª•‰ºöÂõ†‰∏∫Êï∞ÊçÆËæÉÂ§ßÔºåÂç°Âú®Êüê‰∏™‰ΩçÁΩÆ‰∫ÜÔºåËøôÂ∞±‰ºöÂØºËá¥ socket ‰∏ÄÁõ¥Â§ÑÂú® CLOSE_WAIT Áä∂ÊÄÅ„ÄÇÊâÄ‰ª•Ë¶ÅÂéªÂà§Êñ≠ socket Áä∂ÊÄÅÔºåÁ°ÆÂÆöÊòØÂê¶ÂÖ≥Èó≠ socket„ÄÇÂ∫ïÂ±ÇÊèê‰æõ‰∫Ü socket.shutdown(how) ÊñπÊ≥ïÊù•Â§ÑÁêÜÂçäËøûÊé•Áä∂ÊÄÅÔºåÈúÄË¶ÅÂú® close() ÈáäÊîæËøûÊé•‰πãÂâçÊâßË°åÂÆÉÔºåhow = SHUT_RD ‰∏çÂÜçÊé•Êî∂Êï∞ÊçÆÔºåhow = SHUT_WR ‰∏çÂÜçÂèëÈÄÅÊï∞ÊçÆÔºåÂç≥ Shutdown Write ChannelÔºåhow = SHUT_RDWR ÂÆåÂÖ®ÂÖ≥Èó≠Ôºå‰∏çÂèëÈÄÅÊï∞ÊçÆ‰πü‰∏çÊé•Êî∂Êï∞ÊçÆ„ÄÇSHUT_RD„ÄÅSHUT_WR„ÄÅSHUT_RDWR ‰∏â‰∏™ÈùôÊÄÅÂèòÈáèÂàÜÂà´ÂØπÂ∫îÊï∞Â≠óÂ∏∏Èáè 0„ÄÅ1„ÄÅ2„ÄÇshutdown() ‰ºöÁ´ãÂç≥ flush ÁºìÂÜ≤Âå∫ÔºåÂ∞ÜÁºìÂÜ≤Âå∫ÂÖ®Êï∞ÂèëÈÄÅÊ∏ÖÁ©∫ÔºåËøôÊ†∑ÂèØ‰ª•ÊèêÂâçÂèëÁé∞ÈîôËØØ„ÄÇÂèëÈÄÅ FIN/EOF ÁªôÊâÄÊúâsocketÁöÑÊåÅÊúâÁ∫øÁ®ãÔºåÂëäËØâ‰ªñ‰ª¨Ëøô‰∏™ socket Â∑≤ÁªèÂÖ≥Èó≠‰∫ÜRD/WR/RDWRÔºå‰ª•ÂêéÊâÄÊúâ‰∏çÊ≠£Á°ÆÁöÑ‰ΩøÁî®ÈÉΩ‰ºö‰∫ßÁîü‰∏Ä‰∏™ÈîôËØØ„ÄÇclose() ÊñπÊ≥ïÂÖ∂ÂÆûÂ∞±ÊòØÂÖ≥Èó≠Êñá‰ª∂ÊèèËø∞Á¨¶Ôºåsocket Êñá‰ª∂ÁöÑÂºïÁî®Âáè‰∏Ä„ÄÇ

TCP ÊòØÊµÅÊñπÂºèÔºåÊúâÁ≤òÂåÖÂíåÊºèÂåÖÁöÑÈóÆÈ¢òÔºå‰∏çËÉΩ‰øùËØÅ‰∏ÄËæπÂèëÈÄÅ 5B Êó∂ÂØπÊñπ‰ºöÈ©¨‰∏äÊî∂Âà∞ÔºåÊúâÂèØËÉΩËøûÁª≠ÂèëÈÄÅ 2 Ê¨° 5BÔºåÂØπÊñπ‰∏ÄÊ¨°Êî∂Âà∞ 10BÔºåÊàñËÄÖÂèëÈÄÅ 10BÔºåÂØπÊñπÂè™Êî∂Âà∞ 5BÔºåÂêéÈù¢ÊâçÊî∂Âà∞Âè¶Â§ñ 5B„ÄÇÊâÄ‰ª•‰∏ÄËà¨ÂçèËÆÆÈáåÈÉΩÈúÄË¶ÅÂêåÊ≠•Â§¥ÂíåÊï∞ÊçÆÈïøÂ∫¶Á≠â‰ø°ÊÅØÔºåËÆ©Â∫îÁî®Â±ÇÊù•Á°ÆÂÆöÊ∂àÊÅØËæπÁïå„ÄÇËøôÊ∂âÂèäÂà∞ recv() Êé•Êî∂ÂáΩÊï∞Âú®‰ªÄ‰πàÊÉÖÂÜµ‰∏ãËøîÂõûÁöÑÈóÆÈ¢ò„ÄÇ

socket ‰ªéÊé•Êî∂ÁºìÂ≠òÂå∫ËØªÂèñÂÜÖÂÆπ‰∏é kernel ÂêëÊé•Êî∂ÁºìÂ≠òÂå∫Â°´ÂÖÖÂÜÖÂÆπÊòØ‰∫íÊñ•ÁöÑ‰∏§‰∏™ËøáÁ®ãÔºårecv() Âè™‰ªéÊé•Êî∂ÁºìÂ≠òÂå∫‰∏≠Ëé∑Âèñ‰∏ÄÊ¨°ÂÜÖÂÆπÔºåÂè™ÂÖ≥ÂøÉËé∑ÂèñÊó∂Êé•Êî∂ÁºìÂ≠òÂå∫ÊúâÂ§öÂ∞ëÂÜÖÂÆπÔºö

a„ÄÅÁºìÂ≠òÂå∫‰∏≠Ê≤°ÊúâÊï∞ÊçÆÔºåÂàôËøõÂÖ•Êé•Êî∂ÈòªÂ°ûÁä∂ÊÄÅÔºåÁ≠âÂæÖ kernel Âú®ÁºìÂ≠òÂå∫Â°´ÂÖ•Êï∞ÊçÆÂêéÈáçÊñ∞ÊøÄÊ¥ª„ÄÇ
b„ÄÅÁºìÂ≠òÂå∫‰∏≠ÁöÑÊï∞ÊçÆÊØîÁî®Êà∑Êé•Êî∂‰ΩøÁî®ÁöÑ buffer Â§ßÔºåÂàô recv ÂáΩÊï∞ËøîÂõû buffer Â§ßÂ∞èÁöÑÊï∞ÊçÆ„ÄÇ
c„ÄÅÁºìÂ≠òÂå∫‰∏≠ÁöÑÊï∞ÊçÆÊØîÁî®Êà∑Êé•Êî∂‰ΩøÁî®ÁöÑ buffer Â∞èÔºåÂàô recv ÂáΩÊï∞ËøîÂõûÁºìÂ≠òÂå∫‰∏≠ÁöÑÊâÄÊúâÊï∞ÊçÆ„ÄÇ

kernel ÂêëÊé•Êî∂ÁºìÂ≠òÂå∫Â°´ÂÖÖÂàôÊòØÊî∂Âà∞Êï∞ÊçÆÂåÖÂêéÂà∞Ëá™Â∑±ÁöÑÊó∂Èó¥ÁâáÂπ∂‰∏îÁºìÂ≠òÂå∫Á©∫Èó≤Áä∂ÊÄÅ‰∏ãÔºåÂàôÂ∞ÜÊãøÂà∞ÁöÑÂåÖÂÜÖÂÆπÂÖ®ÈÉ®ÊîæÂÖ•ÁºìÂ≠òÂå∫‰∏≠„ÄÇ

‰∏çË¶ÅÊúüÂæÖÂà©Áî® TCP ÂçèËÆÆÂèåÊñπ send ‰∏ÄÊ¨°ÔºåÂè¶‰∏ÄÊñπ recv ‰∏ÄÊ¨°ÁöÑÈÄªËæëÔºåËøôÁßçÈÄªËæëÊòØ‰∏çÂèØÈù†Ôºå‰πüÊ≤°ÊúâÁêÜËÆ∫‰æùÊçÆÔºå‰∏çÁ¨¶Âêà TCP ÂçèËÆÆËßÑÂàô„ÄÇÈúÄË¶ÅÂõ∫ÂÆöÂåÖÂ§ßÂ∞èÁöÑÔºåÂú®Êú¨Êú∫ËøõË°åÊ∂àÊÅØÈÄªËæëÊéßÂà∂ÔºåÊàñËÄÖËØ¥‰ø°‰ª§Á∫ß‰º†ËæìÔºåÂª∫ËÆÆ‰ΩøÁî® UDP ÂçèËÆÆ„ÄÇËã•ÂøÖÈ°ªË¶Å‰ΩøÁî® TCP Ê∂àÊÅØ‰º†ËæìÊó∂ÔºåÂèØ‰ª•Âú®Â∫îÁî®Â±ÇË¶ÅÂä†ÂêåÊ≠•Â§¥Â§ÑÁêÜÔºå‰æãÂ¶Ç‰∏Ä‰∏™Âõ∫ÂÆöÁöÑÂÄºÔºåÁî®Êù•ÂàÜÂâ≤Êï∞ÊçÆÂåÖÊàñËÄÖÈ™åËØÅÊòØÂê¶ÂåÖ‰π±Â∫èÊàñË∂äÁïå„ÄÇ

ÊúÄÂêéÔºåÈÖçÂêàÊµãËØïÁöÑÂÆ¢Êà∑Á´ØÂèØ‰ª•ËøôÊ†∑ÂÆûÁé∞Ôºö

    #!/usr/bin/env python
    #!encoding: utf-8

    import socket

    conn = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    conn.connect(('127.0.0.1', 8888))
    print('server connected ...')

    data = "Hello! this is %s" % __file__
    conn.send(data.encode())

    hello = conn.recv(1024).decode()
    print("server hello: %s" % hello)

    while True:
        data = input('send: ')
        if not data:
            continue
        try:
            sz = conn.send(data.encode())
        except Exception as e:
            print('Exception %s' % e)

        if data == 'exit':
            conn.shutdown(socket.SHUT_RDWR)
            conn.close()
            break
        else:
            response = conn.recv(1024)
            if response == None:
                print("None received!")
            msg = response.decode()
            print('receive: ' + msg)

        if data == 'kill':
            conn.close()
            break


‰ª•ÈùûÈòªÂ°ûÊñπÂºèËøêË°åÁöÑÂÆûÁé∞Ôºö

    #!/usr/bin/env python
    #!encoding: utf-8

    import socket, time, asyncio, sys

    server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    server.setblocking(False)

    while True:
        try:
            server.connect(('127.0.0.1', 8888))
            print('server connected ...')
            break
        except BlockingIOError as e:  # errno = 10035
            print("connect %s %s %s" % (type(e), e.errno, e.strerror))
            # time.sleep(0.3)
            continue
        except OSError as e:
            print("connect %s %s %s" % (type(e), e.errno, e.strerror))
            if e.errno == 10056:  # reconnected
                break
            elif e.errno == 10022:  # server down!
                sys.exit(0)
        except Exception as e:
            print("connect %s %s" % (type(e), e))
            continue

    data = "Hello! this is %s" % __file__
    server.send(data.encode())


    def write(msg):
        try:
            server.send(msg.encode())
        except Exception as e:
            print('write %s %s' % (type(e), e))


    def read():
        while True:
            try:
                hello = server.recv(1024)
                return hello
            except BlockingIOError as e:
                time.sleep(0.3)
                print("read %s %s %s" % (type(e), e.errno, e.strerror))
                continue
            except Exception as e:
                print("read %s %s" % (type(e), e))
                return e

    hello = read()
    if not issubclass(type(hello), Exception):
        print("server hello: %s" % hello.decode())

    while True:
        data = input('send: ')
        if not data:
            continue
        write(data)
        if data == 'exit':
            server.shutdown(socket.SHUT_RDWR)
            server.close()
            break
        else:
            response = read()
            if not issubclass(type(response), Exception):
                msg = response.decode()
                print('receive: ' + response.decode())
            if isinstance(response, ConnectionAbortedError):
                print("ConnectionAbortedError")
                server.close()
                break

        if data == 'kill':
            server.close()
            break


## ==‚ö° echo server with threading

    #! /usr/bin/env python3
    # -*- coding:utf-8 -*-
    # asyncio echo-server

    import asyncio, threading, queue, socket, os, sys, time, itertools

    conf = ('127.0.0.1', 8888, )
    server = socket.socket()
    server.setblocking(False)
    server.bind(conf)
    server.listen()

    client_loop = asyncio.new_event_loop()
    queueIncome = queue.Queue(100)
    KILL = False

    async def request(conn):
        # data = await client_loop.sock_recv(conn, 1024)
        # return data
        while True:
            try:
                data = conn.recv(1024)
                return data
            except BlockingIOError as e:
                await asyncio.sleep(0.2)
            except Exception as e:  # ConnectionAbortedError
                return e

    async def response(conn, data):
        try:
            return await client_loop.sock_sendall(conn, data)
            # conn.send(data)
        except Exception as e:
            print(e)
            return e


    async def interactive(conn, addr):
        global KILL
        msg = "Hello! this is %s" % (__file__)
        conn.send(msg.encode())
        hello = await request(conn)
        if not issubclass(type(hello), Exception):
            print("client hello: %s" % hello.decode())

        while True:
            receive = await request(conn)
            if issubclass(type(receive), Exception):
                print("Request Exception %s %s" % (type(receive), receive))
                return
            req = receive.decode('utf-8')
            print('echo %s:%s: %s' % (addr[0], addr[1], req))
            if req == "kill":
                msg = 'Server sucide...'
                print(msg)
                conn.send(msg.encode())
                conn.close()
                KILL = True
                try:
                    # os._exit(0)
                    sys.exit(0)  # kill current thread onlly
                except SystemExit as e:  # got error code
                    print("client kill ", e)
                break
            elif req == "bye":
                msg = 'Server bye...'
                conn.send(msg.encode())
                conn.shutdown(socket.SHUT_RDWR)
                conn.close()
                return None
            await response(conn, receive)  # Echo Reuqest to Response


    async def agent():
        print("agent running ...")
        agent_loop = asyncio.get_event_loop()
        while True:
            if KILL:
                break
            try:
                thread = threading.current_thread()
                if queueIncome.empty():
                    await asyncio.sleep(0.3)
                    continue
            except Exception as e:
                print("thread %s %s" % (type(e), e))
            item = queueIncome.get()  # blocking if queue is empty
            conn, addr = item[0], item[1]
            client_loop.create_task(interactive(conn, addr))
            count = len(asyncio.all_tasks(agent_loop))
            print("client dectected [%d] %s:%s" % (count, addr[0], addr[1]))
        agent_loop.stop()
        print("agent stop ...")

    async def spinner():
        write, flush = sys.stdout.write, sys.stdout.flush
        print("spinner running ...")
        for char in itertools.cycle('CGOGCGOGC-\\|/-\\'):
            if KILL:
                break
            write('%s%s' % (char, '\x08' * len(char)))
            flush()
            await asyncio.sleep(0.1)
        print("spinner stop ...")


    def start_loop():
        asyncio.set_event_loop(client_loop)
        # client_loop.run_until_complete(asyncio.wait([
        #     spinner(),
        #     agent(),
        # ]))
        # client_loop.run_until_complete(asyncio.gather(
        #     spinner(),
        #     agent(),
        # ))
        # asyncio.run_coroutine_threadsafe(spinner(), client_loop)
        # asyncio.run_coroutine_threadsafe(agent(), client_loop)
        client_loop.create_task(agent())
        client_loop.create_task(spinner())
        client_loop.run_forever()
        client_loop.close()
        print("start_loop stop ...")


    async def server_run():
        print("running server on %s:%s" % (conf[0], conf[1]))

        thread = threading.Thread(target=start_loop, args=())
        thread.daemon = True
        thread.start()
        # thread.join()  # block and wait until thread terminated

        while True:
            if not thread.is_alive():
                print("daemon thread terminated.")
                break
            # conn, addr = await srv_loop.sock_accept(server)
            try:
                conn, addr = server.accept()
            except BlockingIOError:
                await asyncio.sleep(0.3)
                continue

            queueIncome.put((conn, addr, ))
            print('client connected %s:%s' % (addr[0], addr[1]))
        print("Server down ...")

    if __name__ == '__main__':

        try:
            asyncio.run(server_run())
        except KeyboardInterrupt:
            pass

        # srv_loop = asyncio.new_event_loop()
        # srv_loop.run_until_complete(server_run())

        # task = asyncio.ensure_future(server_run(), loop=srv_loop)
        # srv_loop.run_until_complete(task)

        # asyncio.run_coroutine_threadsafe(server_run(), srv_loop)
        # asyncio.ensure_future(server_run(), loop=srv_loop)
        # srv_loop.create_task(server_run())
        # srv_loop.run_forever() 


## ==‚ö° apscheduler ‰ªªÂä°Ë∞ÉËØï
- [Advanced Python Scheduler](https://pypi.org/project/APScheduler/)
- [User guide](https://apscheduler.readthedocs.io/en/3.x/userguide.html)
- [Examples](https://github.dev/agronholm/apscheduler/tree/3.x/examples)
- [IntervalTrigger](https://apscheduler.readthedocs.io/en/3.x/modules/triggers/interval.html)
- [Threading.timer](library/threading.rst)

APScheduler ‰ΩúÁî®‰∏∫Âú®ÊåáÂÆöÁöÑÊó∂Èó¥ËßÑÂàôÊâßË°åÊåáÂÆöÁöÑ‰Ωú‰∏ö„ÄÇ

ÊåáÂÆöÊó∂Èó¥ËßÑÂàôÁöÑÊñπÂºèÂèØ‰ª•ÊòØÈó¥ÈöîÂ§ö‰πÖÊâßË°åÔºåÂèØ‰ª•ÊòØÊåáÂÆöÊó•ÊúüÊó∂Èó¥ÁöÑÊâßË°åÔºå‰πüÂèØ‰ª•Á±ª‰ºº Linux Crontab ÊñπÂºèÊâßË°å‰ªªÂä°„ÄÇ

APScheduler has four kinds of components:

- triggers
- job stores
- executors
- schedulers

Choosing the right scheduler, job store(s), executor(s) and trigger(s)

Your choice of scheduler depends mostly on your programming environment and what you‚Äôll be using APScheduler for. Here‚Äôs a quick guide for choosing a scheduler:

- *BlockingScheduler*: use when the scheduler is the only thing running in your process
- *BackgroundScheduler*: use when you‚Äôre not using any of the frameworks below, and want the scheduler to run in the background inside your application
- *AsyncIOScheduler*: use if your application uses the asyncio module
- *GeventScheduler*: use if your application uses gevent
- *TornadoScheduler*: use if you‚Äôre building a Tornado application
- *TwistedScheduler*: use if you‚Äôre building a Twisted application
- *QtScheduler*: use if you‚Äôre building a Qt application

```py
from apscheduler.scheduler import Scheduler
import datetime as dt

sched = Scheduler()
sched.start()

def timeout(job_fn, *fn_args, **delta_args):
    """Like setTimeout in javascript; returns a job object

    First argument is the function to be called.

    Positional arguments will be passed to the function when it's called.

    Keyword arguemnts will be passed to datetime.timedelta

    Usage:
        # calls `fn()` after 3 seconds
        timeout(fn, seconds=3)

        # calls `fn(foo, bar)` after 10 seconds
        timeout(fn, foor, bar, seconds=10)
    """
    time = dt.datetime.now() + dt.timedelta(**delta_args)
    return sched.add_date_job(job_fn, time, fn_args)
```

Mimic of setInterval()ÔºåÊ≠§Â§ñÔºåThreading Timer ‰πüÂèØ‰ª•ÂÆûÁé∞Âπ∂‰∏î‰∏ç‰ºöÈòªÂ°ûÔºå‰ΩøÁî® asyncio Ê®°ÂùóÁ±ª‰ºº‰ª•‰∏ãÂÆûÁé∞ÔºåË∞ÉÁî® start() ËøõÂÖ•ÈòªÂ°ûÔºö

```py
from datetime import datetime

from apscheduler.schedulers.blocking import BlockingScheduler


def job_function():
    print("Hello World")

sched = BlockingScheduler()

# Schedule job_function to be called every one second
sched.add_job(job_function, 'interval', seconds=1)

sched.start()
```


# =üö© Concurrency in Python
- Operating System Concepts 10th by Abraham Silberschatz, Peter B. Galvin, Greg Gagne
- C++ Concurrency in Action by Anthony Williams
- Seven Concurrency Models in Seven Weeks by Paul Butcher
- Seven Languages in Seven Weeks by Bruce A. Tate
- Learning Python 5th Edition
- Learn Python with Olof Paulson https://scrimba.com/learn/python
- Fearless Concurrency https://doc.rust-lang.org/book/ch16-00-concurrency.html
- Python Concurrency with asyncio by Matthew Fowler
- Mastering Concurrency in Python by Quan Nguyen
- Advanced Python Programming by Lanaro, Dr GabrieleNguyen, QuanKasampalis, Sakis
- GIL ÂÖ®Â±ÄËß£ÈáäÈîÅ https://wiki.python.org/moin/GlobalInterpreterLock
- Understanding the Python GIL by David Beazley http://www.dabeaz.com/GIL/
- The Python GIL Visualized by David Beazley http://www.dabeaz.com/blog/2010/01/python-gil-visualized.html
- https://sqljunkieshare.com/2012/01/06/preemptive-vs-non-preemptive-and-multitasking-vs-multithreading/

CPython ÊòØÁî® C ËØ≠Ë®ÄÁºñÂÜôÁöÑËß£ÈáäÂô®ÔºåÊ≠§Â§ñËøòÊúâ PyPyÔºåJythonÔºåIronPython Á≠âÂÆûÁé∞„ÄÇCPython ÁöÑÁã¨Áâπ‰πãÂ§ÑÂú®‰∫éÂÆÉÊòØÂéüÂßãÁöÑÔºåÁª¥Êä§ÊúÄ‰πÖÔºåÊúÄÂèóÊ¨¢ËøéÁöÑ Python Ëß£ÊûêÂô®„ÄÇ

CPython ÁöÑÂÆûÁé∞‰∏äÔºå‰ΩøÁî®‰∫Ü‰∏Ä‰∏™ÂÖ®Â±ÄËß£ÊûêÈîÅÔºåGlobal Interpreter Lock ËøôÊòØËÑöÊú¨ËØ≠Ë®ÄËß£ÈáäÂô®Áî®‰∫éÂêåÊ≠•Á∫øÁ®ãÁöÑ‰∏ÄÁßçÊú∫Âà∂ÔºåÂÆÉ‰ΩøÂæó‰ªª‰ΩïÊó∂Âàª‰ªÖÊúâ ‰∏Ä‰∏™Á∫øÁ®ãÂú®ÊâßË°åÔºåÂç≥‰æøÂú®Â§öÊ†∏ÂøÉÂ§ÑÁêÜÂô®‰∏ä„ÄÇ

ÊâÄ‰ª•ÔºåÊó†ËÆ∫ÁîµËÑëÊòØÂçïÊ†∏ÂøÉÊàñËÄÖÂ§öÊ†∏ÔºåËøòÊòØ‰ª£Á†Å‰ΩøÁî®‰∫ÜÂ§öÁ∫øÁ®ãÔºåÂõ†‰∏∫ GIL ÁöÑÂ≠òÂú®Ôºå‰πüÂ∞±Âè™ËÉΩËøêË°å‰∏Ä‰∏™Á∫øÁ®ãÔºåÊó†Ê≥ïÂêåÊó∂ËøêË°åÂ§ö‰∏™Á∫øÁ®ã„ÄÇ

Ëøô‰∏™ÈîÅÂÖ∂ÂÆûÊòØ Python ‰πãÁà∂ÊÉ≥‰∏ÄÂä≥Ê∞∏ÈÄ∏Ëß£ÂÜ≥Á∫øÁ®ãÁöÑÂÆâÂÖ®ÈóÆÈ¢òÔºå‰πüÂ∞±ÊòØÁ¶ÅÊ≠¢Â§öÁ∫øÁ®ãÂêåÊó∂ËøêË°å„ÄÇ


È´òÊÄßËÉΩÁ®ãÂ∫èÂºÄÂèëÂÖ•Èó®Ë¶ÅËØÄÂú®‰∫é 3 ‰∏™Ë¶ÅÁÇπÔºö

- ‰∏Ä‰∏™Ê†∏ÂøÉÁõÆÊ†áÔºöÂÆûÁé∞È´òÂπ∂ÂèëÁºñÁ®ãÊ®°ÂûãÔºõ
- ‰∏Ä‰∏™Ê†∏ÂøÉÊâãÊÆµÔºöÂºÇÊ≠•ÁºñÁ®ãÊé•Âè£ÂÆûÁé∞ÂçïÁ∫øÁ®ãÂπ∂ÂèëÁºñÁ®ãÊ®°ÂûãÔºõ
- ‰∏§‰∏™Ê†∏ÂøÉÈóÆÈ¢òÔºöCPU-bound Âíå I/O-bound Âπ∂ÂèëÁºñÁ®ãÊ®°ÂûãËß£ÂÜ≥ÁöÑÊòØ‰∏§Â§ßÈóÆÈ¢òÔºåbound Ë°®Á§∫ÊÄßËÉΩÁì∂È¢àÊâÄÂú®„ÄÇ

‰ªéÂü∫Á°ÄÊ¶ÇÂøµËæ®ÊûêÂÖ•ÊâãÔºö

- ÂêåÊ≠•ÔºàSynchronousÔºâ
- ÂºÇÊ≠•( Asynchronous)
- ÈòªÂ°û( Blocking )
- ÈùûÈòªÂ°û( Nonblocking)

ËøôÂá†‰∏™Ê¶ÇÂøµÁõ¥Êé•Âíå I/O ÂÖ≥ËÅîÔºå‰ΩÜÂèàÂíåÂπ∂Âèë„ÄÅÂπ∂Ë°å„ÄÅ‰∏≤Ë°åÁºñÁ®ãÊ®°ÂûãÊúâÂÖ≥ÔºåË¶Å‰ªéËÆ°ÁÆóÊú∫Á°¨‰ª∂‰ΩìÁ≥ª„ÄÅÊìç‰ΩúÁ≥ªÁªüÊ¶ÇÂøµÊàñËÄÖÈÄö‰ø°Á≥ªÁªü‰∏äÁêÜËß£ËøôÂá†‰∏™Ê¶ÇÂøµ„ÄÇ

ËÆ°ÁÆóÊú∫Á°¨‰ª∂‰ΩìÁ≥ª‰∏≠ÔºåCPU ÊòØÊï¥‰∏™Á≥ªÁªüÊúÄÈ´òÈÄüÂ∫¶ËøêË°åÁöÑÂçïÂÖÉÔºåÂÖ∂ÂÆûÊòØÂÜÖÂ≠òÔºåÊúÄÂ§ßÂª∂Êó∂ÁöÑÊòØÂ§ñÈÉ®ËÆæÂ§áÁöÑ I/O Êìç‰Ωú„ÄÇCPU ËøêË°åÁî±Êô∂ÊåØ‰∫ßÁîüÁöÑÁ®≥ÂÆöÂë®ÊúüËÑâÂÜ≤Êó∂Èíü‰ø°Âè∑È©±Âä®ÔºåÂÅáËÆæÊåá‰ª§Âë®Êúü‰∏∫ 1 ‰∏™Êó∂ÈíüÂë®ÊúüÔºà‰æãÂ¶ÇÊúÄÁÆÄÂçïÁöÑ NOP Á©∫Êìç‰ΩúÊåá‰ª§ÔºâÔºåÂú®Êó∂ÈíüÂë®Êúü‰∏∫ 1G ‰∏ªÈ¢ëÁöÑ CPU ‰∏äËøêË°å‰∏ÄÊù°ÂçïÊåá‰ª§ÔºåÂè™ÈúÄË¶Å 1/10^9 ÁßíÊó∂Èó¥„ÄÇ

ËÄåÂ§ñÈÉ®ËÆæÂ§á I/O Êìç‰ΩúÔºåÂø´Âàô‰ª•ÊØ´ÁßíËÆ°ÈáèÔºåÊÖ¢Âàô‰ª•ÁßíËÆ°ÈáèÔºåÂíåÂø´ÈÄüÁöÑ CPU Êìç‰ΩúÁõ∏Â∑Æ 1 ‰∫øÂÄçÁ∫ßÂà´„ÄÇÊØîÂ¶ÇÊú∫Ê¢∞Á°¨ÁõòËØªÂÜôÊï∞ÊçÆÔºåÂÖâÁ£ÅÂ§¥ÂØªÈÅìÊìç‰ΩúÊó∂Èó¥Â∞±ÈúÄË¶Å 100ms Á∫ßÂà´ÔºåÊâÄ‰ª•ÈúÄË¶ÅÈÄöËøáÁºìÂ≠òÊäÄÊúØÊù•Ëß£ÂÜ≥Ëøô‰πàÂ§ßÁöÑÂª∂Êó∂„ÄÇ

ËÆ°ÁÆóÊú∫ËØûÁîü‰πãÂàùÔºåÂπ∂Ê≤°ÊúâÊìç‰ΩúÁ≥ªÁªüËøôÁßç‰∏úË•øÔºåÂΩìÊó∂‰ΩøÁî®ÊâìÂ≠îÁ∫∏Â∏¶ÈÄöËøáËæìÂÖ•Êú∫ÂÆûÁé∞ÂØπËÆ°ÁÆóÊú∫ÁºñÁ®ãÔºåÂÜçÂêØÂä®ËøêË°å„ÄÇÂú®Á®ãÂ∫èÊâßË°åÂÆåÊØï‰πãÂêéÔºåÊâìÂç∞Êú∫ËæìÂá∫ËÆ°ÁÆóÁªìÊûúÔºåÁé∞Âú∫ÁõëÁù£Á®ãÂ∫èÊâßË°åÁöÑÁ®ãÂ∫èÂëòÂÜçÂèñËµ∞Á∫∏Â∏¶„ÄÇÂú®Ëøô‰∏™Êó∂ÊúüÔºåÂêå‰∏Ä‰∏™ËÆ°ÁÆóÊú∫Á≥ªÁªüÂú®Âêå‰∏ÄÊó∂Èó¥Âè™ËÉΩÂ§ÑÁêÜÂîØ‰∏ÄÁ°ÆÂÆöÁöÑ‰∏Ä‰ª∂‰∫ãÊÉÖ„ÄÇ

ÂêéÊù•‰∫∫‰ª¨ÂèëÊòé‰∫Ü**ÊâπÂ§ÑÁêÜÁ≥ªÁªü**ÔºåÂÆÉÁõ∏ÂΩì‰∫éËÆ°ÁÆóÊú∫‰∏äÁöÑ‰∏Ä‰∏™‰ªªÂä°ÁõëÁù£Á®ãÂ∫èÔºåÂú®ÂÆÉÁöÑÊéßÂà∂ÂíåË∞ÉÂ∫¶‰∏ãÔºåËÆ°ÁÆóÊú∫ËÉΩÂ§üËá™Âä®ÁöÑ„ÄÅÊàêÊâπÁöÑÂ§ÑÁêÜ‰∏Ä‰∏™ÊàñÂ§ö‰∏™Áî®Êà∑ÁöÑ‰ªªÂä°„ÄÇÂú®ÊâπÂ§ÑÁêÜÁ≥ªÁªüÁöÑÂ∏ÆÂä©‰∏ãÔºåÂêÑ‰∏™‰ªªÂä°‰πãÈó¥ÂèØ‰ª•Ëá™Âä®Ë°îÊé•ÔºåÂáèÂ∞ë‰∫ÜÈúÄË¶Å‰∫∫Â∑•Âª∫Á´ã‰ªªÂä°ÂíåÊâãÂ∑•Êìç‰ΩúÁöÑÊó∂Èó¥ÔºåÊèêÈ´ò‰∫ÜËÆ°ÁÆóÊú∫ÁöÑÂà©Áî®ÊïàÁéá„ÄÇ

ÂÜçÂêéÊù•ÔºåÈöèÁùÄ CPU ÊÄßËÉΩÁöÑ‰∏çÊñ≠ÊèêÂçáÔºåÂá∫Áé∞‰∫Ü**ÂàÜÊó∂Á≥ªÁªü**Âíå**ÂÆûÊó∂Á≥ªÁªü**ÔºåTime Sharing System & Real Time System„ÄÇ

**ÂàÜÊó∂Á≥ªÁªü**ÊòØÊää CPU ÁöÑËøêË°åÊó∂Èó¥ÂàÜÊàêÂæàÁü≠ÁöÑÊó∂Èó¥ÁâáÔºåÈÄöÂ∏∏‰∏∫ 10 ~ 100ms Êï∞ÈáèÁ∫ßÔºåËÄå Linux/Unix ‰∏≠ÂàôÊòØ 5 ~ 800msÔºåÊåâÊó∂Èó¥ÁâáËΩÆÊµÅÊää CPU ÂàÜÈÖçÁªôÂêÑËÅîÊú∫‰ªªÂä°‰ΩøÁî®„ÄÇËã•Êüê‰∏™‰ªªÂä°Âú®ÂàÜÈÖçÁªôÂÆÉÁöÑÊó∂Èó¥ÁâáÂÜÖ‰∏çËÉΩÂÆåÊàêÂÖ∂ËÆ°ÁÆóÔºåÂàôËØ•‰ªªÂä°ÊöÇÊó∂‰∏≠Êñ≠ÔºåÊää CPU ËÆ©ÁªôÂè¶‰∏Ä‰ªªÂä°‰ΩøÁî®ÔºåÁ≠âÂæÖ‰∏ã‰∏ÄËΩÆË∞ÉÂ∫¶Êó∂ÂÜçÁªßÁª≠ÂÖ∂ËøêË°å„ÄÇÁî±‰∫éËÆ°ÁÆóÊú∫ÈÄüÂ∫¶ÂæàÂø´ÔºåÂêÑ‰∏™‰ªªÂä°‰πãÈó¥ËΩÆËΩ¨Âæó‰πüÂæàÂø´ÔºåÁªôÊØè‰∏™Áî®Êà∑ÁöÑÊÑüËßâÊòØ‰ªñÁã¨Âç†‰∫Ü‰∏ÄÂè∞ËÆ°ÁÆóÊú∫„ÄÇËÄåÊØè‰∏™Áî®Êà∑ÂèØ‰ª•ÈÄöËøáËá™Â∑±ÁöÑÁªàÁ´ØÂêëÁ≥ªÁªüÂèëÂá∫ÂêÑÁßçÊìç‰ΩúÊéßÂà∂ÂëΩ‰ª§ÔºåÂú®ÂÖÖÂàÜÁöÑ‰∫∫Êú∫‰∫§‰∫íÊÉÖÂÜµ‰∏ãÔºåÂÆåÊàê‰Ωú‰∏öÁöÑËøêË°å„ÄÇ‰∏∫‰∫ÜËß£ÂÜ≥ÂàÜÊó∂Á≥ªÁªü‰∏çËÉΩÂèäÊó∂ÂìçÂ∫îÁî®Êà∑Êåá‰ª§ÁöÑÊÉÖÂÜµÔºåÂèàÂá∫Áé∞‰∫ÜËÉΩÂ§üÂú®‰∏•Ê†ºÁöÑÊó∂Èó¥ËåÉÂõ¥ÂÜÖÂÆåÊàê‰∫ã‰ª∂Â§ÑÁêÜ„ÄÅÂèäÊó∂ÂìçÂ∫îÈöèÊú∫Â§ñÈÉ®‰∫ã‰ª∂ÁöÑ**ÂÆûÊó∂Á≥ªÁªü**„ÄÇ

Âú®ËäØÁâáÊäÄÊúØ‰∏äÔºå‰∏çÊñ≠ÊèêÈ´òÊô∂‰ΩìÁÆ°ÁöÑÈõÜÊàêÂ∫¶Ôºå‰ª•Ââç‰ΩøÁî®Â§ö‰∏™ CPU ËäØÁâáÂà∂ÈÄ†ÁöÑÊú∫Âô®Ëé∑ÂæóÁöÑÊÄßËÉΩÔºåÁé∞Âú®ÂèØ‰ª•Âú®‰∏Ä‰∏™ CPU ËäØÁâá‰∏äÂà∂ÈÄ†ÔºåÂ∞ÜÂ§ö‰∏™ CPU ÈõÜÊàêÂà∞‰∏Ä‰∏™ËäØÁâá‰∏äÔºåËøôÂ∞±ÊòØÂ§öÊ†∏Â§ÑÁêÜÂô® Multicore Processors„ÄÇ


Erlang ‰πãÁà∂ Joe Armstrong Áî®‰∏ÄÂº†ÂíñÂï°Êú∫Â∑•‰ΩúÂõæÁªô 5 Â≤ÅÂ≠©Â≠êËß£ÈáäÂπ∂ÂèëÔºàconcurrencyÔºâÂπ∂Ë°åÔºàparallelismÔºâÊ¶ÇÂøµÔºö

- ConcurrentÔºö‰∏§‰∏™ÊéíÈòü‰∏Ä‰∏™ÂíñÂï°Êú∫ÔºåËΩÆÊµÅ‰ΩøÁî®ÔºàTwo queues and one coffee machineÔºâ
- ParallelÔºö‰∏§‰∏™ÊéíÈòü‰∏§‰∏™ÂíñÂï°Êú∫ÔºàTwo queues and two coffee machinesÔºâ

![Erlang](https://pic4.zhimg.com/80/v2-674f0d37fca4fac1bd2df28a2b78e633_1440w.jpg)

- Âπ∂ÂèëÔºö‰∏§‰∏™ÈòüÂàó‰∫§Êõø‰ΩøÁî®‰∏ÄÂè∞ÂíñÂï°Êú∫ÔºåÂç≥‰∏Ä‰∏™Á∫øÁ®ãÂ§ÑÁêÜÂ§ö‰∏™‰ªªÂä°ÔºåÂΩìÁÑ∂ÂÆûÁé∞ÊñπÂºè‰∏ç‰ªÖÈôê‰∫éÂ§öÁ∫øÁ®ã„ÄÅÂ§öËøõÁ®ãÊñπÂºèÔºõ
- Âπ∂Ë°åÔºö‰∏§‰∏™ÈòüÂàóÂêåÊó∂‰ΩøÁî®‰∏§Âè∞ÂíñÂï°Êú∫ÔºåÂç≥Â§ö‰∏™Á∫øÁ®ãÂ§ÑÁêÜÂ§ö‰∏™‰ªªÂä°Ôºõ
- ‰∏≤Ë°å(Serial)Ôºö‰∏Ä‰∏™‰ªªÂä°ÈòüÂàó‰ΩøÁî®‰∏ÄÂè∞ÂíñÂï°Êú∫ÔºåÂ§ö‰∏™‰ªªÂä°ÈòüÂàóÂ∞±ÈúÄË¶ÅÊéíÈô§ÔºåÂç≥‰∏Ä‰∏™Á∫øÁ®ãÂ§ÑÁêÜ‰∏Ä‰∏™‰ªªÂä°Ôºõ

ÂÜç‰∏æË°å‰∏Ä‰∏™ÁîüÊ¥ªÁöÑ‰æãÂ≠êÔºö

- ‰Ω†ÂêÉÈ•≠ÂêÉÂà∞‰∏ÄÂçäÔºåÁîµËØùÊù•‰∫ÜÔºå‰Ω†‰∏ÄÁõ¥Âà∞ÂêÉÂÆå‰∫Ü‰ª•ÂêéÊâçÂéªÊé•ÔºåËøôÂ∞±ËØ¥Êòé‰Ω†‰∏çÊîØÊåÅÂπ∂Âèë‰πü‰∏çÊîØÊåÅÂπ∂Ë°å„ÄÇ
- ‰Ω†ÂêÉÈ•≠ÂêÉÂà∞‰∏ÄÂçäÔºåÁîµËØùÊù•‰∫ÜÔºå‰Ω†ÂÅú‰∫Ü‰∏ãÊù•Êé•‰∫ÜÁîµËØùÔºåÊé•ÂÆåÂêéÁªßÁª≠ÂêÉÈ•≠ÔºåËøôËØ¥Êòé‰Ω†ÊîØÊåÅÂπ∂Âèë„ÄÇ
- ‰Ω†ÂêÉÈ•≠ÂêÉÂà∞‰∏ÄÂçäÔºåÁîµËØùÊù•‰∫ÜÔºå‰Ω†‰∏ÄËæπÊâìÁîµËØù‰∏ÄËæπÂêÉÈ•≠ÔºåËøôËØ¥Êòé‰Ω†ÊîØÊåÅÂπ∂Ë°å„ÄÇ

‰ª£Á†ÅÊâßË°å‰πüÊòØ‰∏Ä‰∏™ÈÅìÁêÜÔºö

- ÂêåÊ≠•ÊâßË°å‰ª£Á†ÅÊòØÊúÄÁõ¥ËßÇÁöÑÁ®ãÂ∫èÊâßË°åÊñπÂºèÔºå‰ªéÂßãÂà∞ÁªàÊâßË°åÂÆåÊØïÔºåÂåÖÊã¨È´òÂª∂Êó∂ÁöÑ I/O Á≠âÂæÖ‰πü‰∏çÊîæËøá„ÄÇ
- ÂºÇÊ≠•ÊâßË°å‰ª£Á†ÅÊòØÊúÄËá™ÁÑ∂Á®ãÂ∫èÊâßË°åÊñπÂºèÔºåÂÉèÈ´òÂª∂Êó∂ÁöÑ I/O Á≠âÂæÖ‰ºö‰∫§ÁªôÂ∫ïÂ±ÇÈÄöËÆØÊú∫Âà∂ÔºåÁ≠âÂæÖ‰∫ã‰ª∂ÂõûË∞ÉÈÄöÁü•„ÄÇ

Âú®Êìç‰ΩúÁ≥ªÁªüÂ±ÇÈù¢‰∏äÔºåProcess ËøõÁ®ãÊòØ CPU ÂàÜÈÖçÁ≥ªÁªüËµÑÊ∫êÁöÑÊúÄÂçï‰ΩçÔºåThreads Á∫øÁ®ãÊòØ CPU ÊâßË°åÊåá‰ª§ÁöÑÊúÄÂ∞èË∞ÉÂ∫¶Âçï‰ΩçÔºåÊØè‰∏™ËøõÁ®ãËá≥Â∞ëÂåÖÂê´‰∏Ä‰∏™Á∫øÁ®ãÔºåÂÆÉ‰ª¨ÈÉΩÊòØÊèèËø∞Á®ãÂ∫èËøêË°åÊñπÂºèÁöÑÊ¶ÇÂøµ„ÄÇÊääËøõÁ®ãÊàñÁ∫øÁ®ãÁêÜËß£‰∏∫ÈªëÂíñÂï°Êú∫ÂèØËÉΩËøò‰∏çÂ§™ÂêàÈÄÇÔºå‰ΩÜÂ∞ÜÂ§öÊ†∏ÂøÉ CPU ÁöÑÊØè‰∏™Ê†∏ÂøÉÁêÜËß£‰∏∫‰∏ÄÂè∞ÂíñÂï°Êú∫ÊòØÊÅ∞ÂΩìÁöÑ„ÄÇ

Process Âíå Threads ÂçïËØçÊú¨ÊÑèÂàÜÂà´ÊòØ‰∫ãÊÉÖÂ§ÑÁêÜËøáÁ®ãÂíå‰∏ùÁ∫øÁöÑÊÑèÊÄùÔºåÂú®ËÆ°ÁÆóÊú∫È¢ÜÂüüÊòØÂü∫‰∫éÊìç‰ΩúÁ≥ªÁªüÂ±ÇÈù¢‰∏äÁöÑÈ´òÂ∫¶ÊäΩË±°Ê¶ÇÂøµÔºåWiki ‰∏äÁöÑÊ¶ÇÂøµËß£ÈáäÔºö

>In computing, a process is the instance of a computer program that is being executed by one or many threads.

Âπ∂ÂèëÂº∫Ë∞ÉÁöÑÊòØÊüê‰∏™Êó∂Èó¥ÊÆµÂêåÊó∂ÂèëÁîüÁöÑ‰∫ãÔºåÂπ∂Ë°åÂç¥Âπ∂‰∏çÊòØÂº∫Ë∞ÉÊüê‰∏™Áû¨Èó¥ÂêåÊó∂ÂèëÁîüÁöÑ‰∫ãÔºåËÄåÊòØ‰∏ÄÁßçÁä∂ÊÄÅÔºåÊØîÂ¶ÇÔºåÂçïËΩ¶ÈÅìÂ∞±Êó†Ê≥ïÂÆûÁé∞‰∏§ËæÜËΩ¶Áõ∏ÂêëË°å‰ΩøÔºåËøôÂ∞±‰∏çÊòØÂπ∂Ë°å„ÄÇ

‚ÄúÂêåÊó∂‚ÄùËøô‰∏™Ê¶ÇÂøµ‰πüÊòØ‰∏Ä‰∏™ÂÆπÊòìÊ∑∑Ê∑ÜÁöÑËØçÔºåÂÆÉÂêåÊó∂Âèà‰ΩìÁé∞‰∫ÜÂÆûÊó∂ÊÄßÁöÑÊ¶ÇÂøµÔºåÊØîÂ¶Ç simultaneous translation ÂêåÂ£∞‰º†ËØë„ÄÇËøô‰∏™ËØçË¶ÅÂíå the same time ËøõË°åÂØπÊØîÔºåÂêåÂ£∞‰º†ËØëÊ∞∏ËøúÂÅö‰∏çÂà∞ËøôÁÇπÔºå‰πüÂè™ÊúâÂú®Â§öÊ†∏ÂøÉÊàñ CPU ‰∏äÔºåÊâçËÉΩÂÆûÁé∞Á®ãÂ∫è the same time ËøêË°å„ÄÇ

ÂçïÁ∫øÁ®ã‰πüÂèØ‰ª•ÂÆûÁé∞Âπ∂ÂèëÔºå‰ΩÜ‰Ωú‰∏∫Êìç‰ΩúÁ≥ªÁªüÁöÑÂü∫Êú¨Ë∞ÉÂ∫¶ÂçïÂÖÉÔºåÈúÄË¶ÅÊåâÊó∂Èó¥ÁâáËøõË°åÂàáÊç¢ÔºåËôΩÁÑ∂Êó∂Èó¥ÂæàÂæàÁü≠Ôºå‰ΩÜÂßãÁªà‰∏çÂ±û‰∫éÂπ∂Ë°åÊâßË°åÔºåËÄåÂú®Â§öÊ†∏ÂøÉ CPU ‰∏äÁöÑÊâßË°åÂ§öÁ∫øÁ®ãÂ∞±ÊòØÂπ∂Ë°åÊâßË°åÁöÑ„ÄÇ

Âú®ÂçïÊ†∏ÂøÉ CPU ‰∏äÔºåÊòØ‰∏çÊòØÂ∞±‰∏çÂ≠òÂú®ÂÖ±‰∫´ËµÑÊ∫êÁ´ûÊÄÅÈóÆÈ¢òÂë¢ÔºüÂçïÊ†∏ CPU Á°ÆÂÆû‰ªçÁÑ∂Â≠òÂú®Á∫øÁ®ãÂÆâÂÖ®ÈóÆÈ¢òÔºåÈùûÂéüÂ≠êÊìç‰ΩúÁöÑÊÉÖÂÜµ‰∏ãÔºåÊó†Ê≥ïÊéßÂà∂ CPU Âú®‰ªÄ‰πàÊó∂Êú∫ÂàáÊç¢Á∫øÁ®ã„ÄÇÊØîÂ¶ÇÔºåËá™Â¢ûÊìç‰Ωú‰∏çÂÖ∑Â§áÂéüÂ≠êÊÄßÔºåÂÆÉÂåÖÂê´ÂèñÊï∞ÊçÆ„ÄÅ+1„ÄÅÊï∞ÊçÆÂÜôÂõûÁ≠âÊìç‰ΩúÔºåÂú®‰∏çÂä†‰øùÊä§ÂâçÊèê‰∏ãÔºåCPU ÂèØËÉΩÂú®ÂÖ∂‰∏≠Èó¥ÈöôÂàáÊç¢Á∫øÁ®ãÔºåÂØºËá¥Á∫øÁ®ã‰∏çÂÆâÂÖ®„ÄÇ


‰∏çÂêåËØ≠Ë®ÄÂÆûÁé∞ÁöÑÂ§öÁ∫øÁ®ãÊñπÂºè‰∏çÂêåÔºåÂ§ßÂ§öÊï∞Êìç‰ΩúÁ≥ªÁªüÊèê‰æõ API Êù•ÂàõÂª∫Á∫øÁ®ãÔºåÈÄöËøá API ÊñπÂºèÂàõÂª∫ÁöÑÁß∞‰∏∫ 1:1 Á∫øÁ®ãÊ®°ÂûãÔºåÂèØ‰ª•Áß∞‰∏∫ native-threading„ÄÇ

ËÄå Rust ÂíåËÆ∏Â§öËØ≠Ë®Ä‰∏ÄÊ†∑Ôºå‰πüÂÆûÁé∞‰∫ÜËá™Â∑±ÁöÑÁ∫øÁ®ãÊ®°ÂûãÔºåËØ≠Ë®ÄÂ±ÇÈù¢‰∏äÁöÑÂÆûÁé∞Áß∞‰∏∫ green-threading Ê®°ÂûãÔºåÂç≥ M:N Á∫øÁ®ãÊ®°ÂûãÔºåM Âíå N ‰∏ç‰∏ÄÂÆöÁõ∏Á≠âÔºåÂç≥Êìç‰ΩúÁ≥ªÁªüÂú® N ‰∏™Á∫øÁ®ã‰∏äËøêË°å M ‰∏™ÁªøËâ≤Á∫øÁ®ã„ÄÇ

Erlang ÈááÁî® M:N Ê®°ÂûãÂæàÂ•ΩÁöÑËß£ÂÜ≥‰∫Ü Green Thread Â≠òÂú®ÁöÑÈóÆÈ¢òÔºåÊØè‰∏™ native thread ÈÉΩÊúâ‰∏Ä‰∏™Ëá™Â∑±ÁöÑË∞ÉÂ∫¶Âô®„ÄÇËÄå‰∏îÔºåErlang ÈááÁî® shared nothing concurrencyÔºåÂèØ‰ª•Êää Native Thread Â≠òÂú®ÁöÑÈóÆÈ¢òÈÉΩÊäõ‰πãËÑëÂêé„ÄÇ


ÊÄªÁªìËµ∑Êù•ÔºåÂêåÊ≠•ÊâßË°åÊÑèÂë≥ÁùÄÁ≠âÂæÖÔºåÂú®È´òÂª∂Êó∂ÁöÑ I/O Êìç‰Ωú‰∏≠ÔºåÊàñËÄÖÂÜÖÂ≠òËØªÂÜôÊàê‰∏∫ËΩØ‰ª∂Áì∂È¢àÊó∂ÔºåÂøÖÈúÄ‰º¥ÈöèÈòªÂ°ûÁä∂ÊÄÅ„ÄÇËøô‰∏™ÈóÆÈ¢òÁöÑËß£ÂÜ≥ÊñπÊ°àÂ∞±ÊòØÂºÇÊ≠• I/O Êú∫Âà∂ÔºåÊâÄ‰ª•Âú® CPU ËµÑÊ∫êË∂äÊù•Ë∂ä‰∏∞ÂØåÁöÑÊù°‰ª∂‰∏ãÔºåÂêÑÁßçÁºñÁ®ãËØ≠Ë®ÄÔºå‰∏çÈôê Rust„ÄÅGolang„ÄÅPython„ÄÅJavaScript Á≠âÁ≠âÈÉΩÊèê‰æõ‰∫ÜÂºÇÊ≠•ÁºñÁ®ãÊé•Âè£„ÄÇ

ÊâÄ‰ª•ÔºåÂºÇÊ≠•ÊòØËß£ÂÜ≥ÂêåÊ≠•ÔºàÈòªÂ°ûÔºâÁ≠âÂæÖÈóÆÈ¢òÁöÑÊú∫Âà∂ÔºåÂπ∂ÂèëÊòØ‰∏ÄÁßçÈ´òÊÄßËÉΩËΩØ‰ª∂ÁõÆÊ†áÈúÄÊ±ÇÔºåÂºÇÊ≠•„ÄÅÂπ∂Ë°å„ÄÅÂ§öÁ∫øÁ®ãÊàñËÄÖÂçïÁ∫øÁ®ãÈÉΩÂèØ‰ª•ÊòØÂÆûÁé∞Âπ∂ÂèëÁºñÁ®ãÊ®°ÂûãÁöÑÂΩ¢ÂºèÔºåËøô‰∫õÊ¶ÇÂøµ‰∫§ÁªáÂú®‰∏ÄËµ∑ÂæàÂÆπÊòìÊ∑∑Ê∑Ü„ÄÇ

ÂçïÁ∫øÁ®ãÂπ∂ÂèëÁöÑÂÆûÁé∞‰∏çÂ±ÄÈôê‰∫éÂ§öÂºÇÊ≠• I/O Êé•Âè£ *asyncio*ÔºåÂéüÂßã‰∏ÄÁÇπÁöÑÂ∞±ÊòØÂõûË∞ÉÂáΩÊï∞ÊñπÂºè„ÄÇÂºÇÊ≠• I/O Êú∫Âà∂Ë¶ÅÈ´òÁ∫ßÂπ∂‰∏îÂ§çÊùÇ‰∏ÄÁÇπÔºåÈÄöÂ∏∏ÔºåÈúÄË¶Å‰∏Ä‰∏™‰∫ã‰ª∂Âæ™ÁéØÊú∫Âà∂Êù•Â§ÑÁêÜÂºÇÊ≠• I/O ‰∫ßÁîüÁöÑÂêÑÁßç‰ªªÂä°„ÄÇ*Event loop* ÂØπË±°Ë¥üË¥£ÊâßË°åÂºÇÊ≠•‰ª£Á†ÅÔºå‰ª•ÂèäÂÜ≥ÂÆöÂºÇÊ≠•ÂáΩÊï∞Â¶Ç‰ΩïËøõË°åÂàáÊç¢ÔºåÂçèÁ®ãÁöÑËøêË°åÊú∫Âà∂‰πüÊòØÂú®‰∫ã‰ª∂Âæ™ÁéØ‰∏≠ÂÆûÁé∞ÁöÑ„ÄÇ

ÁîüÊàêÂô® Generators ÊòØ‰∏Ä‰∏™ÂèØ‰ª•Êûö‰∏æÁöÑÁºñÁ®ãÊé•Âè£ÔºåÈáçË¶ÅÁöÑÊòØÂÆÉÂèØ‰ª•Áî®Êù•‰∏≠Êñ≠ÂáΩÊï∞ÁöÑÊâßË°åÔºå‰∏îÂÖ∑Êúâ *send()* ÈÄö‰ø°ËÉΩÂäõÔºåÊòØÂÆûÁé∞ÂºÇÊ≠•ÊâßË°åÁöÑÂü∫Á°Ä„ÄÇ


‰∏∫‰∫ÜÊã•ÊúâÊõ¥ËΩªÈáèÂåñÁöÑÁ∫øÁ®ãÔºåÁé∞‰ª£ÁºñÁ®ãËØ≠Ë®ÄÁéØÂ¢ÉÂºïÂÖ•‰∫ÜÂçèÁ®ã Coroutine ÁöÑÊ¶ÇÂøµÔºåÂú®ËØ≠Ê≥ïÂ±ÇÈù¢ÂÆûÁé∞‰∫ÜÁ∫§Á®ã Fiber ÁöÑÂäüËÉΩ„ÄÇÂèØ‰ª•ÁêÜËß£‰∏∫Áî±Á®ãÂ∫èËÄåÈùûÊìç‰ΩúÁ≥ªÁªüÂÆûÁé∞Ë∞ÉÂ∫¶ÁöÑÁ∫øÁ®ãÔºåÁ∫§Á®ãÂíåÂçèÁ®ãÊèèËø∞‰∫ÜÁõ∏ÂêåÁöÑÊ¶ÇÂøµÔºåÈÉΩ‰∏çÊòØÁúüÊ≠£ÊÑè‰πâ‰∏äÁöÑÂπ∂Ë°å„ÄÇ‰ΩÜÊòØÔºåÂÆÉ‰ª¨ËÉΩËÆ©‰Ω†Êõ¥ÂÆπÊòìÂú∞Â§ÑÁêÜÂºÇÊ≠• I/O ÁöÑÈóÆÈ¢ò„ÄÇ

‰ªéÂçèÁ®ãÁöÑÂÆûÁé∞‰∏ä‰πüÂèØ‰ª•ÁúãÂá∫ÂÆÉÁöÑ‰ºòÂäøÂú®‰∫éÔºö

‚û° ÊâßË°åÊïàÁéáÊûÅÈ´òÔºåÂõ†‰∏∫‰∏çÈúÄË¶ÅÈÄöËøáÊìç‰ΩúÁ≥ªÁªüÂ±ÇÈù¢ÂàáÊç¢Á∫øÁ®ãÔºåËÄåÊòØÁõ¥Êé•Âú®ËøõÁ®ãÂÜÖÈÉ®ÂÆåÊàêÂçèÁ®ãÂàáÊç¢ÔºåÁî±Á®ãÂ∫èËá™Ë∫´ÊéßÂà∂ÔºåÊ≤°ÊúâÂàáÊç¢Á∫øÁ®ãÁöÑÂºÄÈîÄ„ÄÇ

‚û° Âõ†‰∏∫Âè™Êúâ‰∏Ä‰∏™Á∫øÁ®ãÔºå‰∏çÈúÄË¶ÅÂ§öÁ∫øÁ®ãÁºñÁ®ãÊ®°Âûã‰∏ãÁöÑÂä†ÈîÅÊú∫Âà∂Ôºå‰πü‰∏çÂ≠òÂú®ÂÖ±‰∫´Êï∞ÊçÆ Race Condition ÈóÆÈ¢òÔºåÂõ†Ê≠§ÊâßË°åÊïàÁéáÈ´òÂæàÂ§ö„ÄÇ

ÂçèÁ®ãÂÖ∑ÊúâÂ§ÑÁêÜ I/O ÂØÜÈõÜÂûãÁ®ãÂ∫èÊúÄÈ´òÊïàÁéáÔºå‰ΩÜÊòØËÆ°ÁÆóÂØÜÈõÜÂûãÂ∫îÁî®‰∏çÊòØÂÆÉÁöÑÈïøÂ§ÑÔºåÂ¶ÇË¶ÅÂÖÖÂàÜÂèëÊå• CPUÊÄßËÉΩÔºåÂèØ‰ª•ÁªìÂêàÂ§öËøõÁ®ã„ÄÇ

Âú® Python ÂºÇÊ≠• I/O Êé•Âè£‰∏≠ÔºåÂºïÂÖ•‰∫Ü Coroutines„ÄÅTasks„ÄÅFeture Á≠âÈÄöÁî®Ê¶ÇÂøµÔºåÂâçËÄÖÊòØ‰∏Ä‰∏™ÂáΩÊï∞Ë£ÖÈ•∞Âô®ÔºåÂêé‰∏§ËÄÖÊòØÁ±ªÂûãÔºåÂÆÉ‰ª¨ÈÉΩÊòØÂèØÁ≠âÂæÖÂØπË±°„ÄÇ

Awaitables Objects

    ‚û° `Coroutines` (Decorator)
    ‚û° `Tasks`
    ‚û° `Futures`

Âú®ÂºÇÊ≠• I/O Êé•Âè£‰∏≠Ôºå‰∏Ä‰∏™ÂèØÁ≠âÂæÖÂØπË±°ÊÑèÂë≥ÁùÄËøôÊòØ‰∏Ä‰∏™ÂèØË∑≥ËøáÂêåÊ≠•Á≠âÂæÖÊó∂Èó¥ÂäüËÉΩÔºåÁªìÂêà `async` ÂÖ≥ÈîÆÂ≠óÂÆö‰πâ‰∏Ä‰∏™ÂçèÁ®ãÂáΩÊï∞ÔºåÂπ∂ÈÖçÁΩÆ `await` ÂÖ≥ÈîÆÂ≠óË∞ÉÁî®ÂèØÁ≠âÂæÖÂØπË±°ÔºåËøôÂ∞±ÊòØÂºÇÊ≠• I/O ÁºñÁ®ãÊé•Âè£ÁöÑÂü∫Êú¨Áî®Ê≥ï„ÄÇ


Êìç‰ΩúÁ≥ªÁªüÂú®Á∫øÁ®ã‰∏éÂºÇÊ≠•‰πãÈó¥ÁöÑ‰ªªÂä°ËΩÆÊç¢ÁöÑÊñπÂºè‰∏äÂ≠òÂú®Â∑®Â§ßÂ∑ÆÂà´„ÄÇ

Â§öÁ∫øÁ®ãÊ®°Âûã‰∏≠ÔºåÊìç‰ΩúÁ≥ªÁªüÂÆûÈôÖ‰∏äÁü•ÈÅìÊØè‰∏™Á∫øÁ®ãÔºåÂπ∂‰∏îÂèØ‰ª•ÈöèÊó∂‰∏≠Êñ≠ÂÆÉÔºå‰ª•ÂºÄÂßãËøêË°å‰∏çÂêåÁöÑÁ∫øÁ®ã„ÄÇËøôË¢´Áß∞‰∏∫Êä¢Âç†ÂºèÂ§ö‰ªªÂä°Â§ÑÁêÜÔºåPre-emptive multitaskingÔºåÂõ†‰∏∫Êìç‰ΩúÁ≥ªÁªüÂÖ∑ÊúâÁ∫øÁ®ãË∞ÉÂ∫¶ÊùÉÔºåÂèØ‰ª•‰∏ªÂä®Ë∞ÉÂ∫¶Á∫øÁ®ãÊù•ËøõË°åÂàáÊç¢ÔºåËøôÊÑèÂë≥ÁùÄÈùûÂéüÂ≠êÊìç‰ΩúÂèØËÉΩË¢´Êìç‰ΩúÁ≥ªÁªüÊâìÊñ≠„ÄÇÊä¢Âç†ÂºèÂ§ö‰ªªÂä°‰πüÂè´ÂÅöÂàÜÊó∂Â§ö‰ªªÂä° Time-shared multitasking„ÄÇ

ËÄå Asyncio ÂºÇÊ≠•Ê®°Âûã‰∏≠Ôºå‰ΩøÁî®ÁöÑÊòØÂçèÂêåÂ§ö‰ªªÂä°Â§ÑÁêÜÔºåCooperative MultitaskingÔºåÂºÇÊ≠•‰ªªÂä°ÂøÖÈ°ªÈÄöËøáÂÆ£Â∏É‰ΩïÊó∂ÂáÜÂ§áÂ•ΩË¢´ÂàáÊç¢Êù•ÈÖçÂêà„ÄÇ

‰∏ãË°®ÂØπÂçèÂêåÂ§ö‰ªªÂä°Â§ÑÁêÜ„ÄÅÊä¢ÂÖàÂ§ö‰ªªÂä°Â§ÑÁêÜÔºå‰∏éÂ§öËøõÁ®ã Multiprocessing ÂÆûÁé∞ÁöÑÂπ∂ÂèëËøõË°åÂØπÊØîÔºö

| Type | Cores |                  CPU Scheduling / Switching Decision                  |
|------|-------|-----------------------------------------------------------------------|
| PMT  | 1     | The operating system decides when to switch tasks external to Python. |
| CMT  | 1     | The tasks decide when to give up control.                             |
| MP   | Many  | The processes all run at the same time on different processors.       |

ÂèÇËÄÉÊùêÊñôÔºöÊìç‰ΩúÁ≥ªÁªüÊÅêÈæô‰π¶ Operating System Concepts by Abraham Silberschatz, Greg Gagne, Peter B. Galvin„ÄÇ

Âú®Â∫îËØ•‰ΩøÁî®Â§öÁ∫øÁ®ã„ÄÅËøòÊòØÂ§öËøõÁ®ãÁöÑÁ®ãÂ∫èÊ®°ÂùóÈÄâÊã©‰∏äÔºåÊúâ‰∏Ä‰∏™ÂÖ±ËØÜÊòØÔºöËÆ°ÁÆóÂØÜÈõÜÂûãÂ∫îÁî®ÈÄâÊã©Â§öËøõÁ®ãÔºåI/O ÂØÜÈõÜÂûãÂ∫îÁî®ÈÄâÊã©Â§öÁ∫øÁ®ã„ÄÇ

Â§öËøõÁ®ãÊúâÂä©‰∫éÂà©Áî®Áé∞ÊúâÁöÑ CPU ËøêÁÆóËÉΩÂäõÔºå‰ΩÜÈöè‰πãÂ∏¶Êù•ÁöÑÊòØËøõÁ®ãÈó¥ÈÄö‰ø°ÈóÆÈ¢òÔºåInter-Process CommunicationÔºåÂõ†‰∏∫ËøõÁ®ãÈó¥Á¶ÅÊ≠¢ÂÖ±‰∫´ÂÜÖÂ≠òÔºåÂêåÊó∂ËøòÊúâËøõÁ®ãÂêåÊ≠•ÈúÄÊ±ÇÔºåÊØïÁ´ü‰∏çÈúÄË¶ÅÈÄö‰ø°ÁöÑÂ§öËøõÁ®ãÂ∫îÁî®Â∞ëËßÅ„ÄÇËÄåÂ§öÁ∫øÁ®ãÂú®Â§ÑÁêÜ I/O ÊúâË∂≥Â§üÁöÑËøêË°åÊÄßËÉΩÔºåÂπ∂‰∏îÈÅøÂÖçÂç†Áî®ËøáÂ§öÁöÑÁ≥ªÁªüËµÑÊ∫ê„ÄÇÂΩìÁÑ∂ÔºåÂêå‰∏ÄËøõÁ®ãÁöÑÂ§ö‰∏™Á∫øÁ®ãË∑ØËôΩÁÑ∂ÂèØ‰ª•ÂÖ±‰∫´ÂÜÖÂ≠òÔºåÈÅøÂéª‰∫ÜËøõÁ®ãÈó¥ÈÄö‰ø°ÁöÑÈóÆÈ¢òÔºå‰ΩÜÊòØÂ§öÁ∫øÁ®ãÁöÑËµÑÊ∫êÂÖ±‰∫´„ÄÅÊä¢Â§∫‰πüÊòØ‰∏ÄÂ§ßÊ£òÊâãÈóÆÈ¢ò„ÄÇ

‚û° Â§öËøõÁ®ãÊúâËøõÁ®ãÂêåÊ≠•ÊñπÊ≥ï„ÄÅËøõÁ®ãÈó¥ÈÄö‰ø°ÈóÆÈ¢òÔºõ
‚û° Â§öÁ∫øÁ®ãÊúâÂÖ±‰∫´Êï∞ÊçÆÁ´ûÊÄÅÂ§ÑÁêÜÔºåÈúÄË¶ÅËß£ÂÜ≥Êï∞ÊçÆÂä†ÈîÅ‰øùÊä§ÊñπÈù¢ÁöÑÈóÆÈ¢òÔºõ

‰∏∫‰∫ÜËß£ÂÜ≥ËΩØ‰ª∂Â∑•Á®ãÈóÆÈ¢òÔºå‰∫∫‰ª¨ÊÄªÁªì‰∫Ü‰∏Ä‰∫õÂπ∂ÂèëÊ®°ÂûãÔºåÊØîÂ¶ÇÔºö

- Fork & Join Ê®°ÂûãÔºåC++ Ê†áÂáÜÂ∫ìÈááÁî®ÔºåÂ∞ÜÂ§ß‰ªªÂä°ÊãÜËß£‰∏∫Â∞è‰ªªÂä°Âπ∂ÂèëÊâßË°åÔºåÁªìÊûúÂÜçÊãºËµ∑Êù•„ÄÇ
- Actor Model Ê®°ÂûãÔºåErlang ÈááÁî®ÔºåÂ∞ÜÈóÆÈ¢òÊãÜËß£Â§ö‰∏™Ê≠•È™§‰∫§ÁªôÂ§ö‰∏™ Actor ËøõÁ®ãÂ§ÑÁêÜÔºåÂÆÉ‰ª¨‰πãÈó¥Âè™ÈÄöËøáÁõ¥Êé•ÂèëÊ∂àÊÅØËøõË°åÈÄö‰ø°„ÄÇ
- CSP Ê®°ÂûãÔºåCommunicating Sequential Processes ModelÔºåGolang ËØ≠Ë®ÄÈááÁî®ÔºåÂêÑ‰∏™ÊãÜËß£Ê≠•È™§Áî± goroutine ÂçèÁ®ãÂ§ÑÁêÜÔºå‰πãÈó¥ÈÄöËøáËÆ¢ÈòÖÈÄöËØùÁöÑÈ¢ëÈÅì(ÁÆ°ÈÅì)Êù•Âçè‰Ωú„ÄÇ
- Á∫øÁ®ã & ÈîÅÊ®°ÂûãÔºåÂÖ±‰∫´Êï∞ÊçÆÈÄöËøáÈîÅÊú∫Âà∂‰øùÊä§Èù¢ÂÆûÁé∞Â§öÁ∫øÁ®ãÂçè‰ΩúÔºåÈÅøÂÖçË¢´Â§ö‰∏™Á∫øÁ®ãËøõË°åËØªÂÜôËÄåÂá∫Êù•Êï∞ÊçÆÈîôËØØ„ÄÇ

Âú® Go/Python ËØ≠Ë®ÄÁöÑÊñáÊ°£‰∏≠ÈÉΩÊúâ‰∏ÄÂè•Âè£Âè∑Ôºö‚ÄúDo not communicate by sharing memory; instead, share memory by communicating.‚Äù

ÂèÇËÄÉÊùêÊñôÔºöSeven Concurrency Models in Seven Weeks by Paul Butcher


ÊúÄÂêéÂÜçËØ¥ËØ¥È´òÂπ∂ÂèëÔºåÂÆÉÂíåÂπ∂ÂèëËøô‰∏™Ê¶ÇÂøµÂ∑Æ‰∫Ü‰∏Ä‰∏™‚ÄúÈ´ò‚ÄùÂ≠óÔºåÊòØ‰∏™ÂÆΩÊ≥õÂæóÂ§öÁöÑÊ¶ÇÂøµ„ÄÇÈ´òÂπ∂ÂèëÊòØÊåáÂèØ‰ª•ËÆ©ËΩØ‰ª∂Á≥ªÁªüÂú®‰∏ÄÊÆµÊó∂Èó¥ÂÜÖËÉΩÂ§üÂ§ÑÁêÜÂ§ßÈáèÁöÑËØ∑Ê±Ç„ÄÇÊØîÂ¶ÇÔºåÊØèÁßíÈíüÂèØ‰ª•ÂÆåÊàê 10 ‰∏á‰∏™ËØ∑Ê±ÇÔºåËøôÁßçÈ´òÂπ∂ÂèëÊòØ‰∫íËÅîÁΩëÁ≥ªÁªüÁöÑ‰∏Ä‰∏™ÈáçË¶ÅÁöÑÁâπÂæÅ„ÄÇÂπ∂ÂèëÊ¶ÇÂøµ‰∏äËØ¥ÁöÑÊòØ‚ÄúÂ§ÑÁêÜ‚ÄùÔºåÂπ∂Ë°åÊ¶ÇÂøµ‰∏äËØ¥ÁöÑÊòØ‚ÄúÊâßË°å‚ÄùÔºåËÄåÈ´òÂπ∂ÂèëËØ¥ÁöÑÊòØÊúÄÁªàÊïàÊûú„ÄÇÂè™Ë¶ÅËÉΩËææÂà∞ÊïàÊûúÔºå‰∏çÁÆ°ÊÄé‰πàÂÆûÁé∞ÈÉΩË°å„ÄÇÂõ†Ê≠§ÔºåÊûÅÁ´Ø‰∏ÄÁÇπÈ´òÂπ∂ÂèëÁîöËá≥Âπ∂‰∏ç‰∏ÄÂÆöÈúÄË¶ÅÂπ∂Ë°åÔºåÂè™Ë¶ÅÂ§ÑÁêÜÈÄüÂ∫¶Âø´ÁöÑË∂≥Â§üÊª°Ë∂≥Ë¶ÅÊ±ÇÂ∞±ÂèØ‰ª•„ÄÇ

Â¶ÇÂêØÂä®‰∏Ä‰∏™ Nginx ËøõÁ®ãÔºåÂÆÉÂè™ËÉΩÁî®Âà∞‰∏Ä‰∏™ CPU Ê†∏ÂøÉÔºå‰πüÂ∞±‰∏çÂèØËÉΩÂπ∂Ë°å„ÄÇ‰ΩÜÊòØ‰ªñÂ¶ÇÊûúËÉΩÊØèÁßíËÉΩÂ§ÑÁêÜ 10 ‰∏á‰∏™ËØ∑Ê±ÇÔºåËÄå‰∏öÂä°ÈúÄÊ±ÇÂè™Ë¶ÅÊ±Ç 8 ‰∏á‰∏™ËØ∑Ê±ÇÂ∞±ÂèØ‰ª•‰∫ÜÔºåÈÇ£‰πàËøô‰∏™ÂçïËøõÁ®ãÁöÑ Nginx Êú¨Ë∫´Â∞±ÁÆóÈ´òÂπ∂Âèë‰∫Ü„ÄÇ

ÊãìÂ±ï‰∏Ä‰∏ãÔºå‰ªéÂïÜ‰∏ö‰∏äËÄÉËôëÔºåÈ´òÂπ∂ÂèëÂÆûÈôÖÁöÑÊÑèÊÄùÊòØ‚ÄúÁî®Â∞ΩÂèØËÉΩÂ∞ëÁöÑËµÑÊ∫êÂÆûÁé∞Ë∂≥Â§üÊª°Ë∂≥ÈúÄË¶ÅÁöÑÂπ∂ÂèëËØ∑Ê±ÇÊï∞ÈáèÔºå‰ª•ÂΩ¢ÊàêÁ´û‰∫â‰ºòÂäø‚ÄúÔºåÁî®ÊúâÈôêËµÑÊ∫ê„ÄÅÁü≠Êó∂Èó¥ÂÜÖÂ§ÑÁêÜÂ§ßÈáèËØ∑Ê±Ç„ÄÇ



## ==‚ö° Speed Up Your Python Program With Concurrency
- [Speed Up Your Python Program With Concurrency by Jim Anderson](https://realpython.com/python-concurrency/)

Jim Anderson ÂÖ≥‰∫éÂπ∂ÂèëÁºñÁ®ãÊ®°ÂûãÁöÑËøôÁØáÊïôÁ®ãÂÜôÂæóÁúüÂæóÊòØ‰∏çË¶ÅÂ§™Â•Ω‰∫ÜÔºåÊàëÂÜ≥ÂÆö‰∏çÁøªËØëÔºåËÄåÊòØÊëòÂΩïÂÖ∂‰∏≠ÂÖ≥ÈîÆÁöÑÈÉ®ÂàÜÔºåÂè¶Â§ñÂÜçÊ∑ªÂä†‰∏Ä‰∫õÈúÄË¶ÅÁªìÂêàËá™Â∑±Áä∂ÂÜµÁöÑ‰∏Ä‰∫õË°•ÂÖÖÂÜÖÂÆπÔºå‰Ωú‰∏∫ÊàëÁöÑ Concurrency in Python ÊñáÁ´†ÁöÑÂÆûÊìç‰ª£Á†Å„ÄÇ

Âú®ÂºÄÂßã‰πãÂâçÔºåÂºïÁî®ÂéüÊñáÈÖçÁΩÆÁöÑ‰∏ÄÊù°ÂπΩÈªòÁöÑÊµãËØïÈ¢òÔºö

> Python Concurrency Quiz
> You have an I/O-bound program that takes about 2 seconds to run and that only gets run once a week. Which concurrency library should you use?
>
> A. Multiprocessing
> B. Threading
> C. You should not use concurrency.
> D. Asyncio


ÂÜÖÂÆπÁõÆÂΩïÔºö

- What Is Concurrency?
- What Is Parallelism?
- When Is Concurrency Useful?
- How to Speed Up an I/O-Bound Program
    - Synchronous Version
    - threading Version
    - asyncio Version
    - multiprocessing Version
- How to Speed Up a CPU-Bound Program
    - CPU-Bound Synchronous Version
    - threading and asyncio Versions
    - CPU-Bound multiprocessing Version
- When to Use Concurrency
- Conclusion

How some of Python‚Äôs concurrency methods compare, including threading, asyncio, and multiprocessing.

‚úÖ What Is Concurrency?

The dictionary definition of concurrency is simultaneous occurrence. In Python, the things that are occurring simultaneously are called by different names (**thread**, **task**, **process**) but at a high level, they all refer to a sequence of instructions that run in order.

‚úÖ What Is Parallelism?

So far, you‚Äôve looked at concurrency that happens on a single processor. What about all of those CPU cores your cool, new laptop has? How can you make use of them? multiprocessing is the answer.

With multiprocessing, Python creates new processes. A process here can be thought of as almost a completely different program, though technically they‚Äôre usually defined as a collection of resources where the resources include memory, file handles and things like that. One way to think about it is that each process runs in its own Python interpreter.

Because they are different processes, each of your trains of thought in a multiprocessing program can run on a different core. Running on a different core means that they actually can run at the same time, which is fabulous. There are some complications that arise from doing this, but Python does a pretty good job of smoothing them over most of the time.

‚úÖ When Is Concurrency Useful?

Concurrency can make a big difference for two types of problems. These are generally called CPU-bound and I/O-bound.

I/O-bound problems cause your program to slow down because it frequently must wait for input/output (I/O) from some external resource. They arise frequently when your program is working with things that are much slower than your CPU.

Examples of things that are slower than your CPU are legion, but your program thankfully does not interact with most of them. The slow things your program will interact with most frequently are the file system and network connections.

Let‚Äôs see what that looks like:

![Timing Diagram of an I/O Bound Program](https://files.realpython.com/media/IOBound.4810a888b457.png)

In the diagram above, the blue boxes show time when your program is doing work, and the red boxes are time spent waiting for an I/O operation to complete. This diagram is not to scale because requests on the internet can take several orders of magnitude longer than CPU instructions, so your program can end up spending most of its time waiting. This is what your browser is doing most of the time.

On the flip side, there are classes of programs that do significant computation without talking to the network or accessing a file. These are the CPU-bound programs, because the resource limiting the speed of your program is the CPU, not the network or the file system.

Here‚Äôs a corresponding diagram for a CPU-bound program:

![Timing Diagram of an CPU Bound Program](https://files.realpython.com/media/CPUBound.d2d32cb2626c.png)

As you work through the examples in the following section, you‚Äôll see that different forms of concurrency work better or worse with CPU-bound and I/O-bound programs. Adding concurrency to your program adds extra code and complications, so you‚Äôll need to decide if the potential speed up is worth the extra effort. By the end of this article, you should have enough info to start making that decision.


### ‚úÖ I/O-bound - Synchronous Version

- https://docs.python-requests.org/en/master/
- https://docs.python-requests.org/en/master/user/advanced/

We‚Äôll start with a non-concurrent version of this task. Note that this program requires the requests module. You should `run pip install requests` before running it, probably using a virtualenv. This version does not use concurrency at all:

‰ΩøÁî® requests ÂåÖÁÆÄÂåñÁΩëÁªúËØ∑Ê±ÇÊìç‰ΩúÔºåÂÖ∂‰∏≠ Session ÊòØ‰∏Ä‰∏™Â∏¶Êúâ Cookie ‰ºöËØùÊîØÊåÅÁöÑÂÆûÁé∞Ôºå‰ΩøÁî® httpbin ÊúçÂä°ËøõË°åÊµãËØïÔºö

```py
import requests
s = requests.Session()
r = s.get('https://httpbin.org/cookies/set/sessioncookie/xyz')
print(r.text) # {"cookies": {"sessioncookie": "xyz"} }
r = s.get('https://httpbin.org/cookies')
print(r.text) # {"cookies": {"sessioncookie": "xyz"} }
```

Á¨¨‰∏Ä‰∏™Á§∫ËåÉ‰ª£Á†ÅÁâàÊú¨‰∏∫ÂêåÊ≠•‰ª£Á†ÅÂÆûÁé∞ÔºåÊ≤°ÊúâÂºÇÊ≠•„ÄÅÊ≤°ÊúâÂπ∂ÂèëÔºåÁõÆÁöÑÊòØÂ±ïÁ§∫È´òÂª∂Êó∂ I/O Êìç‰ΩúÊù°‰ª∂‰∏ãÁöÑÂêåÊ≠•ÊñπÊ°àÂºäÁ´ØÔºöÂêåÊ≠•Á≠âÂæÖËä±Ë¥πÂ§ßÈáèÊó∂Èó¥„ÄÇÊØè‰∏Ä‰∏™È°µÈù¢ËØ∑Ê±ÇÈÉΩÈúÄË¶ÅÁ≠âÂæÖ‰∏ä‰∏Ä‰∏™ËØ∑Ê±ÇËøîÂõûÊï∞ÊçÆÂêéÂÜçËøõË°åÔºåÂú®ËøôÊÆµÊó∂Èó¥Êï¥‰∏™Á≥ªÁªüÂè™ÂêëÁΩëÁªúÂèëÈÄÅ‰∫Ü‰∏Ä‰∏™ËØ∑Ê±ÇÔºåËøûÁΩëÁªúÂ∏¶ÂÆΩÈÉΩÊ≤°Êúâ‰ΩøÁî®ÂÆåÔºåÊõ¥Âà´ËØ¥ CPU ËµÑÊ∫ê„ÄÇ

- Ê≥®ÊÑè sites ÂàóË°®ÂêéÈù¢ÁöÑ * 80 Ë°®Á§∫Êï∞ÊçÆÂ§çÂà∂‰∏∫ 80 ‰ªΩËøõË°åÊµãËØïÔºõ
- ÊµãËØïÂåÖÂê´‰∏§‰∏™ÁΩëÁ´ôÂú∞ÂùÄÔºå‰∏ªË¶ÅÁõÆÁöÑÊòØÊèê‰æõ‰∏Ä‰∏™È´òÂª∂Êó∂ I/O Êï∞ÊçÆÔºå‰∏ÄËà¨È°µÈù¢ËÆøÈóÆ‰ªéÂá†ÁôæÊØ´ÁßíÂà∞Âá†ÁßíÈÉΩÊòØÊ≠£Â∏∏ÁöÑÔºõ
- Ëøô‰∏™Âü∫Êú¨ÊµãËØïÂ§ßÊ¶ÇÈúÄË¶Å‰∏ÄÂà∞‰∏§ÂàÜÈíüÂÆåÊàêÔºåÂêåÊú∫Âô®ÊµãËØïÁî®Êó∂ 47.69sÔºõ

```py
import requests
import time


def download_site(url, session):
    with session.get(url) as response:
        print(f"Read {len(response.content)} from {url}")


def download_all_sites(sites):
    with requests.Session() as session:
        for url in sites:
            download_site(url, session)


if __name__ == "__main__":
    sites = [
        "https://www.jython.org",
        "http://olympus.realpython.org/dice",
    ] * 80
    start_time = time.time()
    download_all_sites(sites)
    duration = time.time() - start_time
    print(f"Downloaded {len(sites)} in {duration} seconds")
```

### ‚úÖ I/O-bound - threading Version

As you probably guessed, writing a threaded program takes more effort. You might be surprised at how little extra effort it takes for simple cases, however. Here‚Äôs what the same program looks like with threading.

In this version, you‚Äôre creating a ThreadPoolExecutor, which seems like a complicated thing. Let‚Äôs break that down: `ThreadPoolExecutor` = Thread + Pool + Executor.

The other interesting change in our example is that each thread needs to create its own requests.Session() object. When you‚Äôre looking at the documentation for requests, it‚Äôs not necessarily easy to tell, but reading this issue 2766, it seems fairly clear that you need a separate Session for each thread.

https://github.com/requests/requests/issues/2766

This is one of the interesting and difficult issues with threading. Because the operating system is in control of when your task gets interrupted and another task starts, any data that is shared between the threads needs to be protected, or thread-safe. Unfortunately requests.Session() is not thread-safe.

There are several strategies for making data accesses thread-safe depending on what the data is and how you‚Äôre using it. One of them is to use thread-safe data structures like Queue from Python‚Äôs queue module.

These objects use low-level primitives like threading.Lock to ensure that only one thread can access a block of code or a bit of memory at the same time. You are using this strategy indirectly by way of the ThreadPoolExecutor object.

Another strategy to use here is something called thread local storage. threading.local() creates an object that looks like a global but is specific to each individual thread. In your example, this is done with thread_local and get_session():


Â∞ÜÂêåÊ≠•ÁâàÊú¨ÊîπÊàêÂ§öÁ∫øÁ®ãÁâàÊú¨ÔºåÈÄöËøáÂ§ö‰∏™Á∫øÁ®ãÂêåÊó∂ÊâßË°åÈ°µÈù¢ËØ∑Ê±ÇÔºå‰æãÂ≠êËÆæÁΩÆ‰∏∫ 5 ‰∏™Á∫øÁ®ãÔºåËøôÊ†∑ÊÑèÂë≥ÁùÄÂêåÊ†∑ÊØèÊâßË°å 5 ‰∏™È°µÈù¢ËØ∑Ê±ÇÂè™ÈúÄË¶ÅÂ§ßÁ∫¶Á≠âÂæÖ‰∏Ä‰∏™ËøûÊé•ÊâÄËä±Ë¥πÁöÑÊó∂Èó¥Ôºå‰πüÂ∞±ÊòØÂ§ßÊ¶ÇÊØîÂêåÊ≠•ÁâàÊú¨ËäÇÁúÅ‰∫Ü 4/5 ÁöÑÊó∂Èó¥ÔºåÂêåÊú∫Âô®ÊµãËØïÁî®Êó∂ 8.90sÔºåÂΩìÁÑ∂ËøôÂæàÂèóÁΩëÁªúÁéØÂ¢ÉÁöÑÂΩ±Âìç„ÄÇ

Â§öÁ∫øÁ®ãÁâàÊú¨Ë¶ÅÁÇπÔºö

- ‰ΩøÁî® concurrent.futures Êèê‰æõÁöÑÁé∞ÊàêÁ∫øÁ®ãÊ±†ÁÆ°ÁêÜÂ∑•ÂÖ∑ÔºåÈÄöËøá ThreadPoolExecutor ÊñπÊ≥ïËé∑ÂèñÔºõ
- Á∫øÁ®ãÊ±†ÁÆ°ÁêÜÂ∑•ÂÖ∑ Executor Êèê‰æõ map() ÊñπÊ≥ïÂèØ‰ª•Â∞ÜÊï∞ÊçÆ‰∏ÄÂØπ‰∏ÄÂú∞ÊåáÊ¥æÁªôÁ©∫Èó≤Á∫øÁ®ãÔºõ
- ‰ΩøÁî® threading Á∫øÁ®ãÂ∫ì threading.local() Êèê‰æõÁöÑÂΩìÂâçÁ∫øÁ®ãÊú¨Âú∞ÂèòÈáèÔºå‰øùËØÅÊï∞ÊçÆÁöÑÁ∫øÁ®ãÂÆâÂÖ®Ôºõ
- Âú®Á∫øÁ®ãÊú¨Âú∞ÂèòÈáèÂàõÂª∫ requests.Session ÂÆû‰æãÔºåÂõ†‰∏∫Ë¶ÅÁ°Æ‰øùÂÆÉÂú®Áã¨Á´ãÁ∫øÁ®ã‰∏äËøêË°åÔºõ

![Multi-Threading Execution Timing Diagram](https://files.realpython.com/media/Threading.3eef48da829e.png)

```py
import concurrent.futures
import requests
import threading
import time


thread_local = threading.local()


def get_session():
    if not hasattr(thread_local, "session"):
        thread_local.session = requests.Session()
    return thread_local.session


def download_site(url):
    session = get_session()
    with session.get(url) as response:
        print(f"Read {len(response.content)} from {url}")


def download_all_sites(sites):
    with concurrent.futures.ThreadPoolExecutor(max_workers=5) as executor:
        executor.map(download_site, sites)


if __name__ == "__main__":
    sites = [
        "https://www.jython.org",
        "http://olympus.realpython.org/dice",
    ] * 80
    start_time = time.time()
    download_all_sites(sites)
    duration = time.time() - start_time
    print(f"Downloaded {len(sites)} in {duration} seconds")
```

ËôΩÁÑ∂Â§öÁ∫øÁ®ãÂ§ßÂ§ßÊèêÈ´ò‰∫ÜÊÄßËÉΩÔºåÂêåÊó∂‰πüÂ±ïÁ§∫‰∫ÜÂ¶Ç‰ΩïÂú®Á∫øÁ®ã‰πãÂâçÂÖ±‰∫´Êï∞ÊçÆÔºåËøôÈáåÊòØÈ°µÈù¢Âú∞ÂùÄÊï∞ÊçÆÔºå‰ΩÜÊòØÂ§ö‰∏™Á∫øÁ®ãÂØπÂÖ±‰∫´Êï∞ÊçÆÁöÑËØªÂÜôÂ≠òÂú® Race conditions ÈóÆÈ¢òÔºåÁ´ûÊÄÅÊòØÂ§öÁ∫øÁ®ãÂêåÊó∂ËØªÂÜôÊï∞ÊçÆÔºåÂØºËá¥Êï∞ÊçÆÈÄªËæëÊ∑∑‰π±ÂºïÂèëÁ®ãÂ∫èÈîôËØØÁöÑÁä∂ÊÄÅÔºåËøôÁßçÁä∂ÊÄÅ‰πüÂç≥ÊòØ Non-Therad Safe ÈùûÁ∫øÁ®ãÂÆâÁä∂ÊÄÅ„ÄÇ

‰∏∫‰∫ÜÊºîÁ§∫ËøôÁßçÁä∂ÊÄÅÔºå‰ΩøÁî®‰ª•‰∏ã‰ª£Á†ÅËøõË°åÊµãËØïÔºö

- ÂàõÂª∫‰∏Ä‰∏™ÂÖ®Â±ÄÂèòÈáè counter ‰Ωú‰∏∫Á∫øÁ®ãÈó¥ÂÖ±‰∫´‰∫ÜÁöÑÊï∞ÊçÆÔºõ
- ÂàõÂª∫ 5000 Á∫øÁ®ãÔºåÊØè‰∏™Á∫øÁ®ãÂØπ counter Ëá™Â¢ûÊìç‰ΩúÔºåÂä† 100Ôºõ
- Âú®Á∫øÁ®ãÂÆâË£ÖÁöÑÁä∂ÊÄÅ‰∏ãÔºåcounter ÊúÄÂêéÁöÑÂÄºÊÄªÊòØ‰∏∫ 5000 * 100 = 500000

‰ΩÜÊòØÔºåÂú® CPython ËøêË°åËøô‰∏™‰æãÂ≠ê‰πü‰ºöÊâìÂç∞Âá∫ counter = 500000ÔºåÂÆûÈôÖ‰∏äËøôÂè™ÊòØ‰∏ÄÁßçÂ∑ßÂêà„ÄÇÂõ†‰∏∫ÔºåCPython ÂÆûÁé∞‰∏ä‰ΩøÁî®‰∫Ü GIL ÂÖ®Â±ÄÈîÅÊù•‰øùËØÅÂçïÁ∫øÁ®ãËøêË°åÔºåÂú® Python Â±ÇÈù¢Ôºålist „ÄÅdict Á≠âÂÜÖÂª∫ÂØπË±°ÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåËøôÊòØÊúÄÂü∫Êú¨ÁöÑÂ∏∏ËØÜ„ÄÇ

CPython ÂºÄÂèëËÄÖËÆ§‰∏∫ÊµãËØïÁªìÊûúË°®ÊòéÔºåÂºïÂÖ•ÂØπË±°ÈîÅËé∑ÂæóÁöÑÂ§öÁ∫øÁ®ã Âπ∂Ë°åÊâßË°åËÉΩÂäõÔºåÂá†‰πéË¢´Âä†Ëß£ÈîÅÂºÄÈîÄÂÆåÂÖ®ÊäµÊ∂à„ÄÇËÄåÂú®ÂçïÁ∫øÁ®ãÁéØÂ¢É‰∏ãÔºå GIL ÊñπÊ°à‰ºòÂäøÊòéÊòæÔºåÊó†ÈúÄÈ¢ëÁπÅÂä†ÈîÅ„ÄÅËß£ÈîÅ„ÄÇ


Âç≥‰ΩøÊòØÂçïÁ∫øÁ®ãËøêË°åÔºåË¶ÅÂú®Ëøô += Êìç‰Ωú‰∏≠Èó¥ÈÅáÂà∞Êìç‰ΩúÁ≥ªÁªüÁöÑË∞ÉÂ∫¶‰πüÊòØÁõ∏ÂΩìÁΩïËßÅÔºåÊó†ËÆ∫Â¶Ç‰ΩïÔºåÂ∞±ÁÆóÊòØÁôæ‰∏á‰πã‰∏ÄÁöÑÂá∫ÈîôÊú∫ÁéáÔºå‰πüË∂≥‰ª•ËØ¥ÊòéËøô‰∏™Á®ãÂ∫è‰∏çÂèØÈù†ÔºÅ

ÈáçË¶ÅÁöÑÊòØÔºåcounter += 1 ‰∏çÊòØÂéüÂ≠êÊìç‰ΩúÔºåËøôÈáåÈúÄË¶ÅÂÖàËØªÂèñÊï∞ÊçÆÂÜçÂä† 1 Âêé‰øùÂ≠òÔºåÊ∂âÂèä‰∏§Ê≠•Êìç‰ΩúÔºåÂπ∂‰∏îÊ≤°ÊúâÂä†‰øùÊä§ÔºåÊâÄ‰ª•‰∏çÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÊìç‰Ωú„ÄÇ

Êìç‰ΩúÁ≥ªÁªüÂπ∂‰∏çÁü•ÈÅì‰ª£Á†ÅÁªìÊûÑÔºåÂÆÉÂè™ÊòØÊåâÁ∫øÁ®ãË∞ÉÂ∫¶ÁÆóÊ≥ïÂÆâÊéíÁ∫øÁ®ãÁöÑËøêË°åÔºåÂØπ‰∫éÁé∞‰ª£È´òÈÄü CPU Êù•ËØ¥Ôºå100 ‰∏™Êï∞ÁöÑËá™Â¢ûÊìç‰ΩúÊòØÂæàÂø´ÂèØ‰ª•ÂÆåÊàêÁöÑÂ∑•‰ΩúÔºåÂπ∂‰∏îÈÄöÂ∏∏‰ºöÂú®‰∏Ä‰∏™‰ªªÂä°ÂàáÊç¢ÂâçÂ∞±ÂÆåÊàê„ÄÇÊâÄ‰ª•ÔºåÂΩìÁ¨¨‰∫å‰∏™Á∫øÁ®ãÂºÄÂßãÂ∑•‰ΩúÊó∂ÔºåËØªÂèñÂà∞ÁöÑ counter Êï∞ÊçÆÂ∞±ÊòØ‰∏ä‰∏Ä‰∏™Á∫øÁ®ãÂ§ÑÁêÜÂ•ΩÁöÑÊï∞ÊçÆÔºåÊòØÊ≠£Á°ÆÁöÑ„ÄÇÂØπ‰∫éÂ∑≤Áªè‰∏äÁ∫øÁöÑ‰∫ßÂìÅÊù•ËØ¥ÔºåËøôÁßçÈöêÁßòÁöÑÈÄªËæëÈîôËØØÊòØÊúÄËá¥ÂëΩÔºå‰πüÊòØÊúÄÈöæËß£ÂÜ≥ÁöÑÈóÆÈ¢ò‰πã‰∏Ä„ÄÇ

```py
import concurrent.futures

counter = 0

def increment_counter(fake_value):
    global counter
    for _ in range(100):
        counter += 1
    pass

def main():
    fake_data = [x for x in range(5000)]
    counter = 0
    with concurrent.futures.ThreadPoolExecutor(max_workers = 5000) as executor:
        executor.map(increment_counter, fake_data)
    pass

if __name__ == "__main__":
    main()
    print(f"counter = {counter}")
```

‰∏∫‰∫ÜËÆ©Á´ûÊÄÅÂØºËá¥Êï∞ÊçÆÈÄªËæëÊ∑∑‰π±ÈóÆÈ¢òÊõ¥Âä†ÊòéÊòæÔºåÂèØ‰ª•‰ΩøÁî® time.sleep() ÂáΩÊï∞ËÆ©Á∫øÁ®ãËøõÂÖ•Áü≠Êó∂ÊöÇÂÅúËøêË°åÔºåÊ®°ÊãüÈáçËøêÁÆóÂ∑•‰ΩúÈáèÔºåÂπ∂Â§ßÂ§ßÂ¢ûÂä†‰∏≠Èó¥ÈÅ≠ÈÅá CPU Ë∞ÉÂ∫¶ÁöÑÊú∫‰ºöÔºö

```py
c = counter
time.sleep(0.1**4)
counter = c+1
# tid = threading.get_native_id()
# ppid = os.getppid()
# pid = os.getpid()
# print(f"counter = {counter} parent {ppid} pid: {pid} tid: {tid}" )
```


### ‚úÖ I/O-bound - asyncio Version
https://stackoverflow.com/questions/49005651/how-does-asyncio-actually-work/51116910#51116910

Generators are objects that allow us to suspend the execution of a python function. User curated generators are implement using the keyword yield. By creating a normal function containing the yield keyword, we turn that function into a generator.

Communicating with a generator

A less-known feature of generators, is the fact that you can communicate with them using two methods: *send()* and *throw()*.

>>> def test():
...     val = yield 1
...     print(val)
...     yield 2
...     yield 3
...
>>> gen = test()
>>> next(gen)
1
>>> gen.send("abc")
abc
2
>>> gen.throw(Exception())

Returning values from generators

Returning a value from a generator, results in the value being put inside the StopIteration exception. We can later on recover the value from the exception and use it to our need.

>>> def test():
...     yield 1
...     return "abc"
...
>>> gen = test()
>>> next(gen)
1
>>> try:
...     next(gen)
... except StopIteration as exc:
...     print(exc.value)
...
abc

Ê®°ÂùóÂèÇËÄÉÊñáÊ°£Ôºö

    +-- Doc\library
    |  ‚úí ipc.rst               => Networking and Interprocess Communication
    |   ‚Ä¢ - asyncio.rst              => `asyncio` --- Asynchronous I/O
    |   ‚Ä¢ High-level APIs
    |   |   ‚Ä¢ asyncio-task.rst       => Coroutines and Tasks
    |   |   ‚Ä¢ asyncio-stream.rst     => Streams
    |   |   ‚Ä¢ asyncio-sync.rst       => Synchronization Primitives
    |   |   ‚Ä¢ asyncio-subprocess.rst => Subprocesses
    |   |   ‚Ä¢ asyncio-queue.rst      => Queues
    |   |   ‚Ä¢ asyncio-exceptions.rst => Exceptions
    |   ‚Ä¢ Low-level APIs
    |   |   ‚Ä¢ asyncio-eventloop.rst  => Event Loop
    |   |   ‚Ä¢ asyncio-future.rst     => Futures
    |   |   ‚Ä¢ asyncio-protocol.rst   => Transports and Protocols
    |   |   ‚Ä¢ asyncio-policy.rst     => Policies
    |   |   ‚Ä¢ asyncio-platforms.rst  => Platform Support
    |   ‚Ä¢ Guides and Tutorials
    |   |   ‚Ä¢ asyncio-api-index.rst  => High-level API Index
    |   |   ‚Ä¢ asyncio-llapi-index.rst=> Low-level API Index
    |   |   ‚Ä¢ asyncio-dev.rst        => Developing with asyncio   


ÂºÇÊ≠• I/O ÂÆûÁé∞ÁâàÊú¨ÈúÄË¶Å‰ΩøÁî® aiohttp Ê®°ÂùóÔºö

    https://aiohttp.readthedocs.io/en/stable/
    pip install aiohttp[speedups]


ÂºÇÊ≠•ÁâàÊú¨Âú®ÊµãËØï‰∏≠ÔºåÁΩëÁªúÂìçÂ∫îÊØîÂ§öÁ∫øÁ®ãÁöÑÂìçÂ∫îË¶ÅÂ•ΩÔºåÈÄüÂ∫¶ÊòéÊòæË¶ÅÂø´ÔºåÂêåÊó∂Èó¥ÊÆµÁõ∏ÂêåÁΩëÁªúÁéØÂ¢É‰∏ãÊµãËØïÊó∂Èó¥‰∏∫ 2.50 Áßí„ÄÇ

ÂéüÂõ†ÊûÅÊúâÂèØËÉΩÊòØÂèóÂà∞ GIL - Global Interpreter Lock ÂÖ®Â±ÄËß£ÈáäÂô®ÈîÅÁöÑÈôêÂà∂ÔºåÂú® GIL ÂêåÊ≠•Á∫øÁ®ãÊú∫Âà∂‰∏ãÔºåÂÆÉ‰ΩøÂæó‰ªª‰ΩïÊó∂Âàª‰ªÖÊúâ‰∏Ä‰∏™Á∫øÁ®ãÂú®ÊâßË°å„ÄÇÂç≥‰æøÂú®Â§öÊ†∏ÂøÉÂ§ÑÁêÜÂô®‰∏äÔºå‰ΩøÁî® GIL ÁöÑËß£ÈáäÂô®‰πüÂè™ÂÖÅËÆ∏Âêå‰∏ÄÊó∂Èó¥ÊâßË°å‰∏Ä‰∏™Á∫øÁ®ãÔºåÂπ∂‰∏îÂú® I/O-bound Â∫îÁî®‰∏≠ÔºåÁ∫øÁ®ãÁöÑÂàáÊç¢ÊòéÊòæ‰ºöÂä£‰∫éÂºÇÊ≠•ÂçèÂíå‰ªªÂä°ÁöÑÂàáÊç¢„ÄÇ

ÂçèÁ®ãÊú¨Ë∫´ËøêË°å‰∫éÂçïÁ∫øÁ®ãÁéØÂ¢ÉÔºåÂç≥‰∏ç‰ºöËß¶Âèë GILÔºåÂêåÊó∂‰πü‰∏çÈúÄË¶ÅÁ≥ªÁªüÁöÑÁ∫øÁ®ãË∞ÉÂ∫¶Âô®ÂèÇ‰∏éÊä¢Âç†ÂºèÁöÑË∞ÉÂ∫¶ÔºåÈÅøÂÖç‰∫ÜÂ§öÁ∫øÁ®ãÁöÑ‰∏ä‰∏ãÊñáÂàáÊç¢„ÄÇÊâÄ‰ª•ÂÆÉÁöÑÊÄßËÉΩË¶ÅÊØîÂ§öÁ∫øÁ®ãÂ•ΩÔºåÁõ∏ÊØîÂ§öÁ∫øÁ®ãÔºåÂçèÁ®ãÂè™ÈúÄË¶ÅÊûÅÂ∞ëÁöÑÁ≥ªÁªüËµÑÊ∫ê„ÄÇ

ÂçèÁ®ãÁöÑÁº∫ÁÇπ‰πüÊòØÊòéÊòæÁöÑÔºåÂõ†‰∏∫ÂçïÁ∫øÁ®ãÔºåÊâÄ‰ª•ÔºåÂΩìÂÖ∂‰∏≠‰∏Ä‰∏™‰ªªÂä°‰∏çÁ®≥ÂÆöÊó∂ÔºåÂ∞ÜÂΩ±ÂìçÊï¥‰∏™Á∫øÁ®ãÁöÑÂ∑•‰ΩúÔºåËøôÁõ¥Êé•ÂØºËá¥ÂºÇÊ≠•Â§ö‰ªªÂä°ÁöÑ‰ΩúÁî®ÂÆåÂÖ®Êó†ÊïàÔºåÊâÄ‰ª•ÂçáÁ∫ßÁâàÊòØÂ§öËøõÁ®ãÁâàÊú¨„ÄÇ

Âè¶Â§ñÔºåÂçèÁ®ãÈîÅÊòØÂõ†‰∏∫ÂºÇÊ≠•ÁºñÁ®ã‰πü‰ºöÂõ†‰∏∫ÊâßË°åÊó∂Êú∫ÁöÑ‰∏çÁ°ÆÂÆöÂºïËµ∑ÈÄªËæë‰∏äÁöÑÊ∑∑‰π±Ôºå‰∏∫‰∫ÜÂçèÁ®ãÂêåÊ≠•Ôºå‰øùËØÅÈÄªËæë‰∏äÂÖàÂêéÂÖ≥Á≥ªÂºïÂÖ•ÂçèÁ®ãÈîÅ„ÄÇ

Â¶ÇÊûúÂçèÁ®ãÂú®Êìç‰ΩúÂÖ±‰∫´ÂèòÈáèÁöÑËøáÁ®ã‰∏≠ÔºåÊ≤°Êúâ‰∏ªÂä®ÊîæÂºÉÊâßË°åÊùÉÔºåÊ≤°Êúâ‰∏ªÂä®ËØ∑Ê±ÇÊåÇËµ∑ÔºåÈÇ£Â∞±‰∏çÈúÄË¶ÅÂä†ÈîÅÔºåÊâßË°åËøáÁ®ãÊú¨Ë∫´Â∞±ÊòØÂÆâÂÖ®ÁöÑ„ÄÇ

ÂçèÁ®ãÈîÅÂéüÁêÜÂæàÁÆÄÂçïÔºåÂêå‰∏Ä‰∏™ key Âè™Êúâ‰∏Ä‰∏™ÂçèÁ®ãËÉΩÊâßË°åÔºåÂÖ∂ÂÆÉÂêå‰∏Ä‰∏™ key ÁöÑÂçèÁ®ãÂ∞ÜÈòüÂàóÔºåËøô‰∏™ÂçèÁ®ãÊâßË°åÂÆå‰ºöÂî§ÈÜí‰∏ã‰∏Ä‰∏™ÂçèÁ®ã„ÄÇ

Ê≥®ÊÑèÔºåÂçèÁ®ãÈîÅÂè™Â∫îÁî®‰∫éÂçïÁ∫øÁ®ãÁéØÂ¢ÉÔºåÊâÄ‰ª•Âπ∂‰∏çËÉΩ‰øùËØÅÁ∫øÁ®ãÂÆâË£Ö„ÄÇ

ÂºÇÊ≠• I/O Êé•Âè£‰∏≠Êúâ‰∏âÁ±ªÂØπË±°ÊòØÂèØÁ≠âÂæÖÁöÑÔºåAwaitablesÔºö

‚úÖ.. rubric:: Coroutines
‚úÖ.. rubric:: Tasks
‚úÖ.. rubric:: Futures

ÂºÇÊ≠• I/O ÁâàÊú¨ÁöÑË¶ÅÁÇπÔºö

- ‰ΩøÁî® async Â£∞ÊòéÂºÇÊ≠•ÂáΩÊï∞ÔºåÂπ∂‰∏î‰ΩøÁî® await Á≠âÂæÖÂºÇÊ≠•ÂáΩÊï∞ÊâßË°åËøîÂõûÁªìÊûúÔºõ
- ‰ΩøÁî® asyncio.ensure_future() ÂàõÂª∫ FutureÔºåËøôÊòØÂºÇÊ≠•‰ªªÂä°ÁöÑÁà∂Á±ªÔºõ
- ‰ΩøÁî® asyncio.create_task() ÂàõÂª∫‰ªªÂä°ÔºåÂ∞ÜÂºÇÊ≠•ÂáΩÊï∞ÂåÖË£ÖÊàêÂçèÁ®ãÔºõ
- Á≠âÂæÖ asyncio.gather() Ê±áÈõÜÁöÑÂºÇÊ≠•‰ªªÂä°Ôºõ
- ‰ΩøÁî® asyncio.run() ÊâßË°åÂºÇÊ≠•‰ªªÂä°;
- Python 3.7 ‰ª•‰∏ãÊóßÁâàÊú¨ÔºåÂÖàËé∑Âèñ‰∫ã‰ª∂ÁéØÂÜçÊâßË°å asyncio.get_event_loop().run_until_complete()Ôºõ


```py
import asyncio
import time
import aiohttp


async def download_site(session, url):
    async with session.get(url) as response:
        print("Read {0} from {1}".format(response.content_length, url))


async def download_all_sites(sites):
    async with aiohttp.ClientSession() as session:
        tasks = []
        for url in sites:
            task = asyncio.ensure_future(download_site(session, url))
            tasks.append(task)
        await asyncio.gather(*tasks, return_exceptions=True)


if __name__ == "__main__":
    sites = [
        "https://www.jython.org",
        "http://olympus.realpython.org/dice",
    ] * 80
    start_time = time.time()
    # Older version then Python 3.7
    # asyncio.get_event_loop().run_until_complete(download_all_sites(sites))
    # Python 3.7+
    asyncio.set_event_loop_policy(asyncio.WindowsSelectorEventLoopPolicy())
    asyncio.run(download_all_sites(sites))
    duration = time.time() - start_time
    print(f"Downloaded {len(sites)} sites in {duration} seconds")
```

![Timing Diagram of a Asyncio Solution](https://files.realpython.com/media/Asyncio.31182d3731cf.png)



Python 3.7 ÂêéÂØπ asyncio ËøõË°å‰∫ÜÊîπËøõÔºåÂèØ‰ª•Áõ¥Êé•Ë∞ÉÁî® asyncio.run() ÊâßË°åÂçèÁ®ãÁ®ãÂ∫èÔºåËÄå‰∏çÈúÄÁÆ°Â∫ïÂ±Ç APIÔºå‰∫ã‰ª∂Âæ™ÁéØ loop ÁöÑÊìç‰Ωú„ÄÇÂÉè aiohttp ËøôÁ±ªÁ¨¨‰∏âÊñπÂçèÁ®ãÂ∫ìÈÉΩÊòØ‰æùËµñ‰∫é asyncio Ê†áÂáÜÂ∫ìÔºå‰ΩÜÂÆÉÂØπ Windows ÁöÑÊîØÊåÅÊú¨Êù•Â∞±‰∏çÂ•Ω„ÄÇ

Python 3.8 ÂêéÈªòËÆ§‰∏∫ Windows Á≥ªÁªüÂêØÁî® ProactorEventLoop ‰∫ã‰ª∂Âæ™ÁéØÔºåÊñáÊ°£ÊèèËø∞‰∫ÜÂÖ∂Âú® Windows ‰∏ãÁöÑÁº∫Èô∑Ôºöhttps://docs.python.org/zh-cn/3/library/asyncio-platforms.html#windows üëà

Âú® Windows ‰∏äÔºåÈªòËÆ§ÁöÑ‰∫ã‰ª∂Âæ™ÁéØ ProactorEventLoop ÊîØÊåÅÂ≠êËøõÁ®ãÔºåËÄå SelectorEventLoop Âàô‰∏çÊîØÊåÅ„ÄÇ

ÂºïÂèëÂºÇÂ∏∏ÁöÑÂáΩÊï∞ÊòØ ProactorBasePipeTransport.__del__ Ôºåaiohttp Âú®Á®ãÂ∫èÈÄÄÂá∫ÈáäÊîæÂÜÖÂ≠òÊó∂Ëá™Âä®Ë∞ÉÁî®‰∫ÜÂÖ∂__del__ ÊñπÊ≥ïÔºå‰∏Ä‰∏≤ËøûÁéØÂèçÂ∫îÊúÄÁªàÊäõÂá∫‰∫Ü RuntimeError: Event loop is closed

‰∏ÄËà¨ÁöÑÂçèÁ®ãÁ®ãÂ∫è‰∏ç‰ΩøÁî® ProactorBasePipeTransport ‰πü‰∏ç‰ºöÂá∫Áé∞ËøôÁßçÈóÆÈ¢òÔºåËß£ÂÜ≥ÊñπÊ≥ïÂèØ‰ª•Âä† try except Â§ÑÁêÜÔºåÂΩìÁÑ∂ËøôÁßçÈöêËóè Exception ÁöÑÊìç‰ΩúÂπ∂‰∏çÂ•ΩÔºåÂç≥‰ΩøÂà§Êñ≠ str(exception) == "Event loop is closed" ‰πü‰∏çÊòØ‰∏ÄÁßçÂ•ΩÊñπÊ≥ï„ÄÇ

Êõ¥Â•ΩÁöÑÊñπÊ≥ïÊòØÂú®Ë∞ÉÁî® run ÂáΩÊï∞ÂâçÔºåÊõøÊç¢ÈªòËÆ§ÁöÑ ProactorEventLoop ‰∏∫ SelectorEventLoopÔºåÂè™ÊòØËøôÊ†∑Â∞±‰∏çÊîØÊåÅÂ≠êËøõÁ®ãÔºö

```py
asyncio.set_event_loop_policy(asyncio.WindowsSelectorEventLoopPolicy())
asyncio.run(main())
```

The Problems With the asyncio Version

There are a couple of issues with asyncio at this point. You need special async versions of libraries to gain the full advantage of asyncio. Had you just used requests for downloading the sites, it would have been much slower because requests is not designed to notify the event loop that it‚Äôs blocked. This issue is getting smaller and smaller as time goes on and more libraries embrace asyncio.

Another, more subtle, issue is that all of the advantages of cooperative multitasking get thrown away if one of the tasks doesn‚Äôt cooperate. A minor mistake in code can cause a task to run off and hold the processor for a long time, starving other tasks that need running. There is no way for the event loop to break in if a task does not hand control back to it.




### ‚úÖ I/O-bound - multiprocessing

Unlike the previous approaches, the multiprocessing version of the code takes full advantage of the multiple CPUs that your cool, new computer has. Or, in my case, that my clunky, old laptop has. Let‚Äôs start with the code:

Â§öËøõÁ®ãÁâàÊú¨ÊµãËØï‰∏≠ÊòéÊòæÊÑüÂèóÂà∞ÈáçÂ∫¶ËµÑÊ∫êÊ∂àËÄóÔºåËøô‰πüÊòØÂ§öÊ†∏ÂøÉ CPU ËµÑÊ∫êÂà©Áî®ÁöÑÊúÄÂ•ΩÊñπÂºèÔºå‰ΩÜÊòØÂú® I/O-bound ÈóÆÈ¢ò‰∏äÔºåÂ∞±ÁÆóÂ¢ûÂä†ÂÜçÂ§öÁöÑ CPU ‰πüÊó†Ê≥ïÊèêÈ´ò I/O Áì∂È¢àÈôêÂà∂„ÄÇÊâÄ‰ª•Âú®Â§öËøõÁ®ãÁâàÊú¨‰∏≠ÔºåHTTP ËØ∑Ê±ÇÁöÑÊïàÁéáÂπ∂‰∏çÂèäÂºÇÊ≠• I/O ÁâàÊú¨Êù•ÂæóÂ•ΩÔºåÊµãËØïÁªìÊûúÊó∂Èó¥Âú® 6.50 Áßí‰∏ä‰πüÊòæÁ§∫‰∫ÜÂ∑ÆÂà´„ÄÇ‰ΩÜÊòØË°®Áé∞‰ªçÁÑ∂Â•Ω‰∫éÂ§öÁ∫øÁ®ãÁâàÊú¨Ôºå‰∏ÄÊñπÈù¢ CPython ÁöÑ GIL Êó†Ê≥ïÂèëÊå•Â§öÁ∫øÁ®ã‰ΩúÁî®ÔºåÂè¶‰∏ÄÊñπÈù¢ÔºåÂ§öËøõÁ®ãÁ°ÆÂÆûÊòØÂà©Áî® CPU ËµÑÊ∫êÁöÑÊúÄ‰Ω≥ÊñπÂºè„ÄÇ

Ê†πÊçÆ‰∏çÂêåÁöÑÁ≥ªÁªüÔºåÂ§öËøõÁ®ãÊ®°ÂùóÊèê‰æõÂ§öÁßçÊñπÂºèÂêØÂä®ËøõÁ®ãÔºåset_start_method() ÂáΩÊï∞ËÆæÁΩÆÂêØÂä®ËøõÁ®ãÁöÑÊñπÂºèÔºö

- *spawn*Ôºö‰ªéÂ§¥ÊûÑÂª∫‰∏Ä‰∏™Â≠êËøõÁ®ãÔºåÁà∂ËøõÁ®ãÁöÑÊï∞ÊçÆÁ≠âÊã∑Ë¥ùÂà∞Â≠êËøõÁ®ãÁ©∫Èó¥ÂÜÖÔºåÊã•ÊúâËá™Â∑±ÁöÑPythonËß£ÈáäÂô®ÔºåÊâÄ‰ª•ÈúÄË¶ÅÈáçÊñ∞Âä†ËΩΩ‰∏ÄÈÅçÁà∂ËøõÁ®ãÁöÑÂåÖÔºåÂõ†Ê≠§ÂêØÂä®ËæÉÊÖ¢ÔºåÁî±‰∫éÊï∞ÊçÆÈÉΩÊòØËá™Â∑±ÁöÑÔºåÂÆâÂÖ®ÊÄßËæÉÈ´ò„ÄÇ

- *fork*ÔºöÈô§‰∫ÜÂøÖË¶ÅÁöÑÂêØÂä®ËµÑÊ∫êÂ§ñÔºåÂÖ∂‰ªñÂèòÈáèÔºåÂåÖÔºåÊï∞ÊçÆÁ≠âÈÉΩÁªßÊâøËá™Áà∂ËøõÁ®ãÔºåÂπ∂‰∏îÊòØcopy-on-writeÁöÑÔºå‰πüÂ∞±ÊòØÂÖ±‰∫´‰∫ÜÁà∂ËøõÁ®ãÁöÑ‰∏Ä‰∫õÂÜÖÂ≠òÈ°µÔºåÂõ†Ê≠§ÂêØÂä®ËæÉÂø´Ôºå‰ΩÜÊòØÁî±‰∫éÂ§ßÈÉ®ÂàÜÈÉΩÁî®ÁöÑÁà∂ËøõÁ®ãÊï∞ÊçÆÔºåÊâÄ‰ª•ÊòØ‰∏çÂÆâÂÖ®ÁöÑËøõÁ®ã„ÄÇ

- *forkserver*Ôºö ÂêØÂä®‰∏Ä‰∏™ËøõÁ®ãÊúçÂä°Âô®ÔºåÁÑ∂ÂêéÈúÄË¶ÅÊñ∞ËøõÁ®ãÔºåÂ∞±ËøûÊé•ÊúçÂä°Âô®ËØ∑Ê±Ç `os.fork()` ÂàõÂª∫Êñ∞ËøõÁ®ã„ÄÇ


Â§öËøõÁ®ãÁâàÊú¨Ë¶ÅÁÇπÔºö

- ‰ΩøÁî® multiprocessing.Pool() ÂàõÂª∫ËøõÁ®ãÊ±†ÔºåÈªòËÆ§ËøõÁ®ãÊï∞Áî± `os.cpu_count()` ËøîÂõûÂÄºÊåáÂÆöÔºõ
- ‰ΩøÁî® multiprocessing.Process() ÂàõÂª∫ËøõÁ®ãÔºõ
- ‰ΩøÁî® multiprocessing.Queue() ÂàõÂª∫ÈòüÂàóÂú®Â§öËøõÁ®ãÈó¥ÂÆâÂÖ®Âú∞ÂÖ±‰∫´ÂØπË±°Êï∞ÊçÆÔºõ
- ‰ΩøÁî® map() ÊñπÊ≥ïÂ∞ÜÊï∞ÊçÆ‰º†ÈÄíÁªôÊØè‰∏™ËøõÁ®ãÔºõ

```py
import requests
import multiprocessing
import time

session = None


def set_global_session():
    global session
    if not session:
        session = requests.Session()


def download_site(url):
    with session.get(url) as response:
        name = multiprocessing.current_process().name
        print(f"{name}:Read {len(response.content)} from {url}")


def download_all_sites(sites):
    with multiprocessing.Pool(initializer=set_global_session) as pool:
        pool.map(download_site, sites)


if __name__ == "__main__":
    sites = [
        "https://www.jython.org",
        "http://olympus.realpython.org/dice",
    ] * 80
    start_time = time.time()
    download_all_sites(sites)
    duration = time.time() - start_time
    print(f"Downloaded {len(sites)} in {duration} seconds")
```


![Timing Diagram of a Multiprocessing Solution](https://files.realpython.com/media/MProc.7cf3be371bbc.png)



### ‚úÖ CPU-bound - multiprocessing

ÂØπ‰∫é CPU-bound ÈóÆÈ¢òÔºåÂè™ËÉΩÂú® CPU ÁöÑËøêÁÆóËÉΩÂäõÔºåÂç≥Á°¨‰ª∂‰∏äÊèêÈ´òÊÄßËÉΩÔºåÂÖ∂Ê¨°ÊòØÂ∞ΩÈáèÁî®Â•ΩÁé∞ÊúâÁöÑ CPU ËµÑÊ∫ê„ÄÇÂ¶ÇÊûú‰ΩøÁî®ÂºÇÊ≠•„ÄÅÊàñÂ§öÁ∫øÁ®ãÔºå‰∏ç‰ªÖ‰∏ç‰ºöÊúâÂ∏ÆÂä©ÔºåÂèçËÄå‰ºöÂõ†‰∏∫È¢ëÈ¢ëÂàáÊç¢‰ªªÂä°Êµ™Ë¥π CPU ËµÑÊ∫ê„ÄÇ

Âä†ÈîÅ‰πüÊòØ‰∏Ä‰∏™ÈáçÂ§ßÁöÑËµÑÊ∫êÊ∂àËÄóÔºåÂπ∂‰∏îÂä†ÈîÅÊÑèÂë≥Âú®ÂÖ≥ÈîÆ‰ΩçÁΩÆÔºåÂè™ËÉΩÂçïËøõÁ®ã/Á∫øÁ®ãËøêË°å„ÄÇÊâÄ‰ª•Ôºå‰ªéÁÆóÊ≥ïËÆæËÆ°‰∏äÔºåËÉΩ‰∏çÂä†ÈîÅÊòØÊúÄÂ•ΩÔºå‰∏ÄÂÆöË¶ÅÂä†ÈîÅÔºåÈÇ£Â∞±Ë¶ÅËÄÉËôë‰ªÄ‰πàÂΩ¢ÂºèÁöÑÈîÅÊõ¥‰ºò„ÄÇ

Êõ¥Â§öÁöÑÊÉÖÂÜµÊòØÔºåÂ§öËøõÁ®ãÁ®ãÂ∫èÈúÄË¶ÅÁõ∏‰∫íÈÄö‰ø°ÔºåÂÆåÂÖ®ÈöîÁ¶ªËøêË°åÁöÑÂ§öËøõÁ®ã/Á∫øÁ®ãÂ∫îÁî®ÊòØ‰∏çÂ§öËßÅÁöÑ„ÄÇ

The Problems With the multiprocessing Version

There are some drawbacks to using multiprocessing. They don‚Äôt really show up in this simple example, but splitting your problem up so each processor can work independently can sometimes be difficult.

Also, many solutions require more communication between the processes. This can add some complexity to your solution that a non-concurrent program would not need to deal with.

Pool ÂèØ‰ª•ÂêåÊ≠•‰ΩøÁî®„ÄÅÂºÇÊ≠•‰ΩøÁî®ËøõÁ®ãÊ±†ÔºåÈÖçÂêàÈòüÂàóÂèØ‰ª•Ëé∑ÂèñËøõÁ®ãËøîÂõûÂÄº„ÄÇ

                  | Multi-args   Concurrence    Blocking     Ordered-results
---------------------------------------------------------------------
Pool.apply        | ‚úÖ          ‚õî             ‚úÖ           ‚úÖ
Pool.apply_async  | ‚úÖ          ‚úÖ             ‚õî           ‚õî
---------------------------------------------------------------------
Pool.map          | ‚õî          ‚úÖ             ‚úÖ           ‚úÖ
Pool.map_async    | ‚õî          ‚úÖ             ‚õî           ‚úÖ
---------------------------------------------------------------------
Pool.starmap      | ‚úÖ          ‚úÖ             ‚úÖ           ‚úÖ
Pool.starmap_async| ‚úÖ          ‚úÖ             ‚õî           ‚õî

    ## ‚úÖ class:: Pool([processes[, initializer[, initargs[, maxtasksperchild [, context]]]]])
    ## ‚ö°    method:: apply         (func[, args[, kwds]])
    ## ‚ö°    method:: map           (func, iterable[, chunksize])
    ## ‚ö°    method:: imap          (func, iterable[, chunksize])
    ## ‚ö°    method:: imap_unordered(func, iterable[, chunksize])
    ## ‚ö°    method:: starmap       (func, iterable[, chunksize])
    ## ‚ö°    method:: apply_async   (func[, args[, kwds[, callback[, error_callback]]]])
    ## ‚ö°    method:: map_async     (func, iterable[, chunksize[, callback[, error_callback]]])
    ## ‚ö°    method:: starmap_async (func, iterable[, chunksize[, callback[, error_callback]]])
    ## ‚úÖ class:: AsyncResult = ApplyResult       # create alias -- see #17805)
    ## ‚úÖ class:: MapResult(ApplyResult)
    ## ‚ö°    method:: get([timeout])
    ## ‚ö°    method:: wait([timeout])
    ## ‚ö°    method:: ready()
    ## ‚ö°    method:: successful()
    ## ‚úÖ class IMapIterator(object)
    ## ‚úÖ class IMapUnorderedIterator(IMapIterator)
    ## ‚ö°    method:: next([timeout])

`Pool.imap` is lazier version of `.map`, can be MUCH slower than `Pool.map()`, and it return a iterator.

Async methods submit all the processes at once and retrieve the results once they are finished. Use get method to obtain the results.

`Pool.map` (or `Pool.apply`) methods are very much similar to Python built-in map(or apply). They block the main process until all the processes complete and return the result.

`Pool.starmap` like `Pool.map` except that the elements of the *iterable* are expected to be iterables that are unpacked as arguments. Hence an *iterable* of ``[(1,2), (3, 4)]`` results in `[func(1,2), func(3,4)]`.

Ê±ÇÂÄºÊñπÊ≥ïËÆæÁΩÆ timeout ÂèØ‰ª•Âú®ÊåáÂÆöÊó∂Èó¥ÂêéËß¶Âèë multiprocessing.TimeoutErrorÔºåÂ¶ÇÊûúËøõÁ®ãÊú™‰∫ßÁîüÁªìÊûú„ÄÇÂú®Êú™Â§ÑÁêÜËøõÁ®ãÂºÇÂ∏∏Êó∂Ôºå‰ªª‰ΩïËøõÁ®ãËß¶ÂèëÂºÇÂ∏∏‰ºöÂØºËá¥Êï¥‰∏™Â∫îÁî®ËÆ°ÁÆóÂ§±Ë¥•„ÄÇ


```py
import multiprocessing
import time

def cpu_bound(number):
    return sum(i * i for i in range(number))

def find_sums_synchronous(numbers):
    sc = 0 # 6848960830 # 6666846668950010830
    for it in numbers:
        sc += cpu_bound(it)
    print(f"result: {sc}")


def find_sums_apply(numbers):
    """
    pool.apply() version: Blocking, not parallel
    """
    with multiprocessing.Pool() as pool:
        sc = 0
        for arg in numbers:
            result = pool.apply(cpu_bound, [arg])
            sc += result
        print(f"result: {(sc)}")

def find_sums_apply_async(numbers):
    """
    apply_async version: Non-Blocking, parallel
    """
    with multiprocessing.Pool() as pool:
        result = []
        sc = 0
        for arg in numbers:
            asyncresult = pool.apply_async(cpu_bound, [arg])
            result.append(asyncresult)
        for it in result:
            sc += it.get()
        print(f"result: {(sc)}")


def find_sums_imap(numbers):
    """
    imap - map lazier version: Blocking, parallel
    """
    with multiprocessing.Pool() as pool:
        result = pool.map(cpu_bound, numbers)
        print(f"result: {sum(result)}")

def find_sums_imap_unordered(numbers):
    """
    imap - unordered version: Blocking, parallel
    """
    with multiprocessing.Pool() as pool:
        result = pool.map(cpu_bound, numbers)
        print(f"result: {sum(result)}")


def find_sums_map(numbers):
    """
    map version: Blocking, parallel
    """
    with multiprocessing.Pool() as pool:
        result = pool.map(cpu_bound, numbers)
        print(f"result: {sum(result)}")
        
def find_sums_map_async(numbers):
    """
    map_async version: Non-Blocking, parallel
    """
    with multiprocessing.Pool() as pool:
        result = pool.map_async(cpu_bound, numbers)
        print(f"result: {sum(result.get())}")

def find_sums_starmap(numbers):
    """
    starmap version: Blocking, parallel
    """
    with multiprocessing.Pool() as pool:
        result = pool.map(cpu_bound, numbers)
        print(f"result: {sum(result)}")
        
def find_sums_starmap_async(numbers):
    """
    starmap_async version: Non-Blocking, parallel
    """
    with multiprocessing.Pool() as pool:
        result = pool.map_async(cpu_bound, numbers)
        print(f"result: {sum(result.get())}")

if __name__ == '__main__':
    numbers = [1_000_000 + x for x in range(20)]
    ticks = []
    ticks.append(time.time())

    find_sums_synchronous(numbers)
    ticks.append(time.time())
    print(f"find_sums_synchronous in {ticks[-1] - ticks[-2]} seconds\n")

    find_sums_apply(numbers)
    ticks.append(time.time())
    print(f"      find_sums_apply in {ticks[-1] - ticks[-2]} seconds\n")

    find_sums_apply_async(numbers)
    ticks.append(time.time())
    print(f"find_sums_apply_async in {ticks[-1] - ticks[-2]} seconds\n")
    
    find_sums_map(numbers)
    ticks.append(time.time())
    print(f"        find_sums_map in {ticks[-1] - ticks[-2]} seconds\n")
    
    find_sums_map_async(numbers)
    ticks.append(time.time())
    print(f"  find_sums_map_async in {ticks[-1] - ticks[-2]} seconds\n")
    
    find_sums_imap(numbers)
    ticks.append(time.time())
    print(f"       find_sums_imap in {ticks[-1] - ticks[-2]} seconds\n")
    
    find_sums_imap_unordered(numbers)
    ticks.append(time.time())
    print(f"find_sums_imap_unordered in {ticks[-1] - ticks[-2]} seconds\n")
    
    find_sums_starmap(numbers)
    ticks.append(time.time())
    print(f"       find_sums_starmap in {ticks[-1] - ticks[-2]} seconds\n")
    
    find_sums_starmap_async(numbers)
    ticks.append(time.time())
    print(f" find_sums_starmap_async in {ticks[-1] - ticks[-2]} seconds\n")
```


# =üö© Mouse & Keyboard Control
- https://pypi.org/project/mouse/
- https://github.com/boppreh/mouse#api
- https://pyautogui.readthedocs.io/en/latest/
- https://nitratine.net/blog/post/simulate-keypresses-in-python
- https://www.kernel.org/doc/Documentation/input/event-codes.txt
- https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-sendinput
- [`ctypes` Sources Code](Python-3.10.2\Modules\_ctypes\ctypes.c)
- [`ctypes` --- A foreign function library for Python](library/ctypes.rst)

Python ctypes Ê®°ÂùóÊèê‰æõ‰∫Ü Windows Á≥ªÁªü API Ë∞ÉÁî®ÔºåËæìÂÖ•‰∫ã‰ª∂Êï∞ÊçÆÊµÅÁöÑÊï∞ÊçÆÂèØ‰ª•ÈÄöËøá SendInput ÊèíÂÖ•Êñ∞ÁöÑ‰∫ã‰ª∂Êï∞ÊçÆÔºåÊóß API Êúâ keybd_event, mouse_event„ÄÇ

- ÁªßÊâø ctypes.Structure ÂÆûÁé∞ C/C++ ÁöÑÁªìÊûÑ‰Ωì
- ÁªßÊâø ctypes.Union ÂÆûÁé∞ C/C++ ÁöÑËÅîÂêà‰Ωì
- ‰ΩøÁî® ctypes.pointer() Ëé∑ÂèñÊåáÈíà
- ‰ΩøÁî® ctypes.byref() ÂáΩÊï∞ÂèÇÊï∞‰∏≠‰º†ÈÄíÊåáÈíà

ÊâÄÊúâ ctypes ÂØºÂá∫Á±ªÂûã‰ºöÂú® `_ctypes_add_types()` ÊñπÊ≥ï‰∏≠Ê≥®ÂÜå„ÄÇ

Âè¶Â§ñÔºåctypes.wintypes ÂåÖÂê´‰∫Ü Windows Âπ≥Âè∞ÁöÑÂêÑÁßçÁ±ªÂûãÂà´Âêç„ÄÇ

```cpp
UINT SendInput(
  [in] UINT    cInputs,
  [in] LPINPUT pInputs,
  [in] int     cbSize
);

typedef struct tagINPUT {
  DWORD type;
  union {
    MOUSEINPUT    mi;
    KEYBDINPUT    ki;
    HARDWAREINPUT hi;
  } DUMMYUNIONNAME;
} INPUT, *PINPUT, *LPINPUT;

typedef struct tagMOUSEINPUT {
  LONG      dx;
  LONG      dy;
  DWORD     mouseData;
  DWORD     dwFlags;
  DWORD     time;
  ULONG_PTR dwExtraInfo;
} MOUSEINPUT, *PMOUSEINPUT, *LPMOUSEINPUT;

typedef struct tagKEYBDINPUT {
  WORD      wVk;
  WORD      wScan;
  DWORD     dwFlags;
  DWORD     time;
  ULONG_PTR dwExtraInfo;
} KEYBDINPUT, *PKEYBDINPUT, *LPKEYBDINPUT;

typedef struct tagHARDWAREINPUT {
  DWORD uMsg;
  WORD  wParamL;
  WORD  wParamH;
} HARDWAREINPUT, *PHARDWAREINPUT, *LPHARDWAREINPUT;
```

SendInput API ÂèäÁªìÊûÑ‰ΩìÂ∫îÁî®Á§∫ËåÉÔºö

```py
# https://github.com/Gautam-J/Self-Driving-Car/blob/master/directkeys.py
import ctypes
import time

SendInput = ctypes.windll.user32.SendInput

W = 0x11
A = 0x1E
S = 0x1F
D = 0x20
UP = 0xC8
LEFT = 0xCB
RIGHT = 0xCD
DOWN = 0xD0
ENTER = 0x1C
ESC = 0x01
TWO = 0x03

# C struct redefinitions
PUL = ctypes.POINTER(ctypes.c_ulong)


class KeyBdInput(ctypes.Structure):
    _fields_ = [("wVk", ctypes.c_ushort),
                ("wScan", ctypes.c_ushort),
                ("dwFlags", ctypes.c_ulong),
                ("time", ctypes.c_ulong),
                ("dwExtraInfo", PUL)]


class HardwareInput(ctypes.Structure):
    _fields_ = [("uMsg", ctypes.c_ulong),
                ("wParamL", ctypes.c_short),
                ("wParamH", ctypes.c_ushort)]


class MouseInput(ctypes.Structure):
    _fields_ = [("dx", ctypes.c_long),
                ("dy", ctypes.c_long),
                ("mouseData", ctypes.c_ulong),
                ("dwFlags", ctypes.c_ulong),
                ("time", ctypes.c_ulong),
                ("dwExtraInfo", PUL)]


class Input_I(ctypes.Union):
    _fields_ = [("ki", KeyBdInput),
                ("mi", MouseInput),
                ("hi", HardwareInput)]


class Input(ctypes.Structure):
    _fields_ = [("type", ctypes.c_ulong),
                ("ii", Input_I)]


# Actuals Functions
def PressKey(hexKeyCode):
    extra = ctypes.c_ulong(0)
    ii_ = Input_I()
    ii_.ki = KeyBdInput(0, hexKeyCode, 0x0008, 0, ctypes.pointer(extra))
    x = Input(ctypes.c_ulong(1), ii_)
    ctypes.windll.user32.SendInput(1, ctypes.pointer(x), ctypes.sizeof(x))


def ReleaseKey(hexKeyCode):
    extra = ctypes.c_ulong(0)
    ii_ = Input_I()
    ii_.ki = KeyBdInput(0, hexKeyCode, 0x0008 | 0x0002, 0,
                        ctypes.pointer(extra))
    x = Input(ctypes.c_ulong(1), ii_)
    ctypes.windll.user32.SendInput(1, ctypes.pointer(x), ctypes.sizeof(x))


# directx scan codes
# http://www.gamespp.com/directx/directInputKeyboardScanCodes.html

if __name__ == '__main__':
    while (True):
        PressKey(0x11)
        time.sleep(1)
        ReleaseKey(0x11)
        time.sleep(1)
```

PyAutoGUI is a cross-platform GUI automation Python module for human beings. Used to programmatically control the mouse & keyboard.

PyAutoGUI supports Python 2 and 3. If you are installing PyAutoGUI from PyPI using pip:

- Windows has no dependencies. The Win32 extensions do not need to be installed.
- macOS needs the pyobjc-core and pyobjc module installed (in that order).
- Linux needs the python3-xlib (or python-xlib for Python 2) module installed.
- Pillow needs to be installed, and on Linux you may need to install additional libraries to make sure Pillow's PNG/JPEG works correctly.

How Does PyAutoGUI Work?

The three major operating systems (Windows, macOS, and Linux) each have different ways to programmatically control the mouse and keyboard. This can often involve confusing, obscure, and deeply technical details. The job of PyAutoGUI is to hide all of this complexity behind a simple API.

- On Windows, PyAutoGUI accesses the Windows API (also called the WinAPI or win32 API) through the built-in ctypes module. The nicewin module at https://github.com/asweigart/nicewin provides a demonstration for how Windows API calls can be made through Python.
- On macOS, PyAutoGUI uses the rubicon-objc module to access the Cocoa API.
- On Linux, PyAutoGUI uses the Xlib module to access the X11 or X Window System.

```sh
> pip install pyautogui
Installing collected packages: PyTweening, pyscreeze, pyrect, pyperclip, pymsgbox, pygetwindow, mouseinfo, pyautogui
  Running setup.py install for PyTweening ... done
  Running setup.py install for pyrect ... done
  Running setup.py install for pyperclip ... done
  Running setup.py install for pygetwindow ... done
  Running setup.py install for mouseinfo ... done
  Running setup.py install for pyautogui ... done
```

Example Usage

```py
import pyautogui
import time

# Keyboard and Mouse Control
screenWidth, screenHeight = pyautogui.size() # Returns two integers, the width and height of the screen. (The primary monitor, in multi-monitor setups.)
currentMouseX, currentMouseY = pyautogui.position() # Returns two integers, the x and y of the mouse cursor's current position.
pyautogui.moveTo(100, 350) # Move the mouse to the x, y coordinates 100, 150.
pyautogui.click() # Click the mouse at its current location.
pyautogui.click(200, 220) # Click the mouse at the x, y coordinates 200, 220.
pyautogui.move(currentMouseX, 10)  # Move mouse 10 pixels down, that is, move the mouse relative to its current position.

pyautogui.doubleClick() # Double click the mouse at the
time.sleep(0.6)
pyautogui.mouseDown() # onDrag
pyautogui.moveTo(500, 500, duration=2, tween=pyautogui.easeInOutQuad) # Use tweening/easing function to move mouse over 2 seconds.
pyautogui.mouseUp() # onDrop
pyautogui.dragTo(500, 500, duration=2, tween=pyautogui.easeInOutQuad)
pyautogui.drag(500, 500, duration=2, tween=pyautogui.easeInOutQuad)

pyautogui.write('Hello world!', interval=0.125)  # Type with quarter-second pause in between each key.
pyautogui.press('esc') # Simulate pressing the Escape key.
pyautogui.keyDown('shift')
pyautogui.write(['left', 'left', 'left', 'left', 'left', 'left'])
pyautogui.keyUp('shift')
pyautogui.hotkey('ctrl', 'c')

# Display Message Boxes
    >>> pyautogui.alert('This is an alert box.')
    'OK'
    >>> pyautogui.confirm('Shall I proceed?')
    'Cancel'
    >>> pyautogui.confirm('Enter option.', buttons=['A', 'B', 'C'])
    'B'
    >>> pyautogui.prompt('What is your name?')
    'Al'
    >>> pyautogui.password('Enter password (text will be hidden)')
    'swordfish'

# Screenshot Functions
# (PyAutoGUI uses Pillow for image-related features.)

    >>> im1 = pyautogui.screenshot()
    >>> im1.save('my_screenshot.png')
    >>> im2 = pyautogui.screenshot('my_screenshot2.png')

# You can also locate where an image is on the screen:

    >>> button7location = pyautogui.locateOnScreen('button.png') # returns (left, top, width, height) of matching region
    >>> button7location
    (1416, 562, 50, 41)
    >>> buttonx, buttony = pyautogui.center(button7location)
    >>> buttonx, buttony
    (1441, 582)
    >>> pyautogui.click(buttonx, buttony)  # clicks the center of where the button was found

# The locateCenterOnScreen() function returns the center of this match region:

    >>> buttonx, buttony = pyautogui.locateCenterOnScreen('button.png') # returns (x, y) of matching region
    >>> buttonx, buttony
    (1441, 582)
    >>> pyautogui.click(buttonx, buttony)  # clicks the center of where the button was found
```


*mouse* Take full control of your mouse with this small Python library. Hook global events, register hotkeys, simulate mouse movement and clicks, and much more.

Huge thanks to Kirill Pavlov for donating the package name. If you are looking for the Cheddargetter.com client implementation, *pip install mouse==0.5.0*.

Features

- Global event hook on all mice devices (captures events regardless of focus).
- **Listen** and **sends** mouse events.
- Works with **Windows** and **Linux** (requires sudo).
- **Pure Python**, no C modules to be compiled.
- **Zero dependencies**. Trivial to install and deploy, just copy the files.
- **Python 2 and 3**.
- Includes **high level API** (e.g. [record](#mouse.record) and [play](#mouse.play).
- Events automatically captured in separate thread, doesn't block main program.
- Tested and documented.

Usage

    Install the PyPI package:
    $ sudo pip install mouse

    or clone the repository (no installation required, source files are sufficient):
    $ git clone https://github.com/boppreh/mouse

Then check the API docs to see what features are available.

Known limitations:

- Events generated under Windows don't report device id (`event.device == None`). #21
- To avoid depending on X the Linux parts reads raw device files (`/dev/input/input*`) but this requries root.
- Other applications, such as some games, may register hooks that swallow all key events. In this case *mouse* will be unable to report events.

```py
import mouse
import keyboard
import time

# pip install mouse
# pip install keyboard

# Simulate a Mouse Click with Python
mouse.click('left')
mouse.click('right')
mouse.click('middle')
mouse.press("left")
mouse.release("left")

# Get the Location of the Mouse Cursor using Python
# Output: (width, height)
print(mouse.get_position())

# Drag the Mouse Cursor using Python
# from (100,120) to (800, 250) absolute screen in 1 sec
mouse.drag(100, 120, 800, 250, absolute=False, duration=1)

# Move the Mouse Cursor using Python
# move -800px right and 500px down
mouse.move(-800,500, absolute=False, duration=1)

# Check the Mouse Click
print(mouse.is_pressed("left"))
print(mouse.is_pressed("right"))
print(mouse.is_pressed("middle"))

# Control the Wheel of the Mouse
# scroll up (positive) and scroll down (negative)
mouse.wheel(100)
time.sleep(1.5)
mouse.wheel(-10)

# Event record and replay
mouse.hook(lambda x: print(x))
events = mouse.record()
mouse.play(events)
mouse.unhook_all()

# Action on Mouse Click
mouse.on_button(lambda : print("Button press or release Events"))
mouse.on_click(lambda : print("Left Button was clicked"))
mouse.on_double_click(lambda : print("Left Button was double clicked"))
mouse.on_middle_click(lambda : print("Middle Button was clicked"))
mouse.on_right_click(lambda : print("Right Button was clicked"))

# press Esc to kill the event
if not keyboard.wait("Esc"):
    mouse.unhook_all()
```